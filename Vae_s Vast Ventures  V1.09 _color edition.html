<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1" name="viewport">
<title>Vae&#39;s Vast Ventures  V1.09 (color edition)</title>
<style title="Twine CSS">@keyframes appear{0%{opacity:0}to{opacity:1}}@keyframes fade-in-out{0%,to{opacity:0}50%{opacity:1}}@keyframes rumble{25%{top:-0.1em}75%{top:.1em}0%,to{top:0px}}@keyframes shudder{25%{left:.1em}75%{left:-0.1em}0%,to{left:0px}}@keyframes buoy{25%{top:.25em}75%{top:-0.25em}0%,to{top:0px}}@keyframes sway{25%{left:.25em}75%{left:-0.25em}0%,to{left:0px}}@keyframes pulse{0%{transform:scale(0, 0)}20%{transform:scale(1.2, 1.2)}40%{transform:scale(0.9, 0.9)}60%{transform:scale(1.05, 1.05)}80%{transform:scale(0.925, 0.925)}to{transform:scale(1, 1)}}@keyframes zoom-in{0%{transform:scale(0, 0)}to{transform:scale(1, 1)}}@keyframes shudder-in{0%,to{transform:translateX(0em)}5%,25%,45%{transform:translateX(-1em)}15%,35%,55%{transform:translateX(1em)}65%{transform:translateX(-0.6em)}75%{transform:translateX(0.6em)}85%{transform:translateX(-0.2em)}95%{transform:translateX(0.2em)}}@keyframes rumble-in{0%,to{transform:translateY(0em)}5%,25%,45%{transform:translateY(-1em)}15%,35%,55%{transform:translateY(1em)}65%{transform:translateY(-0.6em)}75%{transform:translateY(0.6em)}85%{transform:translateY(-0.2em)}95%{transform:translateY(0.2em)}}@keyframes fidget{0%,8.1%,82.1%,31.1%,38.1%,44.1%,40.1%,47.1%,74.1%,16.1%,27.1%,72.1%,24.1%,95.1%,6.1%,36.1%,20.1%,4.1%,91.1%,14.1%,87.1%,to{left:0px;top:0px}8%,82%,31%,38%,44%{left:-1px}40%,47%,74%,16%,27%{left:1px}72%,24%,95%,6%,36%{top:-1px}20%,4%,91%,14%,87%{top:1px}}@keyframes slide-right{0%{transform:translateX(-100vw)}}@keyframes slide-left{0%{transform:translateX(100vw)}}@keyframes slide-up{0%{transform:translateY(100vh)}}@keyframes slide-down{0%{transform:translateY(-100vh)}}@keyframes fade-right{0%{opacity:0;transform:translateX(-1em)}to{opacity:1}}@keyframes fade-left{0%{opacity:0;transform:translateX(1em)}to{opacity:1}}@keyframes fade-up{0%{opacity:0;transform:translateY(1em)}to{opacity:1}}@keyframes fade-down{0%{opacity:0;transform:translateY(-1em)}to{opacity:1}}@keyframes flicker{0%,29%,31%,63%,65%,77%,79%,86%,88%,91%,93%{opacity:0}30%{opacity:.2}64%{opacity:.4}78%{opacity:.6}87%{opacity:.8}92%,to{opacity:1}}@keyframes blur{0%{filter:blur(2rem);opacity:0}25%{opacity:1}to{filter:blur(0rem);opacity:1}}.dom-debug-mode tw-story,.dom-debug-mode tw-passage,.dom-debug-mode tw-sidebar,.dom-debug-mode tw-include,.dom-debug-mode tw-hook,.dom-debug-mode tw-expression,.dom-debug-mode tw-link,.dom-debug-mode tw-dialog,.dom-debug-mode tw-columns,.dom-debug-mode tw-column,.dom-debug-mode tw-align{outline:1px solid #f5a3da;min-height:32px;display:block !important}.dom-debug-mode tw-story::before,.dom-debug-mode tw-passage::before,.dom-debug-mode tw-sidebar::before,.dom-debug-mode tw-include::before,.dom-debug-mode tw-hook::before,.dom-debug-mode tw-expression::before,.dom-debug-mode tw-link::before,.dom-debug-mode tw-dialog::before,.dom-debug-mode tw-columns::before,.dom-debug-mode tw-column::before,.dom-debug-mode tw-align::before{position:absolute;top:0;left:0;height:16px;background-color:#f5a3da;color:#000;font-size:16px;font-weight:normal;font-style:normal;font-family:monospace;display:inline-block;line-height:100%;white-space:pre;z-index:999997}.dom-debug-mode tw-story:hover,.dom-debug-mode tw-passage:hover,.dom-debug-mode tw-sidebar:hover,.dom-debug-mode tw-include:hover,.dom-debug-mode tw-hook:hover,.dom-debug-mode tw-expression:hover,.dom-debug-mode tw-link:hover,.dom-debug-mode tw-dialog:hover,.dom-debug-mode tw-columns:hover,.dom-debug-mode tw-column:hover,.dom-debug-mode tw-align:hover{outline:1px solid #fc9}.dom-debug-mode tw-story:hover::before,.dom-debug-mode tw-passage:hover::before,.dom-debug-mode tw-sidebar:hover::before,.dom-debug-mode tw-include:hover::before,.dom-debug-mode tw-hook:hover::before,.dom-debug-mode tw-expression:hover::before,.dom-debug-mode tw-link:hover::before,.dom-debug-mode tw-dialog:hover::before,.dom-debug-mode tw-columns:hover::before,.dom-debug-mode tw-column:hover::before,.dom-debug-mode tw-align:hover::before{background-color:#fc9;transition:background-color 1s}.dom-debug-mode tw-passage,.dom-debug-mode tw-include,.dom-debug-mode tw-hook,.dom-debug-mode tw-expression,.dom-debug-mode tw-link,.dom-debug-mode tw-dialog,.dom-debug-mode tw-columns,.dom-debug-mode tw-column,.dom-debug-mode tw-align{padding:1em;margin:0}.dom-debug-mode tw-story::before{content:'<tw-story tags="' attr(tags) '">'}.dom-debug-mode tw-passage::before{top:-16px;content:'<tw-passage tags="' attr(tags) '">'}.dom-debug-mode tw-sidebar::before{top:-16px;content:"<tw-sidebar>"}.dom-debug-mode tw-hook::before{content:'<tw-hook name="' attr(name) '">'}.dom-debug-mode tw-expression::before{content:'<tw-expression name="' attr(name) '">'}.dom-debug-mode tw-link::before{content:'<tw-link name="' attr(name) '">'}.dom-debug-mode tw-dialog::before{content:"<tw-dialog>"}.dom-debug-mode tw-columns::before{content:"<tw-columns>"}.dom-debug-mode tw-column::before{content:"<tw-column>"}.dom-debug-mode tw-align::before{content:"<tw-align>"}.dom-debug-mode tw-include::before{content:'<tw-include type="' attr(type) '" name="' attr(name) '">'}tw-open-button[goto]{display:none}.debug-mode tw-open-button[replay],.debug-mode tw-open-button[goto]{display:inline}.debug-mode tw-expression{display:inline-block !important}.debug-mode tw-expression[type=variable]::after{font-size:.8rem;padding-left:.2rem;padding-right:.2rem;vertical-align:top;content:"$" attr(name)}.debug-mode tw-expression[type=tempVariable]::after{font-size:.8rem;padding-left:.2rem;padding-right:.2rem;vertical-align:top;content:"_" attr(name)}.debug-mode tw-expression[return=boolean]{background-color:rgba(179,179,179,.2)}.debug-mode tw-expression[return=array]{background-color:rgba(255,102,102,.2)}.debug-mode tw-expression[return=dataset]{background-color:rgba(255,128,0,.2)}.debug-mode tw-expression[return=number]{background-color:rgba(255,179,102,.2)}.debug-mode tw-expression[return=datamap]{background-color:rgba(255,255,102,.2)}.debug-mode tw-expression[return=changer]{background-color:rgba(179,255,102,.2)}.debug-mode tw-expression[return=lambda]{background-color:rgba(102,255,102,.2)}.debug-mode tw-expression[return=hookname]{background-color:rgba(102,255,204,.2)}.debug-mode tw-expression[return=string]{background-color:rgba(102,255,255,.2)}.debug-mode tw-expression[return=datatype]{background-color:rgba(102,153,255,.2)}.debug-mode tw-expression[return=gradient],.debug-mode tw-expression[return=colour]{background-color:rgba(204,102,255,.2)}.debug-mode tw-expression[return=instant],.debug-mode tw-expression[return=macro]{background-color:rgba(240,117,199,.2)}.debug-mode tw-expression[return=command]{background-color:rgba(153,153,255,.2)}.debug-mode tw-expression.false{background-color:rgba(255,0,0,.2) !important}.debug-mode tw-expression[type=macro]::before{content:"(" attr(name) ":)";padding:0 .5rem;font-size:1rem;vertical-align:middle;line-height:normal;background-color:inherit;border:1px solid rgba(255,255,255,.5)}.debug-mode tw-expression[title]:not([title=""]){cursor:help}.debug-mode tw-hook{background-color:rgba(0,85,255,.1) !important}.debug-mode tw-hook::before{font-size:.8rem;padding-left:.2rem;padding-right:.2rem;vertical-align:top;content:"["}.debug-mode tw-hook::after{font-size:.8rem;padding-left:.2rem;padding-right:.2rem;vertical-align:top;content:"]"}.debug-mode tw-hook[name]::after{font-size:.8rem;padding-left:.2rem;padding-right:.2rem;vertical-align:top;content:"]<" attr(name) "|"}.debug-mode tw-pseudo-hook{background-color:rgba(255,170,0,.1) !important}.debug-mode tw-collapsed::before{font-size:.8rem;padding-left:.2rem;padding-right:.2rem;vertical-align:top;content:"{"}.debug-mode tw-collapsed::after{font-size:.8rem;padding-left:.2rem;padding-right:.2rem;vertical-align:top;content:"}"}.debug-mode tw-verbatim::before,.debug-mode tw-verbatim::after{font-size:.8rem;padding-left:.2rem;padding-right:.2rem;vertical-align:top;content:"`"}.debug-mode tw-align[style*="text-align: center"]{background:linear-gradient(to right, hsla(14, 100%, 87%, 0) 0%, hsla(14, 100%, 87%, 0.25) 50%, hsla(14, 100%, 87%, 0) 100%)}.debug-mode tw-align[style*="text-align: left"]{background:linear-gradient(to right, hsla(14, 100%, 87%, 0.25) 0%, hsla(14, 100%, 87%, 0) 100%)}.debug-mode tw-align[style*="text-align: right"]{background:linear-gradient(to right, hsla(14, 100%, 87%, 0) 0%, hsla(14, 100%, 87%, 0.25) 100%)}.debug-mode tw-column{background-color:rgba(189,228,255,.2)}.debug-mode tw-enchantment{animation:enchantment .5s infinite;border:1px solid}.debug-mode tw-link::after,.debug-mode tw-broken-link::after{font-size:.8rem;padding-left:.2rem;padding-right:.2rem;vertical-align:top;content:attr(passage-name)}.debug-mode tw-include{background-color:rgba(204,128,51,.1)}.debug-mode tw-include::before{font-size:.8rem;padding-left:.2rem;padding-right:.2rem;vertical-align:top;content:attr(type) ' "' attr(name) '"'}.debug-dialogs tw-backdrop:not(.eval-replay):not(.harlowe-crash){pointer-events:none;opacity:.1}tw-eval-replay tw-eval-code,tw-eval-replay tw-eval-explanation{max-height:20vh;overflow:auto;margin:10px auto}tw-eval-replay tw-eval-code{display:block;font-family:monospace;padding-bottom:1ex;border-bottom:2px solid gray}tw-eval-replay tw-eval-explanation{display:block;text-align:center}tw-eval-replay tw-eval-explanation>code{white-space:pre-wrap}tw-eval-replay tw-eval-explanation>code.from-block{width:40%;display:inline-block;text-align:left;max-height:4em;overflow-wrap:anywhere;overflow-y:scroll}tw-eval-replay tw-eval-explanation>code.from-block~.to-desc{width:calc(40% - 2em);margin-left:2em;display:inline-block}tw-eval-replay tw-eval-explanation>code.from-block+span::after{content:"..."}tw-eval-replay tw-eval-explanation>code.from-inline{text-align:right}tw-eval-replay tw-eval-explanation>:nth-child(2){white-space:pre}tw-eval-replay tw-eval-explanation>.to-desc{text-align:left}tw-eval-replay tw-eval-explanation>table{width:100%;margin-top:1em}tw-eval-replay tw-eval-explanation>table td{white-space:pre-wrap !important;word-wrap:anywhere}tw-eval-replay tw-eval-reason{text-align:center;font-size:80%;font-style:italic;display:block}tw-eval-replay tw-eval-it{text-align:center;font-size:80%;display:block}tw-eval-replay tw-dialog-links{display:-ms-flexbox;display:flex;-ms-flex-pack:distribute;justify-content:space-around}@keyframes enchantment{0%,to{border-color:#ffb366}50%{border-color:#6fc}}tw-debugger{position:fixed;box-sizing:border-box;bottom:0;right:0;z-index:999999;min-width:14em;min-height:1em;padding:0em .5em .5em 1em;font-size:1.25em;font-family:sans-serif;color:#262626;background-color:#fff;border-left:solid #262626 2px;border-top:solid #262626 2px;border-top-left-radius:.5em;opacity:1}tw-debugger.fade-panel:not(:hover){opacity:.33}tw-debugger.theme-dark{color:#d9d9d9;background-color:#000}tw-debugger.theme-dark{border-color:#d9d9d9 rgba(0,0,0,0) rgba(0,0,0,0) #d9d9d9}tw-debugger select{margin-right:1em;width:12em}tw-debugger button,tw-debugger tw-link{border-radius:3px;border:solid #999 1px;margin:auto 4px;color:#262626;background-color:#fff;cursor:pointer}tw-debugger button.enabled,tw-debugger tw-link.enabled{color:#000;background-color:#d9d9d9;box-shadow:inset #999 3px 5px .5em}tw-debugger.theme-dark button,tw-debugger.theme-dark tw-link{color:#d9d9d9;background-color:#000;border-color:#666}tw-debugger.theme-dark button.enabled,tw-debugger.theme-dark tw-link.enabled{color:#e6e6e6;background-color:#424242;box-shadow:inset #666 3px 5px .5em}tw-debugger button{font-size:1em;overflow-x:hidden;text-overflow:ellipsis;white-space:pre}tw-debugger tw-link{font-size:1.25em;border-radius:16px;border-style:solid;border-width:2px;text-align:center;padding:0px 8px;display:block}tw-debugger tw-link:hover{border-color:#262626;color:#262626}tw-debugger.theme-dark tw-link:hover{border-color:#d9d9d9;color:#d9d9d9}tw-debugger tw-dialog{background-color:#fff;color:#000;font-size:1.25em}tw-debugger.theme-dark tw-dialog{background-color:#000;color:#e6e6e6}tw-debugger .panel{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;position:absolute;bottom:100%;left:-2px;right:0;padding:1em;overflow-y:scroll;overflow-x:hidden;border:inherit;box-sizing:content-box;background-color:#fff;border-bottom:solid #999 2px;border-top-left-radius:.5em;border-bottom-left-radius:.5em;font-size:.8em}tw-debugger .panel:empty,tw-debugger .panel[hidden]{display:none}tw-debugger.theme-dark .panel{background-color:#000;border-bottom-color:#666}tw-debugger .panel-source .panel-row-buttons{width:2rem}tw-debugger .panel-source .source-tags{width:20%;font-style:italic}tw-debugger .panel-row-source td{font-family:monospace;font-size:1rem;white-space:pre-wrap;overflow-wrap:anywhere;max-height:8rem;padding:1rem}tw-debugger .panel-rows{width:100%;overflow-x:scroll}tw-debugger .panel-rows>*{display:table-row}tw-debugger .panel-rows>div:nth-of-type(2n){background-color:#e6e6e6}tw-debugger .panel-tools .panel-rows>*,tw-debugger .panel-options .panel-rows>*{margin-top:.4rem;display:block}tw-debugger.theme-dark .panel-rows>div:nth-of-type(2n){background-color:#212121}tw-debugger .panel-row-buttons{text-align:right}tw-debugger .panel-variables .panel-rows:empty::before{content:"~ No variables ~";font-style:italic;color:#575757;text-align:center}tw-debugger .panel-enchantments .panel-rows:empty::before{content:"~ No enchantments ~";font-style:italic;color:#575757;text-align:center}tw-debugger .panel-errors .panel-rows:empty::before{content:"~ No errors... for now. ~";font-style:italic;color:#575757;text-align:center}tw-debugger .panel-errors .panel-rows:empty+.panel-errors-bottom{display:none}tw-debugger.theme-dark .panel-variables .panel-rows:empty::before,tw-debugger.theme-dark .panel-enchantments .panel-rows:empty::before,tw-debugger.theme-dark .panel-errors .panel-rows:empty::before{color:#a8a8a8}tw-debugger .panel-rows:empty+.panel-variables-bottom{display:none}tw-debugger th[data-col]{text-decoration:underline;cursor:pointer}tw-debugger th[data-col][data-order=asc]::after{content:"↓"}tw-debugger th[data-col][data-order=desc]::after{content:"↑"}tw-debugger .panel-storylets:not(.panel-exclusive) .storylet-exclusive,tw-debugger .panel-storylets:not(.panel-urgent) .storylet-urgent{display:none}tw-debugger .storylet-exclusive,tw-debugger .storylet-urgent,tw-debugger .storylet-open{text-align:center}tw-debugger .panel-variables-bottom{padding-top:5px}tw-debugger .enchantment-row{min-height:1.5em}tw-debugger .variable-path{opacity:.4}tw-debugger .temporary-variable-scope,tw-debugger .enchantment-local{font-family:sans-serif;font-weight:normal;opacity:.8;font-size:.75em}tw-debugger .temporary-variable-scope:not(:empty)::before,tw-debugger .enchantment-local:not(:empty)::before{content:" in "}tw-debugger .variable-name,tw-debugger .enchantment-name{font-family:monospace;font-weight:bold}tw-debugger .variable-type{color:#575757;font-weight:normal;text-overflow:ellipsis;overflow:hidden;max-width:10em}tw-debugger.theme-dark .variable-type{color:#a8a8a8}tw-debugger .error-row{display:table-row;background-color:rgba(230,101,204,.3)}tw-debugger .error-row:nth-of-type(2n){background-color:rgba(237,145,219,.3)}tw-debugger .error-row>*{display:table-cell;padding:.25em .5em}tw-debugger .error-row .error-message[title]:not([title=""]){cursor:help}tw-debugger .error-row .error-passage{color:#575757}tw-debugger.theme-dark .error-row .error-passage{color:#a8a8a8}tw-debugger .storylet-row{background-color:rgba(193,240,225,.3)}tw-debugger .storylet-row:nth-child(2n){background-color:rgba(152,231,204,.3)}tw-debugger .storylet-row.storylet-closed{font-style:italic;background-color:#fff}tw-debugger .storylet-row.storylet-closed:nth-child(2n){background-color:#e6e6e6}tw-debugger .storylet-row.storylet-closed>:not(.storylet-lambda){opacity:.6}.storylet-error tw-debugger .storylet-row{background-color:rgba(230,101,204,.3)}.storylet-error tw-debugger .storylet-row:nth-child(2n){background-color:rgba(237,145,219,.3)}tw-debugger .storylet-row .storylet-name,tw-debugger .storylet-row .storylet-value{display:inline-block;width:50%}tw-debugger .storylet-row .storylet-lambda{font-family:monospace;font-size:1rem;white-space:pre-wrap;overflow-wrap:anywhere}tw-debugger.theme-dark .storylet-row.storylet-closed{background-color:#000}tw-debugger.theme-dark .storylet-row.storylet-closed:nth-child(2n){background-color:#212121}tw-debugger .tabs{padding-bottom:.5em}tw-debugger .tab{border-radius:0px 0px .5em .5em;border-top:none;top:-2px}tw-debugger .resizer-h{position:absolute;height:14em;border-left:2px solid #999;border-right:2px solid #999;top:10px;left:4px;width:8px;cursor:ew-resize}tw-debugger.theme-dark .resizer-h{border-color:rgba(0,0,0,0) #666}tw-debugger .resizer-v{position:absolute;height:8px;border-top:2px solid #999;border-bottom:2px solid #999;margin-bottom:4px;top:4px;left:10px;width:95%;cursor:ns-resize;box-sizing:border-box}tw-debugger.theme-dark .resizer-v{border-color:#666 rgba(0,0,0,0)}tw-debugger mark{color:inherit;background-color:rgba(101,230,230,.3) !important}tw-dialog{z-index:999997;border:#fff solid 2px;padding:2em;color:#fff;background-color:#000;display:block}@media(min-width: 576px){tw-dialog{max-width:50vw}}tw-dialog input[type=text]{font-size:inherit;width:100%;border:solid #fff !important}tw-dialog-links{text-align:right;display:-ms-flexbox;display:flex;-ms-flex-pack:end;justify-content:flex-end}tw-backdrop{z-index:999996;position:fixed;top:0;left:0;right:0;bottom:0;background-color:rgba(0,0,0,.8);display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center}tw-backdrop~tw-backdrop{display:none}tw-link,.enchantment-link{cursor:pointer;color:#4169e1;font-weight:bold;text-decoration:none;transition:color .2s ease-in-out}tw-passage [style^=color] tw-link:not(:hover),tw-passage [style*=" color"] tw-link:not(:hover),tw-passage [style^=color][hover=true] tw-link:hover,tw-passage [style*=" color"][hover=true] tw-link:hover,tw-passage [style^=color] .enchantment-link:not(:hover),tw-passage [style*=" color"] .enchantment-link:not(:hover),tw-passage [style^=color][hover=true] .enchantment-link:hover,tw-passage [style*=" color"][hover=true] .enchantment-link:hover{color:inherit}tw-link:hover,.enchantment-link:hover{color:#00bfff}tw-link:active,.enchantment-link:active{color:#dd4b39}.visited{color:#6941e1}tw-passage [style^=color] .visited:not(:hover),tw-passage [style*=" color"] .visited:not(:hover),tw-passage [style^=color][hover=true] .visited:hover,tw-passage [style*=" color"][hover=true] .visited:hover{color:inherit}.visited:hover{color:#e3e}tw-broken-link{color:#933;border-bottom:2px solid #933;cursor:not-allowed}tw-passage [style^=color] tw-broken-link:not(:hover),tw-passage [style*=" color"] tw-broken-link:not(:hover),tw-passage [style^=color][hover=true] tw-broken-link:hover,tw-passage [style*=" color"][hover=true] tw-broken-link:hover{color:inherit}tw-link.enchantment-mouseover,.link.enchantment-mouseover,tw-expression.enchantment-mouseover>tw-link{color:inherit;font-weight:inherit;transition:none;cursor:inherit;border-bottom:2px dashed #999}tw-link.enchantment-mouseover:hover,tw-link.enchantment-mouseover:active,.link.enchantment-mouseover:hover,.link.enchantment-mouseover:active,tw-expression.enchantment-mouseover>tw-link:hover,tw-expression.enchantment-mouseover>tw-link:active{color:inherit}tw-link.enchantment-mouseover.enchantment-button,.link.enchantment-mouseover.enchantment-button,tw-expression.enchantment-mouseover>tw-link.enchantment-button{border-style:dashed}tw-link.enchantment-mouseout,.link.enchantment-mouseout,tw-expression.enchantment-mouseout>tw-link{color:inherit;font-weight:inherit;transition:none;cursor:inherit;border:rgba(64,149,191,.6) 1px solid;border-radius:.2em}tw-link.enchantment-mouseout:hover,tw-link.enchantment-mouseout:active,.link.enchantment-mouseout:hover,.link.enchantment-mouseout:active,tw-expression.enchantment-mouseout>tw-link:hover,tw-expression.enchantment-mouseout>tw-link:active{color:inherit}tw-link.enchantment-mouseout:hover,.link.enchantment-mouseout:hover,tw-expression.enchantment-mouseout>tw-link:hover{background-color:rgba(175,197,207,.75);border:rgba(0,0,0,0) 1px solid}tw-link.enchantment-dblclick,.link.enchantment-dblclick,tw-expression.enchantment-dblclick>tw-link{color:inherit;font-weight:inherit;transition:none;cursor:inherit;cursor:pointer;border:2px solid #999;border-radius:0}tw-link.enchantment-dblclick:hover,tw-link.enchantment-dblclick:active,.link.enchantment-dblclick:hover,.link.enchantment-dblclick:active,tw-expression.enchantment-dblclick>tw-link:hover,tw-expression.enchantment-dblclick>tw-link:active{color:inherit}tw-link.enchantment-dblclick:active,.link.enchantment-dblclick:active,tw-expression.enchantment-dblclick>tw-link:active{background-color:#999}tw-link.enchantment-button,.link.enchantment-button,.enchantment-button:not(.link) tw-link,.enchantment-button:not(.link) .link{border-radius:16px;border-style:solid;border-width:2px;text-align:center;padding:0px 8px;display:block}.enchantment-button{display:block}.enchantment-clickblock{cursor:pointer;width:100%;height:100%;display:block}.enchantment-clickblock>:not(tw-enchantment)::after{content:"";width:100%;height:100%;top:0;left:0;display:block;box-sizing:border-box;position:absolute;pointer-events:none;color:rgba(65,105,225,.5);transition:color .2s ease-in-out}.enchantment-clickblock>:not(tw-enchantment):hover::after{color:rgba(0,191,255,.5)}.enchantment-clickblock>:not(tw-enchantment):active::after{color:rgba(222,78,59,.5)}.enchantment-clickblock>:not(tw-enchantment)::after{box-shadow:inset 0 0 0 .5vmax}.enchantment-clickblock>tw-passage::after,.enchantment-clickblock>tw-sidebar::after{box-shadow:0 0 0 .5vmax}.enchantment-mouseoverblock>:not(tw-enchantment)::after{content:"";width:100%;height:100%;top:0;left:0;display:block;box-sizing:border-box;position:absolute;pointer-events:none;border:2px dashed #999}.enchantment-mouseoutblock>:not(tw-enchantment)::after{content:"";width:100%;height:100%;top:0;left:0;display:block;box-sizing:border-box;position:absolute;pointer-events:none;border:rgba(64,149,191,.6) 2px solid}.enchantment-mouseoutblock:hover>:not(tw-enchantment)::after{content:"";width:100%;height:100%;top:0;left:0;display:block;box-sizing:border-box;position:absolute;pointer-events:none;background-color:rgba(175,197,207,.75);border:rgba(0,0,0,0) 2px solid;border-radius:.2em}.enchantment-dblclickblock>:not(tw-enchantment)::after{content:"";width:100%;height:100%;top:0;left:0;display:block;box-sizing:border-box;position:absolute;pointer-events:none;cursor:pointer;border:2px solid #999}tw-dialog-links{padding-top:1.5em}tw-dialog-links tw-link{border-radius:16px;border-style:solid;border-width:2px;text-align:center;padding:0px 8px;display:block;display:inline-block}html{margin:0;height:100%;overflow-x:hidden}*,:before,:after{position:relative;box-sizing:inherit}body{margin:0;height:100%}tw-storydata{display:none}tw-story{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;font:100% Georgia,serif;box-sizing:border-box;width:100%;min-height:100%;font-size:1.5em;line-height:1.5em;padding:5% 5%;overflow:hidden;background-color:#000;color:#fff}tw-story [style*=content-box] *{box-sizing:border-box}@media(min-width: 576px){tw-story{padding:5% 20%}}tw-story tw-consecutive-br{display:block;height:1.6ex;visibility:hidden}tw-story select{background-color:rgba(0,0,0,0);font:inherit;border-style:solid;padding:2px}tw-story select:not([disabled]){color:inherit}tw-story textarea{resize:none;background-color:rgba(0,0,0,0);font:inherit;color:inherit;border-style:none;padding:2px}tw-story input[type=text]{background-color:rgba(0,0,0,0);font:inherit;color:inherit;border-style:none}tw-story input[type=checkbox]{transform:scale(1.5);margin:0 .5em .5em .5em;vertical-align:middle}tw-story tw-noscript{animation:appear .8s}tw-passage{display:block}tw-sidebar{text-align:center;display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between}@media(min-width: 576px){tw-sidebar{left:-5em;width:3em;position:absolute;-ms-flex-direction:column;flex-direction:column}tw-enchantment[style*=width]>tw-sidebar{width:inherit}}tw-icon{display:inline-block;margin:.5em 0;font-size:66px;font-family:"Verdana",sans-serif}tw-icon[alt]{opacity:.2;cursor:pointer}tw-icon[alt]:hover{opacity:.4}tw-icon[data-label]::after{font-weight:bold;content:attr(data-label);font-size:20px;bottom:-20px;left:-50%;white-space:nowrap}tw-meter{display:block}tw-hook:empty,tw-expression:empty{display:none}tw-error{display:inline-block;border-radius:.2em;padding:.2em;font-size:1rem;cursor:help;white-space:pre-wrap}tw-error.error{background-color:rgba(223,58,190,.6);color:#fff}tw-error.warning{background-color:rgba(223,140,58,.6);color:#fff;display:none}.debug-mode tw-error.warning{display:inline}tw-error-explanation{display:block;font-size:.8rem;line-height:1rem}tw-open-button,tw-folddown{cursor:pointer;line-height:0em;border-radius:4px;border:1px solid rgba(255,255,255,.5);font-size:.8rem;margin:0 .2rem;padding:3px;white-space:pre}tw-folddown::after{content:"▶"}tw-folddown.open::after{content:"▼"}tw-open-button[replay]{display:none}tw-error tw-open-button,tw-eval-replay tw-open-button{display:inline !important}tw-open-button::after{content:attr(label)}tw-notifier{border-radius:.2em;padding:.2em;font-size:1rem;background-color:rgba(223,182,58,.4);display:none}.debug-mode tw-notifier{display:inline}tw-notifier::before{content:attr(message)}tw-colour{border:1px solid #000;display:inline-block;width:1em;height:1em}tw-enchantment:empty{display:none}h1{font-size:3em}h2{font-size:2.25em}h3{font-size:1.75em}h1,h2,h3,h4,h5,h6{line-height:1em;margin:.3em 0 .6em 0}pre{font-size:1rem;line-height:initial}small{font-size:70%}big{font-size:120%}mark{color:rgba(0,0,0,.6);background-color:#ff9}ins{color:rgba(0,0,0,.6);background-color:rgba(255,242,204,.5);border-radius:.5em;box-shadow:0em 0em .2em #ffe699;text-decoration:none}center{text-align:center;margin:0 auto;width:60%}blink{text-decoration:none;animation:fade-in-out 1s steps(1, end) infinite alternate}tw-align{display:block}tw-columns{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:justify;justify-content:space-between}.transition-in{animation:appear 0ms step-start}.transition-out{animation:appear 0ms step-end}[data-t8n^=dissolve].transition-in,[data-t8n=fade].transition-in{animation:appear .8s}[data-t8n^=dissolve].transition-out,[data-t8n=fade].transition-out{animation:appear .8s reverse}[data-t8n^=shudder].transition-in{display:inline-block !important;animation:shudder-in .8s}[data-t8n^=shudder].transition-out{display:inline-block !important;animation:shudder-in .8s reverse}[data-t8n^=rumble].transition-in{display:inline-block !important;animation:rumble-in .8s}[data-t8n^=rumble].transition-out{display:inline-block !important;animation:rumble-in .8s reverse}[data-t8n^=pulse].transition-in{animation:pulse .8s;display:inline-block !important}[data-t8n^=pulse].transition-out{animation:pulse .8s reverse;display:inline-block !important}[data-t8n^=zoom].transition-in{animation:zoom-in .8s;display:inline-block !important}[data-t8n^=zoom].transition-out{animation:zoom-in .8s reverse;display:inline-block !important}[data-t8n^=blur].transition-in{animation:blur .8s;display:inline-block !important}[data-t8n^=blur].transition-out{animation:blur .8s reverse;display:inline-block !important}[data-t8n^=slideleft].transition-in{animation:slide-left .8s;display:inline-block !important}[data-t8n^=slideleft].transition-out{animation:slide-right .8s reverse;display:inline-block !important}[data-t8n^=slideright].transition-in{animation:slide-right .8s;display:inline-block !important}[data-t8n^=slideright].transition-out{animation:slide-left .8s reverse;display:inline-block !important}[data-t8n^=slideup].transition-in{animation:slide-up .8s;display:inline-block !important}[data-t8n^=slideup].transition-out{animation:slide-down .8s reverse;display:inline-block !important}[data-t8n^=slidedown].transition-in{animation:slide-down .8s;display:inline-block !important}[data-t8n^=slidedown].transition-out{animation:slide-up .8s reverse;display:inline-block !important}[data-t8n^=fadeleft].transition-in{animation:fade-left .8s;display:inline-block !important}[data-t8n^=fadeleft].transition-out{animation:fade-right .8s reverse;display:inline-block !important}[data-t8n^=faderight].transition-in{animation:fade-right .8s;display:inline-block !important}[data-t8n^=faderight].transition-out{animation:fade-left .8s reverse;display:inline-block !important}[data-t8n^=fadeup].transition-in{animation:fade-up .8s;display:inline-block !important}[data-t8n^=fadeup].transition-out{animation:fade-down .8s reverse;display:inline-block !important}[data-t8n^=fadedown].transition-in{animation:fade-down .8s;display:inline-block !important}[data-t8n^=fadedown].transition-out{animation:fade-up .8s reverse;display:inline-block !important}[data-t8n^=flicker].transition-in{animation:flicker .8s}[data-t8n^=flicker].transition-out{animation:flicker .8s reverse}
</style>
</head>
<body>
<tw-story><noscript><tw-noscript>JavaScript needs to be enabled to play Vae&#39;s Vast Ventures  V1.09 (color edition).</tw-noscript></noscript></tw-story>
<tw-storydata name="Vae&#39;s Vast Ventures  V1.09 (color edition)" startnode="1" creator="Twine" creator-version="2.10.0" format="Harlowe" format-version="3.3.9" ifid="6ce44f9e-8735-4b3d-9584-f649a257380d" options="" tags="" zoom="0.6" hidden><style role="stylesheet" id="twine-user-stylesheet" type="text/twine-css"></style><script role="script" id="twine-user-script" type="text/twine-javascript"></script><tw-passagedata pid="1" name="Title page" tags="" position="850,200" size="100,100">Welcome to my game.... 

&lt;img src=&quot;https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/f/eb6ad10e-1dc7-46e1-87ef-0a22f7da7a2e/djnx20f-eafffc24-a3f0-4d3c-8ff4-e81bd201939b.png/v1/fill/w_1280,h_603,q_80,strp/banner_alt_by_nopehome_djnx20f-fullview.jpg?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1cm46YXBwOjdlMGQxODg5ODIyNjQzNzNhNWYwZDQxNWVhMGQyNmUwIiwiaXNzIjoidXJuOmFwcDo3ZTBkMTg4OTgyMjY0MzczYTVmMGQ0MTVlYTBkMjZlMCIsIm9iaiI6W1t7ImhlaWdodCI6Ijw9NjAzIiwicGF0aCI6IlwvZlwvZWI2YWQxMGUtMWRjNy00NmUxLTg3ZWYtMGEyMmY3ZGE3YTJlXC9kam54MjBmLWVhZmZmYzI0LWEzZjAtNGQzYy04ZmY0LWU4MWJkMjAxOTM5Yi5wbmciLCJ3aWR0aCI6Ijw9MTI4MCJ9XV0sImF1ZCI6WyJ1cm46c2VydmljZTppbWFnZS5vcGVyYXRpb25zIl19.9xJgHntvvpGnPYAtZBhblopfwy5DA2rghOwqi_d-HAY&quot;&gt;

I&#39;m Nopehome, and I&#39;d like to say thank you for checking out my work here, but there&#39;s a few things to go over before you start. This is an interactive fantasy text adventure that contains various fetish elements. For specific contents, please click the disclaimer page. By proceeding past this page, you confirm that you are at least eighteen years of age. If you are not, close this page and leave immediately.

[[Specific Fetish Content Disclaimer (spoiler)-&gt;Disclaimer Page]]

[[Credits-&gt;Beginning credits]]

A brief preface:

Vae is a magical genie, who has to grant wishes in order to survive. She travels from place to place, granting wishes as she comes across them to sustain her existence. 

There&#39;s a few rules when it comes to wish granting:

1. She gets to choose which wishes she grants, but the word &quot;wish&quot; must be used for it to be viable.

2. She gets to choose how to interpret or execute the wish. She can let the magic work automatically or personally decide the finer details. 

3. Magic is volatile. It will back up within her if not spent, causing rapid bloating. If she goes three days without granting any wishes, she&#39;ll pop. Backed up magic is more volatile, so be careful when she&#39;s got extra. 

The narrative is third person, but you choose where she goes, which wishes she grants, and how she grants them (for the most part). How you grant wishes will reflect on your ending, depending if they&#39;re granted benevolently, apathetically, or maliciously (assuming you choose to grant them after hearing them out). Early or bad ends are possible. Some events are exclusive to certain conditions. Don&#39;t worry about it too much, as multiple playthroughs are encouraged. 

With all that said:

[[You may proceed-&gt;Start the story]]</tw-passagedata><tw-passagedata pid="2" name="Disclaimer Page" tags="" position="1000,75" size="100,100">(align:&quot;=&gt;&lt;=&quot;)+(box:&quot;X=&quot;)[These stories contain:
]
*  Weight gain
*  Inflation (Air, liquid, ect.)
*  Stuffing/Bloating
*  Humiliation
*  Feederism
*  Objectification
*  Humiliation
*  Hedonism
*  Giantess
*  Various Transformations
*  And Other Simililar Fetishes.

You have been warned... or entised :) 

[[Back to title -&gt;Title page]]</tw-passagedata><tw-passagedata pid="3" name="Start the story" tags="" position="875,475" size="100,100">//&#39;&#39;Game start:&#39;&#39;//

A horseless carriage sits at a triple split path on a dirt road, far out in the country. The rains are empty, dangling on the ground uselessly. The door pops open, and out flies a genie, her glossy dragonfly like wings glittering in the noon sun. She peers closer at the signpost.

Vae looks at each potential destination with a critical eye, knowing the weight of her choice. Genies possess powerful wish magic, although unable to use it for their own whims. She needs to go not only where people are, but where their desires are the greatest, so choosing the proper destination is imperative. 

She adjusted her red top as she weighed the options, feeling a wind pass by and tickle her back. It blew a lock of her velvet red hair off of her side-swept bangs into her green eye, bringing her out of thought as she fixed it.

According to the left most post, she was right on the edge of Verdantveil now. A very large trading city with a swampy surrounding, with people always coming in and out due to trade. Pair that with it being the capital of a small dutchy, it&#39;s guaranteed to have people in need, but who&#39;s to say they&#39;ll have the **right** wishes to grant? Guess there&#39;s only one way to find out...


* Proceed to [[Verdantveil-&gt;Verdantveil: Day 1]] as planned.

(if:(history: where its name contains &quot;Credits&quot;)&#39;s length &gt;= 3)[[[Creator Commentary and Gallery-&gt;Creator Commentary]]]

(set: $Karma to 3)

(set: $Magicbuildup to 0)

(set: $Fishpoint to 0)

(set: $Cowpoint to 0)

(set: $Sloshpoint to 0)

(set: $Sisterpoint to 0)</tw-passagedata><tw-passagedata pid="4" name="Port day 1" tags="" position="1075,250" size="100,100">//&#39;&#39;Fisherman, wisherman&#39;&#39;//

The swampy air that surrounded the city made itself known again through the crack in the settelment&#39;s wall that was the port. Everything in this district had the look of waterlogged wood, mossy stone, and rusting metal. As Vae floated down the waterfront, she got cursed at by some superstitious sailors who walked by, thinking her kind of bad luck... although she was unsure if that meant Genies or women in general.

The evening sun reflected fragmented through the lily pads and Algae of the shore as she buzzed along, looking for anyone who fit her usual bill. After a couple minutes, she spotted a young fisherman wearing patched up fishing gear with a line facing the open river. He hummed a little aimless tune, either uncaring or experimenting. Vae put on the brightest smile she could muster, and floated over.

(text-colour:#ff7070)[&quot;Good evening, hope I&#39;m not interrupting anything.&quot;] She said, floating above his head and leaning down to give him an upside down view of her face.

(text-colour:#24b2b2)[&quot;When a man’s fishing, you’ll always be interrupting him if you take his attention, but what the hell.&quot;] He said good naturedly, although not taking his eyes off his bobber for even a second. (text-colour:#24b2b2)[&quot;Take a seat and keep me company, why don&#39;t you?&quot;]

He patted the wooden dock next to him, which audibly squished as he patted it.

(text-colour:#ff7070)[&quot;No thanks, I prefer the air.&quot;] She excused.

One of his eyes flicked to her for a split second before instantly returning to the bobber.

(text-colour:#24b2b2)[&quot;Oh yeah, guess you do have wings there. Strange.&quot;] He said nonchalantly.

(text-colour:#ff7070)[&quot;So...&quot;] Vae said, not used to people giving her this little attention. (text-colour:#ff7070)[&quot;What ya’ fishing for? Anything specific?&quot;]

(text-colour:#24b2b2)[&quot;I&#39;m fishing for funds, if that&#39;s what you&#39;re asking. Ever see the princess up in the castle?&quot;]

(text-colour:#ff7070)[&quot;No, but I&#39;d like to one day.&quot;] The genie said, not quite sure where this was going but liking the hint of longing in the young man&#39;s voice.

(text-colour:#24b2b2)[&quot;She&#39;s the prettiest thing in the world. I&#39;m gonna catch whatever I can so I can buy her the fanciest box of  chocolates the bakery sells, and ask her out on a date!&quot;] He confessed.

(text-colour:#ff7070)[&quot;Oh, why didn&#39;t you say so?! I can help with that, easy peasy!&quot;]

(text-colour:#24b2b2)[&quot;Oh really?&quot;] The fisherman said, finally taking his full attention onto her from his bobber, which disappeared under the waves as soon as he looked away.

(text-colour:#ff7070)[&quot;Haven&#39;t you ever seen a genie before, kid?&quot;] Vae said, posing fashionably to show off her wings.

(text-colour:#24b2b2)[&quot;No.&quot;]

The genie deflated almost instantly.

(text-colour:#ff7070)[&quot;I can grant you a wish.&quot;] She said bluntly. (text-colour:#ff7070)[&quot;I&#39;m offering you one wish, so what&#39;ll it be? One fancy box of chocolates? Or would you rather skip the wedding day?&quot;]

(text-colour:#24b2b2)[&quot;Neither. A man&#39;s gotta work for his rewards in life.&quot;]

(text-colour:#ff7070)[&quot;Then you don&#39;t want a wish?&quot;]

The fisherman looked back out into the sunset in the distance, hovering over the marsh&#39;s horizon.

(text-colour:#24b2b2)[&quot;Gotta earn it.&quot;] He repeated stoically. (text-colour:#24b2b2)[&quot;I wish I was a master fisherman, so I can catch these rare big earner fish more easily, so I can buy that chocolate!&quot;]


* [[Refuse the wish-&gt;Fisherman rejection aftermath]], this guy seems pretty level headed, but he needs a wake up call that this princess thing isn&#39;t happening one way or another. 

* Grant his wish, [[with a little extra help-&gt;Fisherman good wish]]. 

* Grant his wish [[to the letter-&gt;Fisherman neutral wish]], that sould be enough.

* What a dumb wish... still, why not make him [[more effective than he could imagine-&gt;Fisherman bad wish]].
</tw-passagedata><tw-passagedata pid="5" name="Pub day 1" tags="" position="1175,500" size="100,100">//&#39;&#39;Want not, wish not (Pub day 1)&#39;&#39;//

Vae floated over to a shadowed corner of the market. A wooden sign hung above a stairwell that looked more fitting to enter a basement than a bar. Distant muffled grunting, yelling, music, and clinking glasses were audible even before entering. Looking at the sign one final sign before descending into the subterranean tavern, it took a minute for the genie to make out the name. It appeared to have several in the past, judging by the many names crossed, x&#39;ed, and scribbled over. Evidently someone either couldn&#39;t make up their mind or this place had been through a lot of owners who wanted new names but not a new advertisement, although the current one deserved some credit, since they owned the blunder and had made its current title: Scribble&#39;s bar.

Descending, Vae was met by a surprisingly warm atmosphere. Many candles lit up what would&#39;ve been a common area as dark as a dungeon. The place was shockingly upper class, with fancy carved furniture and a live band playing some swaying tune that seemed oddly familiar yet completely unnamable to her.

(text-colour:#1b69b6)[&quot;Hello miss! Would you like a table?&quot;] A perky waitress approached her, with a tired yet honest smile. Vae smiled back as the waitress pushed back her dirty blonde hair.

(text-colour:#ff7070)[&quot;Why yes, I think I would.&quot;] She replied.

This was a strategy Vae was hesitant to employ, but it was consistent enough. Just park down in some bar, and some desperate schmuck was bound to approach and ask for a wish... whether it was worth granting would be the more concerning part.

The waitress led her to a seat far in the back of the establishment, a simple two seating table near a wall lined with wine kegs. She took a seat, being mindful to place her wings behind the back of the chair so as to not sit on them. Vae picked up the menu and flickered through, although she didn&#39;t require food or water to survive, wine was still a vice she didn&#39;t mind entertaining. After a brief moment of browsing the selection, she decided she couldn&#39;t make up her mind.

(text-colour:#ff7070)[&quot;Do you have a recommendation? It all looks so good!&quot;] Vae said, keeping up her fake saleswoman sweetness even in this minor interaction.

(text-colour:#1b69b6)[&quot;Oh, I would highly recommend the Hydra Merlot.&quot;] The waitress said sweetly, although seemingly staring off into space for a moment. (text-colour:#1b69b6)[&quot;I&#39;ll tell ya, I wish I had a whole keg of it, I could drink it until I’m as tight as a drum!”]


* [[Ignore the wish, it&#39;s unethical to take advantage of someone&#39;s mistake like that-&gt;Waitress wish ignored aftermath)]]

* [[Grant the wish -&gt;Waitress wish good)]] there&#39;d be no harm if she did it with a bit of creative liberty

* [[Grant it litterally,-&gt;Waitress wish neutral]] she did wish for it after all

* There&#39;s already barrels of the stuff all around, [[just give her the motivation to take it-&gt;Waitress wish bad)]]
</tw-passagedata><tw-passagedata pid="6" name="Farms day 1" tags="" position="1200,1250" size="100,100">//&#39;&#39;Utterly hopeless&#39;&#39;//

As Vae made her way outside the city gate, she was surprised to see that the surrounding farmlands were in the middle of a festival of sorts. She had entered from the other side of the city, so she had seen none of this. Colorful banners and streamers hanging from poles, barkers advertising their booths, more fried food posters than you could even count. One particular sign caught her eye: ‘Livestock competition at Brig’s Barn, prize of fifty gold coins to every winner of each category.’

A smile crossed her lips, knowing that competitions were prime time when it came to wish making. All she’d have to do would be to find the most desperate soul possible, and give them an easy win. She considered asking one of the locals for directions, but realized that that was quite unnecessary as loud cheering and a particularly strong smell of animal musk made the specific barn apparent.

Floating over, she purposely passed the public entrance for the audience, making her way back to the contestant only area, casually floating over the gate. Being stealthy wasn&#39;t too much of an issue, as people don&#39;t tend to look up, and there were plenty of banners and decorations to fly behind when they did. Eventually she found her prize in the long stables being used to house the competing animals: a forlorn black haired farm girl tending to a pathetically scrawny cow. The animal looked borderline anemic, if you butchered the thing you&#39;d be lucky to get enough flesh for one meatloaf.

Vae slowly descended, making sure to land behind the woman.

(text-colour:#ff7070)[“Think you&#39;re gonna win with that bag of bones?”] She initiated contact, making sure to start by highlighting just how pathetic the animal was.

The woman jumped, startled by a sudden voice. She turned around, but relaxed when she saw the thin unthreatening genie.

(text-colour:#317231)[“Oh… uh hi.”] She greeted nervously before quickly recovering. (text-colour:#317231)[“I gotta try. Been try’n for three years and I still haven&#39;t won.”]

(text-colour:#ff7070)[“Well kid, your efforts would’a been a waste if I hadn&#39;t shown up, but luckily I have.”] Vae tried to infuse a helpful tone in her voice.

(text-colour:#317231)[“And you are?”]

(text-colour:#ff7070)[“Haven&#39;t you ever read a book in your life, kid?”] The magical woman pointed to the wings on her back. (text-colour:#ff7070)[“I’m a genie obviously.”]

(text-colour:#317231)[“To be honest, I always thought genies were a fairytale. Never even met anyone who met one.”] The farm girl put her hand on the back of her neck, obviously somewhat embarrassed.

(text-colour:#ff7070)[“Is a person with wings really so unbelievable? I imagine you wouldn&#39;t be talking that way to an orc or a dwarf.”] Vae huffed, before collecting herself. (text-colour:#ff7070)[“I digress. Obviously I&#39;m real, and from where I&#39;m standing, your chances of winning are as fictional as you thought I was unless I grant a wish here.”]

(text-colour:#317231)[“Isn&#39;t that cheating? I thought magical wishes had some rules saying that they couldn&#39;t be used to win completions.”]

(text-colour:#ff7070)[“You&#39;re thinking of fairies, hun. Now do you want to win or do you want to embarrass yourself by presenting this skeletal excuse for a bovine?”] The winged redhead gestured to the animal.  Introducing the idea of time sensitivity wasn&#39;t something Vae often did, but it helps immensely when it comes to getting the goodie two shoes to bite.

(text-colour:#317231)[“Ok, ok! I wish I could win this stupid competition for once!”]

* This wish seems [[simple enough-&gt;Competition wish good]], grant it immidiately.

* Eh, teach her that telling someone they don&#39;t exist to their face is less than wise, [[refuse the wish-&gt;Contest wish rejection aftermath]].

* With that wording she just used, you could really [[teach her a lession-&gt;Competition wish bad ]].</tw-passagedata><tw-passagedata pid="7" name="Day one night (no build up)" tags="" position="1600,275" size="100,100">//&#39;&#39;Sleepless time skip &#39;&#39;//

It was quite a relief to get a wish on the first day, especially after the cold reception the common folk gave on arrival. As she floated through the lobby of the inn, she noted that Tilly was gone, probably busy elsewhere with an impossibly long list of chores. That didn&#39;t mean that the lobby was empty, however, as she spotted a goblin selling something in the corner, and upon further inspection he was selling a vaste and eclectic assortment of books. Briefly browsing the collection, one caught her eye; “The full and total collection of Widening Tales of Whimsy.” It was a large, old book. Its paper was yellowed and its once colorful canvas cover torn in places. It had that dusty old books smell around it, and something about it stoked her curiosity. Reading the summary on the back, it described a tale of a warlock and a barbarian falling in love and going on misadventures. 

(text-colour:#ff7070)[“How much for this one?”]

“Oh, that is one of my oldest and most rare objects in my collection! I could be convinced to part with it for… five gold pieces.” 

(text-colour:#ff7070)[“I’ll give you three copper.”] She immediately called his bluff. 

“Deal.” He immediately caved, although he didn’t seem too upset about it as he pocketed her cash. 

----------------------------------------------------------------------------------------------

‘What a strange imagination the long forgotten author must have had.’ Vaethought to herself as she skimmed through the book. It was a strange tale of partnership and strange scenarios, with disconcerting violent comedy and absurd panic. Unlike her own reality, this fiction had magic widely available and used in everyday life. It was a mod prospect reflected in the text, the complications of reality warping forces often causing as many issues as they solved. It was quite surprising that the barbarian woman managed to stay relevant at all with simple mortal strength and stamina being her only advantages, no matter how exaggerated. Still Vae suspected some ulterior motive concerning the portrayal of magic in the book, considering genies were portrayed as mere tricker spirits fooling mortals into giving away their souls. Needless to say, she found this particular portrayal upsetting, and it made her want to write a book of her own out of petty revenge where the humans were rat people who built ugly crowded cities and dwarves existed only as short idiots made of stone. 

There were some strange tropes as well, sexual/fetishistic themes, staggeringly sudden violence, and political intrigue. It made for a very strange complete package and it clashed at times. Every tale seemed to involve the warlock or some other magical source transfiguring the women of the stories in various sizes, shapes, and means. The most common were weight gain and inflation, but there were others as well. It was obviously fetishistic, but Vae hesitated to label  it as unrealistic, at least completely. While the magical methods were fictitious, it did speak to the truth of the element. In her own experience, transformation was the most popular kind of wish, whether it be their bodies, mind, or circumstances. Very rarely did people simply wish for something generally appealing like money or immortality, wishes were usually niche and strange. 

She threw the book carelessly onto the night stand, having read a substantial portion of it and beginning to get bored with the process of reading. Looking out the window, she was surprised to see the sun rising in the distance. Had she really gotten so carried away with reading that the whole night had passed her by. 

(text-colour:#ff7070)[//‘Good thing sleep is optional.’//] Vae found herself being quite thankful for the sleeplessness of genies.  

Another day, another wish that needs done, where to this time?


* Why not go to the (if:$Fishpoint is 1)[[[docks-&gt;Port day 2]]](if:$Fishpoint is 0)[[[docks-&gt;Port day 2, empty]]], maybe some river air would do Vae some good.

* Hit up the (if:$Sloshpoint is 1)[[[Pub-&gt;Pub day 2 Waitress]]](if:$Sloshpoint is 0)[[[Pub-&gt;Pub day 2]]], Vae could use a drink... oh, and potential wishers too!

* It&#39;s a beautiful day, it would be a shame not to visit the [[castle gardens.-&gt;Outside castle day 2]]

* A lot of labors seem to be heading out of town today, maybe the [[farms-&gt;Farm day 2]] outside the city are the way to go.</tw-passagedata><tw-passagedata pid="8" name="Outside the castle day 1" tags="" position="1150,775" size="100,100">//&#39;&#39;Turned away at the gates, jealousy over mates&#39;&#39;// 

Making her way straight to the top, Vae made her way straight to the castle gates, although she was having more trouble than her naive understanding of society had led her to expect.

(text-colour:#ff7070)[&quot;What do you mean I can&#39;t go in!&quot;] She yelled at the guard, flying just a bit higher as if to get some sort of advantage over him in this argument.

&quot;Sorry miss, but ya need an appointment ta&#39; see the duchess. Can&#39;t let people walk in from the street like the castle&#39;s a deli or something.&quot; His words echoed out from the tin bucket-like helmet. &quot;Even if you are a all powerful genie.&quot;

(text-colour:#ff7070)[&quot;What if I give you a wish, good sir?&quot;] The wish granter offered, switching gears now that she was sure her original plan wasn&#39;t happening. (text-colour:#ff7070)[&quot;I could give you one today, and maybe you could let me into the castle tomorrow?&quot;]

&quot;Are you bribing a government official?&quot; He asked, offended. His hand slid to the handcuffs attached to his belt.

(text-colour:#ff7070)[&quot;No...?&quot;] She ventured, cautiously.

&quot;Good. Have a good day, I&#39;ll let the queen know you want an audience.&quot;

Vae waved with fake appreciation as she floated away down the street, grumpy that her entire day was ruined. The sun was already lowering, and it&#39;d be impossible to find a wish once everyone went home for the night. Just then, she noticed the vibrant gardens in front of the castle.

Well, maybe garden wasn&#39;t the right word, too small to properly describe the vibrant and lavish park that was at least a square mile large. Nobles strolled about with their heavy clothing and sun blocking umbrellas, determined to not enjoy nature while surrounding themselves with it. Peasant merchants stood on the paths, hucking expensive snacks and refreshments to relive their customer&#39;s summer thirst. Magnificent sculpted shrubbery was scattered as commonly as fallen leaves, formed into bizarre mythical creatures that Vae would&#39;ve been intimately more impressed by if she hadn&#39;t and couldn&#39;t bring much stranger things to existence on a whim… or someone else&#39;s, rather.

Ahead on the sidewalk Vae was hovering down that bordered the park was a plump young woman dressed in a faint yellow dress, seething in the shade of her umbrella. Her hateful gaze was directed at another, slender woman in a green twin of her dress, who was laughing and pushing her brown hair out of her eyes as she enjoyed the company of several strapping men, competing for her affection.

Vae smirked, knowing both jealousy when she saw it, and that it was one of the most powerful motivations for a wish.

(text-colour:#ff7070)[“Hello there, fair lady.”] She introduced herself politely, doing a flourishing bow mid air. (text-colour:#ff7070)[“I couldn&#39;t help but notice an air of discontent around you, and I think my services may help.”]

(text-colour:yellow)[“Leave me alone, you strumpet.”] The fancy lass dismissed her with the wave of a plump hand. Her voice was a little husky, and she pronounced ‘strumpet’ with the same tone most priests would say ‘whore’.

(text-colour:#ff7070)[“I’m no mere strumpet!”] The wish granter said, doing her best to keep up the whimsical saleswoman act instead of removing her glove and giving the brat a red handprint on her chubby cheek. (text-colour:#ff7070)[“I&#39;m a genie!”]

Vae&#39;s presumption that this woman was a textbook example of greedy noble proved correct. As the woman turned back around , her brown eyes were fixed solidly on Vae. They flaired with all the evil opportunism of a kid who had stolen the keys to the candy store.

(text-colour:yellow)[“Are… you offering me a wish, regal spirit?”] The woman&#39;s voice dripped with mischievous opportunity.

(text-colour:#ff7070)[“Depends on what you&#39;re wishing for, hun. Let me hear it, and I&#39;ll see what I can do.&quot;]

(text-colour:yellow)[“You see my tart of a sister over there?”] She pointed to the girl she was glaring at. (text-colour:yellow)[“She’s always gotten the suitors because she’s the thin one, despite me being the first born, can you believe that?”]

(text-colour:#ff7070)[//‘Maybe it’s because she isn’t a screeching brat.’//] Vae thought to herself.

(text-colour:yellow)[“I wish we swapped places!”]

Vae fell silent, considering…



* [[Refuse-&gt;Sister Wish rejection]] the young woman&#39;s wish, this sibling drama is both beneath you and reeks of trouble, bound to spiral into a mess.

* Should&#39;ve been more careful in her wording, she left you plenty of room to be a  [[smart ass-&gt;Sister wish Good]]

* [[Swap the two&#39;s weights-&gt;Sister Wish Neutral]] as she wants, there&#39;s no real harm in it

* The only real way to have her sister understand her position is by living this woman&#39;s entire [[life-&gt;Sister Wish bad]]… easy enough.</tw-passagedata><tw-passagedata pid="9" name="Night one (Stage one build up)" tags="" position="1675,550" size="100,100">//&#39;&#39;Bibbidi, Bobbidi, Bloat&#39;&#39;//

(text-colour:#ff7070)[&quot;Damn it.&quot;] Vae muttered under her breath as she entered the room Tilly had given her. She barely even inspected it, already distracted by the familiar yet ominous feeling in her gut.

Magical backup wasn&#39;t the worst sensation, at least not when it was just starting out. Her tired mind plays back to the events of the day, wondering if she could&#39;ve found a wish somewhere else or if she should&#39;ve been less reluctant to accept the one offered to her. Didn&#39;t matter now, it was already starting. Not wanting to watch herself swell, she elects to try and sleep, although it&#39;s not something she normally has to do.

Curling up in the cheap straw bed and thin blanket provided, long hours pass without her being able to catch a wink. Her body&#39;s reaction started before she could nod off, and thus kept her from going to sleep.  If you asked her to say what exactly kept her awake, it wouldn&#39;t be due to a lack of answers, more so the abundance of possibilities.

It could have been the strange noises that her stomach was making in the lead up to the change, or the rubber stretching sound her skin made when it started. Perhaps it was the intense bloating feeling that turned her gut upside down without her even moving whatsoever, with the uncomfortable chafing it caused also being likely.  Other potential candidates were her tightening clothes, which began to bite into her puffy flesh. All of these explanations are useless in the face of the real truth: it was all of them combined.

By the time dawn had come and showed on her eyes through the window, she knew she hadn&#39;t gotten a single minute of sleep since the previous night. Magic containment was a curious part of a genie&#39;s biology, but the way the unstable energy pooled inside of her body always left her feeling somewhat sick. Getting up from bed, she regretfully went to the mirror to inspect the damage.

It wasn&#39;t the worst she&#39;d ever been, but not good by any means either. Looking as though you had put on sixty pounds yet feeling as light as ever always caused a feeling of dissonance. Her cheeks were chubby, her slender limbs now thickened and pillowy, and her gut now prominent and swollen as if she had swallowed a melon. If it wasn&#39;t for the strange tautness of her skin, she might be able to pass for fat or pregnant, no such luck though.

She pressed an open hand into her gut, and it gave far too much to count as fat, the appendage sinking deep into her form. As she removed it, rubber squeaking and the strange hissing of magic energy hissed as it returned to its circular shape.

Still, hopefully she&#39;d be able to grant two wishes today and get back down to her proper size... or at least maintain this shape. Her wings fluttered and her bones shivered as she thought of what would happen if she didn&#39;t grant anything today.

Which location would be her best bet to keep that from happening today...


&lt;img src=&quot;https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/f/eb6ad10e-1dc7-46e1-87ef-0a22f7da7a2e/djo4syn-f6b40aaf-284e-4890-876e-3f89090c12a7.png/v1/fit/w_668,h_1800,q_70,strp/preg_by_nopehome_djo4syn-375w-2x.jpg?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1cm46YXBwOjdlMGQxODg5ODIyNjQzNzNhNWYwZDQxNWVhMGQyNmUwIiwiaXNzIjoidXJuOmFwcDo3ZTBkMTg4OTgyMjY0MzczYTVmMGQ0MTVlYTBkMjZlMCIsIm9iaiI6W1t7ImhlaWdodCI6Ijw9MzQ1NCIsInBhdGgiOiJcL2ZcL2ViNmFkMTBlLTFkYzctNDZlMS04N2VmLTBhMjJmN2RhN2EyZVwvZGpvNHN5bi1mNmI0MGFhZi0yODRlLTQ4OTAtODc2ZS0zZjg5MDkwYzEyYTcucG5nIiwid2lkdGgiOiI8PTEyODAifV1dLCJhdWQiOlsidXJuOnNlcnZpY2U6aW1hZ2Uub3BlcmF0aW9ucyJdfQ.H6pBDJviGwJnhAOsPFLL8vbNFX_dbilYf1jb3XenXMc&quot;&gt;

(set: $Magicbuildup to it + 1)
* Go to the (if:$Fishpoint is 1)[[[docks-&gt;Port day 2]]](if:$Fishpoint is 0)[[[docks-&gt;Port day 2, empty]]], it&#39;s mid day this time and there&#39;s bound to be someone there who&#39;s wanting

* Desprate times call for desprate souls, time to go [[pub-&gt;Pub day 2]] hopping

* Today is a work day, the [[castle-&gt;Outside castle day 2]] grounds are sure to be abuzz with power hungery iditos willing to make a deal

* The common folk may be superstisious but they know oppertunity when they see it. Time to convice some [[farm-&gt;Farm day 2]] hicks</tw-passagedata><tw-passagedata pid="10" name="Fisherman good wish" tags="" position="1400,0" size="100,100">//&#39;&#39;It takes more than just experience&#39;&#39;//

(text-colour:#ff7070)[&quot;Alright, I&#39;ll grant your wish, but let me fix a hole in your logic.&quot;] Vae said, as she snapped her fingers.

A curious orange glow emanated around her, and a similar illumination took hold in the fisherman&#39;s eyes as the knowledge was subtly planted within him, so gentle he wouldn&#39;t suspect his new talent to be unnatural if he hadn&#39;t known its true source. A faint glow also pulsed in the river briefly, causing it to look like a lava lamp for just a second.

(text-colour:#24b2b2)[&quot;Did it work?&quot;] The fisherman asked, looking at his hands, as if expertise would somehow manifest physically.

(text-colour:#ff7070)[&quot;Usually people&#39;s wishes are more visible, but trust me, you&#39;ll notice just how much better you are after you throw a few reels in.&quot;]

(text-colour:#24b2b2)[&quot;If you say so, but what was with that glowy shit in the water? You do something to that too?&quot;] He pointed at the waters, which seemed to be green and life filled as usual despite the occurrence.

(text-colour:#ff7070)[&quot;Well, think of it as a bonus. I added some rare fish to the river that you can catch that will actually sell for a pretty penny, to help speed up your grind.&quot;]

(text-colour:#24b2b2)[&quot;That&#39;s wonderful! Thanks, that was very kind of you miss!&quot;] The fisherman exclaimed, taken aback by the sheer generosity.

(text-colour:#ff7070)[&quot;Don&#39;t worry about it.&quot;] Vae said, beginning to float away back down towards mainstreet. (text-colour:#ff7070)[&quot;Maybe I&#39;ll check on you tomorrow, make sure to have something impressive to show me.&quot;]

As Vae made her way back down the docks, she began to hum a little tune, self satisfied with a nice, clean, positive wish... even if she felt like taking a shower after wandering the yicky docks all day.


[[Time to head back to the inn.-&gt;Day one night (no build up)]]

(set: $Fishpoint to it + 1)
(set: $Karma to it + 1)
</tw-passagedata><tw-passagedata pid="11" name="Fisherman neutral wish" tags="" position="1375,100" size="100,100">//&#39;&#39;Head full, lake empty&#39;&#39;//

(text-colour:#ff7070)[&quot;Alright, just like you want it.&quot;] Vae said, feeling a bit too tired from traveling to put in the full effort to make his plan work. Still, he was getting what he wanted.

With a simple snap of the fingers, the fisherman&#39;s eyes glew with new knowledge for a brief moment, before disappointing.

(text-colour:#24b2b2)[&quot;Did it work? I don&#39;t feel any different.&quot;]

(text-colour:#ff7070)[&quot;Why would you feel different? Knowing something doesn&#39;t affect who you are, just what you can do, honey. Look at the waters, study them, then you&#39;ll notice.&quot;]

The man did as she suggested. His dark eyes seemed to drink in the murky water, analyzing information and nuances that would be lost on all but a mere handful of people in the world with the same expertise as him.

(text-colour:#24b2b2)[&quot;I see, it was a wasted wish. There are no rare fish in these waters, my desires were never even earnable to begin with.&quot;] His demeanor suddenly gained a sad, defeated air to it. His gaze moved from the waters to his feet.

(text-colour:#ff7070)[&quot;Sorry, I had a feeling, but I&#39;m not exactly much of an expert myself. There&#39;s other ways to make money, you know.&quot;]

(text-colour:#24b2b2)[&quot;No... I got my wish and it would be a shame to waste it now.&quot;] He said, raising his head and regaining a certain resolution in his voice. (text-colour:#24b2b2)[&quot;I&#39;ll travel the world, I&#39;ll go to where I can make a name for myself, take on the most legendary of fishing challenges!&quot;]

(text-colour:#ff7070)[&quot;Right on man, I hope you make the most of it!&quot;] Vae gave him an encouraging smile and thumbs up. (text-colour:#ff7070)[&quot;Who needs a princess anyway?!&quot;]

(text-colour:#24b2b2)[&quot;Damn straight.&quot;] He said, nodding with purpose. He immediately walked away to speak to the bookie of a passenger ship, planning to go god knows where.

The genie turned away herself, departing back towards the main city, all too eager to leave the smelly docks behind.

(text-colour:#ff7070)[//Kinda somber, but at least the guy&#39;s got a new purpose in life instead of sitting here daydreaming about something that&#39;ll never happen anyway. //]She thought


[[Time to head back to the inn for the night.-&gt;Day one night (no build up)]]</tw-passagedata><tw-passagedata pid="12" name="Fisherman bad wish" tags="" position="1350,200" size="100,100">//&#39;&#39;Fish(er)man&#39;&#39;//


With a snap of her fingers, an orange flash of light brightens the immediate area.

The fisherman is taken aback by the blinding glimmer, his breath becomes panicked, his eyes dilate, and sweat swiftly glistening his skin.

(text-colour:#24b2b2)[&quot;S-something&#39;s wrong.&quot;] His voice croaks out as it changes to something more guttural, inhuman.

(text-colour:#ff7070)[&quot;You said you wanted to be an expert fisherman, didn&#39;t you?&quot;] The genie mocks with a knowing smile. (text-colour:#ff7070)[&quot;I assure you there&#39;s no better fisherman than the fishmen of atlantis.&quot;]

The man&#39;s skin turned a sickly dull green, his eyes darkened into enlarged blackholes, slits appeared on his neck and began to stretch for air. His hands went up to cover his gills, as he suddenly found himself drowning out of the water. Vae, to her credit, pushed him into the river so he wouldn&#39;t suffocate, and he entered the dark water with a thudding splash.

(text-colour:#ff7070)[&quot;Make sure to come back once you&#39;ve caught enough fish! I&#39;ll make sure to turn you back!&quot;] She yelled at the water, far too gleefully for what she had just done.


[[Time to head back to the inn for the night.-&gt;Day one night (no build up)]]
(set: $Karma to it - 1)
</tw-passagedata><tw-passagedata pid="13" name="Verdantveil: Day 1" tags="" position="1000,700" size="100,100">//&#39;&#39;Hello, small corner of the world&#39;&#39;//

The wagon rolled its way clumsily though the city gates and into the nearest market square. It slowed gradually, coming to rest in the middle of the cobblestone courtyard right next to the community notice board. Not one person noticed it for a couple of minutes, the city crowds were  too involved in their own daily grind to notice, but eventually the blacksmith looked out his window.

“Bill!” He cried with his gruff voice. “Bill, where you at, you bastard! Get over here!”

A ruddy man covered in dusty dirt marched over from his fruit stand, grumbling under his breath.

“What is it Mich? I&#39;m busy trying to make a living, can&#39;t ya see?! Want to buy watermelons or something?”

“Yeah, I want to but your fucking melons,&quot; he sniped back sarcastically, &quot;but you need to move that wagon of yours. Ya left it parked in the middle of town for crying out loud!”

Mich looked at the wagon suspiciously, spitting on the ground before responding.

“That ain&#39;t my wagon, mine is back home, Sally had to borrow it today. Besides, this one&#39;s way fancier too. It&#39;s one of them ones ya ride around in.”

As the two men speculated about the mysterious vehicle, a small crowd came to gather around them, with the discussion turning into a bustling conference of gossip.

“It&#39;s like the one the tax collector rides around in. Shit, he ain&#39;t here, is he?”

“That&#39;s funny, how&#39;d this get here without horses? I hope they didn&#39;t get loose…”

&quot;Loose? Nah, stolen more likely.&quot;

“Was there anyone in it? Where&#39;d they go?”

All these questions drew the attention of the entire market. Suddenly, a faint ticking noise started to emanate from the carriage, which no one noticed at first, but caught onto as the sound grew louder and louder. Eventually the carriage’s sunroof burst open with a:

&#39;&#39;BANG!&#39;&#39;

Multi color fireworks erupted from the vehicle&#39;s hatch, spewing multicolor sparks in hypnotizing patterns all over the place. Some peasants were in awe of the spectacle, others flinched at the bright lights, while the local crone quietly died of a heart attack, having not experienced anything half this exciting since that time she saw a raccoon outside her house.

Just as the light show reached its crescendo, a figure jumped out of the wagon’s hatch and floated among the sparks. A pair of glossy salmon pink fairy wings sprouted from its back, shimmering with reflections as its surface refracted the firework colors. Attached to the wings was a slim and slender body, using its relaxed relationship with gravity to strike a fabulous pose. A young woman, somewhere in her mid twenties, with curly red hair with one large bang swept to the side with ridgid zipper-like segments. Her freckled face wore a bright expression, narrow emerald green eyes wide and a large smile that showed off the slight gap between her two front teeth. Gold earrings and a necklace glimmered in the sunlight. Her modest breasts were emphasised by the slight tightness of her purple vest while her thin legs were completely covered by burgundy red leggings. Bracelets adorned her ankles and wrists and stood out on her scrawny limbs, as if they served to keep her from blowing away in the wind. 

(text-colour:#ff7070)[“You all can call me Vae!”] She announced in an energetic performance voice. (text-colour:#ff7070)[“I&#39;m a magical genie, here to liven up your lives with some wishes! Who wants the first one?”]

The crowd&#39;s excitement seemed to wither on the vine, as some already began to wander back to work. Some coughed, another yawned, Vae waiting for someone, anyone, to raise their hand or shout in excitement or anything. Before long, she was left floating in front of her wagon while everyone got back to their lives.

(text-colour:#ff7070)[&quot;Damn djinn, making my job so much harder...&quot;] She grumbled.

(text-colour:#ff7070)[‘//Looks like I’ll have to be proactive about this, play the salesman.//’] Vae thought to herself.

Spotting a hole in the wall inn, Vae entered the inn’s lobby and couldn&#39;t help but notice how fidgety and nervous the girl behind the counter was. She was a small mousy thing, with frizzy hair and small stressed eyes accompanied with bags. With one hand she was folding one towel at a time from a large pile and the other wrote in a large log book, appearing to fill out names, schedules, room numbers and prices. Vae had briefly spoken to her when she arrived and booked her room. She hadn&#39;t considered it until now, but this was a promising lead for tomorrow. 

(text-colour:#ff7070)[“Hi there, looks like ya got your hands full, don&#39;t ya?”] Vae broke the ice by acknowledging the obvious.

The receptionist quickly threw down the penn and let the towel in the other hand go flying across the room. She stood at attention like a private found reading a particularly illustrative magazine by a sergeant during a drill. 

(text-colour:#75c624)[“Greetings, welcome to the Interlude Inn, the coziest hotel in town! I&#39;m Tilly, how may I help you?”] She spouted automatically, clearly drilled into the young woman via some traumatic means. 

The genie couldn&#39;t help but giggle a bit at the woman&#39;s silly distress. 

(text-colour:#ff7070)[“Ya, I&#39;d like to get a room for a couple of nights. I&#39;ve got the money for it, or I could grant you something more if you desire?”] she offered none to subtlety. 

“Oh, you&#39;re offering me a wish?” The woman said somewhat surprised, although correctly identifying her customer as a genie. 

(text-colour:#ff7070)[“Absolutely, you seem like a level headed and trustworthy gal. How about I swing by tomorrow morning an-”] Vae tried to close on the sale, but was denied as the woman cut her off.

“I&#39;m sorry, but I can&#39;t take you up on that offer. Goes against my religion, I’m afraid.”  

(text-colour:#ff7070)[“Oh, you&#39;re one of those Gutharians, ain&#39;t ya?”] The genie sounded obviously disappointed. (text-colour:#ff7070)[“Forget it, I&#39;ll keep to myself.”]

(text-colour:#75c624)[“Wait, I don&#39;t mean it that way. Truthfully I think some pastors can get really overbearing about all the ‘all things worth having are worth obtaining without magic’ speech. I know it&#39;s not your fault that you need wishes to survive, it&#39;s not a reason to discriminate.”]

Vae rolled her eyes but accepted the explanation curiously. Gods were often jealous and lazy, at least in her opinion. For beings of such great power, they answered a lot less prayers than she did wishes, a fact that had driven a lot of them to instruct their followers to shun or even revile her kind. Still, the girl before her was nice enough to put that aside, and Vae wasn&#39;t as petty as the gods to hold her reluctance against the girl. Might as well change the subject. 

(text-colour:#ff7070)[“I appreciate it, how much do I owe you for the rooms?”]

(text-colour:#75c624)[“It’ll be twenty bucks a night, you can have the first room on the second floor, miss…?”] The woman asked as she bent over the ledger again, ink at the ready.

(text-colour:#ff7070)[“Vae. Here&#39;s sixty, keep the rest as a tip. I have business in the city, but I&#39;ll be back tonight.”]

The receptionist nodded gratefully and got to work filling out her book. Stepping back out onto the street, the magical redhead could finally focus on her real issue; 

Which place would be the best place to look for someone in need of a wish...?


&lt;img src=&quot;https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/f/eb6ad10e-1dc7-46e1-87ef-0a22f7da7a2e/djo438a-073e814f-46a4-4455-afee-b2a2fffac63f.png/v1/fit/w_546,h_1800,q_70,strp/vae_alone_by_nopehome_djo438a-375w-2x.jpg?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1cm46YXBwOjdlMGQxODg5ODIyNjQzNzNhNWYwZDQxNWVhMGQyNmUwIiwiaXNzIjoidXJuOmFwcDo3ZTBkMTg4OTgyMjY0MzczYTVmMGQ0MTVlYTBkMjZlMCIsIm9iaiI6W1t7ImhlaWdodCI6Ijw9NDIyNyIsInBhdGgiOiJcL2ZcL2ViNmFkMTBlLTFkYzctNDZlMS04N2VmLTBhMjJmN2RhN2EyZVwvZGpvNDM4YS0wNzNlODE0Zi00NmE0LTQ0NTUtYWZlZS1iMmEyZmZmYWM2M2YucG5nIiwid2lkdGgiOiI8PTEyODAifV1dLCJhdWQiOlsidXJuOnNlcnZpY2U6aW1hZ2Uub3BlcmF0aW9ucyJdfQ.V6aMS9nB38bWq1FIhtA9DbmOihD_F_EXwfUczeSg_nQ&quot;&gt;

* The [[docks-&gt;Port day 1]], there&#39;s bound to be a desperate and depressed sailor, at least.

* There&#39;s a [[pub-&gt;Pub day 1]], drunkards are always easier to convice... although they don&#39;t typically have the best judgement.

* Those [[farms-&gt;Farms day 1]] she passed on the way in seemed to have a festival or something going on. More people means a better chance, right?

* She should head straight to the [[castle-&gt;Outside the castle day 1]], the privilaged and elite are always wanting for the things money can never buy.

(if:(history: where its name contains &quot;Credits&quot;)&#39;s length &gt;= 2)[* Why bother? There&#39;s an [[old lady-&gt;Boredom/desired goods easter egg]] right over there who looks like an easy mark.]

</tw-passagedata><tw-passagedata pid="14" name="Sister Wish rejection" tags="" position="1375,900" size="100,100">//&#39;&#39;Magic over money&#39;&#39;//

(text-colour:#ff7070)[“I&#39;m not granting that, you&#39;re just being petty.”] Vae rejected the wish with great honesty. (text-colour:#ff7070)[“Besides, you worded that way too vaguely, and trust me hun, vague is not the way to be with reality warping magic.”]

The genie tried to float away, but fell rather painfully to the ground as a pudgy hand snatched her wing mid flight.

(text-colour:yellow)[“You dare call me petty?”] The brat gasped offender and clearly not used to be told no (as if her spoiled figure wasn&#39;t enough of an indication). (text-colour:yellow)[“Shut up, and grant the wish, wish granter!”]

Her wings being quite sensitive, Vae instinctually clapped the demanding girl across her pudgy face with a clenched fist. An open palm struck her own cheek, and she went ballistic. The surrounding park goers surrounded the pair as they tussled on the ground, striking and smacking each other like angry otters. 

(text-colour:#0f0)[“Smack some sense into her!”] The sister yelled, her suitors lifting her above the crowd so she could root against her own sister. 

The fun didn&#39;t last for long, as the palace guards quickly got wind and broke up the fight. Within the span of less than three minutes, both women found themselves in the back of a guard carriage on the way to the sheriff&#39;s office. 

********************************************************************************

“Sorry to have taken up your entire day, Miss. Wish our investigation could&#39;ve been a bit quicker for your sake.” The sheriff apologized as he finished signing Vae&#39;s release form and slid the box containing all of her jewelry they had taken off of her during the arrest. 

(text-colour:#ff7070)[“It&#39;s quite fine, just glad that girl&#39;s getting what she deserves.”]

(text-colour:yellow)[“What do you mean my allowance isn&#39;t enough to cover bail?!”] The nobel woman who had been charged with assault yelled from the other room. The deputies were attempting to keep her calm but it wasn&#39;t working, since this was the first serious trouble the woman had ever been in. 

(text-colour:#ff7070)[“Surprised you guys are actually hitting her with assault motivated by bigotry.”] Vae said. 

“Should&#39;ve heard what she said about you ‘wingies’ during our investigation. Sickening frankly. Usually I&#39;d let a rich bitch like her get off the hook with an increased bail-”

(text-colour:#ff7070)[“Bribe.”] Vae interrupted.

“Increased bail.” He winked while repeating. “But the only thing I fear more than the noble houses are magical creatures.”

Vae appreciated the honesty, but also felt some resentment. Despite being unable to actually do magic without mortal intervention, a lot of people respected genies out of fear of their awesome power. It was a double edged sword that Vaewished she didn&#39;t have attached a lot of the time.

With the day more or less waisted, Vae made way [back to the inn.-&gt;Night one (Stage one build up)]]</tw-passagedata><tw-passagedata pid="15" name="Fisherman rejection aftermath" tags="" position="1350,300" size="100,100">//&#39;&#39;Thrown back &#39;&#39;//

(text-colour:#ff7070)[&quot;Sorry, but that&#39;s not something I&#39;m gonna grant.&quot;] Vae apologetically, shrugging.

(text-colour:#24b2b2)[&quot;Why not?&quot;] The fisherman asked, utterly dumbfounded, as if he had just dropped a hundred dollar bill into a sewer grate. (text-colour:#24b2b2)[&quot;You&#39;re a genie, you &#39;&#39;have&#39;&#39; to grant people&#39;s wishes!&quot;]

(text-colour:#ff7070)[&quot;I don&#39;t have to do anything.&quot;] She said, her own voice raising a little bit in response, and jamming a finger into the fishing vest that covered his chest. (text-colour:#ff7070)[&quot;Wishes are a lot more complicated than you think. Not even I can tell how they&#39;ll turn out sometimes.&quot;]

(text-colour:#24b2b2)[&quot;Then why are you here? Just to taunt me?&quot;] He huffed, suddenly sulking.

(text-colour:#ff7070)[&quot;I&#39;m going to tell you what you need to hear. Grow up, no box of chocolates is gonna get you a princess, no matter how expensive. No offence intended, but you need to get your life together bud. Figure out something better to do than chase a snooty princess who&#39;ll probably turn you away at the gate because she can already smell the dead fish aura around you.&quot;]

He was stunned, not quite sure how to respond. He merely stood there, not quite aware of himself as he thought about what she had told him.

(text-colour:#ff7070)[&quot;Look,&quot;] Vae said, sympathetically again as she fished in her satchel for something. (text-colour:#ff7070)[&quot;Here&#39;s five silver pieces. Go to the sauna, get a bath, head down to the bar and find someone nice.&quot;]

He took the coins in hand, idly studying it as he moved one around with his thumb.

(text-colour:#24b2b2)[&quot;You think I&#39;d be better off looking for someone else?&quot;]

(text-colour:#ff7070)[&quot;Love is like fishing, man.&quot;] She internally cringed as she said it, but people tend to believe her more when she leans into the tropey talk of fairy tales. (text-colour:#ff7070)[&quot;There&#39;s plenty out there, don&#39;t get mad because you can&#39;t catch a whale with a little pole.&quot;]

(text-colour:#24b2b2)[&quot;Yeah... thanks.&quot;] He said, walking off to god knows where.

Vae felt a little relieved, having talked him out of his silly dream of his. Honestly he was too old to think something as fairytale as that was a good goal, even if she had been here. Still, just because she did the right thing doesn&#39;t mean she was better off for it. It was already getting late in the day, and she didn&#39;t find another potential wish to grant that night.


[[Sadly, that has consequences-&gt;Night one (Stage one build up)]]</tw-passagedata><tw-passagedata pid="16" name="Waitress wish ignored aftermath)" tags="" position="1375,475" size="100,100">//&#39;&#39;Pointless Pub &#39;&#39;//

(text-colour:#ff7070)[“Yeah, I’ll take the Hydra Merlot. Pour me a glass, but bring the bottle.” ]

The waitress nodded and left to fill the order, never even knowing how close she was to having her reality cruelly warped. Luckily for her, Vae had standards, which could not be said for all her kind. Instead of taking the free fruit of deception and manipulation, she opted to wait and see. 

Time in the bar seemed to fluctuate as she attempted to attract the attention of other customers. Most ignored her, as most common folk would a woman with wings, seeing her as nothing but a magical pest. Others approached, although quickly lost interest once they realized she wasn’t a showgirl or a prostitute. The remaining few who were actually interested in getting wishes were the blandly evil and criminal sort.

She spent the whole day attempting to drink her worries away, to little success. 

The whole day was a wash.


[[Might as well head back to the inn.-&gt;Night one (Stage one build up)]]</tw-passagedata><tw-passagedata pid="17" name="Contest wish rejection aftermath" tags="" position="1350,1200" size="100,100">//&#39;&#39;Disqualified&#39;&#39;//


(text-colour:#ff7070)[“No.”] Vae rejected the wish simply.  

(text-colour:#317231)[“What?! You go through all that work talking me into it, and you suddenly change your mind?”] The dark haired girl yelled in frustration and stomped a foot into the hay. 

(text-colour:#ff7070)[“Because you&#39;re racist.”]

(text-colour:#317231)[“What?!”]

(text-colour:#ff7070)[“I&#39;m tired of being mistaken for a fairy! How do people even make that mistake?”] The genie yelled as she got into the woman&#39;s face. 

(text-colour:#317231)[“Because you have wings bitch!”] The girl yelled, shoving the winged woman back. 

(text-colour:#ff7070)[“Fairies have four eyes, and six arms, but the wings are the only part remembered by you peasants. For fuck’s sake, I&#39;m outta here!”]

So, Vae left the stable, stomping through the straw and the hay until she got back outside to the festival. The grounds were busy, with games, rides, and food stands galore. The air smelled with a mix of surgery fair food, animal manure, and wet hay. Cheap string music rang through the air, adding some mirth over the chatter of the crowd. Wandering performers walked through the crowd, searching for tips. Fire jugglers, sword swallowers, stilt swingers, gag filled clowns, and mimes all drew little pockets of crowds. It was a lot, and Vae wondered if all this special would get in the way of her doing her own genuine magic, since most people wouldn&#39;t take her seriously. 

As she pondered this situation, someone grabbed her hand. Looking over, it belonged to a mustached ringleader of sorts. 

“Did you sneak into this venue, miss?”

(text-colour:#ff7070)[&quot;N-no, of course not.”] She stuttered in a guilty tone. 

Be lifted up her hand, showing her the black back of her own palm. 

“Then where&#39;s your stamp?”

----------------------------------------------------------------------------------------------

(text-colour:#ff7070)[“Hello, welcome to the drunken fool&#39;s drink stand, what can I do for you?”] Vae asked without emotion, the bells on her dangling hat ringing as she turned to address the next customer.

“Yeah, I&#39;ll take aaaaaaa… number seven.”  The goblin runt said, its one hand dangling from its mother&#39;s hand. 

//‘Goblin drinking age is a lot lower than I remember.’// She thought as she handed the gremlin a large stein of beer. 

The mother tossed her a few copper for the swill that passed for a drink and the pair sauntered off into the crowd. 

(text-colour:#ff7070)[“How much longer do I have to do this?”] She asked the ring leader standing behind her. 

The strong man orc that accompanied him stepped forward, but his boss called him off before he did anything rash. 

“Till ten.” he said firmly. “When the festival closes for the night, ya gotta pay off that admission fee you skipped out on.”

(text-colour:#ff7070)[“No one&#39;s going to be out after then in this town! Can&#39;t I just offer someone in line a wish?”] She pleaded. 

“No solicitation of the customers while on shift.”

(text-colour:#ff7070)[“But I&#39;ve got a sort of medical condition, can&#39;t I just-”] 

“No.”

(text-colour:#ff7070)[//‘Fucker.’//] She thought. (text-colour:#ff7070)[//‘We’ll see how smug you are when this backfires on you and I blow up so much I rip this stupid jester uniform right off with my fat ass.//’]


[[Refuse the wish-&gt;Night one (Stage one build up)]]</tw-passagedata><tw-passagedata pid="18" name="Night two (Stage two build up)" tags="" position="650,750" size="100,100">//&#39;&#39;Needs and wants&#39;&#39;//

As Vae waddled back into the Interlude inn, she-

*Squeeeeak*

She got stuck in the door frame, her figure bloated and rotund with unspent magic. A heavy sigh escaped her thin lips (one of the few parts of her that hadn&#39;t swollen) and a frown was entrenched between her chubby cheeks. Attempting to wiggle herself free, she found herself so incredibly full that her ballooned sides wouldn&#39;t budge.

(text-colour:#ff7070)[“Tilly?”] She squeaked out, giving up on any notion of dignity or self reliance. 

On que, like a dog having just heard a high pitched whistle, the housekeeper rushed down the stairs leading to the rooms and didn&#39;t miss a beat, immediately helping rather than stopping to gawk like so many others would. 

“Hold on Miss Vae, I&#39;ll have you out ASAP.” She said with confidence, as if the maid has somehow seen enough similar situations to have expertise. Running in and out the door of the kitchen, she returned with a glob of wet butter in hand. 

The stuck and swollen guest winced as she was forced to endure the embarrassment of having butter rubbed on the sides of her swollen abdomen. Before long, the entirety of the lipid was applied, and the uncomfortable oily, greasy feeling made her squirm. 

“Give me your hands.” 

Vae gave her plumped gloved hangs over to her helper and grasped as hard as she could. The genie’s face turned as red as her hair as her body groaned like rubber, slowly fitting and bulging through the doorway.  

&#39;&#39;FWWWWWIP&#39;&#39;

The ballooned genie&#39;s body suddenly gave away, causing her to rocker forward, tackling the unprepared Tilly. Rolling like a lighter than air boulder, she rolled and spun through the air, bouncing like a kid’s ball whenever she hit the wooden floor, only stopping once she struck the front desk. A groan left her, only slightly hurt from the ordeal. Eyelids fluttering open reluctantly, Vae panicked as she saw Tilly’s legs, the rest of the woman being smothered by her blimp-like expanse. 

(text-colour:#ff7070)[“Sorry, sorry sorry!”] She blathered as she attempted to roll off her squashed friend like a fat seal, failing a few times, but ultimately building up enough momentum to flop over. 

Tilly took deep, rapid breaths, having barely fended off suffocation. 

(text-colour:#75c624)[“Whew… thought I was a goner for a minu-”] she began, before noticing  the sound of sobbing. 

Vae was laying on her rounded back like a turtle, unable to get herself up and tears falling from the corners of her eyes, running down her cheeks in pathetic streams and dripping onto the floor. Tilly scrambled across the floor and threw her arms across the genie’s rounded stomach in a gesture that replaced a hug.

(text-colour:#75c624)[“It’s ok Miss Vae, I’m fine! Look!”] She pleaded with the weeping spirit. 

(text-colour:#ff7070)[“Look? Look at me! I’m a fucking blimp! How am I supposed to leave tomorrow when I can’t even get through a fucking doorway? I haven’t had any luck since my first day in this shit hole!”] Her make up slid down her face like a landslide of color, her words slurred with snot filling her nose. 

(text-colour:#75c624)[“It’s alright… I’m sure you’ll manage…”] Tilly tried to awkwardly comfort her, although the words seemed to have little effect. Guilt swirled in her stomach, knowing that she could fix this instantly if not for her religion’s principals… her personal sense of responsibility broke those, after a moment. 

(text-colour:#75c624)[“I wish for a glass of water.”] The mortal woman requested, murmuring quietly. 

(text-colour:#ff7070)[“Wha… what?”] The genie suddenly stopped her weeping fit suddenly, in complete disbelief.

(text-colour:#75c624)[“I wish for a glass of water… just take it.”] Tilly begged.

&#39;&#39;SNAP&#39;&#39; 

In an instant, Vae began to deflate slowly, as if she was suffering an allergic reaction and had just been given an antidote. A moment passed, and she sighed in relief as she returned to her slender self, albeit covered in butter and her make up smudged. 


(text-colour:#ff7070)[“Thanks Tilly. I cannot express just how much that helped.”] She said with the bliss of relief. 

(text-colour:#75c624)[“Don’t mention it.”] The housekeeper went to give her guest a helping hand, but was surprised to find a glass of water had appeared in her hand. 

(text-colour:#ff7070)[“I’m good, you have it.”] The genie turned down the drink, misunderstanding. She stood back up without assistance, slowly, but with an air of self satisfaction. (text-colour:#ff7070)[“I’m going to go get a bath, I’m a real mess.”] She excused herself, before going upstairs, most likely heading for her room.

Tilly, with mixed feelings in her mind and stomach, tried to take solace in the clear good deed she had just accomplished. Then, when she was left alone, her eyes wandered to the glass of water she was still holding. A part of her wanted to pour it out and forget about it, it being the symbol of her betrayal of her ideals, but another part yearned for it. 

It was just the right temperature, the kind of slight cold that felt good just to hold and condemned a little on the surface of the glass. She found herself unconsciously licking her lips thirstily as she realized just how thirsty the work unsticking the bloated genie had made her. In a quick motion, she shot the glass up to her lips, gizzling it greedily. It only took a few moments before she finished it in a few large gulps, but those mere seconds stretched into an eternity as the very concept and sensation of replenishing hydration became her reality. After the last drop snaked its way down her tongue like a slide, dropping into her throat, she dropped the glass. It shattered on impact with the floor, but she was too overwhelmed to care. A single tear dripped from her eye, a sacrifice of moisture to thank the gods for what she had just consumed.

(text-colour:#75c624)[“That was the best drink I’ve had in my life…”] She said aloud, suddenly reconsidering her stance on magic.
(set: $Magicbuildup to it + 1)

[[Back to commentary-&gt;Creator Commentary]]</tw-passagedata><tw-passagedata pid="19" name="Competition wish good" tags="" position="1325,1100" size="100,100">//&#39;&#39;Blue prize winner, chicken dinner&#39;&#39;//

(text-colour:#ff7070)[“Alright, watch and appreciate.”] Vae said as she worked her magic. 

While she wasn&#39;t quite familiar with what exactly made a cow award winning, she decided to just push everything to the extreme. As the magic exited her, it caused a bright flash of light throughout the small room. The cow panicked and shot its head, evidently not finding the process of its transformation or the light all too pleasant. Its muscles bulged and its horns lengthened, causing it to let out a distressed long mooing. The genie was forced to use the last bit of magic from the wish to calm the beast’s mind, lest it kill the two women with its reckless stomping. 

When magic drained and the light subsided, the farm girl was left absolutely awestruck. The cow had been mere skin and bones before and one stuff breeze away from keeling over before, but now it looked as though it could withstand a cannon ball if need be. It was taller than two men stacked foot on head and had to lean its head down so its horns wouldn’t pierce the ceiling, being sharper than any spear point crafted by man or dwarf. Its muscles bulged visibly through its fur, which itself had frown thick, silky, and fine. 

(text-colour:#ff7070)[“I hope that&#39;s something like what you were expecting. I&#39;m not too familiar with cows or sows myself.”] Vae apologized. 

The farm girl didn&#39;t respond, stumbling forward and hugging the cow’s leg like it was that of a parent. She gushed through joyful tears, giving thanks and saying how Molly would win the competition and get her the prize money. It caught Vae by surprise, but her heart was warmed by the display. 

//&#39;&#39;KNOCK KNOCK KNOCK&#39;&#39;//

A doughy man with glasses walked in through the gate, looking at his clipboard and not noticing the magnificence that was the magically enhanced Molly. 

“Miss Donna, let&#39;s see that heifer of yours. Might pull the best score, I&#39;m af-” He was cut off as he nearly had a heart attack upon seeing the giant herculean animal. “Holy Gleep! Did you cross breed it with a rhino or something?!”

(text-colour:#ff7070)[“Maybe.”] Vae teased. 

----------------------------------------------------------------------------------------------

Donna and Vae rode the truly hulking Molly around the fairgrounds, being careful to keep the bovine under control and on the main road, which was a tight fit considering the crowds and festivities set up alongside. 

The farm girl had a trophy full of gold in one hand and an opened, fizzing bottle of champagne in the other. She took long swigs between cheers of her own dominating victory, which had been unquestioned, mostly due to the fact that Molly probably could&#39;ve eaten the runner up as a snack if she really wanted to. 

Vae wondered what the girl would do with the massive amount of funding this competition had just earned her. Seeing the future wasn’t a power genies had at their disposal, or a power anyone short of the gods themselves possessed. Her imagination went to work.

Danna seemed like quite an underdog, so it wasn’t hard to imagine her in the classic ‘needing money to save the farm’ scenario. Now, money in hand due to the intervention of a fairy godmother (of sorts), she had everything she needed to thrive. She’d settle down, marry her childhood sweetheart, some dumb lug with a rippling body due to pure dumb luck genetics. Then?

Kids. 

Lots and lots of kids. 

For almost every harvest season came with another kid. After a decade or two, the young lass would practically create a clan all on her own. Of course, all this would add up, take its toll in various ways. The farm would have to grow larger to compensate, as well as the house. Oh, and her of course. After having more than a dozen children, she’d be a massive mother, in multiple meanings. Waddling around the house, baking in the kitchen, yelling at her misbehaving children as they played in the yard. Her husband would love it, and treat her like a goddess. Squeezing her giant lactating breasts like milk dispensing pillows, needing her gut like he was a cat getting ready to lay on the world’s largest pillow, getting lost in the flesh of her thighs as he attempted to eat her ou-

(text-colour:#317231)[“Vae!”] Danna, the real thin, totally not a GMM (giant milky mother) Danna snapped her out of her daydream. 

(text-colour:#ff7070)[“Oh, uh… sorry, I was imagining that money leading you to having a successful farm and fat tits.”] Vae said nonchalantly as she tried to reestablish her reality. 

Donna laughed hard, nearly biffing her landing as she jumped off the cow and leashed her up on the haltersare in front of the bar. 

(text-colour:#317231)[“Man, that’s some bullshit your mind came up with, ya know. I work on a ranch! Now,  ya want a drink?]&quot;
(set: $Karma to it + 1)

[[Time to find an inn for the night.-&gt;Day one night (no build up)]]</tw-passagedata><tw-passagedata pid="20" name="Competition wish bad " tags="" position="1375,1300" size="100,100">//&#39;&#39;How now, fat cow? &#39;&#39;//

(text-colour:#ff7070)[“Ah, alright, I’ll grant your wish.“] The genie relented. (text-colour:#ff7070)[“Just count yourself lucky that you and that skeletal excuse for a cow look so pitiful.”] 

Vae snapped her hand right in the girl&#39;s face, rubbing it in. She let the magic work itself, thinking this wish as simple as could be. 

An orange light erupted in the small enclosure, and the bovine let out a long distressed moo, kicking and panicking at the sudden light before slowly calming down. Vae thought it was due to the magic modifying it, but as her own vision cleared, she was proven oh so wrong. 

(text-colour:#317231)[“Hey, what kind of scam are you running here?”] The farmgirl asked angrily, turning to Vae and gesturing to her still anorexic cow, now breathing quickly and heavily out of fear. (text-colour:#317231)[“All you did was give the poor thing a heart attack!” ]

Vae didn&#39;t answer, couldn&#39;t answer. She merely landed as she stopped paying attention to keeping herself in the air, not even matching eyes with the girl. Instead, her gaze was directed decidedly lower.

(text-colour:#317231)[“Hey, eyes up he- oh my god…”] The black haired girl noted her staring, but faltered mid betraying as she looked down and noticed it. 

The change. 

Her chest was massive, bursting from relatively flat to gigantic sagging cow tits. 

Wait, cow tits? Oh no…

Her hands jumped to the top of her head, horrified to feel curved shapes poking out between her black bangs. She rushed over to the watering hole provided for the animals, looking in the still water’s reflection, gasping horrified as she saw the results of her wish. Long curved horns stuck out of the top of her head, her ears turned into downward tilted floppy ones, and her figure rather… milky. She had gained an enormous amount of weight, although most of it went to her monstrous tits, the rest of her body also plumped up decently, with her hips coming in a distant second for her largest asset. Her clothes were popping off of her, her buttons having somehow disappeared without her knowledge and the remnants preserving a pitiful modicum of her decency. 

She turned back to the genie, murder in her eyes. 

(text-colour:#317231)[“WHY DID YOU DO THIS?”]

Snapping out of her horny staring, Vae realized she was on the defensive, as if she were a soldier suddenly being ambushed on the road. She went over the events in her head, checking the math of the wish to see what exactly had gone wrong. 

(text-colour:#ff7070)[“Well, you did say //‘I wish I could win this stupid competition for once’. //Guess that means the magic made you capable of winning it instead of the cow.”] The genie offered up. 

(text-colour:#317231)[“What? That’s ridiculous, you&#39;re in charge of the magic!”] The cow girl took a threatening step forward.

The wish granter stepped back towards the wall, clearly afraid. 

(text-colour:#317231)[“Fix it!” ]

(text-colour:#ff7070)[“I can’t, I can only grant one wish a day!”] Vae admitted fearfully.

The cow girl instinctually brought her horns down to bear, and charged like a bull seeing red. 

&#39;&#39;BWOMPH!
&#39;&#39;
Vae found herself pinned rather impaled, pushed against the wall by the woman’s glorious cleavage, with her entire thin body stuck between the warm globes of flesh. The cowgirl, not one to give up so lightly, swung at the genie with her fists, although her arms proved far too short to even reach past her own chest.

Suddenly the fence gate opened, and a dumpy bespeckled man dropped his clipboard as he walked into the checkered scene.

(text-colour:#ff7070)[“I would like to enter my prized heifer if you wouldn’t mind.”] Vae said, finally finding a way out of getting bored. 

The farmgirl finally managed to slap her across the face. 

----------------------------------------------------------------------------------------------

“And the winner of this year&#39;s cattle competition is…. Donna, and her dutiful owner, Vae!” The announcer yelled throughout the hall, causing cheers to roar from the crowd to echo throughout the venue. 

Vae was handed a trophy by a buxom (although nowhere nearly as much as the half cow Donna) blonde, which had a generous pouch of coins and champagne stuffed inside. The genie attempted to raise it up, but her partner grabbed the trophy, grabbed the booze with one hand, popped the cork without shaking it up, and took a long swig. Vae guessed that she wasn’t having a great time in between her unintended transformation and the fact she only won because all the judges couldn’t take their eyes off her jugs and every single attendant at the festival was so drunk that they had just gone along with the whole thing. 

(text-colour:#317231)[“I’m going to need this if I’m going to forget tonight.”] She said cynically as she lowered the drink from her lips. 

(text-colour:#ff7070)[“We can make that part of your wish tomorrow if you want.”] Vae offered. 

(text-colour:#317231)[“NO. We are going to keep it simple and not fuck it up again. Me, back to normal, as of yesterday.” ]

Vae nodded, intending to honor the agreement, although nothing was particularly forcing her to if she decided otherwise. Still that was a decision for tomorrow, 
(set: $Karma to it - 1)
(set: $Cowpoint to 1)
Right now she just wanted to enjoy the festival, before going [[back to the inn for the night.-&gt;Day one night (no build up)]]
</tw-passagedata><tw-passagedata pid="21" name="Sister wish Good" tags="" position="1400,800" size="100,100">//&#39;&#39;Good standing among sisters&#39;&#39;//

(text-colour:#ff7070)[“Granted!”] She made a show of it, flying upward energetically as she yelled it, wearing the biggest and most inauthentic smile her pointed face could muster.

&#39;&#39;FLASH&#39;&#39;

An orange light that could&#39;ve passed as a warmly tinted flash bang erupted, even catching the attention of the other park goers who let out politely worded murmurs of complaint.  

As it faded, the yellow dressed sister disappeared from where she had been standing, replaced by her thin sister who had quite a befuddled expression on her face. She looked around, calming down as she recognized she was still in the park, although seeming to get a bit frustrated as she spotted her sister resting where she once did. Of course, the suitors took notice as well and a few left, although a couple stayed behind and resumed their courtship, apparently not caring which royal daughter they married. 

(text-colour:#0f0)[“What in the lord of…”] Then she spotted Vae. (text-colour:#0f0)[“Ah, a fairy. That explains it.”]

(text-colour:#ff7070)[“Not a fairy, I&#39;m a genie.”] The self described magical being corrected quite angrily. “Your sister wanted to swap places with you. I&#39;m sure she meant success or something, but be thankful I decided to do it more literally.”

(text-colour:#0f0)[“Are you admitting that you were involved in a conspiracy against a member of royalty?”] The young woman threatened in the unsubtle way nobles tend to do. 

(text-colour:#ff7070)[“Are you threatening to arrest a magical being that could erase your entire existence in a moment, theoretically at the wish of any prisoners in any dungeon you would throw said being into?”] Vae quipped back.

The two matched glares, holding a silent competition for authority over each other. The yellow girl cracked before the red genie. 

(text-colour:#0f0)[“Truce.”] She said the closest thing to a forfeit that her ego would permit. (text-colour:#0f0)[“Doesn&#39;t matter anyway, I&#39;ll have more boys on me within the half hour, damn things are like flies.” ]

She picked up her green dress so as to not have it scrape along the ground, and strolled down the street to god knows where. Vae gave it a half chance of either an expensive location or a superbly boring ballroom event. 

Satisfied, Vae prepared to do much the same, but stopped as she looked back one last time at the wishing sister, only to be stunned by what she saw. 

The jealous sister was greedily kissing one particularly thin young romantic, and he looked to be enjoying her just as much. She leaned on him while she did so, which was surprisingly working, considering the man looked like skin and bones and her double his mass. It appeared that this one was more genuinely interested in her than the competition as well, considering how one of his hands was full with her generous ass, massaging it like dough. The other was wrapped around her, it sunk into the extra flesh of her ample body. 

The display of affection was so passionate, that it made Vae briefly wonder if members of the aristocracy could be arrested for public indecency.

(text-colour:#ff7070)[’//No matter//.’] She thought as she turned away,

(set: $Karma to it + 1)
[[Time to find an inn for the night.-&gt;Day one night (no build up)]]</tw-passagedata><tw-passagedata pid="22" name="Sister Wish bad" tags="" position="1350,1000" size="100,100">//&#39;&#39;Different sister, same weight&#39;&#39;//

(text-colour:#ff7070)[“Eh, why not?”] Vae asked with rhetorical apathy. (text-colour:#ff7070)[“Granted.”] 

As she clicked her slim fingers, an orange light sparked and overtook the park, as if a star had appeared on the surface of the planet and gone supernova. As the stinging light faded, the effects of the wish were fully realized. The green and yellow noble women had switched places, and where the wisher once stood was now the formerly slim sister, emphasis on formerly. 

Somehow, the switch had not only made her the same size as her sister, but quite a bit larger. While the previous one was certainly plus sized, she wasn’t quite outright fat, which obviously couldn’t be said for this one.

Her body shape wasn’t plump, but rather round. Her powdered and make up decorated face was plush as if it were stuffed like a pillow, the softness of which clashed with her grumpy expression. Her arms were large and hanging with fat, with smooth well moisturized skin that made them look more decorative than anything resembling utility. Her breasts were heaving mounds larger than her own head that swayed like twin miniature wrecking balls as she looked around, still confused from the bright flash of light. Her stomach was easily her largest feature and what characterized her generally round shape. It was as large as the most generously stuffed beanbags and hung so low that it had a much better chance of touching her toes compared to her hands ever again. Her legs fed into her round stomach, making her middle large and slowly getting smaller towards her bottom, finishing her circular figure. 

(text-colour:#ff7070)[//‘She looks like a fucking melon in that dress.’//] Vae thought as she observed the fruits of her magic.

Truthfully it was more than even she had suspected, and she wondered how the automatic application of magic had exactly went about swapping their lives. Maybe it was some unaccounted for third factor, like metabolism or personal greed. 

(text-colour:#0f0)[“You cause that light, miss fairy?”] The melon fashioned lady asked her, noticing how the genie was looking at her. 

(text-colour:#ff7070)[“Nah, think it was just the glare of the sun reflecting off some jewelry or something.”] She lied. Although the magical reality warping probably made it impossible to trace anything back to her, it still couldn’t hurt to cover her ass.

(text-colour:#0f0)[“I bet it was my sister, she’s always messing with me.”] She pointed a gloved sausage finger at the wishing sister, now as thin as could be and reclining under the shade of the tree, being fed fruit by swooning suitors. (text-colour:#0f0)[“I wish I could get back at her.”]

Vae struggled to stifle a chuckle, seeing quite the irony in the situation.

(text-colour:#ff7070)[“Maybe someday. Tomorrow, perhaps.”] She teased as she turned around to leave, making a mental note that returning tomorrow might give her yet another easy wish. 


[[Time to head back to the inn for the night.-&gt;Day one night (no build up)]]

(set: $Karma to it - 1)

(set: $Sisterpoint to 1)
</tw-passagedata><tw-passagedata pid="23" name="Sister Wish Neutral" tags="" position="1425,700" size="100,100">//&#39;&#39;Aristocratic Anarchy&#39;&#39;//

(text-colour:#ff7070)[“You know what? Sure, you’re a petty little thing, but I don’t think it’ll cause too much harm.”] Vae shrugged. It was petty and honestly beneath her, but equally as harmless in her eyes. Sometimes settling for harmless things wasn&#39;t the worst idea in her line of work.

She snapped, and orange smoke surrounded both sisters suddenly. Both coughed heavily as the mystery substance filled their lungs. By the time the wind blew the clouds away, serious changes had occurred in both women. 

The yellow one thinned down from plump to perfectly thick. Her yellow dress hung loose from her frame, and she was left in her bloomers and the extra large dress slid off of her, as if she was a snake shedding its skin. Her hips were perfectly round and her breast still full, but perky rather than hanging like before. She seemed rather unconcerned about her indecency, rather taking the opportunity to laugh at her swollen sister. 

The green sister had become the exact size that her twin had formerly been, maybe a little more but it could’ve just been the difference in how it showed on her figure. Her dress ripped and tore at the seams as she turned her body frantically in an effort to examine herself, with her gasping out of fear. She pinched her own chubby cheeks, causing Vae to wonder if she was just inspecting her chubby face with her hands or attempting to wake herself up from this potential nightmare of hers. Her belly jiggled up and down as she fidgeted, her ass had ripped the back of her dress totally, revealing her embroidered flower patterned panties perfectly, and her long sleeved gloves had ripped up the middle. 

(text-colour:#0f0)[“What the hell’s going on?]” She asked one of the suitors in a shrill shriek.

The suitors backed off, clearly unsure and frightened themselves of this sudden affliction their previous object of affection had undergone. She lunged desperately and grabbed the arm of the slowest one to back away, a thin and absurdly tall man who looked like a scarecrow, and held on tight for some sort of comfort. He struggled a little at first, but eventually relented and patted her head as she cried on his shoulder. 

One opportunistic, small nobleman, made his way over to the other, thinner sister who had wrought this chaos with her wish, and covered her with his coat in an attempt to preserve her dignity, if not her perceived sanity. 

(text-colour:yellow)[“You look like a fucking watermelon in that thing!”] She cackled like a witch. 

(text-colour:#0f0)[“Shut up you bitch! I’ll get you back for whatever this is!”] The fat one retorted.

Meanwhile, Vae watched from above, having flown out of view. It wouldn’t take long for someone to link an impossible abnormality with a genie hanging around, so slipping away through the air was best for safety. Mortals very rarely ever actually looked up, so her escape was easy. 


[[Time to find an inn for the night.-&gt;Day one night (no build up)]]</tw-passagedata><tw-passagedata pid="24" name="Waitress wish good)" tags="" position="1325,400" size="100,100">//&#39;&#39;Wine and Whoohoo&#39;&#39;//

Discreetly, Vae snapped her fingers under the table, the faint magical glow and sound muffled by the table cloth. Across the room, a short bald man in an unsuitably clean uniform had a strange flicker in his eyes. He wrapped up with the customers he was pouring drinks for and jaunted over to Vae’s table. 

“How’s your morning going, Rodrica?” He asked the waitress pleasantly. 

(text-colour:#1b69b6)[“Good, Mr. Theop. I was just serving our new customer here.”] The waitress gestured to Vae. 

(text-colour:#ff7070)[“And doing a wonderful job, if I may add.”]  The customer in question added helpfully. 

“You know, you’ve been doing a really good job lately, and it’s not too busy today, so how about you take the rest of the day off.”

Rodrica’s eyes suddenly gained a glint to them, and gave Vae a knowing, conspiratorial glance. She nodded in agreement to her boss, who walked off satisfied with his sudden burst of generosity. 

(text-colour:#1b69b6)[“You think you’re real smooth, don’t ya.”]

(text-colour:#ff7070)[“I have no idea what you mean.”] Vae sarcastically confirmed. (text-colour:#ff7070)[“Sit down, we’ll get some wine and chat a bit.” ]

(text-colour:#1b69b6)[“Am I like, destined to now, because of that wish? What if I just walk away?”]

(text-colour:#ff7070)[“A flying keg would chase you down and empty itself down your throat. Don&#39;t overthink it, let&#39;s just have a nice date.”] The second chair animated, swinging around and catching the waitress, pulling her in.

(text-colour:#1b69b6)[“Oh, is that your angle? Tell me about yourself, magic woman.”]

As the two women made small talk, another waitress brought a small keg to the table, leaving it for them to consume at their leisure between themselves. 

(text-colour:#1b69b6)[“So, what&#39;s the weirdest wish you ever *HIC* granted?”] Rodrica asked in a slurred giggle.

(text-colour:#ff7070)[“Oh, that&#39;s a hard one… maybe impossible.”] The genie mused, clearly better holding her liquor better than her companion. (text-colour:#ff7070)[“There was this one guy who wished for cosmetic surgery on his favorite concubine. Wanted her to be twenty feet tall.”]

(text-colour:#1b69b6)[“No way! You actually grant that shit?”]

(text-colour:#ff7070)[“Yeah, but she immediately squashed him with her thumb and I undid it the next day.”] Vae chortled, swirling her glass of liquor. 

(text-colour:#1b69b6)[“Geez, isn&#39;t that kinda harsh?”]

(text-colour:#ff7070)[“When it comes to life as a genie, you gotta distance yourself from the results sometimes. People always talk about how carefully you gotta phrase your wishes carefully to genies, but people don&#39;t realize it goes both ways.”]

(text-colour:#1b69b6)[“Does it really? It&#39;s not like wishes ever negativity affect you, why do you care?”]

(text-colour:#ff7070)[“You sound like one of those brand wielders from the church.”] Vae scoffed, pouring out the last of the keg’s contents for herself. (text-colour:#ff7070)[“Just because I&#39;m not the one swinging the sword, doesn&#39;t mean I don&#39;t sometimes feel guilty when he goes on a rampage. Sometimes it&#39;s easier to crush a guy with the mountain of money he asks for rather than watch him ruin lives with it. Still, there&#39;s only so much one can do.”]

(text-colour:#1b69b6)[“Eh, sorry, didn&#39;t mean to get things so serious.”] The blonde apologized as she rose from her seat. (text-colour:#1b69b6)[“Wanna head back to my place?”]

----------------------------------------------------------------------------------------------

(text-colour:#ff7070)[“Don&#39;t laugh!”] Vae yelled as she stood naked in the middle of the cozy room. 

(text-colour:#1b69b6)[“Sorry, sorry, just never seen anyone without a belly button! Didn&#39;t notice back at the bar!”] The blond giggled as she undressed herself in bed. Her figure was curvy, full in all the right ways, although the detail that drew the genie’s attention the most was her bloated beer gut from their evening of drinking. 

Vae joined her drunken lover in bed, pushing the human woman into a lying position and sitting on top of her. 

(text-colour:#ff7070)[“Now, let’s have some fun.” ]

----------------------------------------------------------------------------------------------

Rodrica was awoken by the splitting pain coursing through the confines of her skull. The sunbeams leaking from the open window seared her eyes as she opened them, picking herself up from her face first position in her messy bed. Her rise was slow and tedious, but eventually she made it to a sitting position in bed, her hair frizzy and mind clouded with a horrible fog. Looking to her bed stand, she spotted gingerly penned note. Its message was thus:



(text-colour:#ff7070)[“Dearest Rodrica,

I must say you made quite a nice partner last night, and I’m glad that it turned into something nicer than a one and done wish. Sadly, being a supernatural race means I have no need for sleep, so I’m afraid there was little reason for me to stay once you nodded off.

While I’m also exempt from the phenomenon known as a “hangover”, I’ve heard from previous friends of mine that liquorice powder is rather good at relieving the resulting headache, so I’ve left you a bag of the stuff. 

Thank you for your companionship once again,

//Vae~//]

(set: $Karma to it + 1)
Of course, the genie had gone back to her room at the [[inn-&gt;Day one night (no build up)]].
</tw-passagedata><tw-passagedata pid="25" name="Waitress wish neutral" tags="" position="1375,550" size="100,100">//&#39;&#39;A bit too winey&#39;&#39;//

This wasn’t too complicated of a wish, so why not let the magic work itself out and not worry about it too much? Casually, Vae placed her hand under the table and snapped to hide the magical glow. At first, nothing appeared to happen and the awkward silence that occurred between the two became quite palpable.

(text-colour:#1b69b6)[“So uhhh… you ordering something?”] The waitress ventured shyly. 

(text-colour:#ff7070)[“Oh, yeah, I’ll take the Hydra Merlot. Sorry, you&#39;re just looking a little… pink? I hope you&#39;re not allergic to anything dear.”]

A look of confusion formed on the blonde’s slender face. She picked up a nearby metal plate, looking into the polished surface to use as a mirror. A reddish pink splotch covered her face and was spreading across her skin. The plate clattered to the ground with a harsh metallic reverb. 

In moments the whole pub was a wash with panic, with the customers horrified with the oddity and the staff attempting to help their coworker. They attempted to rush the blonde into the back room, but found it surprisingly hard as her figure rapidly began to swell as she entirely turned pink. Her dress rode up harshly as her stomach bloated and her breasts engorged, revealing her thick, clumsy legs that restricted her movement. Her panties became fully visible, white, frilled, and entirely too tight. The waitress had almost quadrupled in size and audible sloshing could be heard as she wobbled in place, unable to even move with the help of her coworkers now. 

&#39;&#39;THUMP&#39;&#39;

She fell heavily onto the ground, her figure becoming opulently round and immensely overwhelming. Her fat arms cradled around her stomach, instinctually and uselessly rubbing in an attempt to relieve pressure. She opened her mouth, but before she could say anything factual about her situation, a high pitched hiccup escaped her mouth, along with a few wine colored bubbles.  Her expression softened from concern to a drunken indifference as she fully settled into a completely booze filled wine barrel of a woman. 

“What the fuck happened?!” Her boss, a short bald man yelled, finally having noticed the scene. 

(text-colour:#1b69b6)[“Magic *HIC* woman.”] The waitress managed to squeak out in-between belches and hiccups. 

However Vae, knowing the consequences and technically already getting what she needed, had left a few moments ago while the waitress had distracted everyone with her transformation into a living wine keg. Sometimes it’s easier to let the magic flow and let the details work themselves out…
(set: $Sloshpoint to 1)

[[Time to head back to the inn for the night.-&gt;Day one night (no build up)]]

</tw-passagedata><tw-passagedata pid="26" name="Waitress wish bad)" tags="" position="1375,625" size="100,100">Fine wine, Fired woman (Waitress bad wish)

Rodrica suddenly became aware of an awful thirst in her throat. Her mouth felt dry and slimy with saliva, and the sensation was getting worse by the minute. 

(text-colour:#ff7070)[“You ok dear? You look parched.”] Vae asked, a smarmy smile carved into her face. 

The waitress began to sweat as her dehydration worsened and a sudden fever set in. She felt as if she had been stranded in a bone dry desert for ten days straight, only subsisting on the bare minimum. 

(text-colour:#1b69b6)[“Need… water…”] She gasped with a moistureless voice.

(text-colour:#ff7070)[“Shame, if only we were at an oasis instead of a bar.” ]

As the genie pointed out the large wall of kegs, her victim let out a pathetic groan of pain before sprinting full speed at the treasure trove of refreshment. Her desperate hands fiddled with a tap, scrambling to get at the liquid inside. As the golden stream started, the blond plugged her lips tight onto it. 

(text-colour:#1b69b6)[*GULP GULP GULP*]

She chugged down the liquor like a woman possessed, uncaring that her messy drinking was causing it to run down her chin and stain her dress. Vae got up and started to slowly float her way towards the exit. The woman&#39;s gut bulged with each swallow, her uniform tightening horribly. 

“Rodrica! What the fuck are you doing?!” A short bald man in uniform yelled as he stomped over.

The waitress didn&#39;t stop, and the front of her dress ripped open, allowing her massively swollen beer belly to surge forward. The man who was presumably her boss, pulled her off of the tap. 

(text-colour:#1b69b6)[&#39;&#39;UUUUUURRRRRPPPPPP!!!!&#39;&#39;]

A large wet belch exited her lips as they broke free from the barrel, her stomach actively weighing her down and forcing her to lay on the floor. It was the size of a fully ripe melon, and would&#39;ve allowed her to pass pregnant if it wasn&#39;t audibly churning. 

“You drank the whole barrel?! What is wrong with you!?” 

(text-colour:#1b69b6)[“Sor- *HIC* sorry boss.”] She apologized in a slurred voice.

“You&#39;re fired!” 

(text-colour:#1b69b6)[“Sh- *HIC* -it!”]

Vae felt a little bad at the sight of the girl losing her job as she slithered out the door, but it was a small sacrifice in the grand scheme… or at least that’s what she told herself. 


[[Time to head back to the inn for the night.-&gt;Day one night (no build up)]]
(set: $Karma to it - 1)</tw-passagedata><tw-passagedata pid="27" name="Port day 2" tags="" position="1925,100" size="100,100">//&#39;&#39;Fishing for funds&#39;&#39;//

It was nice weather for a waterfront trek, Vae thought. 

Little did she know the sheer busyness today would hold for the relatively moderately visited port. Merchants bustled to make deals and all manners of travelers, both military and civilian, departed and loaded onto various ships from all over the continent. The wooden pier almost seemed to creak under the combined weight of the population and the cargo. 


(text-colour:#ff7070)[//‘With this many people around, I’ll have my wish done in no time!’//] Vae thought to herself excitedly. 

She flew to hover just above the middle of the crowd, drawing a deep breath preparing to announce her presence. Unbeknownst to her, a standard bearer in a departing troop of soldiers hadn’t seen her floating in air and was approaching from behind. Before the hard wooden rod collided with her catastrophically, a fishing hook spiraled through the air, grabbed her by the cuff of her pants, and yanked her out of the way. 

With a thud, she landed first onto the edge of the docks, letting out a grunt of pain as her ass hit the wood. Looking to her side, she saw the fisherman from yesterday.

(text-colour:#24b2b2)[“You should be more careful where you fly, you almost got accidentally whacked by a soldier’s stick. Would’ve laid you out harder than a squid with an oar.”] He joked, removing his hook from his magical catch and preparing to recast it back out into the water. 

(text-colour:purple)[“He’s really been using those skills you gave him to good use.”] A thin brunette woman wearing ragged yet colorful clothing.

(text-colour:#ff7070)[“Glad to see it. Thanks again.”]  Vae nodded gratefully to the fisherman. (text-colour:#ff7070)[“Though I suggest you reserve the hooks for the fish from now on.”]

The man simply chuckled. As Vae picked herself up and began to walk away, to get back to her business, the woman caught her by the wrist. She leaned in close and whispered into the genie&#39;s ear. 

(text-colour:purple)[“A word? Alone.”]

----------------------------------------------------------------------------------------------

The two sat on some barrels in the shade, in a half set up merchant’s outlet. The woman explained how she was an entrepreneur, a self made woman who managed to earn a living by trading whatever she could whenever she could. 

(text-colour:purple)[“I love him, my best friend since childhood.”] She referred to the fisherman, both women looking at his back, the man still casting lines in the distance. (text-colour:purple)[“He’s never going to make enough money, though. You may have made him a master fisherman, but he’s got the business sense of a salmon. He’s never going to earn enough money at this rate!”] 

(text-colour:#ff7070)[“Ah, yeah that makes sense. The guy’s plan has more holes than a whole wheel of swiss cheese. You wanna wish to speed things up, right? Give him the money?”]

(text-colour:purple)[“N-no!”] The woman hurried to deny it. (text-colour:purple)[“He&#39;s too proud, he&#39;d never accept it! I want you to make me a more successful merchant so I can help him legitimately.”]

(text-colour:#ff7070)[“You sure? That&#39;s a pretty heavy duty wish, changing yourself so drastically. I can do it, of course.”]

(text-colour:purple)[“I&#39;m sure. I wish I was a more successful merchant, with wealth and contacts!”]


* There&#39;s gotta be something small you can [[change-&gt;Merchant wish good]].

* Messing with someone&#39;s time line is messy and almost always a bad idea. [[Refuse the wish-&gt;Merchant wish neutral]].

* Give her [[parents who were rich-&gt;Merchant wish bad]], simple!</tw-passagedata><tw-passagedata pid="28" name="Outside castle day 2" tags="" position="1750,725" size="100,100">//&#39;&#39;Fresh air and fine suckers&#39;&#39;//


Vae wandered the park outside the castle, more concerned with taking note of the locatios’s details than actually finding a wisher. She had tried to get into the palace proper, to offer the duchess herself a wish, but had been turned away by the guards, soldiers always had the least belief and tolerance in magical beings, for whatever reason. Now she was surrounded by power hungry upper class aristocrats and merchants that milled around the castle garden on a daily basis, she was like chum thrown into shark infested waters; they&#39;d come to her, given time. 

The sky was mostly clear and a bright blue, with the only clouds proving most helpful by staying in just the right position to block the sun from turning the day into a scorching one. The air smelt of chlorophyll due to the freshly cut grass and the hedge sculptures maintained by the Queen&#39;s royal gardeners, at least whenever she didn&#39;t wander too close to a noble person and got a whiff of a peculiar and artificially awful perfume. The winds blew gently across the park, rusting the leaves of the carefully planned and maintained maple and oak trees planted throughout the garden. The occasional laugh of a child could be heard in the distance, royal youths enjoying the luxury their lives brought, unknowing and uncaring of how or why it was the case. 

Vae stopped near a pond, the shoreline purposefully lined with large stones to keep people from diving or hopping in… or perhaps just aesthetic. Vae could be paranoid about the motivations of society’s most powerful, she admitted to herself. Still, they had given her plenty of reasons to be, in-between the demands, the ill conceived wishes that never turned out how they thought, and the vows of revenge. 

She calmed herself as she studied the algie spotted surface of the water. The minnows stream about mindlessly, a dragonfly rushing off to god knows where, a frog attempting to blend into the lily pads and cattails. Unfortunately for her moment of quiet, someone had noticed her. 

A [[noblewoman-&gt;Noble wish]] on the other side of the pond, with power hungry eyes seems to be looking at you.

(if:$Sisterpoint is 1)[There&#39;s the other[[sister from yesterday-&gt;Sister wish 2]], that&#39;s a free wish right there.]

</tw-passagedata><tw-passagedata pid="29" name="Pub day 2" tags="" position="1775,400" size="100,100">//&#39;&#39;Out for a drink&#39;&#39;//

Exiting the inn, Vae made her way across the town square to check out the pub she had spotted on her way in the day before. As she approached, it was a decision she was beginning to regret. Around the stone stairs that lead down to the basement-like interior of the bar, a bunch of wooden standees and a caller stood, advertising something that made her slightly apprehensive. 

//‘Sexy trivia night!’// A sign boldly advertised, the first word written in throbbing pink cursive, standing out against the blandness of the other text. //‘Boobs and brain teasers!’// another read. 

She was about to turn away when the caller spotted her and forced her to continue the journey by locking her in awkward conversation. 

“You! You look like you can appreciate a nice pair!” The remarkably thin and greasy man called out to her. As she finally got within spitting distance of the entrance, he continued his advertising assault despite her silent refusal to acknowledge him. 

“We got pairs of everything you could ever want! Questions and answers, tits and ass, beer and pretzels! There you go, have a good time!” He finished verbally shoving her as she descended the stairs and opened the creaky door.

The smell of sweat, beer, and grain invaded her nose, and she took one final long breath of fresh air before diving in. 


[[Head towards the counter.-&gt;Show girls wish]]

(if:(history: where its name contains &quot;Credits&quot;)&#39;s length &gt;= 1)[[[A familiar woman in the corner of the bar-&gt;Bee scene]], approach her?]
</tw-passagedata><tw-passagedata pid="30" name="Farm day 2" tags="" position="1675,1100" size="100,100">//&#39;&#39;Cross roads &#39;&#39;//

As Vae made her way out of the city gates, the country smell of crops and manure hit her like a truck. It was a smell that she was used to, but always required an adjustment period. Plenty of men and women were working, taking down colorful banners and stalls. Children swept confetti off of the dirt roads (a sight that brought a sick feeling to the genie’s gut) and plenty of wagons meandered, hauling various bits of packed cargo. 

There was always something a bit sad when a festival or fair was taken down, Vae thought. Perhaps she was too sensitive, but she always related to the places, stripped of their whimsy and consigned back to their boring old appearances, at least for a time. It didn’t help that they were typically places she fit into for a change, so the additional pain of being reminded how oddly people looked at her on a daily basis always hit a bit harder after. She had told her sisters about this once, but they just made fun of her. 

Regardless, she pressed forward. With all these folk doing hard labor, it would be easy to find a wish here. Some young oafs want to cut a corner, or a problem that requires more than elbow grease.


(if:$Cowpoint is 1)[[[Find the farm girl-&gt;Farm girl promise]], so you can fix her as promised.]

[[Continue down the road-&gt;Couple wish]], might get lucky.</tw-passagedata><tw-passagedata pid="31" name="Merchant wish neutral" tags="" position="2175,0" size="100,100">//&#39;&#39;Snagged line &#39;&#39;//

(text-colour:#ff7070)[“I’m sorry, but that’s a bit of a complicated thing, you’re asking me to rewrite your reality. That’s really risky, can’t I just give you a butt load of money?”] 

(text-colour:purple)[No, it won’t. I need money AND connections! If I just show up on the scene with a butt load of money, no one is gonna do business with me! I’ll look suspicious as hell, not to mention the tax official’s investigation when millions of gold coins go into circulation out of nowhere.”]

(text-colour:#ff7070)[“Fair point, but time line alteration can be messy and dangerous business. We need to figure out how to do this safely and neatly. We need to sit down and figure thi-]” 

(text-colour:#24b2b2)[“Girls, get over here!” The fisherman yelled.]

The women obeyed, heading over to the dock where the man stood next to a dinghy. He had a wide smile on his face and a glint in the eye. 

(text-colour:#24b2b2)[“Gila, let’s head out on a fishing trip! It’s been so long since we’ve hung out together. You can come along too, Vae.”]

The two women, seeing no way out of this invitation and hoping to continue their conspiratorial wish at the soonest chance, agreed to the trip. The fishing trip on the river proves to be tiring and long, with neither of the fisherman&#39;s companions being able to keep up with his enthusiasm or energy for the sport. By the time they returned to port it was nighttime, and the merchant woman had passed out from sheer exhaustion, not having the edurace of the fisherman or the genie&#39;s supernatural stamina. The dock was completely empty except for them as they pulled in, the crowds a long gone memory. 

(text-colour:#24b2b2)[“Shame she couldn&#39;t keep up, but that was a nice day. Remember that face she made when she reeled in that carp?”] The fisherman laughed, already reminiscing about the trip. 

(text-colour:#ff7070)[“Yeah… it was so fun I forgot to get my wish in.”] The genie said through gritted teeth. (text-colour:#ff7070)[“You wouldn&#39;t happen to want another one would you?”]

(text-colour:#24b2b2)[“Nah, I&#39;m living the dream after yesterday! Maybe you can find someone else that ain&#39;t asleep yet.”]

(text-colour:#ff7070)[“Maybe…”] 


(if:$Magicbuildup is &quot;1&quot;)[[[Back to the inn again-&gt;Night two (stage one build up)]]]
(if:$Magicbuildup is 1)[[[Back to the inn again-&gt;Helpless balloon]]]


</tw-passagedata><tw-passagedata pid="32" name="Merchant wish bad" tags="" position="2125,225" size="100,100">//&#39;&#39;It was this big!&#39;&#39;//

(text-colour:#ff7070)[“Alright, fine, but fair warning, this is going to be invasive. Your reality is going to change, and you aren’t going to notice it or remember what changed in your  life. You won’t even think I’ve done anything by the time I’m done. Absolutely sure?”] 

(text-colour:purple)[“Absolutely. Whatever it takes to help my friend.”] The merchant nodded enthusiastically. 

Vae snapped her fingers, not trusting herself to make the right call with editing this young woman&#39;s history, she let the magic work automatically and unsupervised. This was a mistake. Magic works from the bottom up, and in terms of time that means the merchant’s birth. Unknown to Vae, the young lady had been an orphan in her youth, and thus the easiest and earliest route was taken by the magic. Instead of going unadopted for the entirety of her childhood, a wanting noble couple had wandered in on the day she had arrived and took her in with open arms. 

Instead of scrounging and desperately trading for little earning, her upbringing was completely and utterly opulent. Diplomacy lessons, fine silk dresses, and the finest tutors they could hire ensured that her inclination for social networking and business thrived. Another point of contrast with her erased history was her size, of course. With the orphan upbringing she had always been scrawny and wanting, often living from payment to payment, spending little on food to fuel her other needs. 

Now? She couldn&#39;t remember ever being smaller than pleasantly plump. Her parents spoiled her, giving in to every craving and demand for sweets. As she grew older, frequent vacations and lavish parties had only further swollen her figure and enlarged her appetite. 

Vae blinked. She was surprised, according to her supernatural memory, immune to changes in reality, a scrawny and pleasant brunette had been standing in front of her, but now a large palanquin loomed above her. Six servants struggled to uphold the thing and its occupant, who spilled out of her suspended transportation like a pillow stuffed into a bread box. Her hair was coiled in a complex and fanciful pattern, and her round body (which her mountainous gut composed the majority of) was wrapped in a colorful dress further embellished with valuable jewels. 

(text-colour:purple)[“Verdantveil is such a dump I swear.”] She huffed while stuffing a bonbon from a box into her face. (text-colour:purple)[“I don&#39;t care if I was born here, father shouldn&#39;t be concerned about such a minor trading hub.”]

(text-colour:#ff7070)[“Oh, you look… really well connected now.”] Vae said, carefully steering around how gigantically engorged the merchant had become due to the wish. (text-colour:#ff7070)[“At least you can help the fisherman now.”]

The noble woman looked down at Vae as if she were a dung beetle rather than a winged genie.

(text-colour:purple)[“Who are you that addresses me?” She huffed.] 

(text-colour:#ff7070)[“Oh, I guess you probably wouldn&#39;t remember me would you? I just granted your wish so you can help your fisherman friend.”]

(text-colour:purple)[“Fisherman? As if I&#39;d associate with some fishmonger you nonsense yapping harlot.”] 

Vae was about to yell back, but she was pushed away by a bodyguard. The noble woman&#39;s troop marched along, leaving the genie behind. 

(text-colour:#ff7070)[//‘I guess I should&#39;ve considered if she&#39;d even know the guy after changing her reality.’//] She realized glumly. 

She looked back to where the fisherman had been sitting, thinking that maybe tomorrow she could convince him to undo that last wish for the sake of his friend. He wasn&#39;t sitting there. 

Instead a memorialized bench was nailed down into the port. A bronze plaque illustrated the fisherman, and the description spoke of another life lost due to the overwhelming combination of poverty and loneliness. Vae stood there, unsure of herself and feeling rather uncomfortable. Of course, her reality had been altered as well due to the magic, despite her memory. While she knew the true merchant and fisherman, she had never met either version in her own experience. After some deliberation, she decided that she had unraveled too many things already and abandoned any notion of restoring this situation, afraid of even more unforeseen consequences. 

She turned, walking glumly [[back to the inn.-&gt;Night two (no build up)]]

(set: $Karma to it - 1)


</tw-passagedata><tw-passagedata pid="33" name="Night two (no build up)" tags="" position="2525,375" size="100,100">//&#39;&#39;Mortal ways, friendship stays&#39;&#39;//

(text-colour:#75c624)“Good evening, Miss Vae!”] Tilly greeted the genie as she entered the cozy inn, the blackness of the twilight outside contrasting with the fire lit entrance. The thin woman was leaning down near the counter, attempting to wash bed covers in a basin while also attempting to unload some complimentary mints. Guessing by the pool of minty smelling water on the floor, it wasn&#39;t going very well at all. 

(text-colour:#ff7070)[“Doesn’t anyone else work at this place?”] Vae asked, walking over and looking behind the counter, as if she expected another coworker to be hidden away napping. 

(text-colour:#75c624)[“Well, there’s Jeb, but the old guy’s down with gout. Dale’s off on some business trip, won’t be back for months. Matilda too, she’s out on vacation, but the poor thing really needed it.”]

(text-colour:#ff7070)[“If Matilda worked anything like you are, then I think you’re right.”] The genie said, picking up a random bedsheet, only to toss it away after seeing some rather ominous stains. “You know there’s an option that’ll speed all this up for you, you wouldn&#39;t even need to touch these disgusting sheets yourself.”

(text-colour:#75c624)[“Sorry Miss Vae, still can’t make a wish. The offer is appreciated though.”]

Vae was about to say ‘suit yourself’ and move on, but something about how pitiful and tired the girl looked as she worked while wet and sopping stopped her. After marinating on it for a moment, she decided to do something she hadn’t done in a long time: take the hard option. She grabbed the box of mints, and hoisted it onto the counter herself, beginning to count out the amounts and put the ones ruined by water into a separate pile.

(text-colour:#75c624)[“Uhhh… Miss Vae?”] Tilly couldn’t quite understand what she was doing, so foreign was the concept of help. 

(text-colour:#ff7070)[“You won’t let me help you the magical way, so I’m going to do it the old fashioned way.”]

(text-colour:#75c624)[“I appreciate it, but I’ve got a whole list of chores to do tonight, and I wouldn’t want you to miss out on a good night’s sleep for my sake.”]

(text-colour:#ff7070)[“Nonsense.”] The genie waved a hand of dismissal rather than magic for once. “I don’t need sleep, and my time is better spent helping you out rather than pissing around in my room.” 

(text-colour:#75c624)[“I don’t know what to say… except thanks!”] The mousy girl was suddenly wearing a grin ear to ear, as if she had made a friend for the first time in ages. 

(text-colour:#ff7070)[“Glad to help, but pay attention! You mixed the reds and the whites there.” ]

So the two women spent the night doing chores; making beds, cleaning rooms, sorting supplies, washing everything and anything. Time flew fast for the both of them, as Vae needed a few reminders on how to do some of the mortal necessities she was rusty on and Tilly was quite happy to have someone around for once. They talked for long hours, complaining about their jobs and relating with the expectations people put upon both of them. Somewhere near three in the morning, Tilly passed out from exhaustion. The genie, not wanting her to worry about having to remake a bed or taking up a room, carried her to Vea’s own room and tucked her in while she continued the work. By the time the sun rose, everything was just about taken care of. 

As the sound of Tilly’s steps started to come down the stairs, the flying redhead made her exit out the door, having yet another day of her usual work ahead of her. 


* The (if:$Fishpoint &lt; 2)[[[docks-&gt;Port day 3, empty]]](if:$Fishpoint is 2)[[[docks-&gt;Port day 3]]] should be fairly busy with merchants. Might have something intresting for sale at least if there aren&#39;t any wishes to grant.

* Today might be the last day she spends before leaving, hitting up the [[pub-&gt;Pub day 3]] would be a nice way to round out her stay in Verdantveil.

* Sweeping the [[castle-&gt;Outside castle day 3]] and its grounds might be a good idea.

* Perhaps one last swing through the outlying [[farmland-&gt;Farm day 3]] would yeld some intresting wishes.

</tw-passagedata><tw-passagedata pid="34" name="Farm girl promise" tags="" position="1750,1300" size="100,100">//&#39;&#39;Checking on the livestock&#39;&#39;// 

Vae floated up to the hovel that Donna had told her to meet her at the previous night. It was an old wooden structure, but looked more like a well aged abode than a decrepit ruin. Vines grew along its walls, but they were pruned and controlled, and added a considerable degree of color and aesthetic. The front door had a detailed carving of a unicorn carved into it. It was impressive, in a technical way, but the genie couldn’t help but scoff a bit. Unicorns, while protective and selfless on paper, actually behaved more like a holier than thou abusive nuns. She of all people should know, having met more than her fair share. 

//&#39;&#39;KNOCK KNOCK KNOCK&#39;&#39;//

In an instant, the door popped open, a hand grabbing hers and dragging her in, like a snake snatching a rabbit who had wandered in front of its burrow. The inside of the dwelling was largely dark wood, occasionally broken up by metal utilities and brightly woven cloth decorations. 

(text-colour:#317231)[“Thanks for keeping your promise, but please hurry and fix me!”] The black haired cow-woman pleaded desperately in a high pitched voice. She sounded in-between the verge of tears and arousal. 

As Vae regained her bearings, she noticed that Donna wasn&#39;t wearing a top, and that her boobs had grown even larger than the gigantic things her magic had transmogrified them into yesterday. They were as large as pumpkins and their perky swolleness had given way into a sagging, engorged state. Droplets of milk visibly moistened her tits, mere leaks indicating an imminent burst. 

(text-colour:#ff7070)[“Holy shit…”] was all she could squeak out, realizing the true weight of transformation her magic had wrought. 

(text-colour:#317231)[“I&#39;ve been leaking-”] she pronounced the word with hatred and self disgust. (text-colour:#317231)[“since five in the morning!”]

(text-colour:#ff7070)“I’m… sorry to hear that?”] The redhead guessed, thinking it was an obvious negative, but the tone in the woman’s voice made her double guess that. 

(text-colour:#317231)[“You don’t understand!”] Donna wailed like a restless spirit. (text-colour:#317231)[“I. CAN’T. STOP. LACTATING!”] 

(text-colour:#ff7070)“Sorry, sorry, I didn’t think this would be a side effect.”] The genie apologized. She jumped as she noticed a wet feeling on her foot, shaking it dry as soon as she had stepped into a puddle of milk. 

//&#39;&#39;BWOMPH! &#39;&#39;//

In an instant, Vae was pinned to the wall as the bovine woman plowed through her and smothered her between the wood and her own generous flesh. As the squishing force enveloped her, milk spluttered from her tackler’s tits, causing a small pool to collect in her cleavage and cover Vae’s mouth and nose. Having the wind knocked out of her already, she began to choke and drown in the little puddle. 

“(text-colour:#317231)[FIX ME BEFORE I GO INSANE!”] The cow-girl roared. (text-colour:#317231)[“I WISH I WASN”T A LACTATING COW!”] 

There was an obvious flaw in the wish, Vae noticed, but the girl had obviously been driven to insanity due to sexual sensitivity and her own mouth filled with liquid left her unable to point this out. Without any other options, she snapped. A magical aura surrounded Donna and her ears, horns, and tail faded from reality, as if they had just been an illusion. The lustful and furious haze that clouded her mind dissipated, and her round face softened. 

(text-colour:#317231)[“Finally…”] She sighed, the unending sensitivity and lactation finally letting up. (text-colour:#317231)[“Wait… I’m still fat!”] 

On the verge of drowning and running out of air, Vae made a desperate gamble; she lurched her head as far forward as far as she could, and motorboated the girl&#39;s tits.

(text-colour:#317231)[“What are you-”] A fierce blush reappeared on Donna’s face, and she bit her lower lip. (text-colour:#317231)[“I don’t think the wish worked, I still feel….”] She gasped heavily as arousal, this time fully natural, sparked and reignited her inner passion. 

With two heavy steps backward, she fell onto the ground softly, wheezing and moaning, her chest jiggling harshly from all the motion.

(text-colour:#ff7070)“Sorry, but *COUGH* you almost smothered me there.”] Vae sputtered, drops of milk flying off as she did so. Before she could completely catch her breath, a fat hand grabbed her wrist and pulled her down. 

Her hands stretched out to break her fall, but instead found themselves sinking into Donna’s flab. 

(text-colour:#317231)[“You started something… and you&#39;re going to finish it.”] The farm girl huffed between breaths. 

Before the red head could protest, she found her red locks being grasped and used to pull her head back into Donna’s utters. Her thin lips connected to her areola, and as she struggled to break free, she noticed that it wasn’t an unpleasant sensation… not at all.

Her hands needed the extra flesh of the fat girl as if she were a kitten softening an extra large pillow. She drank greedily, the silky yet dense milk filling her mouth oppressively. The amount was so plentiful that she was reminded that she had almost just drowned in the stuff, which caused her to slow down just a bit. 

Donna wasn’t an idol object to be sucked and pleasured, however. One fat arm wrapped itself around Vae’s waist and pulled her closer, her other chubby hand finding its way down her pants. 

(text-colour:#ff7070)“Hey, what are you- ahhhhhh….”] The genie began, before a heavenly sensation performed by the farm girl made her melt like putty.

This was going to be a very well spent afternoon.  

----------------------------------------------------------------------------------------------

Vae stumbled back out the unicorn door, walking as she had sustained a leg injury. It wasn’t quite that, but what had happened to her in the hut definitely left her changed as a woman. She looked over to the unicorn carving, smiling smugly, having defiled the inside of the hovel and feeling as if she had gotten one over on the symbol of virginity and protection.

(text-colour:#317231)[“You&#39;re lucky you were such a good lay.”] Donna said from the door. (text-colour:#317231)[“You don’t have to come back to fix this weight problem, I can diet myself.” ]

(text-colour:#ff7070)“You sure?”] Vae asked, feeling the need to offer one last time. (text-colour:#ff7070)“I can come back tomorrow.”] 

(text-colour:#317231)[“No thanks… I think I wanna experiment a bit more at this size.”] The farm girl reaffirmed, clearly with academia being the last thing on her mind. 

With that the two waved, somewhat awkwardly, and the fun was over. Vae was left with the dark starry sky and the crickets that filled the otherwise silent country night, far removed from the noisy festival of the day before. Good thing genie wings are bioluminescent. 
(set: $Karma to it + 1)

&lt;img src=&quot;https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/f/eb6ad10e-1dc7-46e1-87ef-0a22f7da7a2e/djo43gl-2929bb8c-6612-43fc-a308-a2c44f59738d.png/v1/fit/w_828,h_1744,q_70,strp/cowgal_by_nopehome_djo43gl-414w-2x.jpg?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1cm46YXBwOjdlMGQxODg5ODIyNjQzNzNhNWYwZDQxNWVhMGQyNmUwIiwiaXNzIjoidXJuOmFwcDo3ZTBkMTg4OTgyMjY0MzczYTVmMGQ0MTVlYTBkMjZlMCIsIm9iaiI6W1t7ImhlaWdodCI6Ijw9MjY5NSIsInBhdGgiOiJcL2ZcL2ViNmFkMTBlLTFkYzctNDZlMS04N2VmLTBhMjJmN2RhN2EyZVwvZGpvNDNnbC0yOTI5YmI4Yy02NjEyLTQzZmMtYTMwOC1hMmM0NGY1OTczOGQucG5nIiwid2lkdGgiOiI8PTEyODAifV1dLCJhdWQiOlsidXJuOnNlcnZpY2U6aW1hZ2Uub3BlcmF0aW9ucyJdfQ.kUXSO8GvFCuMWJWilHOEa0IkGj8e2OGlwB_lqGMkb48&quot;&gt;


[[Back to the inn again-&gt;Night two (no build up)]]</tw-passagedata><tw-passagedata pid="35" name="Couple wish" tags="" position="1850,1125" size="100,100">//&#39;&#39;Couple of wishes&#39;&#39;//

It wasn&#39;t long until her jaunt brought her to a most oppertine scene: two captive customers in the form of a stranded farmer couple. Their wagon had broken down and laid importantly in a ditch next to the dirt road. A wheel had fallen off, and the man was attempting to reattach it by himself using crude tools from a simple wooden toolbox sprawled out next to him. The woman stood close by, clearly grumpy in her own right guessing by the look on her stark face, attempting to keep their donkey from wandering off. 

The woman spotted her before Vae could properly choose how to approach them. 

(text-colour:#9c0202)[“Dale, there&#39;s a wander’n freak looking at us like a vulture.”] She scoffed sourly, clearly meaning to insult Vae rather than inform her husband. 

The man brought his head back up from his work, his bearded jaw dropping in surprise and his large eyes fluttering as he made sure what he was seeing was real. 

(text-colour:#a07e7e)[“Holy moly Rosemary, a fairy! Never thought I&#39;d see a benevolent spirit with my own eyes! Hey, can you fix the wheel for us, without us leaving the milk and ginger schnapps overnight?”] He asked hopefully. 

Vae sighed. 

(text-colour:#ff7070)[“While I am flattered, I&#39;m not a fairy, and you&#39;re thinking of toy elves with the milk and what not.”] She explained patiently to the man.  

(text-colour:#9c0202)[“Well if you ain’t going to help then piss off you grifter.”] The wife balked. 

(text-colour:#ff7070)[“Don&#39;t be too hasty, of course I can help!”]

(text-colour:#9c0202)[“By putting your feet on the ground and helping my husband with honest work and skilled labor?”]

(text-colour:#a07e7e)[“Hun…”] The husband whisperer yelled, voice trembling with fear. “(text-colour:#a07e7e)[don’t anger her, she might turn ya ta stone!”]

Although that was borderline impossible unless someone wished for the lady to be transmogrified,  Vae couldn&#39;t deny that the forceful heckling of the peasant woman made the possibility tempting.

(text-colour:#ff7070)[“I&#39;m a genie, you see. I&#39;m offering you,”] She made it very clear that she was talking to the man by making direct eye contact with him and pointing. (text-colour:#ff7070)[“a wish. I can give you anything you could ever want or anything your mortal mind could imagine.”]

The man’s face opened wide with shock, nearly doubling in length, before relaxing into a more serious look. He looked at the ground, seemingly deep in thought, contemplating this most generous and potent of offers. 

(text-colour:#a07e7e)[“I wish our cart was fixed.]” He said firmly, satisfied with this choice. 

(text-colour:#ff7070)[“Ah, yeah that&#39;s easy enough I can certainly gra-”] before the genie could finish the deal, she was cut off by the shrill screaming of the farmer&#39;s wife. 

(text-colour:#9c0202)[“You moron! What do you think you&#39;re doing?”] She raged, getting into her husband&#39;s face and weakly slapping him, despite his larger build. It was like seeing a duck attempting to bully a rhino. 

(text-colour:#a07e7e)[“What? We need the wagon fixed, and this&#39;ll save us time, won’t it?”] He asked innocently as he guarded himself with his large, calloused hands. 

(text-colour:#9c0202)[“Think of the big picture, you baboon! Money, power, influence, anything more worthwhile than that stupid hand me down, garbage wagon!”] It was very clear that her imagination was greater than his, and this only validated Vae&#39;s choice to give the man the opportunity. She was too hungry for it to have anything benign in mind. (text-colour:#9c0202)[“Anything that&#39;d make us happy!”]

(text-colour:#a07e7e)[“What do we need those for?”] The farmer asked, not seeing her stance, even now. (text-colour:#a07e7e)[“When we wed, we swore all we needed in life was each other for happiness. Sickness, health, rich er’ poor, remember?”]

Finally running out of steam, the wife backed off her ineffectual assault, pacing over to the cart and placing a hand on it as she huffed and puffed. 

(text-colour:#9c0202)[“Rich er’ poor, tch…”] She scoffed, mocking her husband’s notably more rural accent. (text-colour:#9c0202)[“I wish I married into wealth instead of you! Then I wouldn&#39;t have to worry about the poor!”]

Vae was a meek woman, but this scene and the woman&#39;s downright awful words irked her, something fierce. Not only had she endured the woman&#39;s ridicule, but she had stooped to abusing her husband when he got an opportunity that she was jealous of missing out on. The question was, what to do about it.  


* [[Grant the husband&#39;s wish-&gt;Husband wish granted]], make the guy&#39;s day.

(if:$Magicbuildup is 1)[*[[ Grant both their wishes-&gt;Couple wishes granted]], use the opperunity to send that bitch away and free the dude up.]</tw-passagedata><tw-passagedata pid="36" name="Husband wish granted" tags="" position="2000,1100" size="100,100">//&#39;&#39;Marriage is like a wheel&#39;&#39;// 

(text-colour:#ff7070)[“Young lady, sometimes simple wishes are the best wishes.”] Vae said to the wife. (text-colour:#ff7070)[“Trust me, a lot of more ambitious wishes have resulted in ruin.”]

(text-colour:#9c0202)[“Sounds that may be your fault…”] The narrow faced woman sneered, as she turned back to handle the donkey. (text-colour:#9c0202)[“Who&#39;s she calling //‘young’// anyway? Looks younger than me…”] She muttered sourly. 

The immortal spirit briefly considered explaining her youthful appearance was the result of her kind’s inherent immortality of her race, but the puppy eyes of the otherwise gruff farmer reminded her that she had a wish to grant. With a snap, an orange mist surrounds the broken wagon. It lifts gently into the air, with the farmer frantically ducking to the ground to not get beamed by an axel. The wheel floated in front of the empty end of the cylinder before an invisible force jammed it mightily back into place. 

Additionally, the splintered old wooden planks of the vehicle seemed to heal and get a new dark varnish. Old rusty nails fell out and rang on the ground as brand new iron ones grew out in their former places as if they were baby teeth being replaced by adult ones. Finally, the hard bloated wood of the driver&#39;s seat was replaced by a cushioned leather seat. The wagon’s clattered a little as the vehicle was placed back down onto the road. 

(text-colour:#a07e7e)[“Hot damn, thanks lady! You didn&#39;t need to go that far, but I appreciate it!”] The man thanked her profusely, grabbing the genie&#39;s hand and shaking it wildly, making her flounder mid air. (text-colour:#a07e7e)[“Hun, hurry and hook the mule up, we&#39;re taking this thing to ma’s! She&#39;s going to be so proud!”]

The wife hooked up their steed to the refurbished ride, giving the genie an awful, hate filled glare as she strapped the animal back in place. Vae waved at her to stoke the anger she knew the greedy woman was harbouring. 

(text-colour:#a07e7e)[“Thanks for the wish, miss genie.”] The farmer thanked her one last time before snapping the reins. As the couple rode away back towards the city gates, Vae couldn&#39;t help but laugh at the situation. 

Then she realized she could&#39;ve asked for a ride back with them instead and given her tired wings a break. 


(set: $Karma to it + 1)

[[Back to the inn again-&gt;Night two (no build up)]]</tw-passagedata><tw-passagedata pid="37" name="Couple wishes granted" tags="" position="1975,1325" size="100,100">//&#39;&#39;Lost on the road, far from home&#39;&#39;//

Vae remembered how the wife hit and yelled at her well-meaning husband. She knew love wasn&#39;t a straightforward or smooth thing, but abusing your spouse like that was almost always a sign of a mistaken relationship in her eyes. What if he hit her? Would she stand for it and take it like he did?

The genie doubted that. Luckily, circumstances were perfect for her to intervene. She had enough magic for two wishes, and the foolish human bitch had just made a poorly worded wish…

&#39;&#39;SNAP&#39;&#39;

----------------------------------------------------------------------------------------------

Rosemary was very confused. One moment she was on the dirt road with her husband, dealing with that flying hussie, when a bright flash overtook her vision. Her surroundings of the clear blue sky and rolling green fields had been replaced by a dark claustrophobic passage. Her hands spread out and touched the walls instantly, feeling dry baked clay brush her fingers. The corridor became a bit brighter, as a light from around the bend of the corner approached. 

“I heard some bull’ happen’n back here! That you Gutz?” A deep, rough voice accompanied the light. 

It sounded orcish to Rose, she had heard her husband&#39;s war friends make fun of the accent many times after they had returned from their tours of duty. Picking herself up, she ran in the opposite direction in fear, something she immediately regretted as her footsteps echoed throughout the tunnel. 

“Oh, ‘nother rat. Smash’n time.” The voice said from behind her, with the sound of metal grinding against the ground accompanying it. 

She was unsure if it had mistaken her for an actual rat or was merely mocking her, but the lack of enthusiasm made her lean towards the former. Her foot faltered and tripped as her sandal broke from the sudden sprint, sending her crashing into a wall head first. Her braided hair exploded into a mess as the bands holding them in place snapped. Looking around, she realized she had hit a fork in the passage. 

“Wait… bigger ‘dan a rat….” The voice mumbled as it turned the corner. 

It belonged to a large hulking figure, coiled muscle wrapped in scarred green skin revealed by the primitive lantern held in its large hand. Tusks protruded from its jaws like a demon. Rosie ran down the left fork, choosing out of pure panic without any indication of where it led. She heard the orc cry for her to halt, which only made her push herself harder and faster into the pitch black tunnel ahead. 

Suddenly the ground disappeared beneath her foot, a yelp escaped her lips as she tumbled down a slide-like chute. The lost peasant woman found herself splashing into shallow water that smelled horrible and tasted worse. Her lungs burned and she gasped deeply as her head broke the surface. 

A wave of heat blasted her. A sickly yellow light flickered on, and an agonizingly monstrous form was revealed to her. A large misshapen and maw filled with unaligned teeth chewed in anticipation, its humid breath blasting her with every exhale. It had many eyes randomly speckled across its body, above and below its mouth and even down its limbs. 

Screaming, Rose ducked to the side as it spring on her, the force of which would&#39;ve squashed her against the ground if she wasn&#39;t swallowed and shredded. 

Her body collided against another wall, and felt the thing&#39;s side slowly approach her, intending to smash her between the clay and itself. Jumping up, she clawed at the thing’s cold wet scales, eventually managing to pull herself out of the way and on top of the creature. Her hand found something unexpected as it searched for a grip as it began to buck: something that felt like a man made handle. Grasping as if her hands were industrial vices, she held on for dear life as the mysterious beast bucked and attempted to throw her off. 

Panic erupted even further in her mind as the handled item began to come loose from whatever connected it to the beast. She twisted and pushed it in with all her might, desperately attempting to preserve the hold and not fall off and under the thing&#39;s stomping legs. Slowly the thing began to tire out, its rampage slowing and losing steam. Eventually it stopped moving entirely, leaving Rose’s huffing breaths and the dripping of water as the only noises. The thing’s legs buckled and it died, churning the water below it with its gigantic mass as it collapsed. 

Another splash sounded out, accompanied by the orange light of the orc’s lantern as he slid down into the pit as well. His large arm wiped away what had turned out to be sewage from his face, only for his entire face to open agape with surprise as he saw Rosemary stop the dead mutant beast, sword in hand. She shook with terror, but managed to faintly lift the weapon and point it vaguely in his direction. 

“That&#39;s hot.” The orc said, interested.

----------------------------------------------------------------------------------------------

His name was Bart Ghoal, and he was the most powerful orcish warlord and as well as the wealthiest man in the world. He had been conquering some far away civilization that Rose has never heard of, on a continent she had never heard of. He had delved into the sewers in search of a rumored beast with his best friend Gutz, to add its head to a collection of trophies. The lost farm wife had been dropped in the middle of the hunt, and had stumped onto the monster fresh from its victory over Gutz, and accidentally used his lodged sword to finish off the wonder beast. 

Upon seeing her victory, Bart fell in love with her like a schoolboy, carrying the woman a quarter of his size with great care back out of the sewer, along with the mutated wyern’s decapitated head. His army cheered and roared as their master emerged victorious from the manhole, only to be confused as they set their eyes on her. After Bart explained, in his own words and flawed perspective, about Rose&#39;s great deed. To her horror, the consensus of the green skinned hoard was that they found her just as impressive and attractive as Bart did. Still, he was the boss, and that meant he got her as his wife. 

----------------------------------------------------------------------------------------------

Years passed, with mixed results. Turned out being the consort of and favorite harem member of the most successful orc warlord in the world had a few upsides. 

For one thing, Bart surprisingly listened to her far more than Dale, her old husband back when she was a farmer. Over time he had noticed that she was smarter and just as cunning as he, and asked for her advice frequently. Sometimes she had to repeat things twice, but he always bent to her whim. In a way, she was the unofficial queen of the Mammoth Clan.

Still, the downsides were plentiful and sadly unchangeable. Once, she saw the race of orcs as stupid barbarians. 

Now she thought them more alien than stupid, but definitely still barbarians. They were vastly wealthy in gold, so much that she estimated that they would be the wealthiest faction in the world (which Rosemary figured was the technicality the genie had used to send her here). Unfortunately, the concept of trade was beyond their capacity to understand, since if someone had something you wanted, you simply took it. The yellow metal was merely used as decoration, which she counted as a great shame. They measured wealth and beauty in other ways. 

They were measured by glory in actions. In hindsight that explained why war appealed to so many of their kind, the battlefield serving as the ultimate proving ground for their might, intelligence, and cunning. She herself had accidentally gained quite a substantial amount. 

Another thing she gained a lot of was weight.

Bart had a particular way of showing his affections. He had explained that he had once owned a hound who had always been the most excited when he rewarded it with a treat. With how useful Rosemary had turned out to be… 

Rose sat high in the pleasure gardens, an open courtyard where all the harem members lounged in waiting for their chieftain to visit. Rose, his most favored, sat in a custom made couch designed to hold her substantial size, eating grapes and reading random books that the armies had procured for her by request. She lay sideways, supported by enough pillows to allow a whole platoon of soldiers to have a fine night&#39;s sleep. 

Her plump hand plucked a grape from the hanging bowl next to her, and popped it between her lips. After, her hand absentmindedly wandered back down to the flesh apron that was her stomach. She patted it, squashing and kneading it in ways that brought strange comfort. Still, it annoyed her, especially when she stood because it hung down to her knees and made a set of attendants necessary if she wanted to walk… 

Who was she kidding? If she wanted to waddle, that was the right way to phase that thought. 

Her old tattered dress that had come with her was long since gone, having been discarded after her emergence from the sewers. Instead of a rotten, ragged, and rough dress, she now wore a rather revealing set of garments. A thin top that revealed all but her areolas and a pair of bottoms that might as well not exist since they were rendered invisible to all and unreachable to her. Loose transparent silks stretched from these pieces to jeweled ankle rings and bracelets at the end of each limb. The style reminded her vaguely of the genie she had known so long ago… another life really. 

“MY DEAR, I’VE COME FOR A VISIT!” Bart Ghoal announced as he bustled through the entry gate carrying a large plate of treats and glazed meats. Rose felt her stomach both drop and growl at the sight of it.

Orcs had a surprisingly robust culinary tradition, with rich creamy sweet and glazed meats. Although she had to admit some of the meat was of dubious origin, she found it too tasty to resist. 

“I have need of your advice, may I sit?” Muscular warlord asked politely. 

She nodded, too preoccupied by the temptation of the food he had brought with him. He sat on the couch with her, and found it quite a struggle to fit despite its size, due to how much she took up by herself. Bart layed back on her large body like a cushion, his form sinking into her spongy body. He had remained the larger of the two in height, but she had grown to outdo him in weight and width. 

(text-colour:#9c0202)[“So, what advice do you need?”] She asked.

“I’ve grown to love you so much, my dear Rossmary.” He began.

(text-colour:#9c0202)[‘And how your love has grown me.’] She couldn’t help but from within her own mind. 

(text-colour:#9c0202)[“I don’t think I need the other gals anymore. Been enjoying you so much I hardly have enough time for them anymore. Was wondering if you had a poison ta’ recommend, to give them a quick and merciful death.” ]

His favorite woman sighed in disappointment rather than gasping in horror at his request. She was used to reeling back his instinctual brutality. 

(text-colour:#9c0202)[“Just fire them, give them some treasure from your hoard and release them onto the streets. They’ll find their way without your love somehow.”] She said cynically. It bothered her that he thought himself so great that he thought her fellow harem members wouldn’t have a reason to live without his affection. 

“You sure?” He asked dumbly, as if he hadn’t even considered the option. 

(text-colour:#9c0202)[“Very.”]

“Then it shall be done.” He confirmed, turning around and looking at her with a stupid smile. 

(text-colour:#9c0202)[“Don’t think about - *MUPH*”] Rosemary began before he cut her off by shoving the narrow end of a sweetroll into her mouth. She swallowed it heavily, barely chewing. (text-colour:#9c0202)[“I’m not hungry, stop that!” ]

“But I heard your stomach rumbling.”

(text-colour:#9c0202)[“I’m on a diet you idiot!]” She screeched at him and slapped his rock hard face. It didn’t affect him whatsoever physically, and even caused a smile to form on his chapped lips. 

“You’re so beautiful.” 

(text-colour:#9c0202)[//‘Yeah, I’m so fucking beautiful and pretty with my three chins that constantly fold anytime my move my head and my arms that shake with the slightest movement. SO MAJESTIC I CAN&#39;T” EVEN GET MY FAT ASS TO MOVE ON ITS OWN!’ //] She ranted in her mind.

(text-colour:#9c0202)[“More please…&quot;] She murmured under her breath.

----------------------------------------------------------------------------------------------

(text-colour:#a07e7e)[“W-where’d she go?”] The farmer stammered, sounding confused but not necessarily concerned.

(text-colour:#ff7070)[“I granted her wish. To be honest, the only reason I did was because of how mean she was to you.”] Vae said, trying to let him down gently, flying up beside him and placing a consolitary hand on his large shoulder. 

(text-colour:#a07e7e)[“It didn’t hurt…”]

(text-colour:#ff7070)[“She still meant it. Her wish was a reflection of regretting that she ever married you. I say take your new ride here and pick up some chicks… once you&#39;re emotionally ready of course.”] The redhead said kindly, trying not to overdo it with the encouragement. “Mind giving me a ride into town, by the way.” 

He looked at her, seemingly thinking it over for a long couple of moments. 

(text-colour:#a07e7e)[“Yeah, hop up.”] He finally decided. (text-colour:#a07e7e)[“I wonder how Alice from the neighbor’s farm is doing these days…&quot;]


[[Back to the inn again-&gt;Night two (no build up)]]</tw-passagedata><tw-passagedata pid="38" name="Sister wish 2" tags="" position="1925,850" size="100,100">//&#39;&#39;Sister like sister&#39;&#39;//

(text-colour:#0f0)[“You! You&#39;re that sprite from yesterday!”] The green dressed noble from the day before called out Vae, blackening her to come over from under an ornate parasol. 

(text-colour:#ff7070)[“I&#39;m a genie, not a sprite. Sprites were disproven two hundred years ago by Golbepti scientists who proved they were a type of floating dust bunny.”] Vae corrected as she approached. Been a while since she had to whip that one out, she thought. (text-colour:#ff7070)[“Let me guess, you wanna follow up on my insinuation from yesterday, miss….?&quot;]

(text-colour:#0f0)[“Aprila. Bold and rude of you to assume my intentions, I must say.”]

Vae rolled her eyes as the coyness, finding it equally ridiculous and insulting.

(text-colour:#ff7070)[“Well if what you wanted to do was greet me, then mission accomplished. Forgive me good lady, but I must get back to my business. I think that old gentleman feeding bread to the ducks over there looks like he could use one of my wishes.”] The genie teased, playing up her manners and frilly speech. 

(text-colour:#0f0)[“Fine, fine, you made your point!”] Aprila backpedaled before pointing a gloved sausage finger across the park.

Vae recognized the wisher from yesterday; the formerly fat sister who was wearing a similar yellow dress to the one that had clung to her yesterday. She was riding in a horse drawn carriage in a relaxed trip around the park, her arm wrapped around those of a muscular suitor.

(text-colour:#0f0)[“That&#39;s Augusta, my sister. She&#39;s always been at my throat, but she&#39;s taken things too far recently.”]

(text-colour:#ff7070)[“How so?” ]Although she obviously knew, Vae didn&#39;t want to reveal too much at risk of revealing her own involvement. After all, there were certain ways to detect when reality altered magic had occurred.

(text-colour:#0f0)[“I started feeling weird yesterday. A strange gut feeling, not much to go on admittedly, I had my family&#39;s physicians, priests, and magician inspect me yesterday. None but the magician came back with anything amiss.”]

(text-colour:#ff7070)[“What&#39;d the magician find?”] The genie asked innocently, feigning ignorance. Sweat began to drop from her forehead, knowing that mages were definitely capable of detecting reality magic. Hopefully they weren&#39;t skilled enough to specifically tell that it was genie magic. 

(text-colour:#0f0)[“He concluded that I had been unknowingly altered magically, somehow. He couldn&#39;t determine how or when, but I&#39;m certain it was my sister, the bitch.”] The noble woman sneered, dropping all formality when it came to her hated sister. (text-colour:#0f0)[“To think that whore would take things so far. I want to use your wish to take vengeance. ”]

(text-colour:#ff7070)[“That&#39;s a bit of an assumption, isn&#39;t it? Couldn&#39;t it have been someone else?”] The nervous magical spirit suggested, attempting to throw her inadvertent victim off the trail.

(text-colour:#0f0)[“Who else could it be? Besides, whatever the change was, it wasn&#39;t bad enough to actually harm me. I&#39;m still rich, healthy, and sane. That means the change was petty, and when I think of that word, there&#39;s only one person who comes to mind…”]

(text-colour:#ff7070)[“I could maybe undo the changes for you, instead of getting vengeance?”]

(text-colour:#0f0)[“Can you undo it, or even if you don&#39;t know what changed?”]

Vae’s nervousness increased even more. In reality, she could undo the wish because she did know, but revealing that truth might have dire consequences when it came to nobility. Assassins, poisons, and thugs all were very real possibilities.

(text-colour:#ff7070)[“No, afraid I can&#39;t in that case.”] She lied. 

(text-colour:#0f0)[“Damn.”] Aprila stomped a heel in anger. (text-colour:#0f0)[“Then do my favor and grant my revenge; I wish that bitch’s curvy figure was ruined, larger and heavier than me!”] The words coming out of her makeup stained lips dripped with mockery and anger, especially ‘curvy’. (text-colour:#0f0)[“She&#39;s always made fun of me for my weight, so let&#39;s see how she likes it.”]

(text-colour:#ff7070)[//‘Rich people really do lack imagination.&#39;//] Vae noted in her mind as she considered the request. (text-colour:#ff7070)[‘//Checking up on these bitchess wasn&#39;t worth it for the guaranteed wish.’//]


* [[Grant the wish, with a twist-&gt;New sister wish (good)]]

* [[Refuse to undo your hard work-&gt;2nd sister rejection]]

* [[Reverse the first wish-&gt;2nd sister wish Neutral]]

* [[Make the first one definately the fat one -&gt;2nd sister wish bad]]</tw-passagedata><tw-passagedata pid="39" name="Noble wish" tags="" position="1875,975" size="100,100">//&#39;&#39;Suitor-zilla&#39;&#39;//

Lena was having a time of it. Come to think of it, her entire life could be considered non too smooth, and it wasn’t even her fault. 

Born in a far, far away kingdom from Verdantveil as a fourteen daughter of a minor nobel house, she possessed the least possible amount of privilege while still having it. Of course, there were less than legal means of climbing the family tree and inheriting power. To be fair, she hadn&#39;t gotten the chance to enact her real plans before a sibling forged evidence and falsely accused her. She was forced to play her hand and it went quite messily… 

It doesn&#39;t matter now. She was banished and humiliated. 

Only given a small entourage and a meager fortune, she was sent to an entirely different continent, never to be seen again. This was an awful turn of events for her, and it almost caused her to give up entirely on being royal or political whatsoever, even driving her to consider buying  a vineyard and simply live the rest of her life with a pathetic dozen servants waiting on her. Still, she persisted, and had happened upon a fortunate situation. 

The son of the duchess, her eldest child and the duke in waiting, was looking for a suitor. Lena was obviously a front runner, having more knowledge on this sort of process than any of the merchant daughters or the other girl spawned in this swamp land could present. She had gotten along well with Tibalt, he was handsome, whitty, and thoughtful, all perfect qualities that made for the perfect husband and an easily manipulated duke. Their dates had been nice, although she could sense that he was still indecisive in between her and her primary rival, a rather shapely and curvy merchant’s daughter who looked more fit to be milked on a farm than to stand next to any sort of royal gentleman. Still, Lena wasn’t blind, dumb, or too egotistical to see what the tipping point was: 

He had a type. 

A type that she, despite everything else going for her, did not have. She was double furious, one half being mad that her own *modest*  features were now getting in her way and the other being Tibalt being revealed to be so shallow that he’d skip over the clear and proper option just for a bit of ass.

She tossed another stone into the lake in front of the castle. She wasn’t trying to skip stones, but just scaring the fish inside to make herself feel better. What could she do? Nothing.

Her mother had been a twig, and she had taken that exact trait from her. No amount of bra stuffing or padded dresses could fix that. All she could do was wait here and see what he decided, hoping that her wanna-be lover would be thinking with his upper head rather than his lower one. 

Then, she spotted something that gave her pause. A glimmer, a sparking light in the far off distance on the edge of the park, catching the sunlight and causing her to wince. Shielding her eyes with a gloved hand, the reflection turned out to be coming off of a pair of red insectoid wings. Stranger still, it seemed to be attached to a person, a woman even. 

Lena’s memory swarmed with long forgotten trivia from her homeland’s lore: their country had been born into existence by such a resembling creature, granting her ancestors with a mighty fortune that allowed them to purchase the whole kingdom from a swarm of barbarians. Hope swelled in her chest.

(text-colour:#fdcc9b)[//‘If you can give my former people a country, you can give me one mere man’s heart!’//] She thought.

Her heels were ditched immediately, since they wouldn’t have allowed her to sprint as she wanted. Like a tiger chasing a zebra, she sprinted across the park as fast as she could manage, pushing down other pedestrians who got in her way and leaping over benches and decorative rocks with reckless abandon. Her clothes ripped, her makeup smudged, even catching a few scratches here and there, she didn’t care one bit, all of it was worth the gambit. Eventually, as Lena approached the magical being, it turned around, its freckled face and green eyes looking like prey caught by surprise. 

She halted before the being, huffing and puffing, attempting to remember what word was used in this land for such a being. It took her too long, so she gave up and went with instinct.

(text-colour:#fdcc9b)[“Great Feengeist, I beseech you! My love stands to make an unwise choice and drive himself and this kingdom into ruin! I wish, nay, beg you to make our relationship and love undeniable!”] 


* [[Refuse -&gt;Noble woman refused]], this lady is clearly insane and dangerious.

* [[Give her the right tools for the job -&gt;Noble woman good]], she could use a bit of a tune up anyhow.

* [[Force the prince to fall in love, -&gt;Noble woman bad]] easy-peasy, nice and clean.</tw-passagedata><tw-passagedata pid="40" name="Noble woman refused" tags="" position="2125,1275" size="100,100">//&#39;&#39;Hounded&#39;&#39;// 

Vae looked at the psychotic women with a proper and valid amount of terror. Her skin was pale and covered in bruises and cuts, the ragged remains of a fine dress adoring her body, and a down right feral look in her eyes. She could swear the smallest bits of foam were coming from the corners of its mouth.

Vae screamed, and ran (or flew away, rather) as fast as she could. The thing roared desperately as it attempted to keep on her trail and catch up. She fled as fast and as far as she could manage, although every time she stopped to catch a breath, it seemed that those crazed eyes and nefarious smile caught up with her with little effort.

Hours passed, with the two playing cat and mouse all over the city. Vae was dirty with mud and slick with sweat. Her wings were sore and her leggings ripped by failed attempts by the mystery woman to grab her. Her mind was sputtering like an engine, her self awareness turning on and off like a dying lightbulb due to exhaustion. The genie had resorted to attempting to fly back to the inn, hoping it would prove safe shelter before night fell entirely. Unluckily, she had given everything she had, and faded into unconsciousness right outside the door to the Interlude Inn.

(text-colour:#fdcc9b)[“Finally *huff* tired yourself out, huh?”] Lena said in between heavy gasps, also having run herself ragged. (text-colour:#fdcc9b)[“Wake up. Grant my wish already.”] 

Her foot nudged the unconscious redhead, like a broken toy. 

“Ok, that’s enough.” One town guard said as he grabbed the noblewoman’s arm and slammed cuffs on her wrists.

“We’ve been hearing complaints about you all day, thanks for finally slowing down by the way.” Another said

(text-colour:#fdcc9b)[&quot;Not now! She’s right there! Right there!”] Lena thought desperately. She struggled with the restraints briefly, before a partner of the guard who had cuffed her belted her over the head with a wooden club. She fell like a sack of potatoes.

“Holy fuck.” The orc guard said as he helped his partner lift her up. “She’s gotta be a vampire or werewolf or something.”

“Nah.” The first guard said dismissively. “You’d be surprised what brats who have been cut off are willing to do, just to get a fraction back.” 

“What about the fairy?”

“Leave her where she is. She’s in an ok position and looks like she could really use the sleep.”


(if:$Magicbuildup is 0)[[[Back to the inn again-&gt;Night two (stage one build up)]]]

(if:$Magicbuildup is 1)[[[Back to the inn again-&gt;Helpless balloon]]]


</tw-passagedata><tw-passagedata pid="41" name="Noble woman good" tags="" position="2125,1175" size="100,100">//&#39;&#39;His type: not crazy &#39;&#39;//

Vae looked at the heavily breathing and desperate woman in front of her. She was clearly desperate, and somewhat maddened or insane. The genie put on a smile as she considered her next move; you always had to be gentle when it came to crazies like this and wish magic. The easy and probably correct thing to do was run away and scream for help, but quite frankly she was unsure if that option would end with her throat being torn out or not, so it wasn’t appealing at the moment. 

This lady was wishing for someone to forcefully fall in love with her. That was a big red flag and a bigger and worse idea. Her sister Bee had done that once, and Vae had been told that horror story enough times that even considering the idea was ludicrous. Still… maybe this could work with a different angle?

This woman wanted a man’s affections, but why should he change for her? Between the ripped dress and scuffed skin, she could use a bit of a tune up physically in mentally, in Vae’s opinion. 

With a carefully controlled burst of wish magic, she snapped her fingers. An orange cloud of dust appeared around the women, who coughed and cursed in her odd accent. 

The changes were near immediate however. 

The ragged dress had immediately been fixed, resized, and retrofitted to be of an older, frillier style. Shoes appeared on the girl’s dirty feet, and her skin knitted itself back together uncannily, as if sections had been brought to their own life and stretched back into the palace to fill wounds.  

(text-colour:#fdcc9b)[“The fuc-”] Lena’s words were cut off as her thin lips became plush and soft.

The resized dress that hung loosely from her rather slender frame became a perfect fit as her body prosired. Her flat ass became anything but, turning into a heart shaped mass any man would be grateful to use as a pillow. Her flat chest bounced into existence, being as large as her very own head and being shown off by a new generous window edited into her outfit. Her thin figure almost doubled in width as her limbs went from twigs to hardy and healthy. The effect gave her a more mature look, as if she had bloomed from a scrawny young mess to a put together, early thirties mother. 

Lena looked at her body as if it were a miracle, the curse of her mother’s genetics taken away and finally given the figure she had truly deserved for oh so long. Looking up to Vea, her face wore a look of confusion.

(text-colour:#fdcc9b)[“Thanks?”] She ventured. (text-colour:#fdcc9b)[“But my wish was to have Tibalt love me?”] 

(text-colour:#ff7070)[“Oh, I can’t make him love you, dear.”] Vae said in the most motherly, knowing way she could muster, to spin this persuasion at just the right angle. Some wishes needed a bit of salesmanship, even after the goods have been delivered. (text-colour:#ff7070)[“Instead, you’re now the woman of his dreams. He’ll fall in love with you, of his own will.”] 

The noble woman plucked out a pocket mirror from some hidden pocket in her dress, and looked at her face’s reflection in the mirror, critically. 

(text-colour:#fdcc9b)[“Yeah, I can see that… wouldn’t have made my lips so full, but beggars cannot be choosers, and all that. Thank you, Feengeist. Now if you’ll excuse me, I have a man to woo.”] Lena excused herself abruptly, seemingly satisfied with this method of seduction. (text-colour:#fdcc9b)[“And a kingdom to win.”] She added under her breath as she walked away.

Vae, for her part, also laughed to herself. She wondered if the woman would ever realize the mental changes that she had subtly implemented as well. Most likely not.

While just a bit intrusive, the genie felt that a slight nudge was worth turning a potential mad queen into a motherly one. 


(set: $Karma to it + 1)

[[Back to the inn again-&gt;Night two (no build up)]]</tw-passagedata><tw-passagedata pid="42" name="Noble woman bad" tags="" position="2150,1375" size="100,100">//&#39;&#39;Locked-in lover syndrome &#39;&#39;//

(text-colour:#ff7070)[“Alright, just leave me alone!”] Vae gave in immediately, not bothering to weigh the outcome of such a wish or even her own need to grant one. 

A snapp of the genie’s fingers and a flash of orange light were enough to satisfy Lena, sending her barreling off to the castle proper, laughing evilly like a loon the whole way. 

----------------------------------------------------------------------------------------------

Tibalt sat in his room in the royal palace, occasionally looking out the window at the crowded city and the farmlands that would one day be his. 

How he tired of this.

All his life, he had been dragged into training and lectures to rule over a city that he hated. It smelled of beer and piss, to the point where he couldn’t even tell the difference between the two smells sometimes. He wondered if dad had found this sort of disinterest that he felt at this very moment. From the way his overbearing mother talked of him, in disappointed whispers with old friends who had known his late father, he had suspected as much.

Recently, his mother had demanded he take a bride, and this forced choice was forcing a lot of unwanted stress on Tibalt. He had personally checked out for a vast majority of the selection process, although he had to admit that the two final candidates did pique his interest somewhat, to his mother’s credit. One was a low born but wealthy daughter to a merchant family, who’s money and trading connections could help the duchy thrive. 

Didn’t hurt that she had a nice fat ass too.

On the other hand was Lena. 

//‘Lena.’// He thought her name singularly, letting the mixture of complicated emotions that he felt about her wash over him. Then, as if a shift of some kind had occurred in his brain, he solved the puzzle that was his relationship with her, and loved what he saw.

She was brash, psychotic, and aggressive. The girl covered all of his self admitted personal faults, his cowardice and pleasing demeanor, which was needed as a ruler. Not to mention, Lena was banished from royalty, a fact hidden from his mother who was under the impression that she still held sway with her far away relatives. The way his mother used him was what bothered him the most, using him as a seal on alliances or a trade deal. If he choose Lena, then his mother would be furious, and he liked the idea of marrying someone he both liked and would be a ‘fuck you’ to his mother. 

She was nearly perfect. 

If only the girl wasn’t as flat as a wooden cut out, it wouldn’t be a contest. 

As if the very gods had heard his thoughts, Lena broke through his door. She was shoeless, her dress torn to tatters, and completely out of breath. The black hair on top of her head was a frizzy mess, her blue eyes narrow with focus, and her snow white skin dripping with sweat. 

(text-colour:#fdcc9b)[“Tibalt, marry me right now.”] She demanded through heavy breaths.

He stood still and silent for a moment, thinking. 

“Yeah, that’d make me really happy.” He admitted and accepted. The ragged woman ran forward and took him in her arms. His own reached around her small, slim body, almost causing him to wince as he practically felt her bones through her skin. 

‘//Yeah, she’s the one.’// He thought. //‘Good thing weight is a thing I can change.’ 
//
----------------------------------------------------------------------------------------------

The two got to work almost immediately on various political and interpersonal schemes, with the two often overlapping. Within months they were married, and within two years the old duchess was dead, having perished during a trip when her carriage’s axle broke and the horses broke free, sending her off a mile high cliff into a lava elemental colony moments before it was destroyed by a mage’s experimental weapon that wiped it off the face of the earth.

(text-colour:#fdcc9b)[“Accidents happen, unfortunately.”] Lena had said at the closed casket funeral. 

Tibalt was honestly relieved at this point, having completely drifted away from his mother’s good graces when he knowingly married a woman with no political advantage… at least for her. For him, Lena was a god sent, practically ruling in his stead, which he didn’t mind whatsoever. As the years marched on, he was more than happy to make mere appearances, signing and sealing her decrees. Some attendants occasionally approached him with concerns about her, but he always blew them off, not seeing any scenario where his beloved could have the wrong motivations. Besides, those advisors tended to disappear quite soon after anyway. Most likely childishness and egoism driving them to leave the duchy when they couldn’t get their way, he figured. Besides, all this free time gave him so much more free time that he used eagerly, learning how to cook, for example. 

He learned how to glaze, bake, grill, smoke, blend, mash, mix and dish every sort of meal he could get the recipe for.

(text-colour:#fdcc9b)[“Man, *CHEW* this shit is pretty good.”] Lena complimented one evening in their bedroom, working on some paperwork from her desk. She was snacking on the orcish styled smoked jerky and orcish styled sweet rolls he prepared one night. (text-colour:#fdcc9b)[“You know we&#39;ve got servants for this, though.”] 

“Eh, what can I say? I enjoy it.” He excused, laying on the bed and pretending to read a book, in reality peeking at her gaining ass as she bent over her work. “Besides, mine’s safer if you think about it. Ya know my stuff doesn&#39;t have a single chance of being poisoned.”

(text-colour:#fdcc9b)[“Thatsh fair.”] She said, with another delight in her mouth. 

Years flew by, with Lena using her unique approach to turn Verdantveil from a duchy into an independent state, throwing a successful rebellion against their commanding government. From there, they took land, seized towns and even oher cities. Within a decade, it had become a small nation and a regional power. 

Tibalt had also been working hard on his own expansion plans, to similar success. Lena’s once pathetically scrawny self had been buried underneath a mountain of her husband’s ballooning treats. Ten years of spoiling had taken their toll, and her present self could’ve smothered the former. The duke had to go out of his way to resize the throne secretly, so as to not embarrass his precious wife. She was as heavy as the suits of armor their personal knights wore, and as soft as a queen sized bed, convenient coincidence given her new title. He spent his days in court practically hanging off of her pillowy arms, and spent their time alone with his face stuffed between her breasts and gut. 

Sitting on his throne next to hers, on the anniversary of the day they had decided to dedicate themselves to each other. Unfortunately, Tibalt had come down with a bit of a cold, so he couldn’t prepare his wife with any special dishes for his darling wife. He had instructed the kitchen chiefs to make a very elaborate tiered cake, with different flavors on each layer representing the local tastes of all their territories. As it was wheeled into the throne room, he felt very proud of his creation, even if he couldn’t have made it with his own hands. 

(text-colour:#fdcc9b)[“Oh Tibalt! You really outdid yourself with this!”] Lena swooned, a blush appearing on her chubby cheeks. 

Using an encrusted silver fork, she plucked a section from the middle, what he knew to be the elven dark forest chocolate section. She let out a squeal of pleasure as the first bite went past her lips. Then…. 

Nothing. 

She sat there, frozen with the fork in her mouth. 

“Honey?” He asked, placing a hand on her arm.

She immediately fell forward and out of her throne, the impact on the marble floors making the whole room shake.

“Call the physician, the queen’s been poiso-” He began, before being cut off by a rapier stabbing through the back of his neck and out through his mouth. 

It was the sharpest, most agonizing pain he had ever felt in his posh life. It was pulled back and a hand pushed him to the ground as well. He could hear the conspirators talking, but the words were distant and unknowable now that he was mere seconds from an undeniable death. Looking into the face of his wife of many years, he felt as though something had changed, lifted in a way. 

He didn’t love this woman.

----------------------------------------------------------------------------------------------

As the madwoman ran off to who knows where, Vae felt a mixture of dread and relief. She was glad to have gotten away, but a hastily made wish like that often didn’t end well.

(text-colour:#ff7070)[//‘I’m sure it’ll be fine.’//] She thought to herself, making her way out of the park. 
(set: $Karma to it - 1)

[[Back to the inn again-&gt;Night two (no build up)]]</tw-passagedata><tw-passagedata pid="43" name="New sister wish (good)" tags="" position="2100,850" size="100,100">//&#39;&#39;Spoiling sister &#39;&#39;//

Vae kept up her fake, sardonic smile, even as she internally yearned to get out of this stupid drama by any means necessary. The wish she had been presented with had plenty of room for interpretation, but how could she spin it to stop these girls from engaging in pointless rivalry (and more importantly keep herself from sinking deeper into it)? If only someone could stick around and play referee for these two…

Her green eyes flashed with inspiration and her inauthentic smile gained a more genuine, although slightly sinister, slant to it. 

(text-colour:#ff7070)[“Alright, I can do that.~”] She affirmed the wish, barely containing the slight amusement she was feeling. 

&#39;&#39;SNAP&#39;&#39;

----------------------------------------------------------------------------------------------

Autumn felt good about her life. 

The sky was a bright blue and perfectly clear, and the temperature was perfect, just slightly on the cooler side that made the cumbersome dresses that were the latest fashion. Besides, it meant that her sisters didn’t work up as much of a sweat when she dragged them out into physical activity. 

(text-colour:yellow)[“Why *Huff* the fuck did we have to come to the park? I’m *Huff* dying out here.”] Aguasta complained. She was doubled over in exhaustion, a servant assisting her in staying upright. Her fat gut hung visibly through the front of her dress and her round face was red with sweat and effort.

(text-colour:#a2399a)[//‘Poor girl.’// ]August thought sarcastically. (text-colour:#a2399a)[//‘Can’t even go for a nice walk in the park anymore. I’ll buy her an ice cream to shut her up. She looks so much cuter when she&#39;s gorging, maybe some guy who’s into it will spot her today.’ //]

Autumn had been born as the third sister to the Faullen noble family, a mere year after her sisters, the twins Augusta and Aprila. The two had always been at each other&#39;s throats from an early age, from stuffed dolls to teenage crushes, there was nothing the one could have without the other’s jealousy… at least that was until Autumn had discovered that shoving food in their mouths kept them too busy chewing to argue.

A pugilism about to start over a ripped dress about to start? Nothing a couple of pies couldn&#39;t solve. A two timing boy toy? Bon bons were an insta fix while the castle guards bounced his head against the brick floor. 

(text-colour:#0f0)[“Come on fatty, don&#39;t wanna fall behind, do you?”] Aprila teased her sister. 

While Autumn would definitely describe both of her sisters on the larger side, Augusta was definitely the larger of the two, weighing somewhere above the big five hundred club. Aprila was definitely chunky, but moved and acted as if she weighed as much as a feather and had the energy of a monkey. It wasn&#39;t something Autumn could explain, although the twin’s physical similarities perhaps didn&#39;t quite carry over to their metabolism speeds. At least that was her best guess. Still, although her yellow dresses sister currently had a large and voluptuous hourglass figure, the small gut she had seen when the corset Aprila relied on was removed made the youngest sister expect that she could blow up to be just as big as Augusta, especially if she ended up hooking up and becoming a mom.

Whatever the reason was, Autumn thought they both looked quite cute in their own ways and she was sure they&#39;d meet men who appreciate their cushion sooner than later. Augusta could be heard whenever she moved, due to the heaving breaths she took due to the effort of moving her massive self. A giant, prize winning watermelon was what Autumn thought of when she saw her green dress straining against her round, belly heavy figure. 

(text-colour:yellow)[“Richard, go strangle that wench for me.”] Augusta commanded her servant, treating him as if he were an attack dog and not an underpaid orc. 

(text-colour:#a2399a)[“Now, girls, don&#39;t get too excited. Look!”] The neutral sister pointed at a nearby snack stand. (text-colour:#a2399a)[“They&#39;re selling novelty ice cream. Pink lobster and blue jelly, each of your favorites!”] 

The two girls seem to forget their argument immediately, licking their lips in anticipation, although still giving each other some side eye as they waddled over slowly. As Autumn washed her fat siblings slowly meandering their way over, a strange flying woman with insectoid wings and deep red red hair flew over. She didn&#39;t say anything, but using her levitation, she seemed to inspect Autumn, flying around her like a humanoid mosquito, searching for a place to strike.

(text-colour:#ff7070)[“Huh. Not quite what I expected the magic to make but you&#39;ll do.”] Vae shrugged after completing her inspection. (text-colour:#ff7070)[&quot;Keep your sisters out of trouble do you?”]

(text-colour:#a2399a)[“I guess you could say that.”] Autumn confirmed, still taken aback by the strange woman. (text-colour:#a2399a)[“What are you? Some sort of spirit? Fairy, sprite, pixie, angel, something along those lines?&quot;]
 
(text-colour:#ff7070)[“Genie actually.”] Something in the woman&#39;s voice made the noble woman think that the redhead was implying that she should know better. “(text-colour:#ff7070)[Afraid I&#39;m all out of wishes today though.”]

(text-colour:#a2399a)[“Well if you don&#39;t mind I got to go pay for my sister&#39;s ice cream, you won&#39;t believe how fast they can clear out a cart just by themselves. Good luck with whatever you do.”] Autumn attempted to break out of the awkward conversation. 

(text-colour:#ff7070)[“Why thank you. I wish you a good life as well, I doubt we&#39;ll ever be seeing each other again.”] The genie said with an oddly warm tone. A hint of motherly affection, perhaps? 

It didn&#39;t matter, Autumn would never realize the truth of her magical origin. As far as she was concerned the only odd thing she had to worry about was her sister&#39;s strange and almost bottomless appetites.

Vae knew that she was content with how she resolved the situation. Hopefully things will be a lot calmer for that family now. Luckily she hadn&#39;t needed to resort to something harsher just to break up this feud. As she flew her way out of the park, she wondered how often her sisters had made new people. She wasn&#39;t sure if she wanted to make it a common practice as it left her feeling a bit strange but in this instance, it felt as innocent and as victimless as could be. 
(set: $Karma to it + 1)

[[Back to the inn again.-&gt;Night two (no build up)]]</tw-passagedata><tw-passagedata pid="44" name="2nd sister wish Neutral" tags="" position="2150,950" size="100,100">//&#39;&#39;Sister set back to square one &#39;&#39;//

Vae sighed as she lowered her head and put her hand on the bridge of her nose, attempting to relieve a sudden headache. 

(text-colour:#0f0)[
“What&#39;s the matter?”] Aprila asked, sounding confused but her slight frown and squinted eyes told of how she felt insulted.

(text-colour:#ff7070)[“Nothing… just tired. Things keep repeating, things get undone…”]

(text-colour:#0f0)[“What are you on about?”]

(text-colour:#ff7070)[“It&#39;s nothing.”] Vae shook her head and readied herself. (text-colour:#ff7070)[“Wish granted.”]

&#39;&#39;SNAP&#39;&#39;

As her slender fingers crossed and split, a light flashed. Magic is hard to explain in literal terms,  so to put in a metaphor: Vae took a pair of scissors to a nice blanket she had just sowed yesterday and cut it into little pieces. She never felt good about undoing a wish, but sometimes it was necessary, although in this case it wasn&#39;t. Yesterday had just been a poor wish to grant and she was just resolving the headache now. 

(text-colour:yellow)[“THE FUCK.”] Augusta yelled, now standing in front of Vae again, also back to her previously plump self. (text-colour:yellow)[“Is this some fairy godmother thing where I&#39;m only allowed to enjoy it for a day?!”]

(text-colour:#ff7070)[“No.”] Vae&#39;s voice was entirely drained of whimsy and carried a new, dry tone. (text-colour:#ff7070)[“What happened is that you put your sister in the exact position you were in, so she wished for the same thing you did.”]

(text-colour:yellow)[“But you didn&#39;t have to grant it like you did mine!”] The woman’s yellow dress billowed and she stomped her foot to vent some anger, making herself look like a child having a tantrum. 

(text-colour:#ff7070)[“A girl&#39;s gotta eat… or release magical pressure, same difference.”]

Augusta fumed and took a swing at the genie. Vae flew up and out of her attacker&#39;s range effortlessly, causing her gloved fist to whiff and making her stumble. 

(text-colour:#0f0)[“You bitch.”] A third voice called out. 

Aprila, back to her own pre-wish state, was climbing out of the wagon where she had been placed after being swapped with her sister again. She was grumbling various obscenities and curses under her breath. Now being returned to normal, her mind was no longer fogged and could clearly understand that her sister had tried to make her the fat one.

“Don&#39;t do anything rash dear!” The suitor who had accompanied her in the wagon called out.

Aprila turned around and let out a guttural hiss from her mouth, causing the man to shrink back into his seat. Removing her long sleeved glove, the nobel woman swung it like a mace and struck her sister squarely in the fat face, leaving a red hand print. Augusta sneered like a raging bull. Her sister tried to step back, but the heavier of the two stomped on her dress to prevent her from retreating from the reprisal. The two grappled, tackling each other onto the ground and tousled like schoolgirls. The fight was a confusing thing to watch, the girl&#39;s frilly dresses tangling and turning the battle into an chaotically ruffling mass of yellow, green, and white fabric.

Vae looked down at the two, mostly with apathey and a slight feeling of disgust. 

(text-colour:#ff7070)[“This is beneath me.”] She said to no one in particular, just thinking aloud. 

“As an all powerful genie?” Looking over, the question came from the suitor who both girls had rode with in the wagon, as he was climbing down.

(text-colour:#ff7070)[“No, as a person.”] Vae clarified simply, before flying away from the situation slowly. While the whole situation was embarrassing and annoying, she had at least gotten her wish in for the day.


[[Back to the inn again.-&gt;Night two (no build up)]]</tw-passagedata><tw-passagedata pid="45" name="2nd sister wish bad" tags="" position="2200,1050" size="100,100">//&#39;&#39;Double whammy&#39;&#39;//

(text-colour:#ff7070)[“Yeah, I can do that.”] Vae said, attempting to hide some frustration in her voice, her one eye twitching a bit. 

She was tired of this situation that had somehow already come full circle. These rich bitches really don&#39;t have anything better to do than gossip, get paranoid about each other, and sabotage each other&#39;s waistlines, don&#39;t they? 

Fine, she can make Augusta large, that idiot had started at least. Now, Vae was going to end it by making this final wish result an obvious and indisputable loser. 

&#39;&#39;SNAP&#39;&#39;

 Far off, on the other side of the park, the wagon that Augusta was riding in was taking a turn in their direction. An orange, sparking cloud enveloped the young woman and her love bird, which reminded the genie of a firecracker with how small the distance made it look. After a few seconds, the wagon moved and pulled them out of the smog, but things weren&#39;t ok. 

Augusta panicked, grabbing her lover roughly and yelling something, although they were too far away to hear particulars. The hunk looked confused, then horrified as his date’s curves began to grow rapidly, swelling from pleasantly thick to obese and beyond. Her long sleeves gloves ripped as dimpled flesh spilled out, the abdomen of her dress ripped open and pinned her date down into his seat. Her face became round and wide as her chins doubled and tripled. Before long, she was a spectacularly round blob, yelling in anger and flailing uselessly with her barely maneuverable arms. Her dress was in tatters, allowing for circular holes to show off her pale flab and in one particularly bad hole, an exposed tit. 

The driver finally looked back to see what all the commotion was, only to be shocked by the woman&#39;s transformation, which startled him so much he fell from the driver&#39;s seat, being dragged on the ground by the pair of horses for a short moment before releasing the reins. Now loose, the horses ran wild, straying from the paved path and Leafing the carriage off road into the park, causing panic. Men grabbed their dates and ran, a family panicked and escaped just in the nick of time as their picnic was turned into roadkill. 

(text-colour:#0f0)[“Ha ha ha, look at her face! She&#39;ll never, EVER live this shit down!]” Aprila laughed uproariously at Vae&#39;s side, reveling in her sister&#39;s humiliation so much that tears of laughter filled her eyes. 

(text-colour:#ff7070)[“Hey… we might want to move.”] Vae said worried, her own eyes fixed on the runway wagon which was coming in their direction. 

(text-colour:#0f0)[“Look at her fat fucking tits flop around!”] The wisher was in her own world, reveling in her victory. 

Augusta, now nearly half a ton, caused the wagon&#39;s wood to splinter and break underneath her. The shaft keeping the horses hard strapped in front of the carriage split into splinters. The two beasts peeled off in opposite directions and went around the genie and her customer. The front wheels, unable to support the rotund aristocrat any longer, snapped off the axle, making the whole vehicle buckle forward and launching the monstrously large woman flying through the air as if she were a boulder from a catapult. 

(text-colour:#ff7070)[“Move!”] Vae screamed as he dodged through the air, up and out of the way. 

Aprila started to come out of her self indulgent laughing fit, but it was too late. Her eyes went wide as she spotted her sibling’s shadow putting her into shade, and began to scream as Augusta landed on top of her with a;

&#39;&#39;SQUISH&#39;&#39;

Only one jeweled hand stuck out from underneath her sister&#39;s mass. A crowd of park goers had assembled into a crowd surrounding the scene, talking and murdering in confusion, a few more boisterous individuals attempting to take charge as several people left to grab the royal guard. 

“I&#39;m a doctor out of the way, out of the way!” An elf in a fine suit pushed his way through the crowd. 

Eventually he made it to the sisters and tested both of their pulses. 

“Don’t you need a medical kit or something?” Someone from the crowd asked. 

“Nevermind that.” The doctor said as he stood himself back up, closing Augusta’s eyelids once he did so. “There&#39;s nothing to be done here.”

Vae was long gone from the scene. After dodging out of the way and hearing a squishing crunch, she knew there was nothing more she could do. 

One must wonder if she felt guilt as she did so. Although the sisters were fools enough to enable their shared demise, the genie had played a role too, perhaps unwitting or not. One can only imagine how she felt, but the truth was that she simply went back to the inn. 


[[Back to the inn again.-&gt;Night two (no build up)]]</tw-passagedata><tw-passagedata pid="46" name="Pub wishes good" tags="" position="2050,375" size="100,100">//&#39;&#39;Sobering up &#39;&#39;//

(text-colour:#ff7070)[“Alright, there’s no need for that.”] Vae giggled nervously, fearfully. “That’s why I came back in the first place!” 

With a snap and a small twinkle of light, a magical wind seemed to stir through the air. No mortal eye could detect it, but every single living being in that room felt where it was, and how it moved and swirled like a serpent dragon gracefully. It glided over to the wine cask of a waitress, who was looking directly at it despite its invisibility. Strangely, wine began to come out of Rodrica’s mouth, a thick and amorphous stream. The waitress gagged horribly as the liquid was pulled out of her, her figure slimming and skin competition normalizing more with every passing second. 

Eventually she was returned to normal, passed out from the exhaustion the magic caused, forcing a dwarven customer to catch her before she fell flat onto the floor. The wine hoved in a waving circular mass in the air for a moment, before shapeshifting into a long  chinese dragon. It let out a bubbling roar, then it split into innumerable streams, casting itself into the empty glasses around the bar, causing the drunks to cheer. Some hastily chigged the free round, while others looked disgustedly at their cups, before pouring them out. 

The manager and the ogre looked at Vae with confusion, clearly questioning why she had gone with that exact method. She shrugged. 

(text-colour:#ff7070)[“Figured I&#39;d put on a show and earn some good will with the customers while we&#39;re at it.”] The manager merely shook his head and commanded his muscle to follow him as he went to attend to the restored Rodrica. 

Vae decided now was as good of a time as any to slip out, before more problems arose. At least she had got her wish in, although a minute fragment of her soul was really disgustingly disappointed about not being able to partake in the trivia.
(set: $Karma to it + 1)

[[Back to the inn again-&gt;Night two (no build up)]]</tw-passagedata><tw-passagedata pid="47" name="Waitress refusal" tags="" position="1950,425" size="100,100">//&#39;&#39;Kegged up &amp; knocked out&#39;&#39;//

(text-colour:#ff7070)[“Na, I’m not undoing my work!”] Vae said, taking a stand. (text-colour:#ff7070)[“I’m not wasting a wish on her.”]

“She’s the biggest, most bloated mess I’ve seen in this bar and that’s saying something! Fix her!” The short man demanded again. The ogre took a step towards it, but the tavern boss didn’t invervine this time. 

(text-colour:#ff7070)[“She seems fine with it to me, and I’m not wasting a wish because her manager is upset about lost profits. She’ll return to normal in her own time.”]

“You sure about that?” The small man asked, dropping his anger and becoming calmingly menacing. 

(text-colour:#ff7070)[“Oh yeah, she’s not going to retain that all forever. At least I thin-”]

&#39;&#39;THWACK&#39;&#39;

----------------------------------------------------------------------------------------------

Vae eyes fluttered awake. She wasn’t quite sure what she was staring at… a light of some sort. 

Was this the afterlife?

The sound of a hobo pissing next to her assured her it was not. The light was the street lamp she had been deposited under, presumably after getting tossed out of the bar. Her head hurt and a picky look in her pocket mirror confirmed it, since there was a fresh bruise on her cheek. Slowly, she picked herself up and looked around. The city was dead silent and the sky was black. Damn, she missed out on the whole day because of that. Unless…

(text-colour:#ff7070)[“Hey man, you want a wish.”] She asked the hobo, shooting her one shot. 

“Wishes? WISHES?” He blurted out in a panicked, insanely high pitched voice. “Wishes are how the government controls you! The only real way to be free is to want for nothing. By the way, can you spare five bucks?”

She ignored him and flew up into the night sky, knowing that her time was up for the day and that she’d have to deal with the consequences at the inn. 



(if:$Magicbuildup is 0)[[[Back to the inn again-&gt;Night two (stage one build up)]]]

(if:$Magicbuildup is 1)[[[Back to the inn again-&gt;Helpless balloon]]]
</tw-passagedata><tw-passagedata pid="48" name="Waitress bad end" tags="" position="2125,475" size="100,100">//&#39;&#39;Hung Over Reality &#39;&#39;//

(text-colour:#ff7070)[“You know what?”] Vae asked rhetorically in a dangerous tone of voice. (text-colour:#ff7070)[“I don’t like your tone, and just for that….”] The genie broke eye contact with the man, and put a hand up to mouth. 

(text-colour:#ff7070)[“Hey, Rodrica, was it? Wish granted!” ]

The bloated purple red drunkard let out an agreeing cheer, which the rest of the crowd joined in on. Vae’s hand snapped just as the manager opened his mouth to protest. A bright flash stunned everyone. It halted not only their vision, but overwhelmed seemingly every sense they possessed. Hearing was overwhelmed with a dull drum like noise that stretched out to infinity, a sweet smell demanded their attention in their nostrils, with a similar sensation taking over every taste bud. Vae began to regret “taking things to the next level” already. Truth be told, she could think what that would realistically look like, so she let the magic work automatically. The outcome was a mystery to even her. 

Slowly, the physic flash bang faded, allowing everyone’s perception of reality to resume as normal, albeit slowly. Even then it didn’t seem to fade completely, and Vae noticed her mind felt dull, slightly slow, and meandering. Drunk? No, genies can’t get drunk. It was just a result of adding more transformative magic onto an already altered person. It was rare, but she had heard of such reverberation and reflections happening before. She looked over to Donna. 

She… changed. 

It was hard to even know the details of how, since her own mind was fogged, but to Vae she seemed… taller? Less clumsy and more confident in how she moved despite her bulk, and there was this sense of aura around her. Like she was more than a mere magically altered mortal.  Her gaze was fixed on Vae, approaching and taking the genie’s limp arm like that of a parent guiding a child. Rodrica led her somewhere. 

*************************************************************************************************************

The next thing she remembered, she was waking up. Completely naked and buried under the covers of a gaudy heart shaped bed in an otherwise ornate room. Looking around, Vae spotted Rodrica standing outside on a connected balcony. She gathered a sheet and pressed it to the front of her body to preserve dignity, noticing that her body was softer than she was used to. Her fingers sank through the sheets and into her generous thighs, which was where most of her growth had apparently occurred. As she moved, a certain sloshing sensation was present in her stomach, she must have drunk a lot of something recently.

(text-colour:#ff7070)[“R-rodrica? Where are we? How long has it been?”] She asked, a bit groggy from just waking up still. To even her own surprise, the blurring fog that possessed her from feeling the true panic she knew she should’ve been feeling right now. 

Rodrica turned around, and looked down at the redheaded genie. She was definitely taller, even more so than before, with Vae only coming up to right under her breasts. Her magenta face smiled a big toothy grin at her, innocent in a drunken way.

(text-colour:#1b69b6)[“Bout’ time you woke up, thought last night would&#39;ve been too much for ya!”] The magical mutant greeted her, lacking any stammering or hiccups that had marred her speech before. 

(text-colour:#ff7070)[“Last night?” ]

(text-colour:#1b69b6)[“You, me, and five other gals and guys.”] Rodrica’s ever present smile did little to keep Vae’s concern pacified. 

(text-colour:#ff7070)[“I don’t remember that…”] Vae questioned.

(text-colour:#1b69b6)[“Seems to be a lot of that going around lately. Everyone around me seems nonplussed. Still, most seem to be having fun.”] The taller one explained simply. With a horizontal waving motion of her hand, she gestured to the rest of the city, visible from the balcony. (text-colour:#1b69b6)[“Whole place has mellowed out.”]

A sudden realization hit the genie. They were at the top of the duchess&#39;s castle. This was bad, they were in so much trouble… or where were they? She had said ‘the whole place’, did that mean that Rodrica’s new mystical abilities had allowed her to pacify everyone with this aura that surrounded her like booze? Had a hedonistic sensation conquered the entire dutchy without so much as any form of resistance?

As if she could sense the questioning thoughts going through Vae’s mind, the magical mistress took the genie in her arms and pressed her gently into her fat body. She attempted to protest, her voice muffled into a meek muffle by her holder’s flesh. 

Then, slowly, she stopped resisting. Her reddish skin was warm like a heated blanket, cozy and inviting. The sounds of the liquor liquid churning inside her had a hypnotizing effect that caused Vae to calm down. It was like hugging a self warming liquid pillow, and it made Vae wonder if this what it felt like to be loved by a mother, a sensation completely alien to her except in description before. Her mind began to drift once more, so pleasured by her goddess&#39;s lover&#39;s flesh that she couldn’t do anything but give in and sleep, holding onto her swollen form. 

(text-colour:#1b69b6)[“That’s it, my love, rest. I have ascended thanks to your magic and the belief in all this city who wishes for unknowing bliss. Today Verdantveil, but don’t you worry, someday soon, the world will be perfectly numb to it all…..” ]


//&#39;&#39;You got the Hedonism goddess ending
&#39;&#39;//

(set: $Karma to it - 1)


[[The end-&gt;Credits]]
</tw-passagedata><tw-passagedata pid="49" name="Port day 3" tags="" position="2675,200" size="100,100">//&#39;&#39;Reel it in&#39;&#39;//

The port was once again swarming with crowds comparable to a school of sardines, seeming to crowd around one particularly large tent with a awesomely large fish tank filled to the brim with golden scaled fish. Yet, Vae paid the crowd or the special no mind. While it was an unofficial rule to not pick favorites when it came to the mortals you granted wishes to, but she couldn&#39;t quite get over the fisherman nor the merchant, and wondered about their current state. As cruel as it may sound, the situation had almost developed into a play fit for the stage. A lowly peasant hoping to rise above the odds and romance the unreachable princess, the unrequited crush of the merchant on her friend, not to mention Vae herself taking up a fairy godmother role. As sickly sweet and fairytale of the whole situation was, there was a certain nagging sensation inside of her that insisted on seeing it to the end. 

She halted mid air as she saw that cold reality had reestablished itself and broken the fantasy of the situation. The fisherman was sitting on a bench, head in hands with his dusty grey hair in a mess. Tears streamed between his fingers, the rod and tackles that served as his loyal tools thrown coldly onto the ground, and a box of unopened gourmet chocolates sitting next to him. Vae began to approach, but noticed someone else observing the forlorn man peeking around the street corner, the chubby merchant from the day before. Vae floated over to her. She turned to the genie with sad eyes of her own. 

(text-colour:purple)[“He didn’t even make it past the gate. The princess shut him down and laughed at him from her window, and the guards tossed him out onto the street.”] The fisherman&#39;s friend explained, her tone dower with sympathetic heartbreak. 

(text-colour:#ff7070)[“I hate to admit it but I both expected and feared that this was inevitable.”] Vae admitted, aware of the slight callousness she gave off. She allowed herself to daydream the happy ending, but deep down she knew it wouldn&#39;t happen. She wondered where the dissonance between her logic and her heart came from briefly. (text-colour:#ff7070)[“There’s nothing to be done now, just need to let him process it on his own terms.”]

(text-colour:purple)[“Let him on his own? Look at him, he&#39;s at risk of jumping into the river out of sheer despair! We gotta help him!”] The merchant pleaded.

(text-colour:#ff7070)[“I think I&#39;ve done enough, personally.”] Vae said with some guilt. (text-colour:#ff7070)[“Magic can fix a lot of things, but mental health isn&#39;t one of them… usually makes it worse, admittedly.”]

(text-colour:purple)[“Come on, how can you say that?! An all powerful genie standing aside and letting a man wallow in misery because you&#39;re afraid you&#39;ll make things worse? Grant this wish if you wanna help; I wish he never remembered having this stupid crush. There&#39;s your perfect wish, no forced love, no mind control, just the relieving of pain.”] The chubby woman ranted, grabbing Vae by the collar and desperately attempting to fix the situation.

Her generous body jiggled violently as she moved with much more strength and speed then Vae assumed of a figure like hers. Clearly she felt a strong guilt for her part of enabling his destructive love as well… or perhaps it was something else?


Wait a sec, we don&#39;t need magic to fix this. [[Convince her to give it a try-&gt;Fisherman good end]].</tw-passagedata><tw-passagedata pid="50" name="Pub day 3" tags="" position="2800,350" size="100,100">//&#39;&#39;Fantasy finder&#39;&#39;//  

Vae floated over to the stairwell in the town square that led down to the subterranean bar, smelling cheap booze waft up already along with muffled sounds of overwhelming chatter. She noticed a small detail on the door, right before entering it.  A carving of two letters in a heart. She laughed to herself, finding it funny that such an innocent sign of love done by youngsters on park trees was done into a pub’s entrance, such an ill omen of whatever relationship it was. As if any lasting relationship could be forged in a seedy place such as this. 

As she finally pushed herself in, the tavern was revealed to be absolutely crowded, with the smell of sweat and boose accompanying such a dense gathering, much to her discomfort. Nearly every table, whether a sturdy oak piece or a rickety folding one, was occupied by groups of people huddled together, their heads bent in animated conversation. It seemed as though half the city had crammed itself into the relative comfort and camaraderie of the smelly pub. 

Vae, having the ultimate advantage over such crowds, flew over rather than squeeze through. She arrived at the bar’s counter at just the right moment, stealing a stool just as the man occupying it left to piss. While she couldn’t get drunk, she still ordered a cherry margarita, craving the flavor of the drink.While she could start working on finding a wishful sap right away, she found that little pleasures kept her sane on the job and served as good opportunities to observe her surroundings and potential clients before swooping in for the kill. The comparison between her current strategy and the approach of bird of prey would have only been more applicable if she had feathered wings instead of red insectoid ones.

Before she could really settle in, the two skeezy looking men on either side of her seemed to take interest in her, not so subtle eyeing each other and her. 

(text-colour:orange)[“Hey, do you magical types… ya know?”] One dared to start. He was a lanky, goofy looking man with a longer than average nose. Not unattractive, but not a prime cut.

(text-colour:#93c7fb)[“What kind of pick up line is that?”] His friend berated him. Vae guessed he might’ve been a handsome man once, but various scars crossing in a spider web like pattern over his face had made him quite rough to look at. He must have been or have been a soldier or mercenary.

(text-colour:#ff7070)[“Alright buddy, get yours out of the way.”] Vae said, playing up the boredom in her voice. 

(text-colour:#93c7fb)[“Don’t be that way darling, I’m sure it’s a rare treat for you to get hit up for your looks rather than your wishes.”] The scarred man pointed out, intelligently.

(text-colour:orange)[“Yeah, it’s not every day that you come across a fine red headed fairy such as yourself.”]  The long nosed one chimed in, ruining his wingman’s flow. 

Even though Vae usually didn’t like to waste a perfectly good drink, this could be an exception.

*SPLASH*

The man blinked in confusion as margarita soaked his appearance and dripped from the end of his nose. 

(text-colour:#ff7070)[“You asshats don’t even know what kinda lady you&#39;re talking to. Why don’t you fools go hire some lady? It’s the only way you two will ever score.”] She mocked, bitterness baked into her voice. n 

(text-colour:#93c7fb)[“You&#39;re a genie, I know. Forgive my friend, he&#39;s a couple drinks too deep to be able to tell the difference at the moment.”] The scarred man apologized like a gentleman. 

Vae wished she had another drink to toss in the other man’s face. Maybe she should go somewhere else to search for a wish if she was just going to be pined after by these two buffoons. 

(text-colour:#ff7070)[“Let me guess, you two are trying to butter me up just to get a wish, aren’t you? Well, out with it. Tell me so I can tell you two no and send you both on your way.”]

The two men looked at each other, although more in confusion and slight disappointment than anger or sadness about any potential scheme being upended.  

(text-colour:#93c7fb)[“Miss, I assure you we only crave your company.”]

(text-colour:#ff7070)[“Why don’t you wish for me to go out on a date with you then?”] The genie asked sarcastically. 

Suddenly, the less capable of the two slammed his head down on the table, weeping. His scarred buddy stood up from his seat and crossed over to pat his shoulder in an attempt to console him. Vae didn’t know why, but she suddenly felt rather bad for the bar flys, despite her better judgement. 

(text-colour:#ff7070)[“Don’t cry dude… I didn’t mean to go so hard, it’s just things can get really annoying, ya know?”] She attempted to apologize and explain her own position. 

(text-colour:orange)[“Na, na…” The long nosed man said through the tears. “I just broke up with my gal, ya see? Greg here just thought I needed a rebound so he took me out to try n’ meet folk. I JUST KEEP FUCKING IT UP!” ]

Vae squirmed, feeling immensely guilty about having put the love torn loser down so hard. A nagging thought fought through her mind and forced itself out her mouth, a mistake she had been warned about by her sisters; a pity wish.

(text-colour:#ff7070)[“Look, I’m sorry. You can have my wish, to make it up to ya.”] She said in a slow, kind voice.

He sniffed, cheering up a bit and lifting his head, long nose bent after slamming his face on the hard wood of the counter. A slight, hopeful smile appeared on his slender face. 

(text-colour:orange)[“That’s a really generous thing to offer… but I’m not quite sure what to wish for.”] 

(text-colour:#ff7070)[“It’s not that hard, there’s plenty of possibilities, just think it over.”] The genie’s voice harbored a bit of annoyance in it. 

(text-colour:orange)[“There’s too many!”] The man blurted out. (text-colour:orange)[“I can’t decide! Look, if you have any suggestions I’ll take em’ but I just wish that you were my type of woman so I could take you out on a date.” ]


* This whole situation feels awkward and wrong. [[Turn him down-&gt;Date wish refused]] and try to leave.

* [[Play matchmaker.-&gt;Date wish accepted ]] With reality bending powers, it should be easy.

* This guy is nice and all, but no way are you dating him like this. [[Agree to the date on one condition. -&gt;Immobile fupa bad end]]</tw-passagedata><tw-passagedata pid="51" name="Outside castle day 3" tags="" position="2750,900" size="100,100">//&#39;&#39;Invited (mandatory)&#39;&#39;//

As Vae made her way towards the palace gardens, she noticed a royal guard looking at her a bit too attentively for her liking. He gave his partner, who was sleeping while standing up, a nudge on her arm and pointed at Vae. She considered running, but as they approached her almost immediately, it was apparent that it was too late. 

“Halt, are you that genie that’s been going around the city, harassing people for wishes?” The guard who spotted her asked. 

“Doubt it… she’s *YAWN* obviously a nymph of some sorts.” The narcoleptic guard said. 

(text-colour:#ff7070)[“I AM a genie, actually.”] She quipped back, too annoyed to think through the consequences of admitting the truth. 

“Ah, good then. The duchess formally invites you to attend court, immediately.”

Before she knew it, she was being (forcefully) escorted to the royal court by the two guards, carrying her by arm between them. The palace’s interior was bright and elegant, with large stained windows with swirling patterns letting fresh sunlight in. Not a bit of metal was to be seen, with nearly everything being made of smoothed, glistening stone and fine varnished and polished wood. Various oil paintings and sculptures lined the long decadent hallways and servants bustled about, too preoccupied to even glance at her. One painting that looked relatively recent stood out to Vae: one with a tall dark haired woman wearing a tiara, sitting in a puffy black formal dress lined with silverish highlights, and a girl who looked to be around ten years old sitting on her lap. It made the genie giggle, seeing the child’s giddy and energetic nature compared to her mother’s staunch and stoic portrait pose.  

The guards let her go as they reached the large doors of the throne room and heaved them open. It revealed a large echoing room that reminded her of the interior of a church or a theater. On the far end was the woman from the recent portrait, sitting in a rather narrow and uncomfortable looking throne. She wore a complex expression; a seemingly friendly smile paired with piercing blue eyes that served as a threat. Notably, she looked older than the painting, with a few signs of middle age with a few wrinkles, a couple gray hairs staining her black mane, and she thought the way she sat in the throne was odd, a misaligned back, perhaps?

This is why Vae hated royalty and aristocracy, they could never say how they truly felt like honest people, even in matters of a non-political nature. On top of that, of course, is the unspoken rivalry between wish granters and monarchs. Genies and the like destroyed and changed the status quo, without oversight or regulation, left to their own judgement. Much of their work had to do with wealth and power, which doesn’t typically sit well with those who have a monopoly over such things already. Vae’s past interactions had been neutral at best, normal wishes that were served with a side of ego and belittlement. At their worst, they were dangerous situations that resulted in danger, death, and woe.

(text-colour:#ff7070)[“Greetings your highness.”] Vae greeted as she stood in front of the ledge that held the seat of power, bowing in what she believed to be the appropriate manner. 

“Such ill manners.” A bearded count commented from the crowd that made up the duchess&#39;s retinue. “Addressing her majesty without being addressed first and not stretching her pinkies at the climax of the bow. Dessert heathen.” 

The court went silent at the man’s remarks, and before Vae had the opportunity to tell him off, the duchess stole the attention of the room, geturing for the guards to cease the count. The man screamed as two armored figures approached him, but fell silent as they brutalized him with gauntleted hands slamming into his gut and across his back. They carried him towards the door, unconscious. The duchess made a chopping motion with both of her hands as they looked back to her one last time before leaving. 

Vae gulped nervously. 

(text-colour:#7f2d8f)[“Forgive my charge’s rudeness.”] The duchess began in a performative, commanding voice that echoed throughout the room. It would’ve been impressive if Vae didn’t know that it was a trick of the architecture that amplified the voice of whoever sat on the throne, a common practice. (text-colour:#7f2d8f)[“He was given explicit instructions not to interrupt proceedings, whether he believe it aided me or not.”] 

The nervous looks on everyone else’s face confirmed to the duchess&#39;s guest that it was a warning given to them all. The duchess continued: 

(text-colour:#7f2d8f)[“I am not stupid or ignorant. I recognize that for a traveler such as yourself, learning all the regional court manners is a waste of time and effort. Not to mention the fact that you are an immensely powerful spirit… that some even compare your kind to us royals in power is evidence of our rival power, and I respect that. I am duchess Megana Dorlino Quinle the third.”] 

(text-colour:#ff7070)[“It is an honor to meet you, your highness. I am known as Vae, youngest of the Gripson clan.”] The genie said, attempting to match Megana’s legitimacy, although she doubted most people would understand what her title meant in detail.

(text-colour:#7f2d8f)[“The pleasure is shared. I will not insult your intelligence or your practice by pretending to want something I do not. I desire a wish, is that something you can do at the moment?”]

(text-colour:#ff7070)[“Yes, your men luckily found me before I could find another customer.”] 

(text-colour:#7f2d8f)[“Customer? Is there something you want in return from me?”] The noble lady asked, tilting her head in curiosity. 

(text-colour:#ff7070)[“It’s a figure of speech.”] Vae laughed nervously. (text-colour:#ff7070)[“What else am I supposed to refer to those who I grant the wishes of? I merely ask that you let me continue my work in your kingdom without interference. I will grant your wish if you allow me that simple right of existence.”] 

In truth, it wasn’t a small task, at least from Vae’s perspective. Although almost all races faced discrimination to some degree, none had faced as much as genies, who were prosecuted by everyone from religious nuts with something to prove, governments who feared them, and mages who wished to abuse them for power. If the duchess agreed, her nation would be added to the white list Vae and her sisters kept. That, and the sure fact that the monarch would surely punish her if she straight up turned down this wish meant that there was no rejecting this one. 

(text-colour:#7f2d8f)[“Grant my wish fairly and correctly, and you should have little fear of that not being the case. I wish to be ten years younger, so as to regain my youthful appearance.”] The queen stated, although Vae could hear the slight self consciousness in her voice. 


&lt;img src=&quot;https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/f/eb6ad10e-1dc7-46e1-87ef-0a22f7da7a2e/djo43a1-95e8e772-f3fa-4aa7-816e-794175bf2ec7.png/v1/fit/w_828,h_1394,q_70,strp/old_dutchess_by_nopehome_djo43a1-414w-2x.jpg?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1cm46YXBwOjdlMGQxODg5ODIyNjQzNzNhNWYwZDQxNWVhMGQyNmUwIiwiaXNzIjoidXJuOmFwcDo3ZTBkMTg4OTgyMjY0MzczYTVmMGQ0MTVlYTBkMjZlMCIsIm9iaiI6W1t7ImhlaWdodCI6Ijw9MjE1NSIsInBhdGgiOiJcL2ZcL2ViNmFkMTBlLTFkYzctNDZlMS04N2VmLTBhMjJmN2RhN2EyZVwvZGpvNDNhMS05NWU4ZTc3Mi1mM2ZhLTRhYTctODE2ZS03OTQxNzViZjJlYzcucG5nIiwid2lkdGgiOiI8PTEyODAifV1dLCJhdWQiOlsidXJuOnNlcnZpY2U6aW1hZ2Uub3BlcmF0aW9ucyJdfQ.zhu40x-ZqBbwhWiPqoDJ0CreTcmP1jBvRb7NcUOFGhk&quot;&gt;

* [[Wait, what about that painting-&gt;Dutchess wish good (ass)]] from the hallway.

* [[No time to dally,-&gt;Dutchess wish neutral]] grant it quickly yet carefully like surgery.

* [[She&#39;s obviously impatient-&gt;Execution bad end]], better hurry up.</tw-passagedata><tw-passagedata pid="52" name="Farm day 3" tags="" position="2775,575" size="100,100">//&#39;&#39;Rural Oven&#39;&#39;//

As Vae fluttered down the dirt path leading away from the city in the same direction she had arrived from, she couldn&#39;t shake the feeling as though she was leaving early. She would have to do so soon anyway, but something about going this far outside city limits without her belongings struck her and was dangerous, despite her better judgement. Looking back, the towering city gates looked to be mere toys at this distance, and the cacophony of mortal prattle and commerce mute, replaced by delicate winds blowing through wheat and the occasional chirp of an unfamiliar domestic bird. Still, a part of her apprised how the warm sun felt on her skin and the smell of freshly tilled earth… as long as it wasn&#39;t accompanied by my manure. 

As she ventured deeper into the countryside, the distance between homesteads increased. Vast fields spread the houses apart like oceans of plant life, and the occasional distant mooing of cattle only reinforced how truly vaste the plains were. In the distance, she noticed a quaint farmhouse nestled amidst a sea of green. Two women sat on the porch, their voices, soft and casual, reaching the genie&#39;s pointed ears. She eavesdropped as she made her way closer. 

Both women were dressed rather conservatively, with billowing humble dresses and bonnets. The pregnant one had a few strands of blonde loosely hanging from the brim of her bonnet, and had the hem of her dress rolled up to relieve her swollen middle. Her conversation partner had a brown bun hanging out the back of her hat and a pointed nose. 

(text-colour:#9d3f9d)[“I swear I haven&#39;t been able to sleep in months. This kid’s worse than the dog, every time I just start to nod off it kicks like it&#39;s trying to bust outta me early.”] Complained one, a hand idly stroking her heavily curved stomach. “I&#39;m telling you Martha, you have no idea how hard this is.”

Her friend poured the pregnant woman another cup of tea as she responded. 

(text-colour:#b9b93c)[“Oh, do enlighten me, Claire.” ]Martha said, voice thick with mock fascination. (text-colour:#b9b93c)[“Is it the part where you eat for two? Or the part where strangers suddenly think they can touch you without asking?”] She waved a hand, threatening in a teasing way to do that very thing. (text-colour:#b9b93c)[“Truly groundbreaking stuff.” ] 

(text-colour:#9d3f9d)[“You’re hilarious.”]  

(text-colour:#b9b93c)[“I know,”] Martha grinned. (text-colour:#b9b93c)[“but seriously—you’re pregnant, not dying. Women have been doing this since, you know, forever.” ] 

Claire exhaled sharply through her nose. (text-colour:#9d3f9d)[“Easy for you to say. You’re not the one waddling around like you&#39;ll burst open any minute.”]  

Martha leaned forward, resting her chin on her hand. “(text-colour:#b9b93c)[Aw, poor thing. Do you need a medal? A parade, maybe? You&#39;re certainly large enough to be a float.”]  

(text-colour:#9d3f9d)[“I need you to shut up.”] Claire muttered, though there was no real heat behind it.  

(text-colour:#ff7070)[“You could stand to be a bit more sympathetic. Being a mom isn&#39;t easy, so I&#39;ve heard.”] Vae interjected as she walked up the porch stairs. 

(text-colour:#b9b93c)[“Who&#39;re you supposed to be?”] Martha stood up, taken off guard and ready to either fight or flee, only calmed down as Claire pulled her back down into her seat gently. 

(text-colour:#9d3f9d)[“It&#39;s just one of Jason&#39;s friends from his bouncer days I think. Don&#39;t need to freak out when a scrawny little strumpet visits, for god&#39;s sake.]” The pregnant woman said as she lowered herself back into her own seat with some difficulty. (text-colour:#9d3f9d)[“You look silly, worrying about a scrawny strumpet.”]

Vae took some offense to being called scrawny (she was slightly more willing to debate if she fell under the umbrella term of strumpet), but swallowed it, wanting to make herself seem kind and affable. 

(text-colour:#b9b93c)[“What&#39;re you doing out here anyway? Jason&#39;s out in the fields, and he shouldn&#39;t talk to you night time folk anymore. He&#39;s an honest man now, father to be.”] Martha said with a snide, disgusted tone, clearly not giving up the offence despite being forced to sit back down like an over eager child.

(text-colour:#ff7070)[“I&#39;m a genie and I&#39;m looking for people who want their wishes granted. I overheard your conversation and thought my services might be appreciated.”] Vae explained. 

Simultaneously, the two women began to howl with laughter at the red head. Vae scowled at the two malevolently. 

(text-colour:#b9b93c)[“Was wondering why you were wearing those fake wings!”] Martha yelled mid laughter, pointing at the glittery scarlet appendages.

(text-colour:#9d3f9d)[“Don&#39;t go too hard on her. She probably is one of Jason&#39;s friends. Must&#39;ve just gotten off shift, hit her head, and now she thinks she&#39;s a mythical genie.”] The pregnant woman laughed, with less malice as she balanced herself in her chair. (text-colour:#9d3f9d)[“Tell ya what? I wish you&#39;d show Claire here what it&#39;s like to be pregnant, teach the bitch a lesson.”] She proposed in jest. 

(text-colour:#b9b93c)[“Still on that are ya?”] Claire said playfully punched her friend&#39;s shoulder. 

Vae boiled, wondering what to do with this viable yet disrespectful wish.


* Make a stupid wish? Get a stupid [[answer-&gt;Pregnant women bad]].

* Try and get a [[serious wish out of them-&gt;Pregnant woman neutral]].

* Don&#39;t get too upset now [[you can pay Claire back at least -&gt;Pregnant woman good]] and teach her a lession.</tw-passagedata><tw-passagedata pid="53" name="Helpless balloon (noon)" tags="" position="2975,1150" size="100,100">//&#39;&#39;Helpless Balloon part two&#39;&#39;//

The market square was business as usual in the morning, slow, routine. Both the customers and the shopkeepers zombie like with an early morning daze... at least until the spectacle started. Loud creaking and groaning noises cut through the idle chatter, and turned drowsy heads, as it seemed an unofficial parade had begun. Vae&#39;s cheeks were flushed pink with the most intense embarrassment she had ever felt in her entire life.

Her body had grown and swollen with so much pent-up magic over night that it had taken on a nearly spherical shape. Her abdomen had become the size of a weather balloon, her large protruding navel-less stomach sticking out so far that it would have blocked a majority of her line of sight if not for her overfilled breasts already accomplishing that. Her limbs were rendered puffy, inflexible cones that hung tautly and uselessly off her oversized orb of a torso. The bloated genie’s skin was largely exposed, with her torn leggings and over stretched bra struggling to keep her privates covered (although not concealed, as the shape of her engorged tits were visible, along with one hell of a camel toe). Her wings hung inert off her back, her new round shape proving too awkward to control herself in the air anymore.

A rope had been tied around her left ankle to keep her from floating away, and the hotel maid Tilly held it, escorting her though the street like a holiday performance. Eventually the hired help reached the center of the market where the notice board was located, and the floating wish granter was tied down to one of its posts. Vae felt exposed, feeling the wind tickle her nearly naked form and the gaze of strangers linger and examine her body.

(text-colour:#ff7070)[“Thank you Tilly, your tip is in my ankle ring.”] She said, thanking the help.

The maid stretched and barely reached Vae&#39;s ankle, finding a crisp five dollar bill stuffed between the jewelry and her leg.

(text-colour:#ff7070)[
“And you can have a free wish, on the house! Anything at all!”] Vae offered desperately.

(text-colour:#75c624)[“I&#39;m still not comfortable doing that sort of thing, Miss Vae.”] The mosey girl said, turning her down.

(text-colour:#ff7070)[
“Tilly, I&#39;m going to explode VERY soon, please. You&#39;re a nice girl and I&#39;d love to give you something.”] The genie begged, flailing on her rope with desperation.

(text-colour:#75c624)[“I&#39;ll be back for you at the end of the day, if you don&#39;t grant a wish by then, I&#39;ll give you one.”] Tilly practically sighed out the sentence, before turning away, her shoes clicking distinctively on the cobblestone.

(text-colour:#ff7070)[“Hey, wait!”] Vae called out, hearing her leave. She attempted to turn around, although she managed very little other than bouncing herself on the rope, a mistake she ceased, realizing that she may knock herself loose and fly away helplessly into the sky.

Minutes passed, then hours. No one approached, too weirded out by the strange sight that Vae presented to approach, no matter how much advertising or carnival barking she did. Eventually she went silent, needing to catch her breath, only to give out a quick yipe of surprise as she felt something jab her gut.

(text-colour:#ff7070)[“Hey, piss off!”] She yelled through her chubby cheeks.

(text-colour:#a27549)[“Oh? Then I&#39;ll suppose I&#39;ll take my wish elsewhere.”] A smooth feminine voice teased in response.

(text-colour:#ff7070)[“No no no, wait!”] The genie jiggled on her like again. (text-colour:#ff7070)[“I&#39;m sorry, just let me grant you a wish!&quot;]

(text-colour:#a27549)[“Ha, you really are desperate, huh?”] The voice giggled.

Before she knew it, the speaker began to handle Vae like a big clumsy balloon, shifting her spherical body to bring her face to face. A pale and rugged young lady, with black hair and a scarred face.

(text-colour:#a27549)[“I wish to be a being of vast magical power, completely sentient, and with no out of the blue downsides. I’m going to burn this city to the ground.”]

(text-colour:#ff7070)[“W-what?”] Vae stammers, too off guard and dizzy from being spun around to properly understand.

(text-colour:#a27549)[“I deserve more than to be just some backstreet thug! I’m going to sit here and make sure mine is the only wish you can even grant! Give me the power to shape the world.”]


&lt;img src=&quot;https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/f/eb6ad10e-1dc7-46e1-87ef-0a22f7da7a2e/djo43bo-9dc24e62-6861-4168-a133-a1074ab66104.png/v1/fill/w_918,h_870,q_70,strp/inflated_vae_by_nopehome_djo43bo-pre.jpg?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1cm46YXBwOjdlMGQxODg5ODIyNjQzNzNhNWYwZDQxNWVhMGQyNmUwIiwiaXNzIjoidXJuOmFwcDo3ZTBkMTg4OTgyMjY0MzczYTVmMGQ0MTVlYTBkMjZlMCIsIm9iaiI6W1t7ImhlaWdodCI6Ijw9MTIxMyIsInBhdGgiOiJcL2ZcL2ViNmFkMTBlLTFkYzctNDZlMS04N2VmLTBhMjJmN2RhN2EyZVwvZGpvNDNiby05ZGMyNGU2Mi02ODYxLTQxNjgtYTEzMy1hMTA3NGFiNjYxMDQucG5nIiwid2lkdGgiOiI8PTEyODAifV1dLCJhdWQiOlsidXJuOnNlcnZpY2U6aW1hZ2Uub3BlcmF0aW9ucyJdfQ.EELndu5Fhxs5aodzGttSHiq_aITBUUM-X25qSOGiT4Q&quot;&gt;


* Grant the mad woman&#39;s [[wish-&gt;End of the kingdom bad end]], Vay has no choice!

* This is insane! Getting back to normal isn&#39;t worth dooming the city over! [[Refuse!-&gt;Helpless balloon (night)]]</tw-passagedata><tw-passagedata pid="54" name="Helpless balloon (night)" tags="" position="3150,1150" size="100,100">//&#39;&#39;Helpless ballon part three&#39;&#39;//

(text-colour:#ff7070)[“I can’t do that, way too risky, especially in the hands of someone like you.”] The genie answered honestly. 

(text-colour:#a27549)[“I don’t care what you think, just grant it, damn it!”] The woman wound up a punch out of anger and let it fly, only for it to sink into Vae’s balloony side and bounce back, smacking its owner in the face. 

Vae heard her fall to the ground, muttering every swear word the genie knew along with several new ones. 

(text-colour:#a27549)[“That’s it, I’m staying right here until I either get my fucking wish or I get to see you blow with my own eyes!”] The mugger promised.

Sadly, she wasn’t bluffing. The criminal seemed to have dragged a barrel or crate over and made herself comfortable upon it. So, the hostage taker and the ballooned genie sat in the center of town, with the former occasionally barking her demand for a wish and scaring off anyone who came too close, like a scavenging animal enforcing its claim. 

As hours passed, Vae’s condition worsened rapidly, the magical pressure incubating inside of her forcing her body ever tighter. Her body became even more spherical and rounded, her appendages sinking into the fat domes her limbs had devolved into. Her head appeared to sink into her torso, but the truth was that her torso had become so full that it had puffed up and around her head.

(text-colour:#a27549)[“Ok, you&#39;re looking pretty tight now, last chance.”] The mugger threatened, pulling out her knife and aiming it like a pin at a balloon. 

The genie didn’t respond… at least with words. The best she could do was muffled moans and groans of panic and discomfort. Her face was too full and too buried for speech to even be possible any longer. 

(text-colour:#a27549)[“Ah, already past that point are we? Disappointing. Oh well, hopefully you’ll be better fireworks than a wish granter.”] The mugger stood up, her boots clicking ominously on the brick courtyard as she approached. 

&#39;&#39;*WHACK!* &#39;&#39;

Then her armored body clattered to the ground loudly, the dagger sliding out of reach. 

(text-colour:#a27549)[“Hey, what the fuc-”] 

&#39;&#39;WHACK! &#39;&#39;

(text-colour:#75c624)[“Miss Vae, are you alright?”] The voice of tilly revealed itself. (text-colour:#75c624)[“You look awful. I’m really, really sorry! I meant to come back sooner but that scary lady was there and it took me a while to work up the courage to even do that, even after that orc let me borrow his club…”] 

If Vae could hear the apology, she gave no sign of it, too preoccupied with attempting not to pop, although the creaking noises made it clear that it was a fruitless effort. Tilly grew more fearful, beginning to panic as it was clear the genie was completely out of control and on the verge of exploding. Should she run, get help? No, that’d take too long? What could she even do?


[[POP! -&gt;Helpless balloon, pop bad end]]

[[Anything but that!-&gt;Helpless balloon, no pop bad end (infinite growth)]]</tw-passagedata><tw-passagedata pid="55" name="Helpless balloon, pop bad end" tags="" position="3300,1175" size="100,100">//&#39;&#39;Vae-fetti&#39;&#39;//

As Tilly stood stupefied in front of the blooming Vae, she found herself completely unable to properly think in the face of this overwhelming problem. Panicked and strained vocalizations came out muffled from the magic filled genie sphere, sounding pained and on the very brink. Time slowed. Vae gave out one last, disappointed muffled whimper. 

&#39;&#39;Bang!&#39;&#39;

In an instant, the floating strained figure burst, replaced by rubbery skin and red-orange confetti that sprayed across the town square with the force of a grenade. The town guards, who had taken very little interest in the events leading up to the explosion rushed over, unable to ignore their duty any longer.

“Oi, what&#39;s the fuck just happened.” A balding older one asked Tilly. 

She didn&#39;t respond, too preoccupied with her shock at the sudden yet preventable death of the genie and the trauma of having her remains pasted onto her. Slowly, she turned to the guard, the motion causing a scrap of skin and many flakes of confetti to peel off.

(text-colour:#75c624)[“M-ma-magical b-ba-backup.”] She stuttered out, her mind barely her own at the moment. 

“Ah, genie.” The man nodded, somehow speaking as though he had run into this situation before. He turned to the other guards and began to give orders. “Dale, run along and grab an urn from the undertaker, borrow his broom too. Josh, take the young lady here and clean the viscera off of her. Maybe take her to see the  swamp witch for a memory wipe if she&#39;s still shook up after.”


[[The end-&gt;Credits]]
</tw-passagedata><tw-passagedata pid="56" name="Helpless balloon, no pop bad end (infinite growth)" tags="" position="3250,1325" size="100,100">//&#39;&#39;Flesh moon&#39;&#39;//
(text-colour:#75c624)[“I wish you wouldn&#39;t pop!”] The words left her mouth before Tilly could even realize what she was even saying. 

An orange aura surrounded the overfilled genie for a second before disappearing. Vae let out a low fearful groan as a loud creaking sound emanated from her body. With the fear that the worst had come to pass, Tilly dove onto the ground and covered her ears, bracing herself for the inevitable explosion. 

Moments passed…

She reluctantly removed her hands from the sides of her head, confused. Instead of a singular loud pop, a persistent pneumatic hissing sound hung in the air instead. Looking back, she was shocked to see Vae growing even larger than before and at a blistering speed. Her crimson garments tore and ripped away, the stretchy materials finally outgrown by their overflowing owner&#39;s blimp sized mass. Tilly screamed as she spotted the rope around the genie&#39;s ankle come undone, allowing her to begin to float away like a balloon. 

The housekeeper screamed for help as she pathetically jumped in an attempt to keep her friend from floating away, but her attempts fell comically short. A crowd now surrounded the scene, no longer being held off by the threats of the muggee and attracted to the bizarre scene. Someone put a hand on Tilly’s shoulder as she looked teary eyed into the sky. The entirety of Verdantveil could do little but watch as the genie floated helplessly into the clouds.

----------------------------------------------------------------------------------------------

Two hundred years later.

Verdantveil had become quite a popular tourist destination, outgrowing and shedding the mere position of a middle man&#39;s trading hub. Honeymooners came for the romance, families came to see the wonder of its mysteries, mages and scientists alike came to study the unusual phenomena that its skies held. 

The flesh moon.

Nearly the entire sky above the city was taken up by a pale skinned moon, vaste and smooth like rubber. It had first been spotted decades ago, and had been growing larger ever since. Priests claimed it was some omen, a great spirit sent by their respective gods to signal everything from abundance to the end times. Mages claimed it was magical rather than divine in nature, claiming to sense an unprecedented amount of latent magical potential inside. A few fools attempted to devise ways up to the moon, so they could claim this godly power source for themselves but scientists often shut them down. Astrologists calculated that the moon was actually drifting further and further away from the planet, and that it was growing so exponentially fast that it was managing to appear bigger despite its ever increasing distance. 

All of these were true, of course, in their own way. 

However, behind the spectacle and mystery of the now iconic orb, there was a forgotten sadness. Indeed, no one ever put the pieces together between the moon&#39;s arrival and the vanishing of Vae the genie, her name long forgotten and her legacy solidified as a cosmic oddity. 

//&#39;&#39;You got the float away ending &#39;&#39;//

[[The end-&gt;Credits]]
</tw-passagedata><tw-passagedata pid="57" name="Very good karma ending" tags="" position="3300,0" size="100,100">//&#39;&#39;Vae-cation
&#39;&#39;//

Vae woke up, feeling refreshed and determined to have a relaxed day for once as she peeled the sheets off of her. Getting the feeling that the lobby was a bit too busy for her taste in the morning, she opted to fly out the window and head out to the bar for a morning pint at a pub. Not that alcohol did anything good or bad for her, but because she really felt like she needed someone new to talk to and get some perspective. Since therapists aren&#39;t a thing yet in this particular universe, a bartender was the closest fit. 

She went far to the edge of the city, past the gates to an outlying hamlet she&#39;d never even seen before. One pub caught her, halfway between a thatched shack and a meeting hall. She entered and found the place dead, the early morning hours only playing host to the washed up and mostly passed out veteran drinkers from the night before. The bartender, a tall broad human man with a head as clean and shiny as a pearl, put down the colorful magazine he was critiquing and scrambled to make himself look professional. 

“Five o&#39;clock somewhere?” He asked in a voice as rich and solid as a masterwork mahogany table. 

(text-colour:#ff7070)[“Nah, I make my own hours.”] Vae replied as she hoisted herself onto an uncomfortably curved wooden stool. (text-colour:#ff7070)[“Need to clear my head, I think.”]

“I&#39;d say so!” He laughed, although his genuineness was unclear. “If you think going to a bar at nine in the morn’ is something people do to clear their heads, then yours must be a fog.”

She laughed along with him, and the fact it didn&#39;t devolve into awkwardness made her sure it was genuine. 

(text-colour:#ff7070)[“If I&#39;m honest, it&#39;s just an excuse to talk. Alcohol doesn&#39;t do anything to genies.”] She admitted the truth, testing her limits. 

“Alright then, what&#39;s on your mind?”

(text-colour:#ff7070)[“Just tired. I&#39;ve been putting in good work recently, making people&#39;s lives better. Just kinda getting sick of the routine, ya get me?”] She gave him a forlorn, tired look with her eyes. (text-colour:#ff7070)[“Day in, day out. Wake up, spend half the day looking for someone who&#39;s even willing to give me a chance, pray that it isn&#39;t something weird or evil, and try my best not to fuck it up. If I can&#39;t, I&#39;m liable to blow up. Literally exoplode. I&#39;d kill for a vacation.”]

“You mean you&#39;re wishing for one?” The man chuckled, aware of the irony. 

(text-colour:#ff7070)[“I avoided that wording for a reason”] Vae laughed back, having to fake it herself now. If it wasn&#39;t required for her to survive, the word wish would be her most hated piece of the English language, followed closely by fairy. (text-colour:#ff7070)[“Before you ask, no I can&#39;t use my own wishes myself.”]

“I wish you were sent on vacation to somewhere you didn&#39;t have to worry about exploding or whatever.” 

(text-colour:#ff7070)[“What?]” Vae said not quite understanding the bartender&#39;s jump in the conversation. 

“You said you can&#39;t make your own wishes, but if I make your wish for you, then you can do that, right?” The bald man gave her a wink, his caterpillar eyebrows selling the expression more than his eyes did. 

(text-colour:#ff7070)[“Huh…”] She let out a curious noise. She&#39;d considered the idea, but had never actually tested it. 

&#39;&#39;*SNAP*&#39;&#39;

----------------------------------------------------------------------------------------------

Another quiet day on the Idle De GaraGara. Wind blew harmlessly across the white sandy beaches and rustled the leaves of the palm trees. Kind fluffy clouds decorated the skies and provided shade at just the right moments for the resort’s guests. Surfers laughed as they challenged the perfect waves, old folk patrolled the sandy beaches during relaxed walks, their footsteps magically disappearing to maintain a clean appearance, and kids screamed with joy as they rocketed down the safest and fastest waterslides in any pocket dimension. 

Ruu plucked a coconut from the miniature tree next to the reception desk, and sipped on the straw that magically appeared as she lifted it to her face. 

&#39;&#39;ZAP &#39;&#39;

She looked up, unconcerned, to see the source of the electric noise. A new guest, some freckled redhead with curly hair and wings and panicked deer-in-the-headlight eyes. She sighed and tossed her drink aside and pulled the registration book forward. 

“Welcome to Isle De GaraGara, name?” 

(text-colour:#ff7070)[“Where am I? The fuck happened? How do I get bac-”] Vae began to freak out, flying upward and shimming about the air in random directions as she took in her environment. 

“No flying in the lobby. I don&#39;t want to pry another magical being out of the chandelier for at least another month.” Ruu warned as she pulled on the girl&#39;s foot and brought her down in front of the desk.

(text-colour:#ff7070)[“Where am I?”] 

“Already said, Isle De GaraGara. Name?”

(text-colour:#ff7070)[“Vae. Never heard of this place, where exactly is this place, the South Netramaic sea?”]

The receptionist sighed heavily. 

“I have no idea how these dumb fucks keep coming here on accident.” She mumbled as she rubbed her temples. “This is a pocket dimension. We&#39;re not anywhere but GaraGara.  This is everything.”

“Wait, so my magic sent me here? I don&#39;t think I can stay, I left all my luggage back at the their inn and I need to check out by-”

“Chillout. Time doesn&#39;t doesn&#39;t exist here and this place provides everything you&#39;ll ever need.” A bottle of water and some aspirin appeared in the grumpy greeter&#39;s hands as she held them out expectantly, getting tired of the newcomer already. “Trust me.”

(text-colour:#ff7070)[“Time… doesn&#39;t pass?”]

“Nope. When you&#39;re done here, you&#39;ll be sent back right back to where you were… well, five seconds after. Bosses thought a little buffer was a good idea after… ah nevermind.” Ruu gave up as she swallowed the medicine for her headache. 

(text-colour:#ff7070)[“So, I just hang out here for however long I want?”] Vae asked, the reality dawning upon her that her own wish might&#39;ve actually been granted. (text-colour:#ff7070)[“And I&#39;m not going to explode after three days or anything?”]

“No idea what kinda bullshit would cause that, but also no. Time doesn&#39;t pass, physically anyway. You&#39;ll mentally experience time, but that&#39;s just an illusion to keep everyone sane. Nothing about you or your body will change unless you want it to.”

Vae&#39;s attention shifted to the windows all along the lobby, giving her the perfect view of the lapis blue waters, the late evening orange sky, the beautiful environment and nearly every attraction on this side of the island. 

(text-colour:#ff7070)[“And I can do whatever I want? Relax without consequences?”] 

“Completely correct, you exploding freak.” Ruu confirmed as she materialized a magazine in her hand and put her sandaled feet up on her desk. “Go enjoy yourself already, leave me to my air conditioning.”

----------------------------------------------------------------------------------------------

Jim felt good about himself. He wasn&#39;t quite sure where that odd lady went after she snapped her fingers and disappeared in a flash, but he suspected it was somewhere nice. 

&#39;&#39;BANG&#39;&#39;

Another flash of orange light erupted mere seconds later, and something heavy fell onto the two barstools in front of him. It took his eyes a moment to adjust, but he could scarcely believe what had appeared in front of him.

It was a large, chubby woman. 

Her skin was a smooth coconut tan, her hair a bleached blonde, her eyes obscured by an odd pair of blackened gasses. Her thin lips sipped idly on a straw, drawing up a pink liquid from a delicate cone shaped glass. Every detail of her figure was clear as day to him, due to her barely wearing anything at all, just what he guessed to be some thin stringed undergarments and a pair of sandals. 

She was a soft pear, with wide hips that filled the two barstools she had landed on and large round breasts that were barely contained by her bikini top. In-between a slight belly peaked between her two greater assets, like a great moon overshadowed by larger, grander planets. She wore a smile on her face and swung her feet as if she were on a swing,

“Who the fuck are you?!” The bartender yelled, all of his suave and cool demeanor completely eroded by this sudden surprise. 

(text-colour:#ff7070)[“It’s me, the girl *you* were just talking to.”] She said simply as she lowered her glasses and flashed her green eyes at him.

His jaw dropped, not believing what he was seeing. He leaned over the counter to look and confirmed it. Her larger frame blocked them from view, but from this new angle her red wings were visible. 

“You just left! How are you done already? Why do you look so different?!” 

(text-colour:#ff7070)[“Oh, you sent me where time is a bit different. No time really passed, but I’ve experienced about a year&#39;s worth. As for my looks, I just dyed my hair and got a tan, you drama queen.”] 

He wondered if she knew what other effects her apparently supernatural vacation had caused, before deciding that her fattened ass was the least concerning part of this. 

“A whole year? This is some mind bending shit!” 

(text-colour:#ff7070)[“Sure is.”] She said with a relaxed, unphased tone. Suddenly, a strange device strapped to her wrist made an odd rhythmic, high pitched sound. Vae looked at it, and hoisted her heavier body off of the twin stools, causing her rack to jiggle violently. (text-colour:#ff7070)[“Almost forgot, I gotta head back and check out of the Interlude. Amazing what you forget when time flies out the window.”]

“You’re going out dressed like that?!” He could help but ask, watching her practically naked bookshelf of an ass sway away. 

(text-colour:#ff7070)[“Good point.”] She said, before holding out her hand, seemingly expecting something. Nothing happened. (text-colour:#ff7070)[“Oh, right, this place is lame. Whatever. I’ll be back tomorrow old man, and I’ll pay you back with a wish of your own!]”

And with that, a very content and relaxed Vae re-entered the real world, refreshed. 

[[The end-&gt;Credits]]</tw-passagedata><tw-passagedata pid="58" name="Good karma ending" tags="" position="3300,200" size="100,100">//&#39;&#39;In-Vae-sting in local business &#39;&#39;//

Vae woke up slowly, although reasonably refreshed, taking her time to slowly get out of bed. Eventually, she got dressed and made her way downstairs, seeking to make use of the free continental breakfast before gathering her things and moving on to the next town. As she scooped up a bowl of the communal soup from the coldiron, she couldn’t help but feel Tilly gazing at her from across the room. It was obvious the girl had something she wanted to say, but couldn’t quite work up the courage. Eventually, she walked over with a fresh pot of homemade coffee, and refilled Vae’s cup using a large clay pot. 

(text-colour:#ff7070)[“Thanks Tilly, appreciated.”] The genie lifted her mug in a toasting motion. 

(text-colour:#75c624)[“Oh, my pleasure.”] The mousy woman replied in kind, her voice happy and sing-song.(text-colour:#75c624)[ “Although admittedly it’s more of an excuse to ask you something.” ]

The genie took a sip of her drink, but nodded for her to go on. 

(text-colour:#75c624)[“I’d like to ask you to stay permanently here, the room is yours, for free, forever.” ]

A torrent of coffee spat out of the genie’s lips, flying across the room in a stream comparable to a super soaker. Luckily, the stone golem it splattered on didn’t seem to even notice the splashing liquid or the searing temperatures as it crashed on his rough back. 

(text-colour:#ff7070)[“Holy hell, that’s quite an offer, however I can’t take advantage of your generosity like that!”] Vae panically said, completely caught off guard. (text-colour:#ff7070)[“Besides, I’ve always traveled.”]

(text-colour:#75c624)[“Why?”]

Vae paused. It was a simple question, but one with deep, deep roots for her. Before she could over think it however, Tilly stole her attention again. 

(text-colour:#75c624)[“Maybe you’ve never found the right place, but you gotta admit Verdantveil might be the best option you’ve ever had!”] Tilly said, practically beaming with excitement as she let it fly. (text-colour:#75c624)[“I’ve been hearing about some of the wishes you’ve granted, the people you’ve helped. You’re practically a fairy godmother or an angel or something!”]

(text-colour:#ff7070)[“You&#39;re exaggerating…”]The genie’s freckled face blushed heavily, attempting to stand and walk away, her subconscious screaming to flee from the inn to keep the comfortable status quo. 

Tilly grabbed her by the hand gently and put her other palm over the spirit’s.

(text-colour:#75c624)[“But I’m not! Today I’ve had people showing up, asking if they could see you, so you can grant their wishes! Not all of them were the stand up sort, but people are going out of their way to look for your services. People trust you!”] 
 
(text-colour:#ff7070)[“I’ve made mistakes, done some wishes wrong, lost my temper, refused wishes out of spite.]” Vae spoke with the self confidence of a sea slug. It was unclear if she was speaking of events exclusive to Verdantveil or generally throughout her life. 

As if on cue, a couple other of the inn’s guests took notice of the conversation, and chimed in.

“Oh, I heard from a half cousin of mine that you helped them with some… body image issues. They’re a lot happier now.” One hobbit girl spoke up.

“You’re that Vae girl everyone’s been talking about?” The stone golem from before turned around, his gem filled mouth gleaming like the sun as he looked at her with glee. “I’ve been hope’n to meet you. I need a wish, my adopted daughter is a human, but I can never match her sleep schedule. Can you make it so that I don’t ever need to sleep so I can spend time with her?”

(text-colour:#ff7070)[“Of course!”] Vae beamed as she snapped her fingers and let the golem be free of his need for rest. 

He ran off with thumping footsteps and excitement, crashing through the door and calling down a heavy duty carriage, presumably of to see his kid.

(text-colour:#ff7070)[“Holy shit, I’ve never gotten a wish off that fast. I ain’t even done with breakfast yet.”] The genie said in astonishment. 

(text-colour:#75c624)[“Miss Vae, I’ve got a wonderful business idea for you.”] 

----------------------------------------------------------------------------------------------

The Interlude Inn was no more. Instead, the Wishing Wellness was reopened right where it had once been. Every work day of the work week, a random guest would be selected at the end of the night and have their wish granted (within reason and law) by the in house genie. It became the most visited and popular inn in the whole city, with several expansions and rounds of hiring just to keep up with demand. The buildings next door, the ones that seemed to squeeze the inn between them beforehand, now were absorbed and rebranded. 

Vae and Tilly raked in the dough, albeit after one slightly selfish wish transferred ownership to Tilly, although in Vae’s estimation she had put enough time for her to buy it twelve times over. At first the genie was worried that the monetization of her ability would be for the worse, but it turned out surprisingly fine, with the travelers wishes being none too demanding or bad faith. Still, she enjoyed the weekends where she did things the old fashioned way. ‘Charity’ she’d joke with Tilly. 

Of course, there were some side effects of her more sedentary lifestyle, not that she really minded. 

Her meager frame didn’t last long, not because she got greedy nor spoiled, but because she finally, for the first time in her long existence, got fully comfortable. No more field rations on long trips between cities in her carriage, or spending all day walking around foreign and mysterious cities, begging and praying to find a wish. Instead, she played the hostess and mascot at the most popular bar and hotel in town. 

Tilly’s cooking got better and better as she got more time to practice with her newfound freetime, and although she didn&#39;t need to take part in the taste testing, Vae was more than willing. Her legs bloomed into plush and shapely pillows, which she put to good use, letting Tilly take frequent naps on her lap like an old happy cat. Her chest also developed quite nicely, going from oranges to melons over the course of a couple years. The rest of her got heavier too, but she looked no worse for wear, almost like this had been what she had always meant to be. Even her sister Bee commented on it once, saying she finally grew up, much to said grown up’s annoyance. 

Still, in her short immortal existence, this was easily the best phase of her life so far. 


[[The end-&gt;Credits]]
</tw-passagedata><tw-passagedata pid="59" name="Neutral karma ending" tags="" position="3300,400" size="100,100">//&#39;&#39;Ine-Vae-itible regrets &#39;&#39;//

Vae woke up, her tiredness gone but finding the itching blankets rather annoying. She threw the cover aside and rested for another hour, naked on the mattress and hugging a pillow to get some more rest in before getting a move on. Eventually she managed to drag herself back into self awareness. Slowly she dressed herself, collected her belongings, packed it all up into her cases, and vacated the room by eleven. 

As she approached the front desk, she was surprised to see Tilly talking to some other people also in uniform. Vae waited until they left before approaching, out of consideration.

(text-colour:#ff7070)[“Looks like you’ve finally gotten some help.”] She said in a playful way as she tossed the keys back onto the counter. 

(text-colour:#75c624)[“Oh, yeah. Took them long enough if you asked me.”] The receptionist said, letting out some rare annoyance. “I can finally just man the front desk again.”

(text-colour:#ff7070)[“Glad to hear it! It’ll relieve my worry greatly that things have worked out for you, before I leave. Especially since you never took a wish.” ]

(text-colour:#75c624)[“You&#39;re leaving? No way!”] The girl was taken by surprise, nearly flinging the reception counter over.  

(text-colour:#ff7070)[“Sorry, but I think I’ve spent enough time in Verdantveil, time to move on, ya know?”] The genie shrugged. (text-colour:#ff7070)[“It’s more or less how I do things.” ]

(text-colour:#75c624)[“Why don’t you put down roots? I’d be more than happy to give you that room permanently, if you’d have it.”] She offered, holding out the keys again. 

“Look, it’s not that I dislike this place at all, it&#39;s just not a good idea. I try to do my best to do good things for people, but things just don’t work out sometimes. I let the frustration get to me, choose a poorly worded wish, or just reject a wish I shouldn’t have. People get mad, and people remember. Even if I’m welcomed by most people, there’s always one who holds a serious grudge.” The magical woman vented, these thoughts being on her mind for a very long time. 

(text-colour:#75c624)[“Wow, that’s a lot…”] Tilly responded, deflated by the sheer pessimism. (text-colour:#75c624)[“Is there anything I can say to change your mind?”] 

Without responding, Vae took flight with luggage in hand. She leaned over the counter and gave the mousy girl a one armed hug. 

(text-colour:#ff7070)[“Don’t worry about me now. It’s just life.”] She whispered, revealing some deep soul scars to the mortal woman.

That was the last bit of the conversation. Vae left, loading her luggage into her carriage, still parked exactly where she left it. A couple parking tickets were taped to the side, which she quickly tore off and tossed away. Bonus perks for leaving town. As she opened the door and stepped in and took one last look at the Interlude Inn, before dismissing some silly ideas. She slammed the door and the carriage got moving. 

----------------------------------------------------------------------------------------------

Sometime, long into the future.

Heavy wind blows through a far north border city. Inside its tall grey, snow blasted walls, thousands of buildings shine with warm orange and yellow candle light. It glows and reflects off the gold and other metal animations that decorate the buildings opulently. Somewhere in the depths of the metropolis, a bar tightly packed between larger buildings is alight with mirth and drunken singing. If you were to look through its frost bitten windows, you would see a mousy bartender attempting to keep an army&#39;s worth of men satisfied.

(text-colour:#b87cf3)[“Vae!”] Bee yelled, attempting to get her sister’s attention.

(text-colour:#ff7070)[“Oh, uh, sorry.”] Vae stammered, her unfocused stare at the familiar looking bartender broken. Her cheeks were flushed pink and her demeanor unsteadied by some special treats her sister had introduced to her. (text-colour:#ff7070)[“What are we talking about?”]

(text-colour:#a7fbfb)[“We are discussing a method to free you and your sister of the wishing curse, the buildup of magic.”] The ice witch they had met explained through her thick accent. Her skin was pale and her eyes were narrow piercing things. Vae could swear that her breath was visible as if were cold behind her ever present scarf, despite them being next to a roaring fireplace. (text-colour:#a7fbfb)[“You should be paying far more attention, my dear. If you missed out on this, I’d be the biggest regret of your immortal life.”]


(text-colour:#ff7070)[“I don’t know…”] Vae said, looking back at the strangely familiar hostess. (text-colour:#ff7070)[“Forever gives you a long time to make regrets.”]


[[The end-&gt;Credits]]</tw-passagedata><tw-passagedata pid="60" name="Bad karma ending" tags="" position="3300,625" size="100,100">//&#39;&#39;Vae-ry unpopular&#39;&#39;//

Vae woke up to knocking on the door of her room. She grumbled angrily as she tossed herself out of bed, picked up her wrinkled clothing from the floor and tossed it on. Opening the door, Tilly greeted her, her usual nervousness replaced with full on panic. 

(text-colour:#75c624)[“Miss Vae, I&#39;m afraid I&#39;ll have to ask you to leave.”] She said very quickly. 

“Look, I know it&#39;s the day I check out, but can&#39;t you let me sleep in until ten at least?” The genie asked as she blinked slowly at Tilly. 

(text-colour:#75c624)[“Oh, uh, no it&#39;s not quite that, I&#39;m afraid. It&#39;s something more urgent.&quot;]

As if on cue, a brick crashed through the room&#39;s window. Two women cautiously walked over, and dared to peek outside. 

In the town square outside, an angry mob roared for the genie to show herself. Many races and classes of people made up the whole of the mob, from poor hobbit farmers to the richest of humans (who brought their hired goons to participate in the mob madness on their behalf), and even the town guard themselves.

“Vengeance!” One low, gruff voice cried. 

“Impale the succubus!” A woman’s voice called, with a long pointed stick raising above the steaming mad heads of the mass. 

“Death to the malicious demon!” A pastor encouraged, adding the ingredient of religious fervor to the crowd’s stew of anger. 

(text-colour:#75c624)[“I take it that your wishes didn’t turn out so well.”] Tilly guessed, with a few scarce clues and some good deduction. 

“Maybe I was careless with some.” Vae said with a firm defensive tone. “Or a little mean spirited.”

(text-colour:#75c624)[“Whatever it is that you did, I expect you to pay for the window and get outta here before they toss a lit liquor bottle instead of bricks.”]

“You can keep my luggage as payment for the window. You got a chimney?” 


----------------------------------------------------------------------------------------------

Ash and soot sputtered out of the top of the Interlude inn’s brick chimney, as well as echoed grunts. runts. A blackened hand sprung from the whole and gripped the edge, and a smokey genie emerged alongside a cloud of pure black particles with her. Scuttling out like a winged rat, she flew up and away from the inn, never more thankful that ground bound races never thought to look up than this very moment. 

Every belonging she had ever accumulated was left behind. The carriage, her luggage, her journal, everything. Still, it was all a small sacrifice in the face of a raging crowd. Vae willed herself higher and higher, never daring to look down and aiming for the clouds far above to use as cover for her escape. Afterall, there was the chance that they caught sight of her and followed her, waiting for her to land before jumping her. It happened to her sister Bee once. 

As she broke through the cloud layer, she felt the soft moisture surrounding her, and she switched from flying to swimming as she moved through it. It was much thicker than expected for some reason. Air struck her skin, and she blinked rapidly as a bright light stunned her vision. Must be the sun. 

Then, a scream rang in her ears, and droplets of water battered her head. As her vision cleared, she saw that she was in a shower of some sort, with naked men standing all around. They all had pointed ears and light blue skin, almost alien, but they were probably some kind of exotic elf. 

“Pervert!” One yelled.

(text-colour:#ff7070)[“Wait wait wait!” ] 

 Someone smacked her in the back of the head with a metal water pale, knocking her out. 

---------------------------------------------------------------------------------------------- 

Jules sat in his cell, observing the surface world below through the clear glass floor of his cell.  It was calming in a way, a sort of meditative practice he had picked up during his incarceration. He had to admit, pushing Dale off the cloud island wasn’t particularly cool of him, but a year in jail was entirely too long of a sentence when the bird riders saved him in under a minute flat. Still, six months in, things were looking up. 

Suddenly the door opened, and the sheriff commanded him to stand on the far side of the wall. He complied. A red headed woman with wings was shoved into his cell, rubbing her wrists from the soreness of the cuffs they had just removed, just like he remembered when he had entered. 

“Bunk buddy?” He asked as the door slammed behind her. 

(text-colour:#ff7070)[“I suppose.”] She said, (text-colour:#ff7070)[“What are you in for?”]

“Attempted manslaughter. You?” 

(text-colour:#ff7070)[“Breaking and entering. For my part, it was accidental. Anyway…”] A scheming smile crossed Vae’s lips. (text-colour:#ff7070)[“Have you ever wished for anything?”] 

[[The end-&gt;Credits]]
</tw-passagedata><tw-passagedata pid="61" name="Very bad karma ending" tags="" position="3300,800" size="100,100">//&#39;&#39;E-Vae-l Spirit&#39;&#39;//

Vae never woke up.

Not because she had passed away in her sleep, but because she changed into something else during the course of her sleep. 

Genies are spiritual beings and that comes with certain rules and aspects to it. For one, even if distracted and sometimes counted as trickers, genies are generally benevolent creatures. Unfortunately for her, her wishes over the past three days proved to be constantly malicious in a manner that either signaled her extreme incompetence or purposeful cruelty, she was no longer regarded as a benevolent spirit. 

No longer a genie, but a djinn, a malicious wish spirit bound to a physical object that grants wishes to the owner of the object. These wishes always come at a cost, however. 

In the bed where Vae formally slept, a lamp now sat firmly between the cushions. The housekeeper, Tilly, knocks on the door, giving the curiosity call given to every guest at noon. She opens the door after a minute of knocking and no reply. She looks around the barely touched room looking for Vae, but to no avail. Eventually with no other choice, she searches under the blanket of the bed and only finds a silver oil lamp.

(text-colour:#75c624)[“Odd place for this.”] She says to herself as she picks it up. 

As her fingers touch the cursed object, a spew of smoke spills out from its spout, causing the young woman to drop it harshly on the ground. The smoke takes shape, solidifying into a gray, sinister figure with ashy grey skin and red eyes. It was notably more insectoid than its former incarnation, with sharp features and even some of her forearms. Smoke bellows from the figure’s scalp, forming a gaseous illusion of hair.

(text-colour:#75c624)[“W-who are you?”] The house keeper asks, taken aback by the unknown figure. (text-colour:#75c624)[“Where’s Vae?”] 

The stranger smiled, revealing many long, sharp teeth that resembled needles. 

(text-colour:#8b5555)[“Oh, don’t worry about her, she’s old news. Now, may I offer you three wishes?~” ]

//&#39;&#39;You got the evil spirit ending&#39;&#39;//

&lt;img src=&quot;https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/f/eb6ad10e-1dc7-46e1-87ef-0a22f7da7a2e/djo43d7-3f0b118d-756e-4bac-9d94-f1a9bc4e5ff4.png/v1/fit/w_716,h_1800,q_70,strp/evil_vae_2_by_nopehome_djo43d7-375w-2x.jpg?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1cm46YXBwOjdlMGQxODg5ODIyNjQzNzNhNWYwZDQxNWVhMGQyNmUwIiwiaXNzIjoidXJuOmFwcDo3ZTBkMTg4OTgyMjY0MzczYTVmMGQ0MTVlYTBkMjZlMCIsIm9iaiI6W1t7ImhlaWdodCI6Ijw9MzIxOSIsInBhdGgiOiJcL2ZcL2ViNmFkMTBlLTFkYzctNDZlMS04N2VmLTBhMjJmN2RhN2EyZVwvZGpvNDNkNy0zZjBiMTE4ZC03NTZlLTRiYWMtOWQ5NC1mMWE5YmM0ZTVmZjQucG5nIiwid2lkdGgiOiI8PTEyODAifV1dLCJhdWQiOlsidXJuOnNlcnZpY2U6aW1hZ2Uub3BlcmF0aW9ucyJdfQ.q3rtCg_6x45EpnWWRoFdZWnbommRbvwjSMpaCGZ_Lug&quot;&gt;


[[The end-&gt;Credits]]
</tw-passagedata><tw-passagedata pid="62" name="Fisherman good end" tags="" position="3000,100" size="100,100">//&#39;&#39;A good day’s catch&#39;&#39;//

(text-colour:#ff7070)[“Hun, this isn’t something that needs magic to fix.”] Vae said honestly, placing a hand on the plump woman&#39;s shoulder (feeling slightly weird as it sunk into her ample flesh). (text-colour:#ff7070)[“You just need to be there for your friend. Hell, maybe you could… ya know, tell him how you really feel.”]

(text-colour:purple)[“W-what are you talking about?”] The merchant stammered, her face reddening as her obvious crush was finally called out.

(text-colour:#ff7070)[“Stop playing dumb and take your shot.”] The genie huffed exhaustedly. (text-colour:#ff7070)[“Here, let me help you out.”]

She grabbed the collar of the woman&#39;s dress and yanked down. The few top buttons on her dress burst off, granting freedom to the fatass’s gigantic breasts.  They surged forward and bounced heavily, eventually coming to rest like two overstuffed pillows half wrapped in the remains of her elegant top. The merchant began to protest, but Vae maneuvered around her, flying up and around to her backside. She undid the pins and curls holding her chestnut brown hair in an elegant bun, letting it down loose and free. It was thick, long, and glossy like expertly woven silk. Lastly, she plucked away at her corset’s restraining strings, loosening it and causing the trader woman to gain several inches around the waist. 

(text-colour:purple)[“Is that really necessary?”] The merchant yelled as her hands flung to her newly loosened belly fat.  

(text-colour:#ff7070)[“If I’m right about what kinda guy he is, then yes.”] The genie confirmed before shoving the nervous woman out from around the corner and towards the fisherman. (text-colour:#ff7070)[“Play it cool.”] 

The plump trader looked back with some frustration, but relented and looked forward at her target, taking a moment to compose herself and fix her loose hair. She strutted forward, attempting to emphasize her hips, although the fisherman didn’t seem to notice. 

(text-colour:purple)[“Hi Abner~”] She greeted in a carefully gentle and warm tone.

(text-colour:#ff7070)[//‘Who names their kid Abner?&#39;//] Vae thought as she watched on from around the corner.

He didn’t respond but it didn’t stop her from plopping herself down on the bench next to him, causing the wooden structure to creak as she did so. 

(text-colour:purple)[“Oh, you got me chocolates!”] She played dumb, picking up the expensive box of chocolates and opening them. 

Abner didn’t respond, but he took his face out of his hands and looked at her with some confusion. She plucked a few chocolates using two fingers, slowly eating them as part of the act but unironically enjoying the rich flavors. 

(text-colour:purple)[“Man, these are fantastic!”] She cood through stuffed cheeks. (text-colour:purple)[“I guess I’ve got no choice but to take you on a date to pay you back.”] 

(text-colour:#24b2b2)[“G-Gila?”] He stammered, confused. Yet the blush creeping across his face made it clear that he wasn’t too upset by this turn of events. Perhaps he had never thought of his best friend in this way before, but now that the possibility was presenting itself, things were different. 

(text-colour:purple)[“Don’t think I haven’t noticed how you looked at me ever since I caught that lucky break. You enjoy voluptuous women don’t you?”] 

He was rendered speechless, taken aback by her sheer straight forwardness. Gila grabbed his hand and guided it to the chocolate box. He picked one up, and she brought his hand to her mouth. He fed her and she moaned in response. Needing no more guidance, he continued to feed her, piece by piece. The smooth collection of gourmet sweets slowly disappeared one by one past her luscious lips. By the time they were done, her plump arm was wrapped around his shoulder and him leaning onto her plump frame, using her boobs as a pillow as he subsided into a state of bliss. 

(text-colour:purple)[“Man, I sure wish we were on that date right about now. Somewhere nice and cozy.”]  Gola said loudly, dropping a none to subtle hint. 

Vae nodded from a ways off and snapped her fingers. The two disappeared in a cloud of orange smoke, teleported to the nicest luxury suite in the most expensive hotel in the city for some alone time, to certify the relationship. The genie felt good about this. Who said that a happy ending required the guy to get the princess in the end?
(set: $Karma to it + 1)

[[Vay is very tired-&gt;One last dream, before fate has its say]]</tw-passagedata><tw-passagedata pid="63" name="Show girls wish" tags="" position="2075,700" size="100,100">//&#39;&#39;Fighting puppies &#39;&#39;//


As Vae entered the pub, its warm wooden interior was wrapped in paper banners, flyers, and streamers featuring complex designs in rainbow colors. Nearly every table was crowded with people, self separated into various teams. Seemingly half the city was crammed tightly into the booths of the bar, and seemingly every species, gender, and creed was represented by both the customers and the showgirls patrolling the room. 

She felt watched, as if she were gazelle at a watering hole having unseen predators lick their lips in anticipation at the sight of her. As she approached the bar for a drink, she felt two sets of arms lock with hers by the elbow, and stole her away for a new destination. Still, they were gentle, and it didn’t take too long for two different feminine hands caressing her by the shoulders. 

(text-colour:#4e4e8d)[“Heya cutie, looks like you&#39;ve brought your own questions tonight, but don&#39;t worry, I&#39;m all the answers you need.”] A white haired dark elf said, fluttering her long eyelashes and heaving her barely decent cleavage at Vae from the left. 

(text-colour:#fbfbbc)[“Nah, she’s the wrong answer babe, a red herring.”] A pale high elf on the right said, her puffy blonde hairdo bouncing as they walked. She wore a mere vest rather than a proper top, and did her best to match her rival’s titillation without fully exposing herself. 

(text-colour:#4e4e8d)[“Oh please, don’t start with me, hussie! It’s obvious that you just want to shag her to get her wish! I bet you’re just gonna wish to have bigger tits than me, you jealous pale shit!”] The ashen one pointed an accusing, long nailed finger at the other.

The other gave her a death stare, and both women seemingly forgot about Vae despite their grips being ironclad as the argument flared. 

(text-colour:#fbfbbc)[“No I&#39;m not, I already have bigger tits than you! If anything, you&#39;d be the one making that wish, seeing how your chest resembles a slab!”]

The dark elf sent out a whipping palm that struck the high elf across her face, sending her makeup powdering through the air. The high elf responded in kind, stomping on her  opponent&#39;s foot with enough force to smash a pumpkin. The ashes skinned one groaned in pain and dove into the other, the two fighting and spinning against the edge of a table pike raccoons fighting over a discarded sweetroll. Various patrons suddenly took an interest and egged on the cat fight with drunken chants that drowned out the announcer hosting the trivia. 

(text-colour:#fbfbbc)[“Quick!”] The blonde one begged. (text-colour:#fbfbbc)[“I wish my breasts were always the largest in the room!”]

(text-colour:#4e4e8d)[“No! Don&#39;t listen to this bitch, she slept with over one hundred and eighty seven men! I wish my breasts were larger than hers!”] The dark elf floozie counter offered. 

(text-colour:#fbfbbc)[“You counted?!”] The other gasped before going in for a head butt. 

Vae stood unsure and very embarrassed at being made the unintentional center of attention in this drama. Perhaps she could slink away into the crowd? Then again, this was an opportunity to get her wish out of the way and these girls off her back. 



* [[Grant dark elf&#39;s wish-&gt;Show girl one&#39;s wish]], you like her style.

* [[Grant elf&#39;swish-&gt;Show girl two&#39;s wish]], se seems less seedy

(if:$Magicbuildup is 1)[
* [[Maybe you could spin this to your advantage...-&gt;Show girls wish (both, bad)]] in trivia.

* [[Grant both-&gt;Paradox bad end]], teach these two a lession about nagging a genie.]</tw-passagedata><tw-passagedata pid="64" name="Show girl one&#39;s wish" tags="" position="2225,675" size="100,100">//&#39;&#39;Audience participation &#39;&#39;//

(text-colour:#ff7070)[//‘Fine.//’] Vae thought to herself,(text-colour:#ff7070)[// ‘If it’ll get these two off my back. What’s the harm in either one anyway?’// ]

Slipping out of both of their grasps, she did her best to take up an authoritative stance, and took in a deep breath.

(text-colour:#ff7070)[“Alright, listen up you two, I’ve only got one charge, so I’m going to choose randomly. I don’t care which one of you gets this stupid tit job, so you better pray to whichever gods you worship that you get it.”] 

Their faces turned to anger, then determination, both willing to see how this played out. Instead of focusing on the genie who was the method of this gamble, they looked at each other with narrowed eyes and a hatred born of a long rivalry. They both took notice, however, when the wish granter outstretched her arm and pointed. Suspense filled the air as they waited for her choice. 

(text-colour:#ff7070)[“Eeny, meeny, miny, moe, Ted’s a dead man, but they let him go. Don’t hire Joe, you’ll be the next to go!”] Vae recited, her finger swapping from either woman along with the words. Just as the last word left her lips, it left her digit pointed squarely at the ashen haired dark elf. 

(text-colour:#4e4e8d)[“Fuck ya! In your face bitch!”] The dark elf gloated, her glazed white eyes wide with amusement.

(text-colour:#fbfbbc)[“Your kind has always been so immodest.”] The high elf huffed, before walking off, presumably to some far off corner of the pub to sulk or to find a man to bed for some private time. 

(text-colour:#4e4e8d)[“So says you! Always been racist, your whole kind!”] The dark elf floozie yelled at her opponent, seemingly unaware of the hypocrisy in her statement.  

Vae snapped, granting the wish without any of the fanfare or grace she usually provided, simply too annoyed to put up with either of them anymore. 

&#39;&#39;BWOOMPH&#39;&#39;

In an instant, the woman’s skimpy top burst off of her as her chrest became quite a bit larger than her rival’s, going from oranges to melons that could’ve easily won a produce contest. The skimpy top that had once preserved what little modesty she had was shot across the bar, wrapping around the legs of a waitress like bolas, causing her to trip.

(text-colour:#4e4e8d)[“Sorry!”] The balloon tited dark elf apologize, before turning her attention to Vae once more. (text-colour:#4e4e8d)[“By the way, guess I should pay you back for giving me these puppies, huh?”] She asked rhetorically, her voice suddenly gaining a calm and velvety tone and her hand once again stroking the genie’s arm very generously.

(text-colour:#ff7070)[“Uhhhh… truth be told I kinda wanted to play trivia.”] The redhead said, clearly still finding the whole situation still a bit awkward. 

(text-colour:#4e4e8d)[“Oh, you wanna play trivia, do you?”] With a snap of her own, the showgirl summoned many of her compatriots. 

A goblin, a few humans, and an orc all surrounded Vae, holding her gently and making various seductive and sultry noises. They all grabbed a seat at a derelict table (its previous occupants having been just thrown out due to drunken heckling that held up the event) and waited for the competition to begin. 

(text-colour:#4e4e8d)[“Thanks again darling, you did a really fine job with these. They look wonderful don’t they?”] The still topless dark elf said to Vae as she sat next to her.

(text-colour:#ff7070)[“Well I kinda just let the magic work but they do look pre- MMMPH!”] The genie was cut off, having her face shoved into the valley of dark ivory flesh. She did find it warm, although she found it hard to breathe. 

The dark elf moaned and cooed as she forced Vae to play with her newly acquired assets, with pinching, squeezing, motorboating, and even sucking. For her part, the young genie didn’t really mind, finding it quite pleasurable, having this saucy woman for a plaything. By the end of the night she only had one regret: 

It was so distracting that their team got last place.


[[Back to the inn again-&gt;Night two (no build up)]]</tw-passagedata><tw-passagedata pid="65" name="Show girl two&#39;s wish" tags="" position="2225,775" size="100,100">//&#39;&#39;Best seat in the house&#39;&#39;//

(text-colour:#ff7070)[//‘Fine.’//] Vae thought to herself,(text-colour:#ff7070)[ //‘If it’ll get these two off my back. What’s the harm in either one anyway?’ //]

Slipping out of both of their grasps, she did her best to take up an authoritative stance, and took in a deep breath.

(text-colour:#ff7070)[“Alright, listen up you two, I’ve only got one charge, so I’m going to choose randomly. I don’t care which one of you gets this stupid tit job, so you better pray to whichever gods you worship that you get it.”] 

Their faces turned to anger, then determination, both willing to see how this played out. Instead of focusing on the genie who was the method of this gamble, they looked at each other with narrowed eyes and a hatred born of a long rivalry. They both took notice, however, when the wish granter outstretched her arm and pointed. Suspense filled the air as they waited for her choice. 

(text-colour:#ff7070)[“Eeny, meeny, miny, moe, Ted’s a dead man, but they let him go. Don’t hire Joe, you’ll be the next to go!”] Vae recited, her finger swapping from either woman along with the words. Just as the last word left her lips, it left her digit pointed squarely at the blonde high elf.

(text-colour:#fbfbbc)[“It seems our ancestor gods have shown favor to me today, you salacious hussy.”] She bragged, her ego validated and inflated, talking about herself as if she had won anything particularly glorious, instead of winning magical breast enhancement.

(text-colour:#4e4e8d)[“Hold on, it’s not fair!”] The dark elf complained. (text-colour:#4e4e8d)[“That’s not a fair way to choose, it’s basically predetermined since you decide at what point to stop reciting the verse!” ]

(text-colour:#fbfbbc)[“Spoken like a true sore loser, as always. Come, grant the wish before this bitch tries something.”] The winner beckoned Vae to get it over with. 

With all the grandiosity and reverence of a parent giving into a nagging child, the genie snapped, and so did the elf’s bikini top. Unfortunately for the woman, her wish to ensure that her ‘breasts were always the largest in the room’ turned out to be quite literal, and she hadn’t accounted for the half giant who was singing drunkenly at the counter. 

In an instant, her already voluptuous chest exploded into utter absurdity. They had gone from large oranges to blue prize winning pumpkins, each larger than the rest of her torso and together more than her entire rest of her body combined. They drug her down to the ground like a twin pair of anchors, and kept her there despite her efforts to get up. 

(text-colour:#4e4e8d)[“Ha, serves you right you fuck’n bloated cow!”] The dark elf pointed and laughed at the backfired wish’s effects.

The high elf turned quickly to Vae: (text-colour:#fbfbbc)[“Any chance you could edit the wish, just a tad?”] 

The genie shook her head, clearly tired of this stupid spat. 

“Zala, Frig! Stop soliciting the customers for their services and get back to advertising yours.” The manager yelled from behind the counter, taking a break from slinging drinks to berate the two seductive money makers. 

(text-colour:#fbfbbc)[“](text-colour:#4e4e8d)[Y](text-colour:#fbfbbc)[e](text-colour:#4e4e8d)[s](text-colour:#fbfbbc)[ s](text-colour:#4e4e8d)[i](text-colour:#fbfbbc)[r](text-colour:#4e4e8d)[.](text-color:#fbfbbc)[”] The two said simultaneously. 

(text-colour:#fbfbbc)[“Wanna give me a hand up?”] The grounded one asked the other, only to get an erected middle finger in response from the dark elf in response, then abandoned. 

(text-colour:#fbfbbc)[“What about you? Can&#39;t ya keep a gal company until the bouncer&#39;s are free or the giant lout leaves?”] Zala asked, or at least Vae guessed. Sounded much more like a high elf name to her. 

(text-colour:#ff7070)[“Yeah, sure. Don&#39;t worry, I&#39;ll grab my own seat.”] Vae agreed, lowering herself onto one of the massive mammaries and sitting on it like a bean bag. 

(text-colour:#fbfbbc)[“Sure, make yourself at home.”] The elf said sarcastically. 

The redhead had to admit, it was a good seat. It was warm and soft like a miniature waterbed filled with warm water. As the trivia started, they were counted as a table, and thus a team for some unknown reason. As the questions were announced and listed, Vae quickly realized that they stood little chance of winning, although they were far from last place. She entertained herself by shifting her weight on the boob, making the elf squirm, moan and complain. At one point she would have sworn that a spurt of white liquid came out of her tit. 


 It was an entertaining night, but she was glad to [[head back to the inn for the night-&gt;Day one night (no build up)]] when all was said and done.
</tw-passagedata><tw-passagedata pid="66" name="Show girls wish (both, bad)" tags="" position="2350,825" size="100,100">//&#39;&#39;Double feature&#39;&#39;//

(text-colour:#ff7070)[//‘Fine.’//] Vae thought to herself, (text-colour:#ff7070)[//‘If it’ll get these two off my back. What’s the harm in either one anyway?’ //]

(text-colour:#fbfbbc)[“Like you could even make it worth her while you slut! You have no idea how to pleasure a plus sized woman!”]

(text-colour:#4e4e8d)[“Oh, trust me, I know how to make the extra cushion work! It’s basically like loving a mattress!” ]

The two women’s argument drifted onto the topic of Vae’s current bloated appearance, much to her own frustration. She felt her face get hot with anger as they continued.

(text-colour:#fbfbbc)[“Look at her, she’s all belly! You gotta play it like a drum for them to get turned on like that!”] The high elf insisted.

(text-colour:#4e4e8d)[“She’s a fat bitch, not a drum, you twit!”] The dark elf countered. (text-colour:#4e4e8d)[“Big girls like to be treated just like regular chicks, you just gotta lie to them and tell them that they’re still small!” ]

(text-colour:#ff7070)[“ENOUGH!”] The swollen genie erupted. (text-colour:#ff7070)[“I’ll grant both your wishes so both of you can shut the fuck up about how out of shape I am! Damn the consequences!”]

She readied her hands to do double simultaneous snaps, but stopped.

(text-colour:#ff7070)[//‘That was close.’//] She thought to herself while composing herself with a deep breath. (text-colour:#ff7070)[//&#39;Double wishes are doubly dangerous. Gotta be smart about this.’ //]

The wishes were //&#39;I wish my breasts were always the largest in the room!&#39;// and //&#39;I wish my breasts were larger than hers!&#39;// 

Now that she had stopped herself, she noticed the obvious paradox these two would’ve caused. Vae shuttered at how close of a call that was. Her hand moved to her chin as she pondered how to execute both cleanly. 

(text-colour:#ff7070)[“Got it.”] Vae muttered her eureka, before enacting her solution with two swift snaps.

&#39;&#39;SHHHHHHHHRRRRRIRP! 

BAWONG!&#39;&#39;

The two women disappeared behind a set of four massive boobs, one pair soft white pink and the other dark and lighter gray, each five feet high and eight feet wide each. The genie worried briefly that she had accidentally turned them into mammary tissue entirely before their complaints began. 

(text-colour:#4e4e8d)[“What gives?! I can’t work with these fucking things!”] The dark elf complained. (text-colour:#4e4e8d)[“Plus, I’m not even bigger than this bitch.&quot;]

(text-colour:#fbfbbc)[“I can’t believe I’m saying this, but she’s right! You jipped us!”] The high elf complained.

(text-colour:#ff7070)[“Wrong.”] Vae said while looking them both in the face, looking down on them while hovering above their titanic tits. She gestured to a tailor who was watching the scene along with the rest of the clientele, and he tossed his extra long measuring tape over. 

Vae wrapped it around the twin dark moons of the silver haired elf, horizontally. She did it just a bit too tight, causing her to squeak with unwilling pleasure. 

(text-colour:#ff7070)[“You, my dear, are five feet high and eight feet, one inch wide.”] Vae’s voice rang with the high pitched self satisfaction.

(text-colour:#4e4e8d)[“](text-colour:#fbfbbc)[S](text-colour:#4e4e8d)[o](text-colour:#fbfbbc)[?](text-colour:#4e4e8d)[”] The two ground bound bobbies asked at the same time. 

Moving the measuring tape over to the pink orbs of the high elf, Vae manicured it under one boob and wrapped it vertically. She didn’t let out a noise as her coworker did, expecting it, but her face did contort as she bit her lower lip.

(text-colour:#ff7070)[“You see my dears, this one’s measurements differ. She is eight feet wide and five feet, one inch tall.”] She flew above them again and pointed at each of them as she specified her next point. (text-colour:#ff7070)[“You are the biggest in the room in terms of width, and you are bigger than her in terms of height. Now you can both shut up and help me out!” ]

The genie lowered herself from the air, and rested on the woman’s gigantic breasts as if they were a large fleshy bed. 

(text-colour:#ff7070)[“The trivia is about to start, so I hope you girls have more in your minds than lusting and breast enhancement.”] She teased.

(text-colour:#4e4e8d)[“Why would we help you! We can’t go do anything like this!”] The dark elf protested.

(text-colour:#fbfbbc)[“Yeah, we don’t owe you a thing!”] The high elf pitched in.

(text-colour:#ff7070)[“Girls,”] Vae began in a fake disappointed tone similar to that of a mother. (text-colour:#ff7070)[“These puppies are big, but they’re not permanent. After this I’ll help you two relieve a bit of pressure. ”]

To illustrate her point, she used one hand to squeeze the tit of the high elf and her foot to put pressure on the dark elf’s. A symphony of horney coos sounded out from the two’s mouths as she played them. Milk dripped from the tips of both, delicate drops that promised to turn into a full flood if given greater pressure.

(text-colour:#ff7070)[“If we win this thing, I’ll milk you both back to size, promise~”] 

The two showgirls looked at each other, new desperation making them come to an understanding. Both nodded shyly and submissivly to the all powerful genie. 

(text-colour:#ff7070)[“Good, now pay attention, they’re asking the first question.”] She hushed them both up as the announcer took a deep breath before shouting across the bar. 


[[Back to the inn again-&gt;Night two (no build up)]]</tw-passagedata><tw-passagedata pid="67" name="Paradox bad end" tags="" position="2350,925" size="100,100">//&#39;&#39;Titillating Finale&#39;&#39;// 

(text-colour:#ff7070)[//‘Fine.’//] Vae thought to herself, (text-colour:#ff7070)[//‘If it’ll get these two off my back. What’s the harm in either one anyway?’ //]

(text-colour:#fbfbbc)[“Like you could even make it worth her while you slut! You have no idea how to pleasure a plus sized woman!”]

(text-colour:#4e4e8d)[“Oh, trust me, I know how to make the extra cushion work! It’s basically like loving a mattress!” ]

The two women’s argument drifted onto the topic of Vae’s current bloated appearance, much to her own frustration. She felt her face get hot with anger as they continued.

(text-colour:#fbfbbc)[“Look at her, she’s all belly! You gotta play it like a drum for them to get turned on like that!”] The high elf insisted.

(text-colour:#4e4e8d)[“She’s a fat bitch, not a drum, you twit!”] The dark elf countered. (text-colour:#4e4e8d)[“Big girls like to be treated just like regular chicks, you just gotta lie to them and tell them that they’re still small!” ]

(text-colour:#ff7070)[“ENOUGH!”] The swollen genie erupted. (text-colour:#ff7070)[“I’ll grant both your wishes so both of you can shut the fuck up about how out of shape I am! Damn the consequences!”]

&#39;&#39;SNAP&#39;&#39;

As her fingers clicked, Vae instantly recognized her mistake, how short sighted granting both wishes was. She attempted in vain to undo the wish, but all the magic stored up within her being had been dispelled, rendering her thin once more but unable to stop the coming calamity. 

(text-colour:#4e4e8d)[“Yes, yes, yes!”] The dark elf chanted to herself as her chest slowly grew larger and larger, as if someone had hooked up a helium tank to her. (text-colour:#4e4e8d)[“Eat your heart out bitch, I&#39;ve out done you in every… way?”] She trailed off confused. 

(text-colour:#fbfbbc)[“Ah, you can&#39;t even outdo me, even with a wish! Behold as I overtake you! …. Any moment now….”] The high elf attempted to turn the tables, trailing off as she noticed that both their boobs were growing at a near identical rate. 

They turned to face the genie, to cuss her out and waylay her with complaints about unfairness, how this was supposed to be a decisive end to their rivalry. 

Instead, they saw that the magical woman had fled in fear and was now arguing with a bouncer and the manager about something. By the fast, frantic way she spoke and the fearful expression on the other&#39;s faces, it took the showgirls off guard. 

&#39;&#39;THUMP

SHERRRRRRRIP&#39;&#39;

The two found themselves suddenly tripping forward, anchored to the ground by the sheer mass of their jugs. Their bras snapped and their shirts ripped, surrounding their mounds with torn fabric as if they were opened gifts. They screamed for explanation and help, but no one was listening to them now, the other staff and the genie working on evacuating the pub, with the patrons piling out the door. The phrase “magical paradox” was being tossed about quite a lot. 

An ominous groaning noise reminiscent of a deep sea leviathan came from the elven pair. Their eyes met, fearing the worst. 

A millisecond passed with nothing happening. A faint hope appeared in both of their minds. Was everything ok, after all?

No. 

The growth suddenly became exponential, the two women filling the room and becoming buried under a mind boggling amount of breast tissue. Tables were crushed, chalises flung, support beams bent and broken. Before even twenty seconds had passed, the building above the basement pub collapsed and fell apart, as round flesh upturned it from below, now spilling over like a pastry in a too small pan.

In another two minutes, dozens were crushed along with the surrounding neighborhood. Panic ruled the streets as folk attempted to outrun the magically replicating flesh and meat. Abandoned animals were squashed, the ill, old, and crippled left to their warm sweaty ends as the heartless survivors ran on. 

An hour later, there was no one left. No one alive. Not even the city was left. In its place, four blobs of ever expanding flesh, growing and growing, no indication that it&#39;d stop. Maybe another genie would stop it before the world itself was overtaken, whenever the rest of the world notices. Either way, with the knowledge of the original wish list, there was no undoing the damage, the loss of life. 

An entire city was wiped out, due to a pretty rivalry and on a whim of poor judgement by an inexperienced genie. 


//&#39;&#39;You got the breast paradox bad ending &#39;&#39;//


[[The end-&gt;Credits]]
</tw-passagedata><tw-passagedata pid="68" name="Pregnant women bad" tags="" position="2900,700" size="100,100">//&#39;&#39;Too many buns, not enough butter&#39;&#39;//

Filled with anger at the sheer disrespectful flak she was getting, Vae snapped without thinking, her malicious instincts deciding the details of the wish. 

&#39;&#39;SNAP&#39;&#39;

&#39;&#39;BA-DUNK&#39;&#39;

Martha&#39;s stomach became heavily curved and rounded, making the abdomen of her shirt ride up, exposing her belly to the open air similarly to Claire&#39;s. Her skin stretched tight, navel forced into an outie, as well as general size made it clear that she was now not only pregnant, but more so than her friend. 

(text-colour:#b9b93c)[“What?! How?! I feel sick…”] the subject of the wish thought aloud, her hands moving instinctively to rub her swollen midsection. 

(text-colour:#9d3f9d)[“You weren&#39;t kidding about being a genie?”] The wisher asked, completely taken aback and almost falling out of her chair.

(text-colour:#ff7070)[“Nope. Trust me, she&#39;ll definitely understand what you&#39;re going through now, doubly so, you might say.”] The genie explained smugly, her thin lips curling with a self satisfied ego.

(text-colour:#b9b93c)[“](text-colour:#9d3f9d)[T](text-colour:#b9b93c)[w](text-colour:#9d3f9d)[i](text-colour:#b9b93c)[n](text-colour:#9d3f9d)[s](text-colour:#b9b93c)[?](text-colour:#9d3f9d)[!](text-colour:#b9b93c)[”] Both mortals yelled concurrently. 

(text-colour:#b9b93c)[“I can&#39;t have twins!”] Martha panicked, hyperventilating. (text-colour:#b9b93c)[“My boyfriend is gonna think I cheated with him and I can&#39;t get a job like this!”]

(text-colour:#9d3f9d)[“Me and Jason will do everything we can for ya hun.”] Her friend put a supportive hand on her arm, but sent a scowl at Vae at the same time. (text-colour:#9d3f9d)[“You gonna be paying child support?”]

(text-colour:#ff7070)[“Uhhhhh….”] The genie replied, unsure, the consequences of her actions finally swing back around to smack her in the face. 

Not liking the sound of hesitation, Claire picked up her cup of tea and splashed Vae with it. The genie yelped reflexively, immediately moving to wipe her eyes. Luckily, it turned out to be sweet instead of hot tea. 

(text-colour:#b9b93c)[“Get out of here you bitch!&quot;] 

(text-colour:#ff7070)[“Ow!”] Vae cried as the tea cup hit her back, shattering on impact. She flew away, fast down hill back to the mainroad. 

Cusses and curses were hurled her way along with the rest of the tea set, eventually both stopping as the farmer&#39;s wife ran out of ammo. 

The genie briefly wondered if she should return tomorrow and undo the wish, but quickly dismissed the idea. She doubted she would even be given the chance to set things right, it was time just to step back and not cause any more damage.

The sobbing cries of her victim were carried on the wind, haunting her for miles as she walked from the echoing plains back to civilization. 

(set: $Karma to it - 1)
[[Vay is very tired-&gt;One last dream, before fate has its say]]</tw-passagedata><tw-passagedata pid="69" name="Pregnant woman neutral" tags="" position="2900,600" size="100,100">//&#39;&#39;Earning it&#39;&#39;// 

(text-colour:#ff7070)[“Very funny. I could do anything within and without your imaginations, and all you can do is laugh.”] The genie sneered, her red hair bouncing as she flicked her head to the side in disbelief. It was one thing to misidentify her as another winged species, but denying her existence was purely insulting. 

(text-colour:#9d3f9d)[“Ok, here&#39;s a better one: I wish you had a belly button so your stomach wouldn&#39;t be so distracting!”]

Claire laughed even harder, rocking back and forth in her chair at her friend’s bullying jokes.

(text-colour:#ff7070)[“Hey, for your information, that’s just part of my anatomy, just like the wings.”] As to give some proof for her claims, Vae fluttered her wings and floated a few feet into the air. 

(text-colour:#b9b93c)[“Alright, alright already, ya proved your point.”] Martha aquiested, waving a hand dismissively, speaking for both her and Claire due to the former still taking deep recovering breaths from the laughter. 

(text-colour:#ff7070)[“Good, now if you would stop ragging on me and make an actual wish, I’d appreciate it.”] The proven genie asked, her anger starting to show.

(text-colour:#b9b93c)[“Geez, no need to be so picky. Claire already made a wish, if you&#39;re so eager. Make me understand her pregnant plight.”]

(text-colour:#ff7070)[“One: now you&#39;re just taking the piss.”] Vae said, using her fingers as she counted out her issues. (text-colour:#ff7070)[“Two: you really wanna push your luck? Don’t tempt me, I’ll pump you with enough kids that you’ll understand her pleight and every other mother for the next two decades. Three-”]

(text-colour:#9d3f9d)[“The baby’s coming!”] Claire shrieked, the hem of her dress visibly damp. 

(text-colour:#b9b93c)[“FUCK, I thought you just laughed too hard, I didn’t mean to bust your guts literally.”] Her friend yelled, bursting out of her chair and helping her friend to her feet. (text-colour:#b9b93c)[“You, help me get her inside.”]

(text-colour:#ff7070)[“I don’t know how to deliver a kid! I’ve never even been a baby!”] Vae protested, also sharing in the panic. 

(text-colour:#b9b93c)[“Congrats, you&#39;re getting a crash course, now get the door for us!”] 

Vae complied, and entered the house behind them. 

What followed was several disturbing and hard hours of handling a natural mortal birth. She learned many things, many useful things that she would’ve lived happily without knowing. The idea of offering to wish this all over and done with entered her mind several times, but the situation was tense and busy, and what little opportunities she did have to offer it, she felt it was awkward and scummy, so she didn’t bother. 

As the sun began to set, the front door of the hovel opened, and a large ginger man strode in, caked in mud with a tired look in the eyes. 

“Claire?” He called, clearly expecting his wife at the door.

(text-colour:#b9b93c)[“In here!”] Martha answered from the bedroom in her place. 

Walking through the white painted hallways of his home, the man gasped as he was greeted by a most joyous sight: his wife tucked into bed, a bundle of blankets held lovingly in her arms. HIs blonde angel of a wife spotted him, and flashed him a smile before tilting the bundle, revealing a small soft face.

(text-colour:#b9b93c)[“Luckily one of your old harlot friends from the city came by, don’t think I could’ve done it on our own.”] Martha sighed, her black hair frizzled with sweat and her limbs hanging loosely as she sunk into a chair. 

(text-colour:#ff7070)[“I don’t feel very lucky.”]  Vae sighed, her immortal self also drained so much that she thought she could finally understand what an old person felt like. 

“I… don’t know her…” Jason admitted.

(text-colour:#ff7070)[“I know, she’s mistaken. I was just sorta passing by.”] The redheaded genie admitted.

“Well, regardless I can’t thank you enough, you&#39;re a real saint. If there’s anything, anything at all I can do for you, please let me know.”

(text-colour:#ff7070)[“Wish that I was back in the city at the inn I’m staying at. I need a hot shower after this.”] 


[[Vay is very tired-&gt;One last dream, before fate has its say]]</tw-passagedata><tw-passagedata pid="70" name="Pregnant woman good" tags="" position="2900,500" size="100,100">//&#39;&#39;Learning sensitivity  &#39;&#39;//

Although, having just met her, Vae didn&#39;t like Martha very much at all. All of her entertainment seemed to come from ragging on other people, from downplaying her friend&#39;s pregnancy troubles to mocking the genie&#39;s own anatomy. Her mocking eyes and the smug jester&#39;s smile underneath her pointed nose didn&#39;t help endear her either. She could use a bit of consequence, albeit a temporary one.

(text-colour:#ff7070)[“Granted.”] Vae said. 

The two women looked at her with confusion replacing their mirth from before, clearly not getting the expected response they had anticipated. 

&#39;&#39;SNAP&#39;&#39;

&#39;&#39;SHHHHHHHRRRRRRRIIIIIPPP&#39;&#39;

In an instant, a bizarre collection of changes overtook the modestly dressed brunette. Her dress was torn to tatters in an instant: her legs and ass widening beyond the confines of the skirt, her arms bicenting the sleeves, and her breasts swelling so quickly overflowing the blouse. All that remained were her shoes (which looked tight), the abdomen of her dress which was tight across a noticeably bloated stomach, and a surviving section of the blouse, shanghaied into serving as a makeshift bra. She was still somewhat decent… at least until wet spots appeared on her clothes where her tits should be. 

Martha was in shell shock, her hands twitching in air, afraid to touch her transformed self, eye twitching out of sheer horror, and face frozen in an undignified agape expression.

(text-colour:#9d3f9d)[“The fuck you do to her, skank?”] Claire spoke in her friend&#39;s place.

(text-colour:#ff7070)[“What I did was what you wished for, my dear. She understands everything now: the swollen feet, the sensitive body, premature lactation, weight gain, the sore back. Everything.”] Vae listed the effects with glee as shewatched her former bully squirm in her new form. (text-colour:#ff7070)[“I did everything short of knocking her up myself. She&#39;s more than sympathetic now.”]

(text-colour:#b9b93c)[“I-”]

As soon as Martha recovered enough to open her mouth, the rocking chair beneath her gave way, imploding under her weight. Tears began to well up in the corners of her narrow eyes and her pointed nose sniffed.

(text-colour:#b9b93c)[“I&#39;m sorry Claire, I had no idea that you felt like… like this!”] She wildly gestured to her augmented form. (text-colour:#b9b93c)[“My body feels like a mess! It&#39;s driving me insane!”]

(text-colour:#9d3f9d)[“There, there.”] The actually pregnant woman said softly, patting her newly sympathetic friend on the head. (text-colour:#9d3f9d)[“You&#39;re sorry and that&#39;s enough for me. Come on, I got a spare lactation bra and a stretch dress you can borrow. Would you help her up, dear?”] She asked Vae. 

The genie, although failing to hold back her own snide chuckles, still had a conscience and recognized neither woman had the physicality to do it now. She helped Martha up, making sure to ‘accidentally’ touch her ass and make sure we knew how big it had become. The two waddled to the front door, with Claire holding open the door and letting her friend in. Hanging around for another moment, she asked Vae a question. 

(text-colour:#9d3f9d)[“This isn&#39;t permanent is it?”] She asked, concerned in her tone. 

(text-colour:#ff7070)[“She&#39;s just really sensitive to being around pregnant women now. Once you&#39;re done yourself she&#39;ll be back to normal in a few weeks…”] Vae paused as she gave it a little more thought (text-colour:#ff7070)[“just make sure she doesn&#39;t spend extended periods of time around anyone else expecting.”]

A wicked smile of vengeance curled on the soon to be mother&#39;s face. 

(text-colour:#9d3f9d)[“Good, then I can tease her back for all that ignorant shit she said before.”] Claire reveled in the idea as she finally went back into her own house. 

Feeling as though things may not have gone the cleanest but still feeling as if she had taught a valuable lesson, Vae shrugged. An aimless whistle of cheer exited her lips as she flew back down to the main trail, the tune carried far by the winds and the open air of the plains.
(set: $Karma to it + 1)

[[Vay is very tired-&gt;One last dream, before fate has its say]]</tw-passagedata><tw-passagedata pid="71" name="Date wish refused" tags="" position="3000,200" size="100,100">//&#39;&#39;The worst she can say is no&#39;&#39;//

(text-colour:#ff7070)[“Well, if you can&#39;t think of anything then I&#39;m not granting you a wish. Nice meeting ya.”] Vae said, placing a few silver coins on the counter to cover her tab before getting up to leave. 

Before she could make it halfway across the room, the wingman caught up to her and grabbed her shoulder. Turning around, she made sure to use her angriest, most intimidating face, causing him to take his hand off her before speaking. 

(text-colour:#93c7fb)[“I&#39;m sorry. I&#39;m Greg, he&#39;s Humphrey.”] He pointed at himself and then his still weeping friend. (text-colour:#93c7fb)[“I understand if he&#39;s not your type, but can you please just help him out.”]

(text-colour:#ff7070)[“Told you, I&#39;m not granting him a wish.”]

(text-colour:#93c7fb)[“I&#39;m not asking for a wish. I&#39;m at my wit&#39;s end with him and I think a woman&#39;s perspective could help.”]

(text-colour:#ff7070)[“You want dating advice? Seriously?”]

(text-colour:#93c7fb)[“Look, this guy’s going to be my bother in law and I need him to be in a healthy mental state for my wedding.”] The man explained, giving a side eye to his weeping friend. 

Vae wanted to just start walking away again, but there was something particularly pathetic about the love sick loser.

(text-colour:#ff7070)[“Fine.”] She spat the word out. (text-colour:#ff7070)[“Let’s try and get this dude laid so he can get stable or whatever.”] 

So the two attempted to help the guy get a date. They taught him pick up lines, told him to stop being horny and ask a girl about stuff she was interested in, even told him to brood in a corner and just look mysterious for a bit (although that last one was mostly so they could get a break from his constant whining).

The night grew long in the tooth, and the bar was set to close soon. The only woman left who Humphery hadn’t whiffed a shot at yet was strangely enough, a mermaid. Using some strange tub like apparatus on wheels, she maneuvered her way onto dry land and into a bar. She was lounging and drinking a thin red wine from a glass, stained with her coral blue lipstick. 

(text-colour:orange)[“She’s the most beautiful thing in the world….”] Humphery cooed as he looked at her from afar. 

(text-colour:#93c7fb)[“If you said that to the dwarf instead of telling her how big her boobs were, you would’ve bagged her.”] Greg said sourly, wishing that this was done already. 

(text-colour:#ff7070)[“Ok, she&#39;s obviously from another culture, what are you going to say to her?”] The redhead asked him, wanting to give him a soft ball before swinging for the major league. 

(text-colour:orange)[“What happened to your legs?”]

(text-colour:#93c7fb)[&quot;](text-colour:#ff7070)[N](text-colour:#93c7fb)[O](text-colour:#ff7070)[!](text-colour:#93c7fb)[&quot;] both of his wing people yelled in unison. 

(text-colour:#ff7070)[“Just go in there and just fucking complement her. Don&#39;t ask questions, don&#39;t insinuate anything about her culture, just be nice.”] Vae explained, mentally tagging on (text-colour:#ff7070)[‘//And don&#39;t be yourself.’//]

As he watched the man approach his last shot, Greg asked the genie a question. 

(text-colour:#93c7fb)[“You sure this is the right call? She doesn&#39;t even have legs, it&#39;s kinda creepy to have a woman with animal bits.”]

Vae spread her wings and flapped her scarlet insectoid wings, ‘accidentally’ smacking Greg in the face a few times. 

(text-colour:#93c7fb)[“Ow! You&#39;re different. Yours are additional instead of substitutions.”]

(text-colour:#ff7070)[“Stop being subtly racist and pray for your bud.”]

Humphrey approached the mermaid with an undeserved confident stride, a stupid nervous smile on his face. The mermaid looked at him with the blank, judgmental expression that most fish have when assessing if something is a threat or not. 

(text-colour:orange)[“Hi, I like your smell, it reminds me of seagulls.”] He stammered.

Almost immediately, the mermaid signaled the attention of the bartender, scribbled something on a note and passed it to him. The bartender examined the soggy note before furling his eyebrows as his gaze turned to the hopeless romantic. 

“Please leave sir.” 

----------------------------------------------------------------------------------------------

(text-colour:#ff7070)[“One… two… three…”] Vae counted out pieces of silver from her coin purse, placing it into the palm of the prostitute. 

“That&#39;s it? No tip?” The woman of the night questioned, jingling the three bits of metal in her hand. Her make up was heavy and cheap, and the way she was dressed made it hard to tell what race she was.

(text-colour:#ff7070)[“Look, I’m just paying for the other guy, I would if I were indulging myself. I could grant you a wish, as a tip if you want.”] 

“I wish I had a new cig.” The woman of the night said automatically. 

//&#39;&#39;SNAP&#39;&#39;//

With a fresh smoke stick in between her fingers, the postitute&#39;s heels clicked on the cobblestone street, her figure passing in and out of darkness as she entered and exited the range of the street lights. As she stopped in front of Humphery, she looked his boney, awkward body up and down. With a sigh, she grabbed his hand and led him into the whore house they had been speaking in front of. 

(text-colour:#93c7fb)[“Glad that’s finally over. Wish I would’ve thought of this sooner.”] Greg practically sighed with relief, although that didn’t last long as a very frustrated Vae flew right up into his face and gave him the nastiest look she could muster.

Without another word, she flew down the street. This stupid errand was nothing but a distraction from getting her daily wish in, she thought it would be fun or challenging to solve something without magic for once, but the night had proven tedious and boring. At least she’d never have to see those two chuckle fucks again. 


[[Vay is very tired-&gt;One last dream, before fate has its say]]</tw-passagedata><tw-passagedata pid="72" name="Date wish accepted " tags="" position="3000,300" size="100,100">//&#39;&#39;Matchmaker&#39;&#39;//

(text-colour:#ff7070)[“Tell you what.”] Vae began, thinking of an offer on the fly to get these guys off her back. (text-colour:#ff7070)[“Just wish for your dream woman and I’ll make her for you. No strings attached.” ]

(text-colour:orange)[“Really?! No kidding?”] The loveless loser asked in disbelief. (text-colour:orange)[“How about… a genie like you! With a gigantic rack, big booty, and a carefree personality?”]

(text-colour:#ff7070)[“Bimbo, got it.”] Vae nodded as she raised her hand.

(text-colour:#93c7fb)[“What’s a bimbo?”] His wingman asked, confused.

&#39;&#39;SNAP &#39;&#39;

A light flashed, concentrating into an orange glowing orb. It floated in front of the trio for a few short moments, but quickly began to shrink into a very busty humanoid form. Slowly the light faded over the course of half a minute. More details sank into the figure: a ridiculously wide ass, plump lips, pointed ears, insectoid wings, and a pair of high heels. As the last of the light faded entirely, the new being’s eyes opened, revealing vacant green eyes surrounded by long lashes.

(text-colour:#ff9ef2)[“Oh my gowd, so this is what it’s like to be alive! AIIIIE, I cannot believe it!”]&#39; It said in an accent entirely new to this renaissance dimension. 

(text-colour:#ff7070)[“Welcome to the world uhhhh….”] Vae greeted her new sister, a magical clone of herself with a knockers bigger than her head and a brain full of nothing but slang. (text-colour:#ff7070)[“Bae! This fine gentleman would like to ask you out on a date.” ]

(text-colour:orange)[“Ha…. Hi…”] The boney man meekly graded her clearly intimidated by his mind&#39;s imagination brought to life.

(text-colour:#ff9ef2)[“Oh, aren&#39;t you the cutest little thing?”] Bae Said meaningly as she picked up the man who was quite shorter than her by the shoulders like some designer teacup dog. (text-colour:#ff9ef2)[“Let&#39;s hit the town after I try you out in bed.”] She promised. 

Bae turned toward the bat counter and looked the barkeep in the eye, although his eyes met her somewhere closer to heart. 

(text-colour:#ff9ef2)[“You have any rooms I could rent?” ]

“F-four copper for an hour.” He stammered back. 

(text-colour:#ff9ef2)[“Spot me sis?”] The newly created genie turned to ask both her creator and older sister.

(text-colour:#ff7070)[“Here, take it all.”] Vae said nonchalantly as she tossed a fill coin purse at her sister… daughter? Sister sounded better in her head. (text-colour:#ff7070)[“Make sure to come to the family reunion in a hundred years if you still exist by then.”]

Although the statement might&#39;ve sounded cold and cynical, Vae knew that a genie&#39;s early life was sensitive and unstable, and they were liable to be undone by wishes and their own magic gone awry.

(text-colour:#ff9ef2)[“You got it girl!”] She said as she took her first of what would undoubtedly be a very long career of taking men to the bedroom to fulfill their most intimate of wishes. 

(text-colour:#93c7fb)[“Sure that&#39;s a good idea?”] The remaining man asked. 

(text-colour:#ff7070)[“As long as he doesn&#39;t do anything stupid, I&#39;m not worried about it. Now buy me another drink for solving your problem for you.”] Vae demanded.

**************************************************************************************

An hour later, the hopeless lover, whose name was Humphrey, laid in bed gasping for air. 

(text-colour:#ff9ef2)[&quot;We done already?”] Bae asked, disappointed. Even now her puffy areolas called to him. 

But he didn&#39;t have the strength. He was a mere mortal attempting to keep up with a being not only designed for this, but also required physical rest. 

(text-colour:orange)[“Just *GASP* give me a minute…”] He begged. (text-colour:orange)[“I&#39;ve delivered more in this last hour than in the rest of my life combined. Wish I was rock hard still, trust me.”] 

His lover looked confused for a second, not understanding the metaphor. Then, suddenly, Bae got a gleam in her eye and raised a hand. 

(text-colour:#ff9ef2)[“I don&#39;t know what turning you to stone will help, but I&#39;m willing to give it a shot.”] She shrugged. 

(text-colour:orange)[“NO NO WAIT!”] He screamed as he pounced up and grabbed her hand from snapping, his head inadvertently landing in-between her massive breasts. 

(text-colour:#ff9ef2)[“Oh.”] Bae said with realization. (text-colour:#ff9ef2)[“That&#39;s fine… I have another idea.”] 

Her long nailed hand grabbed him by the back of the head and guided his mouth onto her tit. 

(text-colour:#ff9ef2)[“Drink up. Milk will help you recover.” ]

He did as he was commanded, sucking with greed as the magical milk glided down his throat like a guilt free drug. Bae sighed, enjoying the sensation of literal titillation but managing to keep her cool. She layed back down on the bed, resting against the headboard and petting her lover&#39;s short hair as if he were some sort of pet. 

(text-colour:#ff9ef2)[//‘I&#39;ll have to thank that Vee person.&#39;//] She thought, already forgetting the name of her progenitor. (text-colour:#ff9ef2)[&#39;//Existence is sorta cool.’//]


&lt;img src=&quot;https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/f/eb6ad10e-1dc7-46e1-87ef-0a22f7da7a2e/djo43hd-1329954b-888b-4b0a-acb2-0e0fea90a191.png/v1/fit/w_828,h_1344,q_70,strp/bimbo_by_nopehome_djo43hd-414w-2x.jpg?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1cm46YXBwOjdlMGQxODg5ODIyNjQzNzNhNWYwZDQxNWVhMGQyNmUwIiwiaXNzIjoidXJuOmFwcDo3ZTBkMTg4OTgyMjY0MzczYTVmMGQ0MTVlYTBkMjZlMCIsIm9iaiI6W1t7ImhlaWdodCI6Ijw9MjA3NyIsInBhdGgiOiJcL2ZcL2ViNmFkMTBlLTFkYzctNDZlMS04N2VmLTBhMjJmN2RhN2EyZVwvZGpvNDNoZC0xMzI5OTU0Yi04ODhiLTRiMGEtYWNiMi0wZTBmZWE5MGExOTEucG5nIiwid2lkdGgiOiI8PTEyODAifV1dLCJhdWQiOlsidXJuOnNlcnZpY2U6aW1hZ2Uub3BlcmF0aW9ucyJdfQ.MuHItDCkOpdI-qD4F0n5_Scweu32bFJcSJSOuwG_thE&quot;&gt;

[[Vay is very tired-&gt;One last dream, before fate has its say]]</tw-passagedata><tw-passagedata pid="73" name="Dutchess wish good (ass)" tags="" position="2900,850" size="100,100">//&#39;&#39;Inaccurate memory &#39;&#39;//

(text-colour:#ff7070)[“You don&#39;t look a day over thirty, your majesty.”] Vae said, attempting to make the middle aged duchess feel better.

(text-colour:#7f2d8f)[“Nonsense. Your flattery is appreciated but I cannot deny reality. Not only has age degraded me, but the stress of my duties have as well. My hair is gray, my back has arched, and my face has wrinkled. Now: grant my wish.”] The matriarch insisted with a cold, firm tone that made clear that no more delays would be tolerated.

(text-colour:#ff7070)[“Very well.”] The genie nodded, raising her hand in a flourish above her head, preparing to snap and just before she completed the gesture, a nagging thought established itself in her head.

(text-colour:#ff7070)[“Wait… do you have a daughter, about ten years old?”]

(text-colour:#7f2d8f)[“Why yes I do, what of it?”] The ruler asked, caught off guard.

(text-colour:#ff7070)[“You might want to rephrase your wish then. If I granted it as is, then you&#39;d end up being not only younger, but pregnant again.”]

(text-colour:#7f2d8f)[“Well observed, young woman.”] The duchess said, impressed. Vae fought the urge to correct the older looking woman who was actually less than half her own age and let her continue. (text-colour:#7f2d8f)[“I wish I was nine years younger, right after I had my dear Dandy.”]

(text-colour:#ff7070)[“Dandy?”] The genie giggled at the name, before a stern warning glance set her attention back on business. (text-colour:#ff7070)[“Your wish is my command.”]

She hated that cliche line, but she thought the royal mistress would appreciate the touch of fairytale whimsy.

&#39;&#39;SNAP&#39;&#39;

Instantly, a shining orange light enveloped the queen, turning her into a third dimensional silhouette. Standing up from her gilded throne, her various servants and retainers gasped and gaped at the magical display, completely enraptured by the transformation of their master. As the moment passed and the light faded, the wisher’s restored appearance amazed everyone present. Faded and graying strands of hair had turned raven black to the last and had a glossy, healthy look. Every unwanted line on her face had smoother out, restoring the smooth narrow face from her painting, which made her look like the exaggerated painting of her and her daughter, much to Vae&#39;s astonishment. Her back straightened and gave her an even greater sense of authority.

It seemed that she was revealing in the attention and the changes, enjoying being the center of attention as always. Then, as she spun in place, she seemed to notice something was wrong.

(text-colour:#7f2d8f)[“Why is there a draft?”] The duchess asked, looking into the crowd with dread.

“Uhhh… not quite sure, your regalness.” One of her many servants offered, pretending to not see the embarrassing sight.

Vae couldn&#39;t believe it, were they really pulling a king’s new clothes? Now of all times?

The duchess’s lower half exploded in size, making her legs as thick as logs and her hips and butt a round, ball-like shape. Her top half stayed slender, albeit with a little bit of a gut. Her new awkward form blocked everything behind her, even the large throne which she stood no hope of fitting into now. Worst of all, her elaborate dress had shredded and ridden up, leaving her almost totally exposed with just her panties.

Not understanding how the wish had resulted in this, Vae moved to act anyway. She tore a tapestry from a nearby wall which depicted a knight slaying a giant, and quickly wrapped up her expanded customer’s ballooned bottom half in it, the giant’s goofy expression stretched against her round butt. She pushed the confused noble woman towards a side door she assumed would offer them some privacy.

Two guards crossed their halberds to block her path.

(text-colour:#ff7070)[“Oh, screw off, you two!”] Vae began, yelling in their faces. (text-colour:#ff7070)[“Standing around gawking at her ass, now you&#39;re keeping her indecent?! As soon as she realizes what happened, you&#39;ll have both a genie and a duchess pissed off, do you really want that?”]

The two gilded metal men looked at each other with worried eyes for a brief moment, and finding no support within each other, slunk back into their positions like ashamed little boys wearing cardboard armor.

As the two women made their way through the door (which required some heavy pulling on Vae&#39;s part), it was discovered to be a sort of make up room, not nearly enough to belong to the highness herself, but probably a common place for the other women of the court to prepare makeup. The genie deposited the fat bottomed woman in front of a full body mirror in the corner of the room and removed the tapestry.

(text-colour:#7f2d8f)[“Oh…. oh…”] The duchess said was at first surprised with the first oh, but the second was of realization.

(text-colour:#ff7070)[“I swear, I didn’t do this on purpose, your majority- I mean massive- MAJESTY. There must&#39;ve been a fluke or a factor we didn’t take into account!”] Vae apologized, her words pouring out of her like a torrent from a powerful fire hose.

(text-colour:#7f2d8f)[“Oh, don’t worry about it. Truthfully I just forgot how bad Dandy was for my figure.”] The mother admitted, examining her strange body heavy figure in the mirror with stunning familiarity. She bent over, observing her shape and how her top half was completely overshadowed by the lower in mass. (text-colour:#7f2d8f)[“Gonna have to break out that old diet guide again.”]

(text-colour:#ff7070)[“Well uhhh… I can come back tomorrow and rectify it with a wish, if you’d like.”] Vae offered, trying not to get transfixed by the aristocrat’s ample ass as she swayed it back and forth in the mirror.

(text-colour:#7f2d8f)[“That’s quite unnecessary.”] The duchess answered in a nonchalant and straight forward voice, no longer bothering to keep up the theatrics now that they were alone. (text-colour:#7f2d8f)[“Personally I consider magic to be a messy affair and sparingly used. I couldn’t deage myself by a decade, but I’ve lost these pounds and I’ll do it again. You are dismissed.”]

(text-colour:#ff7070)[“What about your promise for the genies to have guaranteed safe travels in your territory?”] The genie asked, knowingly pushing her luck, but needing to make this whole embarrassing affair worth it.

(text-colour:#7f2d8f)[“Oh? Oh right.”] The duchess suddenly remembered, as if breaking out of a hypnosis brought upon by her swinging backside. (text-colour:#7f2d8f)[“Done and done. Now if you’d be so kind, a lady needs her privacy.”]

Vae smiled and nodded graciously, bowing for good measure even though the duchess seemed not to pay her any more mind. As she opened the door to leave, she heard the matriarch mutter something under her breath.

(text-colour:#7f2d8f)[“Too bad Heinrich isn’t around to see this. Loved it the first time, would be over the moon now.”]

Unsure what to do with that last tidbit of information, the successful genie exited the room, only to be immediately swarmed by guards and the onlookers asking her insane questions. 

“Is the duchess alright? Where is she?”

“What&#39;d your wish do to her?”

“Can you do something similar for my wife?”

Overwhelmed like a squirrel at a dog park, Vae scrambled, squeezing her way through the crowd as best she could, using its density to her advantage, none of them quite realizing where she was until she slipped out. Across the throne room were a large set of french doors, and she hustled as fast as she could for them. The royal courtiers figured out they had been duped and the fastest among them followed her. 

As she opened the doors, Vae was drenched in sunlight and a gust of high altitude wind blew in her face. It was the entryway onto a balcony, one that was immeasurably high above the kingdom and provided a spectacular view of the city she didn&#39;t have the time to appreciate right now. She jumped off the balcony, letting herself fall fast, only putting effort into flying until she reached a lower altitude, just barely higher than the buildings below. 

The royal court looked on in amazement and awe at the spectacle, speechless… well, except for one short bald man lacking tact. 

“Wow, she jumped faster than Duke Heinrich when h-” The nobleman immediately got a smack on the back of his head. 

As the genie floated down to earth once more, she looked forward to returning to the inn, whose comparable folkish charm would be a welcome change of pace from that stuffy castle.
(set: $Karma to it + 1)

[[Vay is very tired-&gt;One last dream, before fate has its say]]</tw-passagedata><tw-passagedata pid="74" name="Dutchess wish neutral" tags="" position="2900,950" size="100,100">//&#39;&#39;Repeated burdons&#39;&#39;//

(text-colour:#ff7070)[“Easy as pie!”] Vae proclaimed confidently. 

(text-colour:#ff7070)[//‘Better be careful, of all situations, this isn&#39;t one to let the magic do the work on its own.&#39;//] She thought as she readied her hand. 

&#39;&#39;SNAP&#39;&#39;

Time stopped or perhaps just slowed down to the point that the two were indistinguishable from one another. The magic shot out like an invisible electric bolt from her fingers towards the wisher. The magic has the taste of refreshment, so Vae knew it would have the intended effect on the wisher. Strangely, the magic seemed to branch, a small arc peeling away and heading through the floor. 

That&#39;s not right. 

This wish should only be affecting the duchess’s physical being, so there shouldn&#39;t be anything, especially anything outside the room, being changed. In a decisive split second decision, she willed the rogue magic stream to reverse and return, and it obeyed. She was glad she decided to supervise the wish, who knows what kinda side effect that would&#39;ve caused, a liability not to be taken lightly with royalty.

The duchess was enveloped in Vae’s signature orange light, which indicated her magic was at work. The middle aged monarch stood as she felt the power coursing through her. The wrinkles on her face disappeared, her back strained out with a few satisfying cracks, and the gray hairs regained their former solid black colors. Just as the genie was feeling boastful of her awesome powers and pride over securing the safe travel deal, something went awry.

&#39;&#39;SHRRRRRRRRIP &#39;&#39;

The front of the duchess&#39;s dress exploded into confetti of expensive fabrics, her stomach suddenly distended and her navel turned into an outie. Her hands moved to instinctively support her grown stomach.

(text-colour:#7f2d8f)[“D-did… did you just knock me up?”] Her ever authoritative voice faltered as she stumbled back, cradling her stomach and struggling to adjust her balance. 

(text-colour:#ff7070)[“Well…”] Vae began, clearly just as surprised and clearly regretting letting the magic work automatically to any extent. (text-colour:#ff7070)[“To be honest, that section of human anatomy isn&#39;t something familiar to me.”] She admitted, embarrassed. 

(text-colour:#7f2d8f)[“I suppose if it was an accident… and you&#39;re taking accountability…”] The duchess lisped, suddenly getting tired due to the strain of the transformative magic.

Several hand maidens rushed forward and swarmed around her like bees coming to aid their queen. They practically lifted her back onto the throne, resting her down like a delicate doll. A soaked rag somehow appeared on top of her baby bump. 

(text-colour:#7f2d8f)[“Someone go tell Dandy she&#39;s going to be having a baby brother… sister?”] She questioned, giving Vae a questioning look, who shrugged. (text-colour:#7f2d8f)[“A sibling.”] The mother shrugged. 

(text-colour:#ff7070)[“Seriously… sorry about all this…”] The genie spoke up again, vaguely gesturing towards the swollen bump that replaced the duchess&#39;s flat stomach. 

(text-colour:#7f2d8f)[“If the deal was to restore my youth at the cost of getting pregnant again… I probably wouldn&#39;t have taken it, to be honest. However, I am a woman of my word. You granted it to the best of your ability. Your kind is guaranteed safety in my land. You are dismissed, please leave… we have to figure out what the situation with my new heir is going to be…”] The duchess spoke slowly and with effort. 

Two guards came to escort the genie again, although they practically had to chaise after her as Vae bolted out of the royal chamber with eagerness. Her sprint slowed to a fast jog as she made her way down the hallways, now needing the escorts to remember her way out. 

“So I don&#39;t mean to be rude.” One guard said, unprovoked. “but how the hell are you not familiar with the details of pregnancy? Didn&#39;t your mom ever give you the talk?”

(text-colour:#ff7070)[“I didn&#39;t have a mom.”] Vae said nonchalantly. 

“Oh, you were an orphan? What about your dad.” The other guard assumed. 

The redhead groaned, not wanting to be distracted by stupid questions. She turned around briefly and gestured to her own stomach, which was totally smooth. 

(text-colour:#ff7070)[“No belly button, see? I don&#39;t have a mom because I wasn&#39;t born.”] She explained quickly before continuing to walk. 

“Then how… are you? Where&#39;d you come from?” The first guard asked, his hand scratching his greasy scalp in confusion. 

The trio made their way out of the grand doors of the castle, now running on the flagstones toward the giant gait that separated the actual royal grounds from the gardens.

(text-colour:#ff7070)[“Genies are symbiotic, we rely on other species to wish more of us into existence, whether by accident or on purpose.”] She explained as they waited for the mechanics of the gate to twist the gears and allow her to exit. 

“Oh sorry… I understand now.” The guard&#39;s voice was rising with realization. “For what it&#39;s worth, I was an accident too.”

As the gate latched and Vae was about to exit, she turned around and placed her hands on the shoulders of each guard. 

(text-colour:#ff7070)[“Boys.”] She began, using the sweet yet disappointed tone reserved for children. (text-colour:#ff7070)[“You don&#39;t understand shit, don&#39;t quit your day jobs. Still, I understand the sentiment and still appreciate it. Goodbye.”]

And with great relief, the genie flew out of the castle grounds like a canary fleeing a dragon&#39;s cave. 


[[Vay is very tired-&gt;One last dream, before fate has its say]]</tw-passagedata><tw-passagedata pid="75" name="Execution bad end" tags="" position="2900,1050" size="100,100">//&#39;&#39;Knocked up, locked up&#39;&#39;//

(text-colour:#ff7070)[“Easy as pie!”] Vae proclaimed confidently.

&#39;&#39;Snap&#39;&#39;

The duchess was enveloped in Vae’s signature orange light, which indicated her magic was at work. The middle aged monarch stood as she felt the power coursing through her. The wrinkles on her face disappeared, her back straightened out with a few satisfying cracks, and the gray hairs regained their former solid black colors. Just as the genie was feeling boastful of her awesome powers and pride over securing the safe travel deal, something went awry.

&#39;&#39;SHRRRRRRRRIP &#39;&#39;

The front of the duchess&#39;s dress exploded into confetti of expensive fabrics, her stomach suddenly distended and her navel turned into an outie. Her hands moved to instinctively support her grown stomach.

(text-colour:#7f2d8f)[“I’m pregnant again?!”] The duchess said in confusion and anger as the light faded around her, confirming that her about to pop state was in fact the end result. 

(text-colour:#ff7070)[“Well uhhh…”] Vae rubbed the back of her neck nervously, sweat visibly dripping down her brow. (text-colour:#ff7070)[“I didn’t know that you were pregnant ten years ago, so the magic just did its thing.”] 

(text-colour:#7f2d8f)[“Are you implying that this is MY fault because of how I worded it? Can you undo it?”] The matriarch said a low simmering voice that made the fact she could simmer over into violence at any moment very apparent. 

(text-colour:#ff7070)[“Well… yes?” ]

(text-colour:#7f2d8f)[“YES?! You have some nerve you winged slut, coming here and knocking me up! I don’t even have my husband around to help me this time…”] She got distracted from her rage by a moment of sadness, and then was completely taken out of it as the realities of her condition made their presence known. Two of her butlers approached and helped ease her back into the throne.

(text-colour:#7f2d8f)[“Fuck it…”] She huffed. (text-colour:#7f2d8f)[“Forget about your deal… just get out before I change my mind and have you executed.&quot;]

Just then, a guard and what looked to be a nanny of some sort burst through the doors of the throne room, panicked, sweaty, and fearful. 

“Your majesty!” The guard yelled, his gasping voice magnified by the echo of his helmet. “Young Mistress Dandy has disappeared!” 

“I was just watching her play in her room, when she just vanished, nothing but a pile of clothes left behind!” The nanny explained.

The queen’s expression turned to that of fury, her voice roared throughout the hall like some great beast cut loose from a chain. She bellowed orders like an orcish commander in the midst of bloodlust.

Vae, realizing her time in the court and kingdom had come to an end and gone to shit, attempted to fly towards the nearest window. A guardsman took aim, and tossed a bolas at her, its rope wrapping around her torso and the steel balls attached dragging her back down to earth. She lost consciousness as her head struck the ground.

----------------------------------------------------------------------------------------------

Three months later

Captain Atgresa groaned, his hangover from the previous night finally catching up to him. If he had known that the duchess would have sent him down into her dungeons to check on that skeevie master interrogator, he wouldn’t have hit that third rum. 

Still, that had been the order of events and now he had to deal with it. He didn’t even really understand what was happening, just that some prisoner apparently hadn’t been executed like they were supposed to and now it was time to give that old psychopath the screws for failing. His master hadn’t told him to kill the little wretch, but he was too tired to think and killing the freak seemed like a justified action regardless… he was an executioner afterall, killing all those people, no matter how guilty, had to have some karmic consequence sometime. 

As Atgresa’s squad reached the chamber of the master inquisitor, he gave the required (mostly ceremonial) routine of how cooperation would be appreciated and would result in a kinder sentencing, before giving his battering team the signal to bust the door down before a response could even be spoken.

&#39;&#39;THUMP… THUMP… THUMP…&#39;&#39;

The iron shackled door gave way on the third go, sending splintering wood like shrapnel into the room. Using another hand motion, he gestured for the soldier holding the tower shield to lead the assault. The cowardly interrogator, his small bald figure looking like an egg in his current position, was huddled in a fearful position in the corner of the room. As he began to plead, Atgresa swung his mace with glee, shatting the man’s head like the egg it resembled, with blood and brains taking the place of yolk and egg white. Taking out a handkerchief and cleaning his deadly instrument with satisfaction, he was caught off guard when one of his soldiers nudged his shoulder.

“Uhh, captain? Get a look at this?”

“What is- oh that little fucker.”

It was the genie from those months ago, who had fucked over the duchess and made her give birth to Dandy all over again. She was swollen disgustedly like a tick, hooked up to various hoses and diodes like a science experiment. Her limbs were chained and various tubes, wires, and pumps hung from her mysteriously floating body. Her green eyes were filled with fear and panic. She was trying to mumble something, but a hose shoved deep into her mouth made her completely incomprehensible. 

“What now, cap?”

“She was supposed to be executed… not harvested for magic or whatever it is… Dave, hand me your crossbow.” 

His underling complied.

The genie shook in her bonds, clearly panicked and afraid for what was about to come.

“For what it’s worth…” He began apologetically. “I’m sorry you had to go through all this, but at least you’ll be out of your misery.”

&#39;&#39;*TWIP*

*POP*&#39;&#39;

//&#39;&#39;You got the executed bed end!
&#39;&#39;//

[[The end-&gt;Credits]]
</tw-passagedata><tw-passagedata pid="76" name="One last dream, before fate has its say" tags="" position="3150,475" size="100,100"> //&#39;&#39;One last dream before drifting down fate’s stream &#39;&#39;//

Genies don&#39;t usually sleep, but they can if they want to.

And boy did the temptation of temporary non-existence appeal to Vae right about now. The time she had spent in Verdantveil and the wishes she had granted had taken a lot of effort. 

So, she decided to actually use the bed in her hotel room. Stripping nude and digging under the sheets, she couldn&#39;t help but curl up and snuggle, the blanket surrounding her so tightly she resembled a dumpling. The blankets were slightly scratchy, the mattress not too plush, but it was pleasantly warm and made her wonder if this was how well groomed sheep felt. As her mind wandered and took stock of her sensations, the dark and cold experience of sleep crept up from within the depths of her mind, slowly turning off the brain functions like a janitor switching off the lights as he made a final sweep.

She briefly thought of what her plans for tomorrow should be, but decided to put it off until the morning as the suction of sleep finally overtook her consciousness entirely. 


(if:$Karma is 0)[[[Time to wake up and face the day.-&gt;Very bad karma ending]]](if:$Karma is 1)[[[Time to wake up and face the day.-&gt;Bad karma ending]]](if:$Karma is 2)[[[Time to wake up and face the day.-&gt;Bad karma ending]]](if:$Karma is 3)[[[Time to wake up and face the day.-&gt;Neutral karma ending]]](if:$Karma is 4)[[[Time to wake up and face the day.-&gt;Good karma ending]]](if:$Karma is 5)[[[Time to wake up and face the day.-&gt;Good karma ending]]](if:$Karma is 6)[[[Time to wake up and face the day.-&gt;Very good karma ending]]]
</tw-passagedata><tw-passagedata pid="77" name="Credits" tags="" position="3600,500" size="100,100">(align:&quot;=&gt;&lt;=&quot;)+(box:&quot;X=&quot;)[Lead Director:

Nopehome:

(link: &quot; https://www.deviantart.com/nopehome&quot;)[(goto-url: &#39; https://www.deviantart.com/nopehome&#39;)]// 



Writer:

Nopehome:

(link: &quot; https://www.deviantart.com/nopehome&quot;)[(goto-url: &#39; https://www.deviantart.com/nopehome&#39;)]// 




Programmer:

Nopehome:

(link: &quot; https://www.deviantart.com/nopehome&quot;)[(goto-url: &#39; https://www.deviantart.com/nopehome&#39;)]// 



Promotional/Ingame Art:

Weightcomicguy

(link: &quot; https://www.deviantart.com/weightcomicguy&quot;)[(goto-url: &#39; https://www.deviantart.com/weightcomicguy&#39;)]//



Creative Consultants:

Weightcomicguy

(link: &quot; https://www.deviantart.com/weightcomicguy&quot;)[(goto-url: &#39; https://www.deviantart.com/weightcomicguy&#39;)]//

Worstboid

(link: &quot; https://www.deviantart.com/worstboid&quot;)[(goto-url: &#39; https://www.deviantart.com/worstboid&#39;)]//



Proofreading:

Worstboid

(link: &quot; https://www.deviantart.com/worstboid&quot;)[(goto-url: &#39; https://www.deviantart.com/worstboid&#39;)]//


[[Wish you could try again?-&gt;Start the story]]]

(set: $creditpoint to it +1)</tw-passagedata><tw-passagedata pid="78" name="Beginning credits" tags="" position="700,425" size="100,100">(align:&quot;=&gt;&lt;=&quot;)+(box:&quot;X=&quot;)[Lead Director:

Nopehome:

(link: &quot; https://www.deviantart.com/nopehome&quot;)[(goto-url: &#39; https://www.deviantart.com/nopehome&#39;)]// 



Writer:

Nopehome:

(link: &quot; https://www.deviantart.com/nopehome&quot;)[(goto-url: &#39; https://www.deviantart.com/nopehome&#39;)]// 




Programmer:

Nopehome:

(link: &quot; https://www.deviantart.com/nopehome&quot;)[(goto-url: &#39; https://www.deviantart.com/nopehome&#39;)]// 



Promotional/Ingame Art:

Weightcomicguy

(link: &quot; https://www.deviantart.com/weightcomicguy&quot;)[(goto-url: &#39; https://www.deviantart.com/weightcomicguy&#39;)]//



Creative Consultants:

Weightcomicguy

(link: &quot; https://www.deviantart.com/weightcomicguy&quot;)[(goto-url: &#39; https://www.deviantart.com/weightcomicguy&#39;)]//

Worstboid

(link: &quot; https://www.deviantart.com/worstboid&quot;)[(goto-url: &#39; https://www.deviantart.com/worstboid&#39;)]//



Proofreading:

Worstboid

(link: &quot; https://www.deviantart.com/worstboid&quot;)[(goto-url: &#39; https://www.deviantart.com/worstboid&#39;)]//

All characters, stories, and works belong and are creative property of NopeHome. 


[[Back to title -&gt;Title page]]</tw-passagedata><tw-passagedata pid="79" name="Immobile fupa bad end" tags="" position="3000,400" size="100,100">//&#39;&#39;I can fix him&#39;&#39;//

Vae placed a thoughtful hand on the side of her head, trying to think of something for this pathetic loser. Then, devious inspiration struck, pushing a dark thought up from the back of her mind up to the forefront: a dark hypothetical she had wondered about for decades. She wouldn&#39;t… would she?

(text-colour:#ff7070)[“If I were you…”] she began, a hint of anticipation in her voice. (text-colour:#ff7070)[“I’d change myself to be better, that way I could land any woman I&#39;d want.” ]

(text-colour:orange)[“I hate to say it, but I don&#39;t even know what women want! That&#39;s part of the problem in the first place!”] The perspective wisher bemoaned. 

(text-colour:#ff7070)[“Oh, well that&#39;s simple. You already have a woman with good taste right in front of you! Just wish you were what I like in a man.]” Vae suggested, hoping he wouldn&#39;t think about it too much. 

Humphrey seemed conflicted, and he turned to look at his friend.

(text-colour:orange)[“What do you think Greg?”] He asked

Greg&#39;s apprehension was palpable. (text-colour:#93c7fb)[&quot;Wait... are you absolutely certain that&#39;s a wise decision?&quot;] he queried, his brow furrowed with concern as he looked at the wish granter.

Vae flashed him a reassuring wink, her confidence unwavering. (text-colour:#ff7070)[&quot;Relax, I&#39;ve done this countless times before.&quot;] She lied before turning her attention back to Humphrey, her voice laced with playful intrigue. (text-colour:#ff7070)[&quot;So, Humphrey, what&#39;s the verdict? Ready to become utterly irresistible?&quot;]

Humphrey didn&#39;t hesitate for even a second. His response was immediate and resolute.

(text-colour:orange)[&quot;I wish I was your dream man!&quot;] he declared, his voice filled with conviction.

A wide grin spread across Vae&#39;s face as she snapped her fingers, initiating the transformation.

A gentle orange luminescence enveloped Humphrey&#39;s form. He let out some muffled panicking sounds as he was completely smothered in the magic. Eventually his voice fell silent and the magic faded away like firework streams, revealing the new man beneath. He stood taller, his physique broader and more sculpted. His once-disheveled hair was now impeccably styled, and his eyes gleamed with newfound self-assurance.

(text-colour:#93c7fb)[&quot;Wow,&quot;] Greg exclaimed, his voice laced with awe as he took in the new form of his friend. (text-colour:#93c7fb)[&quot;You look... actually presentable.&quot;]

Humphrey turned to Vae, his gaze unwavering and intense. (text-colour:orange)[&quot;So, about that date?&quot;]

Vae had to concede, the transformation was astonishing… although that wasn’t much of a surprise considering he was literally tailored to appeal to her. She briefly wondered how much of the old Humphery was still in there, couldn’t be much physically at all, but mentally it would be harder to tell. He embodied everything she had ever yearned for in a male partner—strength, confidence, and an undeniable allure.

(text-colour:#ff7070)[&quot;I&#39;d be delighted.&quot;] she responded, a genuine smile gracing her lips.

Thus, their improbable romance blossomed. Humphrey, now the embodiment of Vae&#39;s dream man, swept her off her feet. He invited her to live with him permanently in Verdantveil, although it didn’t take long for his enhanced intelligence to kick in and earn enough money for them to move from his old shack into a luxury apartment in the regal part of town. She needn’t worry about traveling about granting wishes, now having a loyal partner to relieve her every day, although he called this process ‘milking the wish cow’ every once and a while, which she found slightly odd.

Humphrey&#39;s culinary skills were nothing short of extraordinary. He conjured delectable dishes that Vae found impossible to resist. Each meal was a lavish feast, and Vae found herself consuming more than she ever had before despite not even requiring food.Humphrey&#39;s culinary skills were nothing short of extraordinary. He conjured delectable dishes that Vae found impossible to resist, such as succulent roasts, creamy soups, and delicate pastries. Each meal was a lavish feast, and Vae found herself consuming more than she ever had before despite not even requiring food.

Initially, she reveled in the exquisite flavors and the unwavering attention, it was heaven between her wishes and his food. However, as the weeks transitioned into months, and the months into years, Vae&#39;s physique underwent a gradual but noticeable transformation. The pounds accumulated steadily, and her once-svelte figure began to soften and expand. Every sweet seemed to add centimeters to the width of her shaking ass, every glass of luxury wine seemed to bloat her stomach just that bit more, and her whole appearance began to soften like a pillowy housewife. 

By the time they exchanged vows, Vae had undergone a substantial weight gain. Her once-graceful wings strained to lift her from the ground, and she found herself spending the majority of her days reclining on their generously proportioned couch, indulging in Humphrey&#39;s boundless supply of culinary creations along with whatever treats he wished up for the day using her own magic. 

In a sense, she was content. Humphrey&#39;s adoration for her was unwavering, and her love for him was equally steadfast. Yet, as her mobility dwindled and her size continued to increase, a persistent sense of unease lingered in the recesses of her mind.

A nagging paranoia haunted her, wondering if these enabling tendencies of his were part of the original Humphery, still left over and subtly affecting the actions of the new or if this had been part of her desires, her dream man. Had a part of her wanted this spoilage? To have a heaving apron of a gut that she could barely walk with and crush melons with? An ass so heavy that it relegated her wings to mere vestigial decoration?

(text-colour:orange)[“Here you go honey, strawberry.]” Humphrey said as he held out an extra large bowl with a straw in it, containing a ridiculous amount of his infamous strawberry custard.

As she smiled at him warmly and brought the desert to her chubby face using her plump hands, that’s when it struck Vae: where or when these desires had come from didn’t matter. Humphrey was enjoying it now, in the moment… and so was she.

//&#39;&#39;You got the immobile and retired (bad?) ending!&#39;&#39;//


[[The end-&gt;Credits]]
</tw-passagedata><tw-passagedata pid="80" name="Helpless balloon" tags="" position="2575,925" size="100,100">//&#39;&#39;Helpless balloon &#39;&#39;//

Vae went back to her hotel, dejected at her lack of success in finding a suitable wish yet again weighing on her like an anvil... something she might need as the magic continued to build up inside of her. Strange noises emanating from within her body sounded very concerning, faint popping, sizzling, and arcanine crackling. Peeling her spandex off of her thick legs, as well as removing her gloves, she made herself comfortable using both of the available chairs in the room, her widened state requiring both.

//&#39;&#39;Knock knock knock&#39;&#39;//

(text-colour:#ff7070)[&quot;Come in!&quot;] The genie yelled in response to the polite knock at the door. She had begun to rub her stomach in an instinctual attempt to calm it, and although it was mostly ineffective, she elected to not to stop as Tilly the housekeeper entered the room.

(text-colour:#75c624)[&quot;Lady Vae, I got that bottle of whisky you requested.&quot;] The maid said, peaking around the door, clearly embarrassed to see the genie in her underwear.

&quot;Just get in here and hand me the bottle, you can take the tray and the glasses, I won&#39;t be needing them.&quot;

(text-colour:#75c624)[&quot;As you ask.&quot;] Tilly said agreeably, walking over and placing the concerningly large glass container on the table next to Vae. (text-colour:#75c624)[&quot;Do you need anything else, ma’am?&quot;]

(text-colour:#ff7070)[&quot;You could make a reasonable wish, that&#39;d be nice.&quot;] The guest responded blunt and honestly.

Tilly gave a nervous smile, and pointed to the sign located in every room, intended for much dirtier situations: NO solicitation of hotel staff.

Vae couldn&#39;t blame the maid for her reluctance to be involved with magic, given the fact that it was also entirely responsible for her grotesquely swollen appearance. Still. that didn&#39;t stop her from feeling a bit frustrated.

(text-colour:#ff7070)[&quot;Then that&#39;s all I need from you, dear. Although... I&#39;ll probably need you in the morning, bring rope. Oh, and of course send anyone up who comes by looking for a wish. Anyone, I&#39;m desperate.&quot;] She said making herself absolutely clear.

The housekeeper nodded solemnly, clearly empathetic but not to the point where she was willing to put herself at perceived risk.

With that, Vae settled in for the night, hauling herself into bed and causing an orchestra of tight rubbery sounds and pneumatic creaking and hissing. Grabbing a book from her nightstand using her chubby fingers, she prepared for the strain that was sure to come in the next couple of hours. While she herself had never gone this long without granting a wish, the memory of her sister Bee becoming a swollen parade float version of herself allowed her to know exactly what to expect.

It didn&#39;t take long for the magical backup to continue its swelling, around midnight she felt herself growing. The blanket she wrapped around herself slowly grew tighter while feeling smaller and smaller. She tried her best to keep her attention on the book, but she found her transformation impossible to ignore as her body grew wider and wider, feeling her swollen body begin to hang over the sides of the bed.

She shifted in a futile attempt to keep herself comfortable, although that effort proved futile. Her fat cheeks puffed, squinting her eyes, her fat arms resembled overstuffed pillows and felt stiff, her view of the room nearly eclipsed entirely by her round stomach and melon sized cleavage. Vae was glad that she had removed her spandex ahead of time, knowing that they would have started tearing by now, although she now realized  that she should&#39;ve gone full commando as her panties buried themselves between her globular asscheeks uncomfortably and her bra was quickly outgrown and burst by her massive tits and her torso which was taking on a spherical shape.

Then, she felt herself begin to float. Slowly, she felt the bed fall away from under her, and she flailed her thick limbs in an attempt to grab onto anything to keep herself grounded. Sadly, her taut limbs were too clumsy to grab onto the bed stand. Floating up like a forgotten birthday balloon, she bounced off the ceiling a couple of times before sticking there, the blanket still separating her overstretched skin from the sharp stucco ceiling.


This was going to be a long, boring night. Hopefully [[the morning-&gt;Helpless balloon (noon)]] will go better. </tw-passagedata><tw-passagedata pid="81" name="End of the kingdom bad end" tags="" position="3050,1300" size="100,100">//&#39;&#39;D &amp; D (Dragon and destruction) &#39;&#39;//

(text-colour:#ff7070)[“This is a little awkward.”] Vae said, her voice defeated and muffled through her puffy cheeks. (text-colour:#ff7070)[“But my fingers are too fat for me to snap them anymore. Can you…?”]

Roughly, the mugger grabbed the genie’s fat fingers, the tension so great in her body that she was forced to use both hands to manipulate just a finger and the thumb. Just as she got them into position, her strength gave out and the digits snapped like a spring loaded mechanism. As the two fingers met, it let out an orange spark that erupted orange dust into the mugger’s face, sending her flat on her ass in a coughing fit as Vae rapidly deflated back to normal.  

(text-colour:#ff7070)[“Shit! I didn’t mean to pour it ALL into that one wish!”] She was panicking, looking at the mugger like she was some unholy demon.

(text-colour:#a27549)[“The fuck *cough* was that?”] The black haired criminal questioned. 

Strangely the scars on her face seemed to disappear and her skin began to segment and turn an odd orange color. Her clothes began to strain, then rip as she grew taller and more muscular. 

(text-colour:#a27549)[“The hell? What’s happening?”] Her voice was changing too, going from its already gruff tone to a far deeper, almost inhuman guttural sound. (text-colour:#a27549)[“I… tired…” ]

Her large eyes, which had turned entirely black with small red dots in the center, fluttered and closed as she collapsed, crashing into a building and smashing it under her giant weight. 

Vae flew up and away, above the city to observe the power hungry woman’s out of control transformation. Her wish had been pretty solid, but Vae had attempted to spin it the best she could by turning her into a dragon hybrid. An intelligent being with powerful magical potential, yet with the well known habit of sleeping for very long periods of time, in other words not out of the blue. However, the genie had underestimated how backed up she truly was, and as soon as the wish presented an opening, it all poured into it, supercharging the changes. Instead of a small barn sized baby dragon, the mugger had been given the power of an elder dragon, something quite evident as she continued to outgrow the city, building by building block by block. 

The dragon-woman was completely naked now, her old clothes long reduced to tatters. Her skin was completely replaced with glittering orange scales, blade-like claws the size of entire people growing out of her fingers, and horns growing out from her scalp past her raven black hair. Citizens fled as their homes were crushed, and soldiers died as they attempted to pierce the dragon&#39;s impenetrable scales only to be crushed by flesh and rubble. The genie felt a pit open in her stomach, knowing all of this was at least partially her fault. She herself was far above the city now, near the cloud layer with the perfect view of the quickly ruining city, smothered under the sleeping body of a wish born elder monster. The dragon’s stomach began to bulge and bloat as it took in a particularly deep breath. Her limbs also puffed up, causing the giant horror to obtain the figure of a pleasantly plump woman. Then, at the crux of her breath, she exhaled and spewed forth a truly monumental pillar of fire along with her roaring snore. 

Vae attempted to dodge out of the way, but found that even her fastest speed would still have her burnt to a crisp.

Suddenly, something grabbed her arm and she was whisked away at high speeds through the air. The sound of searing air and roaring flame filled her ears, ten times greater than a blast furnace as she barely escaped the radius. More hands, rough and broad, grabbed her and hoisted her into the dwarven airship that had rescued her.

“You ok, miss?” One wearing a pilot’s hat and an eyepatch asked her.

(text-colour:#ff7070)[“Think you might’ve broken my arm when you grabbed me.”] She grabbed it, only now feeling the pain that the adrenaline was falling from its peak. (text-colour:#ff7070)[“Better than being burnt to a crisp, mind you.” ]

“Oh, don’t pay it any mind. What kind of man would we be if we let a fairy get toasted when we have the power to help?” He laughed, along with the rest of the crew. 

Vae nearly spoke up to correct them, so reflexive was her need to correct people misidentifying her species, but she stopped herself, thinking it better for them no not even know she could’ve been responsible for the ongoing tragedy down below. 

(text-colour:#ff7070)[“Mind if I hitch a ride with you fellas?”] She asked.

“Of course you can, not like I can expect you to fly back down Verdantveil! Hell, we can’t even land to trade now, like we had planned. Dale, go grab the doc and tell him we got an arm that needs casteing up! I’m going to get back to the control room and chart us a new course.” 

As Vat sat on the edge of the deck, she looked back down one last time. The city was in utter ruin, the people too small due to distance to even see now, fires bursting out across the rubble, and one very bloated dragon woman simply sleeping through the destruction she herself had wrought. 

She sighed, knowing that this mess wouldn’t be impossible to clean up, but it would certainly be a headache with no easy fixes. At least she’d be around to fix them…


&lt;img src=&quot;https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/f/eb6ad10e-1dc7-46e1-87ef-0a22f7da7a2e/djo43fs-2afd2032-0379-4a9d-bd73-fdf6a1ad84ff.png/v1/fit/w_828,h_1354,q_70,strp/dragon_fat_by_nopehome_djo43fs-414w-2x.jpg?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1cm46YXBwOjdlMGQxODg5ODIyNjQzNzNhNWYwZDQxNWVhMGQyNmUwIiwiaXNzIjoidXJuOmFwcDo3ZTBkMTg4OTgyMjY0MzczYTVmMGQ0MTVlYTBkMjZlMCIsIm9iaiI6W1t7ImhlaWdodCI6Ijw9MjA5NCIsInBhdGgiOiJcL2ZcL2ViNmFkMTBlLTFkYzctNDZlMS04N2VmLTBhMjJmN2RhN2EyZVwvZGpvNDNmcy0yYWZkMjAzMi0wMzc5LTRhOWQtYmQ3My1mZGY2YTFhZDg0ZmYucG5nIiwid2lkdGgiOiI8PTEyODAifV1dLCJhdWQiOlsidXJuOnNlcnZpY2U6aW1hZ2Uub3BlcmF0aW9ucyJdfQ.2iOr0qjt_NQ3YRTRGHFyDm716MIRihO2B4Pn9-H2Ek8&quot;&gt;

//&#39;&#39;You got the City Destroyer Ending&#39;&#39;//

[[The end-&gt;Credits]]
</tw-passagedata><tw-passagedata pid="82" name="Bee scene" tags="" position="1825,625" size="100,100">//&#39;&#39;Family reunion&#39;&#39;//

As Vae entered the pub, its warm wooden interior was wrapped in paper banners, flyers, and streamers featuring complex designs in rainbow colors. Nearly every table was crowded with people, self separated into various teams. Seemingly half the city was crammed tightly into the booths of the bar, with  seemingly every species, gender, and creed being represented by both the customers and the showgirls patrolling the room. 

(text-colour:#b87cf3)[“Hey lil’ sis! Get your ass over here and have a drink with me!”] A familiar voice called from a far off corner booth as she entered. 

Instantly recognizing who it was, a mixed expression of happiness and reluctance took over her face. It was one of her many sisters, although her closet and most familiar: Bee. 

With her bushy lilac hair, pale white skin and pin point eyes made her identity unmistakable. She sat in a chair across from a booth seat, where a shady looking cloaked woman sipped on a glass of rum. Vaerelented, sighing as she approached the pair. 

(text-colour:#b87cf3)[“What the hell are you doing here girl! I haven’t seen you since…”] Bee trailed off for a moment, having to put effort into remembering. (text-colour:#b87cf3)[“That riot in Wiz’Cit, right?” ]

(text-colour:#ff7070)[“Nice of you to leave that mess for me to clean up.”] Vae said sarcastically, her copy of the memory not being as fond as her sister’s.(text-colour:#ff7070)[ “It took two weeks of very complicated wishes to undo that whole mess. There’s still one room in that hotel where the five senses don’t work.” ]

(text-colour:#b87cf3)[“I was sure that you could figure it all out, besides, it gave you a half a month of easy wishing!”] The elder sister dismissed the incident before grabbing her sister’s hand and pulling her into the seat beside herself. (text-colour:#b87cf3)[“Listen to my friend here, she’s offering an equally good opportunity.” ]

“Indeed. I assume that you are a genie just as Bee is?” The shady figure asked.

(text-colour:#ff7070)[“No.”] The younger genie said sarcastically, fluttering her red wings to emphasize the point. 

(text-colour:#b87cf3)[“Now don’t be a smart ass, just listen.”]  The purple genie chided, allowing her friend to continue. 

(text-colour:#bfbf22)[“I’ve learned of a jewel being kept at an old mage’s house. He got it to use in some crackpot experiment or another, personally I think it’d be much more useful in our hands, wouldn’t you agree?”] The thief gestured to both women with flourishing hands, although not waiting for a response. (text-colour:#bfbf22)[“Once I have that diamond, I’ll sell it on the black market and have a bonafide fortune. I’ll hire ten servants, and you girls can cycle through all of us for easy consistent wishes, no need for advertising or constant travel.” ]

(text-colour:#ff7070)[“If you need money,”] Vae instantly noticed the hole in her story and began to tear into it. (text-colour:#ff7070)[“Then we can just give you a fortune, you know? Two genies, either of us could give you an infinite fortune.”]

(text-colour:#b87cf3)[“Why do you gotta be so smart, huh?”] Bee slapped her sister on the back, somewhat proud. (text-colour:#b87cf3)[“Tell her the truth, Sacho, we’re not getting it past her.” ]

The hooded figure sighed, pulling her hood down to reveal dark ash skin and red eyes. 

(text-colour:#bfbf22)[“Truth is that the mage held my family as slaves long ago when he lived in the south. I escaped eventually, and now I want recompense.”] 

(text-colour:#ff7070)[“Bee!”] Vae screamed at her sister. (text-colour:#ff7070)[“We can’t assist in murder! It&#39;s so below us! Surely there’s another way to resolve this, a different wish?”]

Before her older sister could respond, the dark elf replied.

(text-colour:#bfbf22)[“What would you have me wish for? Have him undo the flailing of my sister, the drowning of my mother and father? Those images and experiences will never leave me, and if I have you remove or alter them… I won’t be me anymore. All I want… all I need rather, is to see that old fool’s eyes bulge bloody red as I strangle the very life out of his wretched being.”]

This was a tough situation. This mortal clearly had more knowledge, too much, about the reality of genie magic. The question of whether or not the people affected by magic were or were not the same before and after was a controversial subject. Some genies outright refused to alter living beings in any such way. Vae wasn’t one of them, she thought that people were more fractional than that, and that you could change parts of a person while still keeping them, but it was clear that no debate about philosophy would change the opinion or goal of this wayward elf. 

She turned to Bee, who was looking at her expectantly, the same look she wore every time she really wanted Vae to do something that the younger sister herself thought was a bad or risky idea. 

(text-colour:#ff7070)[“The lengths you go to for an easy wish…”] The red head muttered as she thought. 

(text-colour:#b87cf3)[“Don’t start with that.”] Bee said exasperated. (text-colour:#b87cf3)[“God forbid I want to live a life where I can take a me day without turning into a parade blimp! You could use a vacation yourself. How long have you been on the road, keeping up the streak? Years? Decades? Think of this as an opportunity to have a vacation at the very least.”]

(text-colour:#ff7070)[“Why do you want us to help you if you are against magic solving your problem any other way?”] Instead of responding to her sister and rusming the argument they have had so many times before, she attempted to find another flaw in the elf’s plan.

(text-colour:#bfbf22)[“Because no plan is perfect.”] The avenger answered simply. (text-colour:#bfbf22)[“Guards come around unexpectedly, I find that the bastard’s adopted a guard dog, anything that’s unexpected, you two will fix it for me.”] Sacho’s red eyes suddenly opened a bit wider, hoping for sympathy. (text-colour:#bfbf22)[“I really need this… without this closure, I’m not sure if I’ll ever be able to really move on…” ]


&lt;img src=&quot;https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/f/eb6ad10e-1dc7-46e1-87ef-0a22f7da7a2e/djo43i7-ca722fb2-6455-4b91-b4fb-b345ea294e33.png/v1/fit/w_698,h_1800,q_70,strp/bee_by_nopehome_djo43i7-375w-2x.jpg?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1cm46YXBwOjdlMGQxODg5ODIyNjQzNzNhNWYwZDQxNWVhMGQyNmUwIiwiaXNzIjoidXJuOmFwcDo3ZTBkMTg4OTgyMjY0MzczYTVmMGQ0MTVlYTBkMjZlMCIsIm9iaiI6W1t7ImhlaWdodCI6Ijw9MzMwMSIsInBhdGgiOiJcL2ZcL2ViNmFkMTBlLTFkYzctNDZlMS04N2VmLTBhMjJmN2RhN2EyZVwvZGpvNDNpNy1jYTcyMmZiMi02NDU1LTRiOTEtYjRmYi1iMzQ1ZWEyOTRlMzMucG5nIiwid2lkdGgiOiI8PTEyODAifV1dLCJhdWQiOlsidXJuOnNlcnZpY2U6aW1hZ2Uub3BlcmF0aW9ucyJdfQ.ZhDOk6xPreA_TPfTkPUrVdOab3scAasSO1_DLpAZA1Q&quot;&gt;

[[Give her method a shot -&gt;Bee bad end]]

[[Turn her down politely-&gt;Bee turned down offer)]]</tw-passagedata><tw-passagedata pid="83" name="Boredom/desired goods easter egg" tags="" position="950,925" size="100,100">//&#39;&#39;Something else&#39;&#39;//

Standing in the bustling square was an old feeble woman, who was hunched from many years of hard work. She seemed to be chatting up a shop keeper (who wasn’t bothering to actually listen) about the good old days while browsing his selection of semi-fresh fruit. Vae hovered over, knowing how easy old folk were for a quick wish. They usually wished to ease some long held regret or for their youth back, relatively harness things. Hovering above the old woman’s line of sight for a moment, she prepared her voice to speak loudly and clearly, putting on her best smile as well. 

(text-colour:#ff7070)[&quot;Good afternoon, ma&#39;am,&quot;] Vae began, descending gently. (text-colour:#ff7070)[&quot;I&#39;m Vae, and I&#39;m here to grant wishes.&quot;]

The old woman didn&#39;t even look up. &quot;Humph. Don&#39;t need any wishes, thank you.&quot; She mumbled, clearly having bad past experiences with sales people. 

This was going to be a smidge harder than Vae thought.

(text-colour:#ff7070)[“You sure? I could restore your youth, make you immortal, or just make your grandkids visit more often. Anything at all!” ]

&quot;I said no,&quot; the woman snapped, finally meeting Vae&#39;s eyes. &quot;But you are a genie, aren&#39;t you?&quot;

(text-colour:#ff7070)[&quot;Yes, of course.&quot;] Vae puffed out her chest slightly, getting annoyed with the old bag.

“Good, then you are a benevolent spirit, you are coming with me.” The old woman grumbled, putting down the pair she was inspecting and grabbing Vae’s hand with a surprising firmness, leading her in a seemingly random direction. “I need someone to help me at the Department of Mounts and Carriages. I need my yak licence renewed and I have a hard time reading the little letters.”

Vae wanted to protest, but found that a mixture of pity and the old hag’s sheer strength kept her from leaving. 

&quot;Come along now, no dawdling. We haven&#39;t got all day, and I heard from the butcher that they&#39;re running low on form 7B-alpha-zeta.&quot; 

----------------------------------------------------------------------------------------------

The candles that lined the wall of the waiting room flickered annoyingly and casted a sickly yellow light throughout the office. The scratching of the ink quills the workers used added to Vae’s impatient uncomfortability. She stood alongside the old woman in a  line of beings that stretched into the distance: a gnome meticulously organizing stacks of paperwork, an elf impatiently tapping her foot, and a troll grumbling about &quot;form 28-gamma-double-prime.&quot; Each face wore a mask of weary resignation.

(text-colour:#ff7070)[“They said it would be just a short wait.&quot;] The genie complained, looking at their ticket that read seventy six on it. The paper board next to their segment of the line teased her with only the number eight. 

&quot;Patience, genie.&quot; the old woman said, a hint of amusement in her voice. “Distract yourself if need be.” 

With little choice, Vae allowed her mind to wander and her eyes to cross, letting her imagination distract her from the sheer boredom.






































































(text-colour:#ff7070)[“I can wish us to the fro-”] Vae began.

“No.”

Alright, back to staring into the distance.


















































































































































































//‘I wish I was playing (link: &quot;something else&quot;)[(goto-url: &#39;https://www.deviantart.com/weightcomicguy/art/K-wyde-Quest-P1-1177567661&#39;)] right now.’// Vae thought to herself.











[[The end-&gt;Credits]]
</tw-passagedata><tw-passagedata pid="84" name="Bee bad end" tags="" position="1900,550" size="100,100">//&#39;&#39;Small setback&#39;&#39;//


(text-colour:#ff7070)[“If you are really confident that this is the best course of action Bee, I’ll trust your judgment.”] Vae relented. 

(text-colour:#b87cf3)[“Thanks Vae, you won’t regret this. Soon enough, we’ll never have to worry about having to hunt for wishes ever again!” ]

(text-colour:#bfbf22)[“Now that this unexpected help has arrived, may we finally get going on the job?” ]Sacho asked, gesturing towards the door. “We need to get moving if we’re going to beat the guard patrol’s exchange.”

Vae nodded, and the three women exited the tavern without much even stopping for a drink. The manager huffed, having overheard their entire conversation while pretending to be busy cleaning a table. Just as he was about to disregard everything he had just heard, a sack of coins slammed onto the table in front of him. Looking up, a physically feeble aged man stood there, leaning on a staff in a way that made it look like it was the only thing keeping him crumbling to the floor. Still, his surprisingly wide eyes were full of power and malice that betrayed the rest of his appearance.

“Tell me what you heard them say…” 

----------------------------------------------------------------------------------------------

The mage’s mansion was like anywhere else in Verdantveil. The grounds themselves were as large as a city block, and Vae would’ve bet that the mansion itself was the second largest building next to the royal castle itself. Tall, vine-covered walls separated it from the rest of the city like a miniature fort, and would’ve blocked her view of all but the rooftops if she wasn’t capable of flight. 

(text-colour:#b87cf3)[“Get down before someone spots you!”] Bee scolded her sister. 

(text-colour:#ff7070)[“Sorry, sorry. Coast is clear, the guard change is happening. How long did you say it lasts?”]

“Ten minutes.” Sacho confirmed. “You two, grab me and fly me over the wall.” 

The two genies nodded, and grabbed the assassin by the arms, and began to slowly haul her up and over the wall, their wings fluttering at agonizing speeds. 

(text-colour:#ff7070)[“Geez, how much do you weigh?”] Vae asked, face sweating from the effort. 

(text-colour:#bfbf22)[“It’s my armor and equipment. Stop talking and keep flying, we don’t want to alert the guards.”] 

As soon as they crossed the peak of the wall, both sister’s strength gave out, sending all three crashing into a section of the pristine lawn, between the wall and a shed the size of a small house. The three women waited in silent anticipation of an alarm ringing or a gruff guard’s yell, but nothing of the sort happened. Using hand gestures, Sacho signaled that their path was around the corner of the shed and toward the backdoor of the mansion. The trio moved quickly and quietly, although the colorful genies weren&#39;t too familiar with stealth, opting to just hover slowly alongside their assassin employer. As they reached the back door, the elf produced something small wrapped in leather, unwrapping it to reveal a crude looking iron key. Sacho slid it into the keyhole of the back door, and turned it. 

&#39;&#39;KARRRUMK 
&#39;&#39;
The lock made a terrible grinding noise, and as the elf tore the key back out of the lock, the end of the metal object had been torn into fractal shapes by some unseen magic. 

(text-colour:#bfbf22)[“God damn it, that locksmith said that all I needed was a key…”] Sacho cursed. (text-colour:#bfbf22)[“Alright you two, I wish for the door to be unlocked.”] 

(text-colour:#b87cf3)[“Gotcha, don’t even worry- GAH!”] Bee snapped to grant the wish, only to have sparks spurt from her fingers and singed her hands. (text-colour:#b87cf3)[“Fucker must have a counter spell or something on it.”]

Now desperate, Sacho looked up at the house again, noticing a rather small window a few feet above the door. (text-colour:#bfbf22)[“Think you can fit in that?”] She asked, pointing.

(text-colour:#ff7070)[“There’s no way either of us could fit in that. You really didn’t plan this out too well ahead of time.”] Vae chided, getting frustrated and nervous, something she almost immediately regretted as the dark elf’s red eyes gave her a hard, angry stare.

(text-colour:#bfbf22)[“I wish you were short enough to fit into that window and open it from the inside.”] Sacho requested with a malicious, petty tone. 

(text-colour:#ff7070)[“Wait, what?”]

(text-colour:#b87cf3)[“No time for indecision Vae, we gotta work fast.”] Bee said in a hurried, rushed whisper.

&#39;&#39;SNAP&#39;&#39; 

Before the scarlet sister could argue against this course of action, the purple genie snapped her leather gloved hands once more, and the wish went through, uninterrupted this time.

A purple mist erupted around her, and she coughed wildly as it entered her lungs. It smelt of lilac and lavender, horribly strong smells that overpowered her nose and stained her throat. It wasn’t very often that Vae found herself being the direct subject of a wish, and it wasn’t a feeling she enjoyed whatsoever. Her mind swirled, her senses and natural balance became disorientated, shifting her spatial awareness. She felt smaller and her surroundings felt like it was growing somehow, as if the world was expanding in scale and scope. 

(text-colour:#ff7070)[“Fu- *COUGH* ck, Bee don’t do that shit when I’m not ready!”] Just as Vae finished the sentence, she wiped the tears from her irritated eyes and looked back at her sister… or her legs rather. (text-colour:#ff7070)[“Oh no.”] 

(text-colour:#b87cf3)[“Now you really are the little sister.”] The older one teased, evidently amused by the outcome of her wishing work. 

Just as Socha wanted, Vae was now smaller, nearly a half of her original height, only coming up to her lanky sister’s knees. Not only had she shrunk in height, but she hadn’t shrunk in mass. Her slightly below average weight had been compressed into her smaller form, making her slightly wider as a result. Her face had become pudgy, her freckles stretched out over her chubby cheeks, her legs had absorbed much of her mass and given her a very bottom heavy appearance. Her arms had become cute yet less useful parodies of themselves, bringing to mind a stuffed animal.

(text-colour:#ff7070)[“Change me back! I can’t stay like this! Say: ‘I wish you were back to your normal height’ right now!’&quot;] She accosted the dark elf like a small angry dog, jumping and barking. 

(text-colour:#bfbf22)[“Not until we’re done here, as soon as we’re done. Fly up, throw the window there and unlock the place from the inside.”] Socha tried to get the miniature red head back on point, covering her mouth with a palm to prevent her from yelling.

The squashed genie sighed, giving into the reality she had gotten herself into before nodding in agreement.  Her scarlet wings buzzed, but she didn’t lift off. 

(text-colour:#b87cf3)[“Aerodynamics is a delicate science.”] Bee said before lifting up her shortstack sister with some difficulty, her own wings going overtime to lift them both into the air.

Aiming Vae directly at the window, she pushed the thing in and it spun open on a swivel and attempted to jam her sister though.

&#39;&#39;THWONK&#39;&#39;  

Alas the little genie was too wide to be simply pushed in, having gotten stuck halfway through. Bee pushed with both hands, but nothing budgeted. Flying backwards for some distance, she aimed her elbow and flew rapidly at her wedged sister. Vae let out a yelp of pain as both her and her sister flew through the opening, shattering the window in a loud crack.

(text-colour:#bfbf22)[“Fuck.”] Sacho said, knowing their cover was  officially blown.

“Indeed, you are quite fucked.” An old, dry voice said from behind her.

The two genies, hearing that they had been discovered, hid in the darkness of the uninhabited room they had just entered, waiting to see how things played out. The dark elf turned around, spinning with her dagger in a show of defiance. Her red eyes blazed as they set eyes on the old mage who had enslaved her oh so many painful years ago. He stood there, grinning while leaning on his cane, with many guards surrounding him. 

“Not many escape my service, and you have proven yourself most foolish to return. Apologize for escaping me, if you wish to live.” His old voice cracked with threatening danger. 

(text-colour:#bfbf22)[“The only wish…”] She began, readying herself to die fighting. (text-colour:#bfbf22)[“that those two genies would get out of here safely.”] 

Not missing a beat, acting on instinct, Vae snapped before she could realize what was going on. Suddenly, instead of being in the dark layer of a sadistic old mage, the two women were surrounded by snow, a far cry from the swampy city they had just been. 

(text-colour:#b87cf3)[“Holy shit that was close!”] Bee sighed in relief, standing up before beginning to shiver. (text-colour:#b87cf3)[“Guess you were right the first time, that was a bad call to throw our lot in with her.” ]

(text-colour:#ff7070)[“You really need to choose your business partners better Bee, we could’ve gotten killed!”] Vae said as she attempted to dig herself out of the snow, her short form barely tall enough to keep her head above the top layer. 

“What’re you two standing out there for?! You’re going to die in those clothes!” An old woman yelled from the door of a nearby house, a yellow glow from the inside illuminating her like a holy saint. 

(text-colour:#b87cf3)[“Don’t have to tell me twice.”] The elder sister happily accepted as she stomped towards the exit.

(text-colour:#ff7070)[“Bee!]” Vae cried as she struggled through the snow. 

(text-colour:#b87cf3)[“Oh right.”] The purple genie realized, taking her sister up in her arms and giving her a demeaning piggyback ride. (text-colour:#b87cf3)[“I could get used to you being the &#39;&#39;really&#39;&#39; little sister for a while.”] She teased.

“Don’t even think about it.” Vae shot out, giving her sister an ineffectual slap on the head.

//&#39;&#39;You got the shortstack ending! &#39;&#39;//

&lt;img src=&quot;https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/f/eb6ad10e-1dc7-46e1-87ef-0a22f7da7a2e/djo438p-d47bce61-740f-4229-b6e8-c6e5e806c709.png/v1/fit/w_828,h_1244,q_70,strp/shortstack_by_nopehome_djo438p-414w-2x.jpg?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1cm46YXBwOjdlMGQxODg5ODIyNjQzNzNhNWYwZDQxNWVhMGQyNmUwIiwiaXNzIjoidXJuOmFwcDo3ZTBkMTg4OTgyMjY0MzczYTVmMGQ0MTVlYTBkMjZlMCIsIm9iaiI6W1t7ImhlaWdodCI6Ijw9MTkyMiIsInBhdGgiOiJcL2ZcL2ViNmFkMTBlLTFkYzctNDZlMS04N2VmLTBhMjJmN2RhN2EyZVwvZGpvNDM4cC1kNDdiY2U2MS03NDBmLTQyMjktYjZlOC1jNmU1ZTgwNmM3MDkucG5nIiwid2lkdGgiOiI8PTEyODAifV1dLCJhdWQiOlsidXJuOnNlcnZpY2U6aW1hZ2Uub3BlcmF0aW9ucyJdfQ.j9CVRFCFPDJTJi575PIFAXxe4yDSI5-6C9x9k36ps_8&quot;&gt;


[[The end-&gt;Credits]]
</tw-passagedata><tw-passagedata pid="85" name="Bee turned down offer)" tags="" position="1975,725" size="100,100">//&#39;&#39;Hard feelings, brutal truth, and worse waistlines&#39;&#39;//

(text-colour:#ff7070)[“Bee, this is insane. You can&#39;t seriously think this&#39;ll end well.”] Vae admonished. (text-colour:#ff7070)[“There&#39;s gotta be safer ways to live an easy life.”]

(text-colour:#b87cf3)[“Like you live all safe and secure!”] The narrow eyes of the purple genie flared with anger as she rose from her seat, launching the chair onto the ground with the motion. (text-colour:#b87cf3)[“Driving around in that stupid horseless carriage! Every time we separate I wonder if I&#39;ll see you again. You could get killed with a bad wish, or erased from existence!”]

(text-colour:#ff7070)[“At least I earn a fucking living! All you do is go around and beg people for easy wishes and handouts. Wouldn&#39;t it be nice to grant a wish for once without survival and laziness being your motivation?” ]

Bee drew her hand back, but Sacho caught it before she could launch it into her sister’s face. 

(text-colour:#bfbf22)[“I don’t want to be a wedge between you and your sister.”] The dark elf said, some guilt in her voice. “I can do this on my own. In all honesty, your sister has a point about my hypocrisy of not using a wish to fix my problems while using it to aid myself in solving it myself.” 

The elf slipped past the two and made way for the door. Bee begged her to stay, but quickly got distracted as Vae pulled her back into their argument. 

(text-colour:#ff7070)[“Let her go! You shouldn’t help a wanna-be murderer to begin with!”] The redhead argued, having made her mind up on that point.

(text-colour:#b87cf3)[“Like you know what I want! What I need! I didn’t ask you to ruin this for me! I didn’t ask to exist to begin with, you accident!”] The purple genie yelled, unleashing all her fury as she leaned down to scream mere inches from her sister’s face.

As the words echoed throughout the bar, slowly getting drowned out by the cheap music and the mummering of other customers, the reality of what was said sank into them both. Tears formed in the corners of the little sister’s wide eyes. Bee’s angered scowl and ruffled bow melted into that of sadness and regret.

(text-colour:#b87cf3)[“I’m sorry, I didn’t mean that. I was ju-”] Her apology was cut short as Vae let out a despairing wail of anguish, snot dripping from her nose and tears staining her face wish smeared makeup. 

(text-colour:#b87cf3)[“Let me buy you a drink, we have some things we need to talk about.”] 

The two made their way over to the bar counter, the elder taking her sister gently guiding her sobbing sibling over. The barkeep came over, but didn’t say anything out of discretion. 

“A fuzzy navel and a white nun.” Bee requested quickly. 

(text-colour:#ff7070)[“You think we have orange juice in this part of the country?”]

(text-colour:#b87cf3)[“Then get me a fuzzy whatever you have in this country!” ]

The bartender hurried off to search for the ingredients and mix the drinks.  

(text-colour:#b87cf3)[“Look, I didn’t mean it that way… it’s just that things have never felt not-awkward between the two of us, you know?”]

(text-colour:#ff7070)[“You *sniff* resent me for it… I know... I’ve always been able to tell…”] Vae said, pulling back the boogers of despair into her nose.

(text-colour:#b87cf3)[“Well… I was wrong…”]

The younger sister sat up in her seat, surprised, somewhat breaking her out of her sadness.

(text-colour:#ff7070)[“W-what?”] 

(text-colour:#b87cf3)[“Back when we first split, it was confusing, ya know? I’m sure you felt like you were missing pieces as much as I did. Hell, you take any person, split em’ in half and I doubt they’d do any better than us fuckups.”] Although her pointed purple eyes couldn’t look her sister in the face as she explained, there was no doubt that it was genuine. (text-colour:#b87cf3)[“I wanted to get us back together into the old lady, ya know? I think I held onto the most of her… no, that’s not right. The part of her that she thought she was.” ]

(text-colour:#ff7070)[“I could always tell.”] Vae said, grabbing a napkin from the table and beginning to clean herself off. (text-colour:#ff7070)[“You were really upset with the failure. That’s why you wanted to…”]

(text-colour:#b87cf3)[“Not anymore.”] Bee said firmly, pounding a fist onto the counter. (text-colour:#b87cf3)[“It’s been too long. We’re not two halves of single person, we’ve grown, evolved. We became ourselves quite a while ago and it’s time I accept that, totally.”]

(text-colour:#ff7070)[“I doubt she would’ve agreed with you.”]

(text-colour:#b87cf3)[“She’s not around anymore. She’s not dead, but she’s not really a thing, ya know. Besides, she should’ve known better that removing the part of herself who actually enjoyed the wishing job wasn’t ever going to end well. You ever get a mumbo jumbo psychological magical wish that’s ever gone smooth?” ]

A little chuckle exited Vea’s thin lips. 

(text-colour:#b87cf3)[“Exactly! What’s important is that we’re sisters!”]

(text-colour:#ff7070)[“You don’t mean that.”]

(text-colour:#b87cf3)[“I do! We’re not clones, or doppelgangers, or magical fragments of shattered consciousness indirectly given life through a wish gone wrong. We’re sisters.”]

“Ladies.” The bartender interrupted as he laid the drinks out before them both. 

Reaching into her pocket, Bee flicked him a pair of golden coins, which caused the man’s eyes to bulge with excitement. 

“You can have as many drinks as you want for the rest of the night with this!” 

(text-colour:#b87cf3)[“Keep the change.”] Bee said, dismissing him until they needed his services again. She turned to Vae and smiled, pulling out a vile of a powdery substance and sprinkling it into both of their drinks. (text-colour:#b87cf3)[“Fairy dust, it’ll actually allow the things to give us a buzz.”] She buzzed her glittery lavender wings as she finished.

(text-colour:#ff7070)[“I’ve never actually been drunk before.”] The little sister said nervously.

“Watch and learn from your big sis then!” The pale genie held up her mug for a cheer.

(text-colour:#ff7070)[“Stop calling yourself that. You’re only the bigger sister because you&#39;re taller.”] Vae huffed as they clinked their glasses together.

(text-colour:#b87cf3)[“Come on, I need something to hold over you!” ]

----------------------------------------------------------------------------------------------

Several hours later, in the dead of the vaccious night, the two genies stumbled down the street, tripping and slurring songs, too drunk to fly.

(text-colour:#ff7070)[“I think my place is over here… no, there.” ]

(text-colour:#b87cf3)[“You sure you remember where your inn is?”] Bee asked, her usual silky voice slurred and slowed with a half a dozen drinks in her. (text-colour:#b87cf3)[“I ain’t leaving you until you&#39;re sober.”]

(text-colour:#ff7070)[“Sober… what do you know about sober you flax haired bitch.”] 

The elder sister sneered at the remark, although she seemed to remember something as her eyes widened. Her hand clubsily fished in her satchel, and pulled out a small brass container. Unscrewing it, she held it up to her small nose and whiffed deeply of the contents.

(text-colour:#ff7070)[“What is that sh- SHIT THAT’S STRONG!”] Before the red genie could finish her sentence, the brass container was held under her nose, a strong overpowering minty spell filling her nasal passages and her lungs, sending her reeling and coughing. (text-colour:#ff7070)[“Why’d you do that?!”] 

(text-colour:#b87cf3)[“Nothing to cut a drunken spell short like smelling salts. Trust me, that nice house keeper you mentioned will be really appreciative that she won’t have to meet the hellriser that a drunk you is.” ]

(text-colour:#ff7070)[“Uhhhh… did we actually drink this much?”] Vae asked, her hands wandering down and squeezing her bloated midsection.

(text-colour:#b87cf3)[“No.”] Bee said bluntly. (text-colour:#b87cf3)[“I knew we forgot something today.” ]

&#39;&#39;*BWOOOMPH* 
&#39;&#39;
Simultaneously, both genie&#39;s seeming beer guts ballooned along with the rest of them. Their clothes creaked, and Bee&#39;s vest snapped as her beach ball gut and bouncing boobs undoing the fastened buttons, which ricocheted across the alley as if she had just hit a jackpot on a pinball machine.

Vae giggled at the sight, her pulp hands held up to her face, before realizing what she was doing. 

(text-colour:#ff7070)[“Sorry, I know you&#39;re sensitive.”] She apologized.

(text-colour:#b87cf3)[“Don’t worry about it.”] Her sister dismissed it with an exaggerated wave of the hand. (text-colour:#b87cf3)[“Go get settled in, we&#39;ll have to catch up again sometime. Maybe with the rest of the gang.”] Bee suggested, giggling as her sister shivered at the mention of their adopted sisters 

(text-colour:#ff7070)[“I&#39;ll see you around. Be careful Bee.”] Vae said farewell as she entered the door of the Interlude Inn. 

(text-colour:#b87cf3)[“Don&#39;t worry, I will!”]

Just as the door shut, a rough looking human woman rapidly walked up to Bee, holding a gleaming dagger from in-between their dirty robes. 

“You&#39;re going to give me your wallet, NOW.”

The elder genie laughed, slowly reaching for her satchel in fake compliance before whipping out a dagger of her own. 

(text-colour:#b87cf3)[“Just in time, I needed someone to help me get back in shape. Make a wish. NOW.”] 


(if:$Magicbuildup is 0)[[[Back to the inn for the night.-&gt;Night two (stage one build up)]]](if:$Magicbuildup is 1)[[[Back to the inn for the night.-&gt;Helpless balloon]]]</tw-passagedata><tw-passagedata pid="86" name="Night two (stage one build up)" tags="" position="2575,650" size="100,100">//&#39;&#39;Mortal mending meant for magical mistakes&#39;&#39;//

(text-colour:#75c624)[“Hi Miss Vae, how was… your day?”] Tilly called out, stumbling half way through as she noticed that the genie was in fact, much softer than the morning and stuck in the front doorway. 

(text-colour:#ff7070)[“I don’t want to talk about it, just help me get my ass outta the door, if you would.”] 

The mousy woman began to help immediately, tossing her work aside and easily unstuck the genie with an over estimated tug that sent her flying on her ass, thinking Vae was fat and not inflated. That was something the magical women would’ve preferred in all fairness, afterall, fat people don’t have to worry about exploding. 

(text-colour:#ff7070)[“Thanks Tilly, I’ll leave you a tip in the morning.”] The guest said exhaustively as she picked herself up and dusted herself off. As she fluttered her wings again and started making her way upstairs, she was surprised as the innkeeper pulled her back down to the ground. 

(text-colour:#75c624)[“Miss Vae, I don’t want to embarrass you, but the back of your pants are uhhh… not whole at the moment.”] 

Vae’s face turned redder than both her hair and her outfit, and couldn’t even muster up a protest as Tilly led her into the room behind the counter.

----------------------------------------------------------------------------------------------


(text-colour:#ff7070)[“Thanks for the help Tilly.”] Vae sighed, thanking the innkeeper as she inspected the patch job done on the seat of her pants. Although it had been annoying to deal with at all, she had to admit the girl had done a very good job, she could barely tell that there had even been a rip in the first place. 

(text-colour:#75c624)[“No problem! Guess I’m pretty handy with a needle considering how many bed sheets and other things I gotta stitch back together.”] The girl’s thin face blushed with pride. (text-colour:#75c624)[“Now, I gotta get back to work sadly, I have a lot of things on the chore list to do.”]

Tilly pulled out a comically large list from her pocket, which unfurled all the way to the ground and then some. It looked more like a scribbled on and unrolled section of toilet paper than any reasonable list that Vae had ever seen.

(text-colour:#ff7070)[“You know, a wish could really help me and you right about now.”] The genie patted her distended stomach. “(text-colour:#ff7070)[Kill two birds with one stone.”]

(text-colour:#75c624)[“Sorry Miss Vae, I feel for ya, but I’m afraid this isn’t something I can budge on.”] Tilly said as she turned to leave the small back room and see to the inn’s needs.

Something in Vae’s stomach gave her a twitch of a feeling, and she was sure it wasn’t just the magic building up. Sadness or pity perhaps. She placed a hand on the housemaid’s shoulder before she left. 

(text-colour:#ff7070)[“Let me help you with your chores, it’s the least I could do for you by patching up my pants.”] She offered graciously.

(text-colour:#75c624)[“Uhhh… Miss Vae?]” Tilly couldn’t quite understand what she was doing, so foreign was the concept of help. 

(text-colour:#ff7070)[“You won’t let me help you the magical way, so I’m going to do it the old fashioned way.”]

(text-colour:#75c624)[“I appreciate it, but I’ve got a whole list of chores to do tonight, and I wouldn’t want you to miss out on a good night’s sleep for my sake.”]

(text-colour:#ff7070)[“Nonsense.”] The genie waved a hand of dismissal rather than magic for once. “I don’t need sleep, and my time is better spent helping you out rather than pissing around in my room.” 

(text-colour:#75c624)[“I don’t know what to say… except thanks!”] The hostess was suddenly wearing a grin from ear to ear, like she had just made a friend for the first time in ages. 

(text-colour:#ff7070)[“Glad to help, but pay attention! You mixed the reds and the whites there.”] 

So the two women spent the knight doing chores; making beds, cleaning rooms, sorting supplies, washing everything and anything. Time flew fast for the both of them, as Vae needed a few reminders on how to do some of the mortal necessities she was rusty on and Tilly was quite happy to have someone around for once. They talked for long hours, complaining about their jobs and relating with the expectations people put upon both of them. Somewhere near three in the morning, Tilly passed out from exhaustion. The genie, not wanting her to worry about having to remake a bed or take up a room, carried her to Vea’s own room and tucked her in while she continued the work. By the time the sun rose, everything was just about taken care of. 

As the sound of Tilly’s steps started to come down the stairs, the flying redhead made her exit out the door, having yet another day of her usual work ahead of her. 


&lt;img src=&quot;https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/f/eb6ad10e-1dc7-46e1-87ef-0a22f7da7a2e/djo4syn-f6b40aaf-284e-4890-876e-3f89090c12a7.png/v1/fit/w_668,h_1800,q_70,strp/preg_by_nopehome_djo4syn-375w-2x.jpg?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1cm46YXBwOjdlMGQxODg5ODIyNjQzNzNhNWYwZDQxNWVhMGQyNmUwIiwiaXNzIjoidXJuOmFwcDo3ZTBkMTg4OTgyMjY0MzczYTVmMGQ0MTVlYTBkMjZlMCIsIm9iaiI6W1t7ImhlaWdodCI6Ijw9MzQ1NCIsInBhdGgiOiJcL2ZcL2ViNmFkMTBlLTFkYzctNDZlMS04N2VmLTBhMjJmN2RhN2EyZVwvZGpvNHN5bi1mNmI0MGFhZi0yODRlLTQ4OTAtODc2ZS0zZjg5MDkwYzEyYTcucG5nIiwid2lkdGgiOiI8PTEyODAifV1dLCJhdWQiOlsidXJuOnNlcnZpY2U6aW1hZ2Uub3BlcmF0aW9ucyJdfQ.H6pBDJviGwJnhAOsPFLL8vbNFX_dbilYf1jb3XenXMc&quot;&gt;
(set: $Magicbuildup to it + 1)

* The (if:$Fishpoint &lt; 2)[[[docks-&gt;Port day 3, empty]]](if:$Fishpoint is 2)[[[docks-&gt;Port day 3]]] should be fairly busy with merchants. Might have something intresting for sale at least if there aren&#39;t any wishes to grant.

* Today might be the last day she spends before leaving, hitting up the [[pub-&gt;Pub day 3]] would be a nice way to round out her stay in Verdantveil.

* Sweeping the [[castle-&gt;Outside castle day 3]] and its grounds might be a good idea.

* Perhaps one last swing through the outlying [[farmland-&gt;Farm day 3]] would yeld some intresting wishes.

</tw-passagedata><tw-passagedata pid="87" name="2nd sister rejection" tags="" position="2350,1125" size="100,100">//&#39;&#39;Sinister sister secret &#39;&#39;//

(text-colour:#ff7070)[“I&#39;m afraid that&#39;s not something I&#39;m comfortable with…”] Vae squeaked out, hoping her nervousness about her lie showing in her voice could be spun to her benefit. 

(text-colour:#0f0)[“Why not? I assure you she deserves it. Why back in private school she-”]

(text-colour:#ff7070)[“I&#39;m sure she&#39;s deserving of it, but I&#39;m afraid this is quite a risk for me.”] Vae said, noticing the noble woman&#39;s sceptical expression and elaborating more. (text-colour:#ff7070)[“As a genie, I only exist because of a wish someone made, if not for that particular stitch of magic, my existence isn&#39;t. If your sister retaliates like you are now, one wish could undo me utterly.”]

It was all true in a technical sense, but it wasn&#39;t applicable since she herself would be both sister&#39;s magical manipulator. Still, this had the promise to get too convoluted for her liking, and using mixing some truthfulness into deceit made it all the more believable. 

The noble woman nodded, conceding the point. 

(text-colour:#0f0)[“You&#39;re right, I&#39;m afraid. What I ask of you is a profound risk and showcases my own pettiness that I had not even considered.]”

(text-colour:#ff7070)[“Sorry I can&#39;t help.”]

(text-colour:#0f0)[“Well, you can&#39;t help directly, but you&#39;re clearly an expert on these matters. I&#39;d like to hire you for the day, assist my magician in determining who cast the magic or what changed me.”]

Another near heart attack struck Vae, realizing that her whole involvement may still come to life, which would be infinitely worse now that her lies went even deeper. She agreed to help Aprila for a modest sum of gold and accompanied her back to her estate. Her magician was a stubble covered, gruff fifties something man. He mumbled about spirits and strings (Vae didn&#39;t really understand mage talk or the mechanics mortals used to accomplish a portion of what she did, as if he were in a boat while she was an easy swimming whale) and he generally didn&#39;t seem very sane to her. Still, he had surprising moments of clarity and brilliance. 

He came close at times to finding her out, but she managed to sabotage and mislead him away from her. Eventually, after a whole day of research (damage control) Aprila was denied the source of the magic that had changed her, but Vae did genuinely help determine that the change was physical with some unsubtle hand holding. 

By the time she exited back out onto the streets, she had been compensated with a hefty bag of gold that both her twiggy arms struggled to lift. The sky was dark and populated by the countless stars and twin moons of the night. A hooded figure approached her, a dark shape holding a sharp knife that sparkled in contrast to the void colors of the environment and its wielder. 

(text-colour:#a27549)[“That&#39;s looks like a nice bunch’o money you got there. How about y-”] the slithering voice of the cloaked figure was cut off as the bag of coins was thrown at them, smacking into their chest and pushing them to the brick street with a thud, leaving them groaning. 

(text-colour:#ff7070)[“I don&#39;t value money. Enjoy.”] Vae said in a deadpan manner as she floated away, no longer burdened by the money ballast.

(text-colour:#ff7070)[//‘Not like I need that money anyway. Got enough fucking issues. Stupid rich bitch making me cover my ass instead of getting a wish in. Better luck tomorrow, I hope.’//] she Thought as she made her way to the direction of the lower area of town where her inn was. 


(if:$Magicbuildup is 0)[[[Back to the inn again.-&gt;Night two (stage one build up)]]](if:$Magicbuildup is 1)[[[Back to the inn again.-&gt;Helpless balloon]]]</tw-passagedata><tw-passagedata pid="88" name="Creator Commentary" tags="" position="700,600" size="100,100">//&#39;&#39;A &quot;few&quot; words from the author&#39;&#39;//


Hey there! You found the final easter egg!

This&#39;ll just be a short commentary and some insights about the game from the author (NopeHome; AKA me). If you don&#39;t care about my ramblings: good news! There&#39;s also a cut scene and a complete gallery for all the art assets (including some bonus ones not used on their own) so go ahead and skip past if you wanna see that. 

Now, I&#39;ve been thinking of making a game for a long ass time, like four years ago at least. A lot of my early stories started out as RPGmaker ideas, although I never really could put the effort in to make those a reality and repurposed them into written works. Eventually I figured a choose your own adventure game would be easier (and I suppose that&#39;s true considering this one got done), but it wasn&#39;t a straight forward path when it comes to development.

The original concept was to have multiple characters with unique paths and outcomes. There were to be three sections with three characters each, some existing OCs and others game original, with the theme of fantasy, modern fiction, and sci-fi. I had some ideas, but had difficulty planning paths and coming up with some scenarios for the sci-fi and modern routes.

Eventually it was apparent that the scope needed to shrink, so I cut the sci-fi section, then the modern one even though I had a few ideas. Left with only the fantasy section, I found myself having the easiest time writing and brainstorming for: Vay, a wish granting nymph original to the game.

Now, you may have several questions, but all will be made clear in time. Initially I focused on brainstorming ideas for wishes.  Vae&#39;s appearance was a bit vague at first: a loose idea of a scantily clad redhead who flies, an idea loosely based on Betilla from Rayman since I adore her design and it fit the concept.  The idea of the three day structure, bad ends, and karma ends came quickly when I started laying out the wish structure.

This is when I started speaking to WCG and Worstboid, doing some brainstorming with both of them. They both posed concepts I would later develop on for the final game.  It was pointed out to me that the idea of granting three wishes in a game was more fitting for a genie. So Vay was changed into a genie from the generic fairy/nymph she was before. Eventually I figured out the finalized structure and the wishes, and began writing. It was a long, tedious, yet rewarding process. I made the decision to keep it as an independent from my other fantasy universe due to not wanting wish magic to be introduced into that series.

During this process, I approached WCG to do an official character design for Vae (changed from Vay due to his own specific persuasions) and I told him the general vibe I had in mind for the character and of some inspirations (Betilla amoung others), and during the process he made Bee, wanting to show off specific features of these versions genies. We ended up brainstorming a lot of sisters, but Bee was the main one and the only to have a design.  

From there it was mostly straight forward: writing, proofreading, editing. I had Worstboid do his first round of proofreading when I hit the halfway mark, which he did so quickly and kindly. As the game neared completion, I approached WCG for a banner, a task he went above and beyond for, making a stunning title screen image complete with silhouettes that would be repurposed within the game as well.

There were some cut wishes along the way, but I won&#39;t reveal those since they may be reused for the sequel or other stories. Sorry to tease you with the possibilities.

This project is definitely the hardest thing I&#39;ve worked on creativity, and although I look forward to getting the ability to simply write literature again with this project complete, I do have ideas for a sequel, but no promises.

//&#39;&#39;Cut content:&#39;&#39;//

[[Alternate night two magical back up release scene-&gt;Night two (Stage two build up)]]


//&#39;&#39;Gallery:&#39;&#39;//

//The genie sisters//
&lt;img src=&quot;https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/f/eb6ad10e-1dc7-46e1-87ef-0a22f7da7a2e/djo5eoa-e84cc339-df23-4ea1-a63e-bf7d19ad6155.png/v1/fit/w_828,h_1126,q_70,strp/vae_2_by_nopehome_djo5eoa-414w-2x.jpg?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1cm46YXBwOjdlMGQxODg5ODIyNjQzNzNhNWYwZDQxNWVhMGQyNmUwIiwiaXNzIjoidXJuOmFwcDo3ZTBkMTg4OTgyMjY0MzczYTVmMGQ0MTVlYTBkMjZlMCIsIm9iaiI6W1t7ImhlaWdodCI6Ijw9MTc0MCIsInBhdGgiOiJcL2ZcL2ViNmFkMTBlLTFkYzctNDZlMS04N2VmLTBhMjJmN2RhN2EyZVwvZGpvNWVvYS1lODRjYzMzOS1kZjIzLTRlYTEtYTYzZS1iZjdkMTlhZDYxNTUucG5nIiwid2lkdGgiOiI8PTEyODAifV1dLCJhdWQiOlsidXJuOnNlcnZpY2U6aW1hZ2Uub3BlcmF0aW9ucyJdfQ.0ObOJHjPxEMkfjdglXbRIMsA8_MnWD1Ht477qmLOKYw&quot;&gt;
When I asked WCG to help me with designing Vae, he did two sketches, which I jokingly referred to as having &quot;Mario and Wario vibes&quot;. I chose the first, but the seconds had such an appeal we decided to make her cannon by making her a previously unplanned sister &quot;Bee&quot;.


//Vae (alone)//
&lt;img src=&quot;https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/f/eb6ad10e-1dc7-46e1-87ef-0a22f7da7a2e/djo438a-073e814f-46a4-4455-afee-b2a2fffac63f.png/v1/fit/w_546,h_1800,q_70,strp/vae_alone_by_nopehome_djo438a-375w-2x.jpg?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1cm46YXBwOjdlMGQxODg5ODIyNjQzNzNhNWYwZDQxNWVhMGQyNmUwIiwiaXNzIjoidXJuOmFwcDo3ZTBkMTg4OTgyMjY0MzczYTVmMGQ0MTVlYTBkMjZlMCIsIm9iaiI6W1t7ImhlaWdodCI6Ijw9NDIyNyIsInBhdGgiOiJcL2ZcL2ViNmFkMTBlLTFkYzctNDZlMS04N2VmLTBhMjJmN2RhN2EyZVwvZGpvNDM4YS0wNzNlODE0Zi00NmE0LTQ0NTUtYWZlZS1iMmEyZmZmYWM2M2YucG5nIiwid2lkdGgiOiI8PTEyODAifV1dLCJhdWQiOlsidXJuOnNlcnZpY2U6aW1hZ2Uub3BlcmF0aW9ucyJdfQ.V6aMS9nB38bWq1FIhtA9DbmOihD_F_EXwfUczeSg_nQ&quot;&gt;


//Bee (alone)//
&lt;img src=&quot;https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/f/eb6ad10e-1dc7-46e1-87ef-0a22f7da7a2e/djo43i7-ca722fb2-6455-4b91-b4fb-b345ea294e33.png/v1/fit/w_698,h_1800,q_70,strp/bee_by_nopehome_djo43i7-375w-2x.jpg?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1cm46YXBwOjdlMGQxODg5ODIyNjQzNzNhNWYwZDQxNWVhMGQyNmUwIiwiaXNzIjoidXJuOmFwcDo3ZTBkMTg4OTgyMjY0MzczYTVmMGQ0MTVlYTBkMjZlMCIsIm9iaiI6W1t7ImhlaWdodCI6Ijw9MzMwMSIsInBhdGgiOiJcL2ZcL2ViNmFkMTBlLTFkYzctNDZlMS04N2VmLTBhMjJmN2RhN2EyZVwvZGpvNDNpNy1jYTcyMmZiMi02NDU1LTRiOTEtYjRmYi1iMzQ1ZWEyOTRlMzMucG5nIiwid2lkdGgiOiI8PTEyODAifV1dLCJhdWQiOlsidXJuOnNlcnZpY2U6aW1hZ2Uub3BlcmF0aW9ucyJdfQ.ZhDOk6xPreA_TPfTkPUrVdOab3scAasSO1_DLpAZA1Q&quot;&gt;


//Banner #1//
&lt;img src=&quot;https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/f/eb6ad10e-1dc7-46e1-87ef-0a22f7da7a2e/djo43ja-dcb4cb48-ea3a-48c5-9611-9fe17ec4d7a0.png/v1/fill/w_1280,h_603,q_80,strp/banner_alt_by_nopehome_djo43ja-fullview.jpg?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1cm46YXBwOjdlMGQxODg5ODIyNjQzNzNhNWYwZDQxNWVhMGQyNmUwIiwiaXNzIjoidXJuOmFwcDo3ZTBkMTg4OTgyMjY0MzczYTVmMGQ0MTVlYTBkMjZlMCIsIm9iaiI6W1t7ImhlaWdodCI6Ijw9NjAzIiwicGF0aCI6IlwvZlwvZWI2YWQxMGUtMWRjNy00NmUxLTg3ZWYtMGEyMmY3ZGE3YTJlXC9kam80M2phLWRjYjRjYjQ4LWVhM2EtNDhjNS05NjExLTlmZTE3ZWM0ZDdhMC5wbmciLCJ3aWR0aCI6Ijw9MTI4MCJ9XV0sImF1ZCI6WyJ1cm46c2VydmljZTppbWFnZS5vcGVyYXRpb25zIl19.VmwsCYCpZl7JnI94O7DJNjGiowZvWjDBQjHD2lEKJEw&quot;&gt;
When I approached WCG about doing a title screen/banner for the game, he ended up playing with the colors and shading a lot before landing on the final version. Below are alternate/previous versions.

//Banner #2//
&lt;img src=&quot;https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/f/eb6ad10e-1dc7-46e1-87ef-0a22f7da7a2e/djo4zm4-c66ba452-c001-4f08-af64-8874947983f3.png/v1/fill/w_1280,h_603,q_80,strp/banner_a_by_nopehome_djo4zm4-fullview.jpg?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1cm46YXBwOjdlMGQxODg5ODIyNjQzNzNhNWYwZDQxNWVhMGQyNmUwIiwiaXNzIjoidXJuOmFwcDo3ZTBkMTg4OTgyMjY0MzczYTVmMGQ0MTVlYTBkMjZlMCIsIm9iaiI6W1t7ImhlaWdodCI6Ijw9NjAzIiwicGF0aCI6IlwvZlwvZWI2YWQxMGUtMWRjNy00NmUxLTg3ZWYtMGEyMmY3ZGE3YTJlXC9kam80em00LWM2NmJhNDUyLWMwMDEtNGYwOC1hZjY0LTg4NzQ5NDc5ODNmMy5wbmciLCJ3aWR0aCI6Ijw9MTI4MCJ9XV0sImF1ZCI6WyJ1cm46c2VydmljZTppbWFnZS5vcGVyYXRpb25zIl19.ND_qC9_j38sFBl7nISWB1lu4BPZrUZVACzF-RKkmks8&quot;&gt;


//Banner #3//
&lt;img src=&quot;https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/f/eb6ad10e-1dc7-46e1-87ef-0a22f7da7a2e/djo4zh8-b5e02a79-707f-4c43-a413-0096a98952ae.png/v1/fill/w_1280,h_603,q_80,strp/banner_v_1_by_nopehome_djo4zh8-fullview.jpg?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1cm46YXBwOjdlMGQxODg5ODIyNjQzNzNhNWYwZDQxNWVhMGQyNmUwIiwiaXNzIjoidXJuOmFwcDo3ZTBkMTg4OTgyMjY0MzczYTVmMGQ0MTVlYTBkMjZlMCIsIm9iaiI6W1t7ImhlaWdodCI6Ijw9NjAzIiwicGF0aCI6IlwvZlwvZWI2YWQxMGUtMWRjNy00NmUxLTg3ZWYtMGEyMmY3ZGE3YTJlXC9kam80emg4LWI1ZTAyYTc5LTcwN2YtNGM0My1hNDEzLTAwOTZhOTg5NTJhZS5wbmciLCJ3aWR0aCI6Ijw9MTI4MCJ9XV0sImF1ZCI6WyJ1cm46c2VydmljZTppbWFnZS5vcGVyYXRpb25zIl19.vMxJWyUbtB0aC5CE6QagW0yoJrP1Fn51kGQv6LTywHY&quot;&gt;

//Banner #4//
&lt;img src=&quot;https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/f/eb6ad10e-1dc7-46e1-87ef-0a22f7da7a2e/djo4zgb-cb75de3c-2035-41cd-8acd-ac5dc579403a.png/v1/fill/w_1280,h_603,q_80,strp/banner_by_nopehome_djo4zgb-fullview.jpg?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1cm46YXBwOjdlMGQxODg5ODIyNjQzNzNhNWYwZDQxNWVhMGQyNmUwIiwiaXNzIjoidXJuOmFwcDo3ZTBkMTg4OTgyMjY0MzczYTVmMGQ0MTVlYTBkMjZlMCIsIm9iaiI6W1t7ImhlaWdodCI6Ijw9NjAzIiwicGF0aCI6IlwvZlwvZWI2YWQxMGUtMWRjNy00NmUxLTg3ZWYtMGEyMmY3ZGE3YTJlXC9kam80emdiLWNiNzVkZTNjLTIwMzUtNDFjZC04YWNkLWFjNWRjNTc5NDAzYS5wbmciLCJ3aWR0aCI6Ijw9MTI4MCJ9XV0sImF1ZCI6WyJ1cm46c2VydmljZTppbWFnZS5vcGVyYXRpb25zIl19.K7ljPoaLOksVZSLOrxVdIeW--Kk5C6mGgUjCebz1O7E&quot;&gt;

//Banner Vae //
&lt;img src=&quot;https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/f/eb6ad10e-1dc7-46e1-87ef-0a22f7da7a2e/djo4zbc-cd1020bb-c3b3-4ed3-9203-13ee59322aff.png/v1/fill/w_1280,h_2253/vae_by_nopehome_djo4zbc-fullview.png?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1cm46YXBwOjdlMGQxODg5ODIyNjQzNzNhNWYwZDQxNWVhMGQyNmUwIiwiaXNzIjoidXJuOmFwcDo3ZTBkMTg4OTgyMjY0MzczYTVmMGQ0MTVlYTBkMjZlMCIsIm9iaiI6W1t7ImhlaWdodCI6Ijw9MjI1MyIsInBhdGgiOiJcL2ZcL2ViNmFkMTBlLTFkYzctNDZlMS04N2VmLTBhMjJmN2RhN2EyZVwvZGpvNHpiYy1jZDEwMjBiYi1jM2IzLTRlZDMtOTIwMy0xM2VlNTkzMjJhZmYucG5nIiwid2lkdGgiOiI8PTEyODAifV1dLCJhdWQiOlsidXJuOnNlcnZpY2U6aW1hZ2Uub3BlcmF0aW9ucyJdfQ.GfgLbIP9vZ8wJfS--ixphjniycB03QrF_YdTlYalwuI&quot;&gt;

//Silhouettes #1//
&lt;img src=&quot;https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/f/eb6ad10e-1dc7-46e1-87ef-0a22f7da7a2e/djo4zex-23637173-6440-49f1-a79e-89e5d8626745.png/v1/fill/w_1111,h_719,q_70,strp/sillohettes__4_7_by_nopehome_djo4zex-pre.jpg?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1cm46YXBwOjdlMGQxODg5ODIyNjQzNzNhNWYwZDQxNWVhMGQyNmUwIiwiaXNzIjoidXJuOmFwcDo3ZTBkMTg4OTgyMjY0MzczYTVmMGQ0MTVlYTBkMjZlMCIsIm9iaiI6W1t7ImhlaWdodCI6Ijw9ODI5IiwicGF0aCI6IlwvZlwvZWI2YWQxMGUtMWRjNy00NmUxLTg3ZWYtMGEyMmY3ZGE3YTJlXC9kam80emV4LTIzNjM3MTczLTY0NDAtNDlmMS1hNzllLTg5ZTVkODYyNjc0NS5wbmciLCJ3aWR0aCI6Ijw9MTI4MCJ9XV0sImF1ZCI6WyJ1cm46c2VydmljZTppbWFnZS5vcGVyYXRpb25zIl19.LB_Rp7CpEDCSDHXoarNjUWGgArQxRvt-2Lot-AuxuVA&quot;&gt;
For the banner, silhouettes were created to fill in the letters and make it more dynamic. I ended up reusing various individual ones alongside individual events. Specific comments about each will be reserved for the individual entries in the gallery.

//Silhouettes #2//
&lt;img src=&quot;https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/f/eb6ad10e-1dc7-46e1-87ef-0a22f7da7a2e/djo4ze4-92160b35-1d08-446d-952f-9df16bd8f1fb.png/v1/fill/w_1111,h_719,q_70,strp/sillohettes_4_by_nopehome_djo4ze4-pre.jpg?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1cm46YXBwOjdlMGQxODg5ODIyNjQzNzNhNWYwZDQxNWVhMGQyNmUwIiwiaXNzIjoidXJuOmFwcDo3ZTBkMTg4OTgyMjY0MzczYTVmMGQ0MTVlYTBkMjZlMCIsIm9iaiI6W1t7ImhlaWdodCI6Ijw9ODI5IiwicGF0aCI6IlwvZlwvZWI2YWQxMGUtMWRjNy00NmUxLTg3ZWYtMGEyMmY3ZGE3YTJlXC9kam80emU0LTkyMTYwYjM1LTFkMDgtNDQ2ZC05NTJmLTlkZjE2YmQ4ZjFmYi5wbmciLCJ3aWR0aCI6Ijw9MTI4MCJ9XV0sImF1ZCI6WyJ1cm46c2VydmljZTppbWFnZS5vcGVyYXRpb25zIl19.TubMFsQ0Kn8NyukP1353PzaSkj7JzfsR6_sVZBb42t4&quot;&gt;

//Silhouettes #3//
&lt;img src=&quot;https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/f/eb6ad10e-1dc7-46e1-87ef-0a22f7da7a2e/djo4zd1-33d0bee7-3507-495b-bc8d-229e158cf0ae.png/v1/fill/w_1111,h_719,q_70,strp/sillohettes_5_by_nopehome_djo4zd1-pre.jpg?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1cm46YXBwOjdlMGQxODg5ODIyNjQzNzNhNWYwZDQxNWVhMGQyNmUwIiwiaXNzIjoidXJuOmFwcDo3ZTBkMTg4OTgyMjY0MzczYTVmMGQ0MTVlYTBkMjZlMCIsIm9iaiI6W1t7ImhlaWdodCI6Ijw9ODI5IiwicGF0aCI6IlwvZlwvZWI2YWQxMGUtMWRjNy00NmUxLTg3ZWYtMGEyMmY3ZGE3YTJlXC9kam80emQxLTMzZDBiZWU3LTM1MDctNDk1Yi1iYzhkLTIyOWUxNThjZjBhZS5wbmciLCJ3aWR0aCI6Ijw9MTI4MCJ9XV0sImF1ZCI6WyJ1cm46c2VydmljZTppbWFnZS5vcGVyYXRpb25zIl19.tFtwJJREGMb7J4AesYcuZb1YmhxwNmPcsK2Ik0fd9GM&quot;&gt;

//Silhouettes #4//
&lt;img src=&quot;https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/f/eb6ad10e-1dc7-46e1-87ef-0a22f7da7a2e/djo4zc6-73a91cc8-d3c1-48ce-a9c1-1fbac7388064.png/v1/fill/w_1174,h_680,q_70,strp/sillohettes_7_by_nopehome_djo4zc6-pre.jpg?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1cm46YXBwOjdlMGQxODg5ODIyNjQzNzNhNWYwZDQxNWVhMGQyNmUwIiwiaXNzIjoidXJuOmFwcDo3ZTBkMTg4OTgyMjY0MzczYTVmMGQ0MTVlYTBkMjZlMCIsIm9iaiI6W1t7ImhlaWdodCI6Ijw9NzQyIiwicGF0aCI6IlwvZlwvZWI2YWQxMGUtMWRjNy00NmUxLTg3ZWYtMGEyMmY3ZGE3YTJlXC9kam80emM2LTczYTkxY2M4LWQzYzEtNDhjZS1hOWMxLTFmYmFjNzM4ODA2NC5wbmciLCJ3aWR0aCI6Ijw9MTI4MCJ9XV0sImF1ZCI6WyJ1cm46c2VydmljZTppbWFnZS5vcGVyYXRpb25zIl19.d-sX8hNfeLXVhLm0P7EKx74JBSTJc51Xy3xkH2_Gt5E&quot;&gt;

//Floating//
&lt;img src=&quot;https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/f/eb6ad10e-1dc7-46e1-87ef-0a22f7da7a2e/djo43c6-b1e28b1f-6fe9-4a7d-bb7e-cd5c717fb642.png/v1/fit/w_828,h_1238,q_70,strp/floating_by_nopehome_djo43c6-414w-2x.jpg?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1cm46YXBwOjdlMGQxODg5ODIyNjQzNzNhNWYwZDQxNWVhMGQyNmUwIiwiaXNzIjoidXJuOmFwcDo3ZTBkMTg4OTgyMjY0MzczYTVmMGQ0MTVlYTBkMjZlMCIsIm9iaiI6W1t7ImhlaWdodCI6Ijw9MTkxMyIsInBhdGgiOiJcL2ZcL2ViNmFkMTBlLTFkYzctNDZlMS04N2VmLTBhMjJmN2RhN2EyZVwvZGpvNDNjNi1iMWUyOGIxZi02ZmU5LTRhN2QtYmI3ZS1jZDVjNzE3ZmI2NDIucG5nIiwid2lkdGgiOiI8PTEyODAifV1dLCJhdWQiOlsidXJuOnNlcnZpY2U6aW1hZ2Uub3BlcmF0aW9ucyJdfQ.KavMB0ehAX7u2TnD6JvlhqHdb2LinmjUoTCp86FqAjg&quot;&gt;
When I was shown this one, I commented that I found it &quot;goddess-like&quot;. Something about the pose and the whitened out eyes. Couldn&#39;t find a way to use it in game.

//Fish person//
&lt;img src=&quot;https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/f/eb6ad10e-1dc7-46e1-87ef-0a22f7da7a2e/djo43cn-a1a8f180-6a40-4b44-9d41-73fd3fa4eb57.png/v1/fit/w_828,h_1770,q_70,strp/fishperson_by_nopehome_djo43cn-414w-2x.jpg?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1cm46YXBwOjdlMGQxODg5ODIyNjQzNzNhNWYwZDQxNWVhMGQyNmUwIiwiaXNzIjoidXJuOmFwcDo3ZTBkMTg4OTgyMjY0MzczYTVmMGQ0MTVlYTBkMjZlMCIsIm9iaiI6W1t7ImhlaWdodCI6Ijw9MjczNyIsInBhdGgiOiJcL2ZcL2ViNmFkMTBlLTFkYzctNDZlMS04N2VmLTBhMjJmN2RhN2EyZVwvZGpvNDNjbi1hMWE4ZjE4MC02YTQwLTRiNDQtOWQ0MS03M2ZkM2ZhNGViNTcucG5nIiwid2lkdGgiOiI8PTEyODAifV1dLCJhdWQiOlsidXJuOnNlcnZpY2U6aW1hZ2Uub3BlcmF0aW9ucyJdfQ.iLOj3f6x-P-0BL6ekhDM4R2mJONeTVY2XRgx_NjBSiU&quot;&gt;
Made as a result of a miscommunication of the day 1 fisherman bad choice. Couldn&#39;t use it in game but still pretty cute to me.

//Evil Vae 1//
&lt;img src=&quot;https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/f/eb6ad10e-1dc7-46e1-87ef-0a22f7da7a2e/djo43dr-d5c26035-c976-4306-a5c5-e145e4bdbf0b.png/v1/fit/w_828,h_1032,q_70,strp/evil_vae_1_by_nopehome_djo43dr-414w-2x.jpg?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1cm46YXBwOjdlMGQxODg5ODIyNjQzNzNhNWYwZDQxNWVhMGQyNmUwIiwiaXNzIjoidXJuOmFwcDo3ZTBkMTg4OTgyMjY0MzczYTVmMGQ0MTVlYTBkMjZlMCIsIm9iaiI6W1t7ImhlaWdodCI6Ijw9MTU5NCIsInBhdGgiOiJcL2ZcL2ViNmFkMTBlLTFkYzctNDZlMS04N2VmLTBhMjJmN2RhN2EyZVwvZGpvNDNkci1kNWMyNjAzNS1jOTc2LTQzMDYtYTVjNS1lMTQ1ZTRiZGJmMGIucG5nIiwid2lkdGgiOiI8PTEyODAifV1dLCJhdWQiOlsidXJuOnNlcnZpY2U6aW1hZ2Uub3BlcmF0aW9ucyJdfQ.74MJQkVZmbPdIQgo0iW3KJRdq9JHxTNGmFoyAjNAOEo&quot;&gt;
WCG&#39;s first attempt at an Evil Vae. He wasn&#39;t quite satisfied with it and tried another design. Went unused outside of the banner.

//Evil Vae 2//
&lt;img src=&quot;https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/f/eb6ad10e-1dc7-46e1-87ef-0a22f7da7a2e/djo43d7-3f0b118d-756e-4bac-9d94-f1a9bc4e5ff4.png/v1/fit/w_716,h_1800,q_70,strp/evil_vae_2_by_nopehome_djo43d7-375w-2x.jpg?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1cm46YXBwOjdlMGQxODg5ODIyNjQzNzNhNWYwZDQxNWVhMGQyNmUwIiwiaXNzIjoidXJuOmFwcDo3ZTBkMTg4OTgyMjY0MzczYTVmMGQ0MTVlYTBkMjZlMCIsIm9iaiI6W1t7ImhlaWdodCI6Ijw9MzIxOSIsInBhdGgiOiJcL2ZcL2ViNmFkMTBlLTFkYzctNDZlMS04N2VmLTBhMjJmN2RhN2EyZVwvZGpvNDNkNy0zZjBiMTE4ZC03NTZlLTRiYWMtOWQ5NC1mMWE5YmM0ZTVmZjQucG5nIiwid2lkdGgiOiI8PTEyODAifV1dLCJhdWQiOlsidXJuOnNlcnZpY2U6aW1hZ2Uub3BlcmF0aW9ucyJdfQ.q3rtCg_6x45EpnWWRoFdZWnbommRbvwjSMpaCGZ_Lug&quot;&gt;
A bit shocked when he showed me this one, very sinister. You can tell he had much more fun when designing this one.

//Dragon//
&lt;img src=&quot;https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/f/eb6ad10e-1dc7-46e1-87ef-0a22f7da7a2e/djo43fs-2afd2032-0379-4a9d-bd73-fdf6a1ad84ff.png/v1/fit/w_828,h_1354,q_70,strp/dragon_fat_by_nopehome_djo43fs-414w-2x.jpg?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1cm46YXBwOjdlMGQxODg5ODIyNjQzNzNhNWYwZDQxNWVhMGQyNmUwIiwiaXNzIjoidXJuOmFwcDo3ZTBkMTg4OTgyMjY0MzczYTVmMGQ0MTVlYTBkMjZlMCIsIm9iaiI6W1t7ImhlaWdodCI6Ijw9MjA5NCIsInBhdGgiOiJcL2ZcL2ViNmFkMTBlLTFkYzctNDZlMS04N2VmLTBhMjJmN2RhN2EyZVwvZGpvNDNmcy0yYWZkMjAzMi0wMzc5LTRhOWQtYmQ3My1mZGY2YTFhZDg0ZmYucG5nIiwid2lkdGgiOiI8PTEyODAifV1dLCJhdWQiOlsidXJuOnNlcnZpY2U6aW1hZ2Uub3BlcmF0aW9ucyJdfQ.2iOr0qjt_NQ3YRTRGHFyDm716MIRihO2B4Pn9-H2Ek8&quot;&gt;
Originally, Vae was supposed to be the dragon in the “city destroyed bad ending”. By looking very closely, you can see that the dragon still has freckles/

//Fatter Dragon//
&lt;img src=&quot;https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/f/eb6ad10e-1dc7-46e1-87ef-0a22f7da7a2e/djo43es-efe64eae-4c3e-46ac-a0a1-ab9d981f3e3d.png/v1/fill/w_852,h_938,q_70,strp/dragon_fatter_by_nopehome_djo43es-pre.jpg?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1cm46YXBwOjdlMGQxODg5ODIyNjQzNzNhNWYwZDQxNWVhMGQyNmUwIiwiaXNzIjoidXJuOmFwcDo3ZTBkMTg4OTgyMjY0MzczYTVmMGQ0MTVlYTBkMjZlMCIsIm9iaiI6W1t7ImhlaWdodCI6Ijw9MTQwOCIsInBhdGgiOiJcL2ZcL2ViNmFkMTBlLTFkYzctNDZlMS04N2VmLTBhMjJmN2RhN2EyZVwvZGpvNDNlcy1lZmU2NGVhZS00YzNlLTQ2YWMtYTBhMS1hYjlkOTgxZjNlM2QucG5nIiwid2lkdGgiOiI8PTEyODAifV1dLCJhdWQiOlsidXJuOnNlcnZpY2U6aW1hZ2Uub3BlcmF0aW9ucyJdfQ.rXrLRHLeikgQRq491gPW1icEtVnoxXzTD1EA0k16cJc&quot;&gt;
Unused fatter dragon.

//Princess//
&lt;img src=&quot;https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/f/eb6ad10e-1dc7-46e1-87ef-0a22f7da7a2e/djo4395-9e39a563-5811-4f28-856e-2651c4e11c87.png/v1/fit/w_828,h_1534,q_70,strp/princess_by_nopehome_djo4395-414w-2x.jpg?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1cm46YXBwOjdlMGQxODg5ODIyNjQzNzNhNWYwZDQxNWVhMGQyNmUwIiwiaXNzIjoidXJuOmFwcDo3ZTBkMTg4OTgyMjY0MzczYTVmMGQ0MTVlYTBkMjZlMCIsIm9iaiI6W1t7ImhlaWdodCI6Ijw9MjM3MiIsInBhdGgiOiJcL2ZcL2ViNmFkMTBlLTFkYzctNDZlMS04N2VmLTBhMjJmN2RhN2EyZVwvZGpvNDM5NS05ZTM5YTU2My01ODExLTRmMjgtODU2ZS0yNjUxYzRlMTFjODcucG5nIiwid2lkdGgiOiI8PTEyODAifV1dLCJhdWQiOlsidXJuOnNlcnZpY2U6aW1hZ2Uub3BlcmF0aW9ucyJdfQ.BFMhD5OcEcRDkglOVBXvWiAyMo0wibmq31a0l1dG4g4&quot;&gt;

//Merhant//
&lt;img src=&quot;https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/f/eb6ad10e-1dc7-46e1-87ef-0a22f7da7a2e/djo43az-f3716236-9711-4839-9d50-c7637d7b1024.png/v1/fill/w_851,h_939,q_70,strp/merchant__by_nopehome_djo43az-pre.jpg?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1cm46YXBwOjdlMGQxODg5ODIyNjQzNzNhNWYwZDQxNWVhMGQyNmUwIiwiaXNzIjoidXJuOmFwcDo3ZTBkMTg4OTgyMjY0MzczYTVmMGQ0MTVlYTBkMjZlMCIsIm9iaiI6W1t7ImhlaWdodCI6Ijw9MTQxMiIsInBhdGgiOiJcL2ZcL2ViNmFkMTBlLTFkYzctNDZlMS04N2VmLTBhMjJmN2RhN2EyZVwvZGpvNDNhei1mMzcxNjIzNi05NzExLTQ4MzktOWQ1MC1jNzYzN2Q3YjEwMjQucG5nIiwid2lkdGgiOiI8PTEyODAifV1dLCJhdWQiOlsidXJuOnNlcnZpY2U6aW1hZ2Uub3BlcmF0aW9ucyJdfQ.hQeTH2eQ_qwDoIUDmFI13PC7J_wF__OpzUqfuhK2zIE&quot;&gt;
This is one of my favorites of the silhouettes. I like how big, bold, and jolly she is.


//Shortstack//
&lt;img src=&quot;https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/f/eb6ad10e-1dc7-46e1-87ef-0a22f7da7a2e/djo438p-d47bce61-740f-4229-b6e8-c6e5e806c709.png/v1/fit/w_828,h_1244,q_70,strp/shortstack_by_nopehome_djo438p-414w-2x.jpg?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1cm46YXBwOjdlMGQxODg5ODIyNjQzNzNhNWYwZDQxNWVhMGQyNmUwIiwiaXNzIjoidXJuOmFwcDo3ZTBkMTg4OTgyMjY0MzczYTVmMGQ0MTVlYTBkMjZlMCIsIm9iaiI6W1t7ImhlaWdodCI6Ijw9MTkyMiIsInBhdGgiOiJcL2ZcL2ViNmFkMTBlLTFkYzctNDZlMS04N2VmLTBhMjJmN2RhN2EyZVwvZGpvNDM4cC1kNDdiY2U2MS03NDBmLTQyMjktYjZlOC1jNmU1ZTgwNmM3MDkucG5nIiwid2lkdGgiOiI8PTEyODAifV1dLCJhdWQiOlsidXJuOnNlcnZpY2U6aW1hZ2Uub3BlcmF0aW9ucyJdfQ.j9CVRFCFPDJTJi575PIFAXxe4yDSI5-6C9x9k36ps_8&quot;&gt;
A WCG original. He inspired me to make Bee&#39;s ending a shortstack one with this image. It was originally just weight gain.

//Cowgirl//
&lt;img src=&quot;https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/f/eb6ad10e-1dc7-46e1-87ef-0a22f7da7a2e/djo43gl-2929bb8c-6612-43fc-a308-a2c44f59738d.png/v1/fit/w_828,h_1744,q_70,strp/cowgal_by_nopehome_djo43gl-414w-2x.jpg?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1cm46YXBwOjdlMGQxODg5ODIyNjQzNzNhNWYwZDQxNWVhMGQyNmUwIiwiaXNzIjoidXJuOmFwcDo3ZTBkMTg4OTgyMjY0MzczYTVmMGQ0MTVlYTBkMjZlMCIsIm9iaiI6W1t7ImhlaWdodCI6Ijw9MjY5NSIsInBhdGgiOiJcL2ZcL2ViNmFkMTBlLTFkYzctNDZlMS04N2VmLTBhMjJmN2RhN2EyZVwvZGpvNDNnbC0yOTI5YmI4Yy02NjEyLTQzZmMtYTMwOC1hMmM0NGY1OTczOGQucG5nIiwid2lkdGgiOiI8PTEyODAifV1dLCJhdWQiOlsidXJuOnNlcnZpY2U6aW1hZ2Uub3BlcmF0aW9ucyJdfQ.kUXSO8GvFCuMWJWilHOEa0IkGj8e2OGlwB_lqGMkb48&quot;&gt;

//Dutchess//
&lt;img src=&quot;https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/f/eb6ad10e-1dc7-46e1-87ef-0a22f7da7a2e/djo43a1-95e8e772-f3fa-4aa7-816e-794175bf2ec7.png/v1/fit/w_828,h_1394,q_70,strp/old_dutchess_by_nopehome_djo43a1-414w-2x.jpg?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1cm46YXBwOjdlMGQxODg5ODIyNjQzNzNhNWYwZDQxNWVhMGQyNmUwIiwiaXNzIjoidXJuOmFwcDo3ZTBkMTg4OTgyMjY0MzczYTVmMGQ0MTVlYTBkMjZlMCIsIm9iaiI6W1t7ImhlaWdodCI6Ijw9MjE1NSIsInBhdGgiOiJcL2ZcL2ViNmFkMTBlLTFkYzctNDZlMS04N2VmLTBhMjJmN2RhN2EyZVwvZGpvNDNhMS05NWU4ZTc3Mi1mM2ZhLTRhYTctODE2ZS03OTQxNzViZjJlYzcucG5nIiwid2lkdGgiOiI8PTEyODAifV1dLCJhdWQiOlsidXJuOnNlcnZpY2U6aW1hZ2Uub3BlcmF0aW9ucyJdfQ.zhu40x-ZqBbwhWiPqoDJ0CreTcmP1jBvRb7NcUOFGhk&quot;&gt;

//Bimbo//
&lt;img src=&quot;https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/f/eb6ad10e-1dc7-46e1-87ef-0a22f7da7a2e/djo43hd-1329954b-888b-4b0a-acb2-0e0fea90a191.png/v1/fit/w_828,h_1344,q_70,strp/bimbo_by_nopehome_djo43hd-414w-2x.jpg?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1cm46YXBwOjdlMGQxODg5ODIyNjQzNzNhNWYwZDQxNWVhMGQyNmUwIiwiaXNzIjoidXJuOmFwcDo3ZTBkMTg4OTgyMjY0MzczYTVmMGQ0MTVlYTBkMjZlMCIsIm9iaiI6W1t7ImhlaWdodCI6Ijw9MjA3NyIsInBhdGgiOiJcL2ZcL2ViNmFkMTBlLTFkYzctNDZlMS04N2VmLTBhMjJmN2RhN2EyZVwvZGpvNDNoZC0xMzI5OTU0Yi04ODhiLTRiMGEtYWNiMi0wZTBmZWE5MGExOTEucG5nIiwid2lkdGgiOiI8PTEyODAifV1dLCJhdWQiOlsidXJuOnNlcnZpY2U6aW1hZ2Uub3BlcmF0aW9ucyJdfQ.MuHItDCkOpdI-qD4F0n5_Scweu32bFJcSJSOuwG_thE&quot;&gt;
&quot;Big Bimbo?&quot;

&quot;Ye&quot;

//Stage 2/Preg Vae//
&lt;img src=&quot;https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/f/eb6ad10e-1dc7-46e1-87ef-0a22f7da7a2e/djo4syn-f6b40aaf-284e-4890-876e-3f89090c12a7.png/v1/fit/w_668,h_1800,q_70,strp/preg_by_nopehome_djo4syn-375w-2x.jpg?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1cm46YXBwOjdlMGQxODg5ODIyNjQzNzNhNWYwZDQxNWVhMGQyNmUwIiwiaXNzIjoidXJuOmFwcDo3ZTBkMTg4OTgyMjY0MzczYTVmMGQ0MTVlYTBkMjZlMCIsIm9iaiI6W1t7ImhlaWdodCI6Ijw9MzQ1NCIsInBhdGgiOiJcL2ZcL2ViNmFkMTBlLTFkYzctNDZlMS04N2VmLTBhMjJmN2RhN2EyZVwvZGpvNHN5bi1mNmI0MGFhZi0yODRlLTQ4OTAtODc2ZS0zZjg5MDkwYzEyYTcucG5nIiwid2lkdGgiOiI8PTEyODAifV1dLCJhdWQiOlsidXJuOnNlcnZpY2U6aW1hZ2Uub3BlcmF0aW9ucyJdfQ.H6pBDJviGwJnhAOsPFLL8vbNFX_dbilYf1jb3XenXMc&quot;&gt;
WCG had some extra room on the page and I told him &quot;dealer&#39;s choice&quot;. He did a preg Vae, although I ended up reusing it as the stage 2 magical build up. I think it passes for both. 

//Stage 3/inflated Vae//
&lt;img src=&quot;https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/f/eb6ad10e-1dc7-46e1-87ef-0a22f7da7a2e/djo43bo-9dc24e62-6861-4168-a133-a1074ab66104.png/v1/fill/w_918,h_870,q_70,strp/inflated_vae_by_nopehome_djo43bo-pre.jpg?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1cm46YXBwOjdlMGQxODg5ODIyNjQzNzNhNWYwZDQxNWVhMGQyNmUwIiwiaXNzIjoidXJuOmFwcDo3ZTBkMTg4OTgyMjY0MzczYTVmMGQ0MTVlYTBkMjZlMCIsIm9iaiI6W1t7ImhlaWdodCI6Ijw9MTIxMyIsInBhdGgiOiJcL2ZcL2ViNmFkMTBlLTFkYzctNDZlMS04N2VmLTBhMjJmN2RhN2EyZVwvZGpvNDNiby05ZGMyNGU2Mi02ODYxLTQxNjgtYTEzMy1hMTA3NGFiNjYxMDQucG5nIiwid2lkdGgiOiI8PTEyODAifV1dLCJhdWQiOlsidXJuOnNlcnZpY2U6aW1hZ2Uub3BlcmF0aW9ucyJdfQ.EELndu5Fhxs5aodzGttSHiq_aITBUUM-X25qSOGiT4Q&quot;&gt;
This is the only one I was determined to have made. I&#39;m very thankful to WCG for doing this since inflation is a rarity for him. 

And with that, I would like to thank you for playing, reading, and (presumably) enjoying my work! I cannot express how much I appreciate you!

- //&#39;&#39;NopeHome&#39;&#39;//</tw-passagedata><tw-passagedata pid="89" name="Merchant wish good" tags="" position="2150,100" size="100,100">//&#39;&#39;A lucky catch&#39;&#39;//

(text-colour:#ff7070)[“Alright, fine, but fair warning, this is going to be invasive. Your reality is going to change, and you aren’t going to notice it or remember what changed in your  life. You won’t even think I’ve done anything by the time I’m done. Absolutely sure?” ]

(text-colour:purple)[“Absolutely. Whatever it takes to help my friend.”] The merchant nodded enthusiastically. 

Vae snapped her fingers, paying close attention to how this wish was carried out. Even for a technically extra dimensional being such as herself, reaching through time always felt awkward and wrong, on top of being an odd sensation. It felt like touching a million framed photos with your mind’s eye or rolling your mind like clay down a metal pillar. Scrolling through the past of the woman in front of her, she looked for something to nudge in just the right way. 

THERE!

Three years ago, this young woman had nearly gotten the deal to supply the local guard garrison. While this contract was small in grand scheme, it would’ve been lucrative and the perfect springboard for her to get into serious trade work. It hadn’t gone through due to a wealthier merchant learning of the bid and undercutting the poor girl at the last minute. Flexing her will gently yet firmly, Vae made sure that competitor got lost on the way to the bidding, ensuring the merchant woman got the perfect start. 

The change was instant… or was it? Nothing seemed to change at all. She was still brunette with curly hair under a fancy hat, particularly well dressed in exotic garb that could barely contain her ample form, and her smile was infectious as ever. Her belly hung  free like a symbol of her mercantile success and swayed gently back and forth even as she stood there. She stood proud, with her wide pillowy arms positioned on her ample flanks. Oh, that’s not even mentioning how wide her ass wa-

Wait.

Vae caught herself, barely managing to remind herself of the old reality and the resulting differences. Although she had a supernatural memory, the true nature of reality had almost eluded even her. 

(text-colour:purple)[“Well, when are you gonna work your magic?”] The fat merchant huffed impatiently through her fat cheeks. 

(text-colour:#ff7070)[“It already happened, I told you that you wouldn’t notice it.”] 

(text-colour:purple)[“Nothing happened, I don’t remember anything different happening!”] 

Vae sighed, thinking of how to better illustrate how something had happened. 

(text-colour:#ff7070)[“Tell me what you wished for again.”]

(text-colour:purple)[“I wished for the ability to help the fisherman sell his fish with business connections, of course.”] She said, stomping her thick leg. 

(text-colour:#ff7070)[“Think; can you do that? Do you have connections now that could do that as of this very moment?”]

(text-colour:purple)[“Why of course… I… do…”] She trailed off as her mind worked though this realization. When you edit someone&#39;s history, the only way to get them to believe you afterwards is by making them nitpick their own choice of wish. (text-colour:purple)[“So, it worked? Am I technically the same person, even?”]

(text-colour:#ff7070)[“In all the ways that count, hun.”] Vae reassured, although omitting the fact that her new posh life had also plumped her up something fierce. That was a side effect of the change better left untold. (text-colour:#ff7070)[“Now, I think you better get started on playing wingwoman for your boyfriend over there.”] Vae teased, causing the merchant to blush rosy red before waddling off in a hurry. 

(text-colour:#ff7070)[//‘Ah, young love. Wonder how long it&#39;ll take her to snatch him up after the princess turns him down.’//]


&lt;img src=&quot;https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/f/eb6ad10e-1dc7-46e1-87ef-0a22f7da7a2e/djo43az-f3716236-9711-4839-9d50-c7637d7b1024.png/v1/fill/w_851,h_939,q_70,strp/merchant__by_nopehome_djo43az-pre.jpg?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1cm46YXBwOjdlMGQxODg5ODIyNjQzNzNhNWYwZDQxNWVhMGQyNmUwIiwiaXNzIjoidXJuOmFwcDo3ZTBkMTg4OTgyMjY0MzczYTVmMGQ0MTVlYTBkMjZlMCIsIm9iaiI6W1t7ImhlaWdodCI6Ijw9MTQxMiIsInBhdGgiOiJcL2ZcL2ViNmFkMTBlLTFkYzctNDZlMS04N2VmLTBhMjJmN2RhN2EyZVwvZGpvNDNhei1mMzcxNjIzNi05NzExLTQ4MzktOWQ1MC1jNzYzN2Q3YjEwMjQucG5nIiwid2lkdGgiOiI8PTEyODAifV1dLCJhdWQiOlsidXJuOnNlcnZpY2U6aW1hZ2Uub3BlcmF0aW9ucyJdfQ.hQeTH2eQ_qwDoIUDmFI13PC7J_wF__OpzUqfuhK2zIE&quot;&gt;
(set: $Fishpoint to it + 1)
(set: $Karma to it + 1)
[[Back to the inn again-&gt;Night two (no build up)]]</tw-passagedata><tw-passagedata pid="90" name="Port day 2, empty" tags="" position="1925,0" size="100,100">//&#39;&#39;Sleeping in the proximity of the fishes  &#39;&#39;//

Being a fairly nice day, the port seems like a decent choice to scope out. 

As she fluttered her way across town and entered the port, she noticed just how packed it was. Large ships bobbed in the harbour, travelers spilling in and out like floods of water they were using for transport. Soldiers marched off transports, their heavy metal armor clicking loudly and their faces nervously looking at the water below. Merchant crews unloaded their goods while their leaders immediately began negotiations with the local shopkeepers. Sailors either howled with laughter and song or solemnly went about their business depending if they were going in and out of port. The air was noxious with the smell of wet wood and the mossy river smell. 

Vae smiled, seeing the sheer volume of sheer opportunity before her. Flying high in the air, she took a deep breath, preparing to advertise her service loud and proud to the crowd. 

&#39;&#39;WHACK&#39;&#39;

The pole of a flag bearing soldier below approached her from behind, cracking her hard on the head. She fluttered in the air for a moment in confusion and pain before her awareness faded and she passed out, falling limply into the crowd below. 

----------------------------------------------------------------------------------------------

The sound of buzzing nighttime insects wormed its way into her ears and served as the sparking sensation that brought her consciousness back. Her eyes fluttered open, startled by the sudden shift in her surroundings. Vae was laying down on a ragged cloth serving as a sleeping bag in an alley. A large, broad man sat on a box in front of her, though the details of his appearance were obscured by the darkness of the now nighttime. She feared the worst had happened, let out a gasp. 

The figure turned around, revealing a bearded and heavily scarred face of a dwarf. Still, his eyes held a soft kindness despite the rest of his gruff being. 

“Oh, you&#39;re finally awake.” His gruff voice sounded relieved. “I was worried you wouldn&#39;t wake up for a while there.”

(text-colour:#ff7070)[“What happened?”] She asked simply, taking to the air as to get out of his reach, still practicing caution. 

“You got knocked out, and landed on the soldiers. I was walking by and carried you over here ta keep ya from getting trampled. It&#39;s been five hours.”

(text-colour:#ff7070)[“Five hours!”] She cried in disbelief. She floated above and past him and her worst fear was confirmed. The once bustling dock was now near completely empty. She had the easiest opportunity in ages, and it slipped right through her fingers. 

(text-colour:#ff7070)[“You wouldn&#39;t happen to want a wish as a reward, would you?”] She asked, turning around to ask the dwarf. 

His stumpy hand rubbed his neck nervously and his words took on an apologetic tone. 

“Sorry, but I&#39;m already seeing a mermaid. She&#39;d kill me if she smelt your magic on me.”

(if:$Magicbuildup is 0)[[[Time to head back to the inn-&gt;Night two (stage one build up)]]](if:$Magicbuildup is 1)[[[Time to head back to the inn-&gt;Helpless balloon]]]</tw-passagedata><tw-passagedata pid="91" name="Pub day 2 Waitress" tags="" position="1875,275" size="100,100">//&#39;&#39;Another round, bartender!&#39;&#39;//

Exiting the inn, Vae made her way across the town square to check out the pub she had spotted on her way in the day before. As she approached, it was a decision she was beginning to regret. Around the stone stairs that lead down to the basement-like interior of the bar, a bunch of wooden standees and a caller stood, advertising something that made her slightly apprehensive. 

//‘Sexy trivia night!’// A sign boldly advertised, the first word written in throbbing pink cursive, standing out against the blandness of the other text. //‘Boobs and brain teasers!’// another read. 

She was about to turn away when the caller spotted her and forced her to continue the journey by locking her in awkward conversation. 

“You! You look like you can appreciate a nice pair!” The remarkably thin and greasy man called out to her. As she finally got within spitting distance of the entrance, he continued his advertising assault despite her silent refusal to acknowledge him. 

“We got pairs of everything you could ever want! Questions and answers, tits and ass, beer and pretzels! There you go, have a good time!” He finished verbally shoving her as she descended the stairs and opened the creaky door.

The smell of sweat, beer, and grain invaded her nose, and she took one final long breath of fresh air before diving in. 

As Vae entered the pub, its warm wooden interior was wrapped in paper banners, flyers, and streamers featuring complex designs in rainbow colors. Nearly every table was crowded with people, self separated into various teams. Seemingly half the city was crammed tightly into the booths of the bar, with seemingly every species, gender, and creed being represented by both the customers and the showgirls patrolling the room. 

Before Vae could even find her bearings, a clammy hand grabbed her wrist and pulled her quickly over to the bar. She was forced harshly onto a barstool. Then, it spun her around to face the hand’s owner: the short bald manager she had seen freaking out over her wish from yesterday. A large Ogre bouncer stood next to him, his giantantic and rough body having to bend down just to fit. Vae briefly wondered how he was able to even enter. 

“Turn her back.” The shorter of he pair demanded, making the genie flinch as spit came out alongside the words. 

“Bird lady fixes Rodrica. Now.” The brute said slowly and firmly, his voice the verbal equivalent of a very slow yet effective sledgehammer. 

(text-colour:#ff7070)[“Who?”] The genie asked, attempting to play dumb as a first instinct.

The miniature boss flicked his hand angrily and pointed across the room. On the other side of the hall, the still wine swollen blonde waitress from yesterday was having a surprisingly good time. She wobbled across with a drunken fat waddle that made it look as though she&#39;d fall and cause a miniature earthquake at any moment. Devices that looked to be a combination of suction cups and keg taps were connected immodestly to her tits and belly button, which jiggled violently along with the balloon-like assets they were connected into. 

A mixed race table called her over with great enthusiasm, one half laughing at the magenta woman&#39;s appearance and the other drunkenly encouraging her as she attempted to navigate over.  Eventually she made it, and allowed herself to crash onto the surface of the luckily reinforced table, her breasts spilling across it. The men let out a roar as their hands and cups clambered around her. Rodrica moaned loudly as both taps were opened and red liquid spilled into tankards, and a wide toothy covered her foolish face. 

(text-colour:#ff7070)[“Oh right.”] Vae admitted casually, as if she had just forgotten to turn her lights off before leaving the house. 

“What are you waiting for?! Fix her!”

(text-colour:#ff7070)[“Well, you gotta work it right for the mag-”]

“Oh od all the stupid bullshit!” The boss cussed non too quietly. The oger stepped forward but was given a sign to stop. The boss rubbed the bridge of his nose with an annoyed hand, as if thinking something out.”

“I wish she was back to normal like yesterday, BEFORE you met her.” He specified carefully.

(text-colour:#1b69b6)[“Oh, *HIC* hey lady from yesterday!”] The blonde called out, spotting vae from across the room. (text-colour:#1b69b6)[“I&#39;d offer you a drink, but I&#39;m feeling a little *HIC* tapped at the moment, gotta wait for the wine to get in the right places again.”]

“Rodrica, just sit down, you&#39;ll be back to normal in a second. As dry as a desert.” The boss said, turning to address her but not taking his expecting eyes off the genie. 

(text-colour:#1b69b6)[“Ah, don’t be so harsh on the *HIC* on the gal! Honestly I wish I could take it to the next level.”] 


* [[Grant the boss&#39;s wish-&gt;Pub wishes good]], he&#39;s right. Vae should own up to her mistake.

* [[Refuse to reverse the wish-&gt;Waitress refusal]], she&#39;s happy enough as is.

* [[Grant the waitress&#39;s wish-&gt;Waitress bad end]]], she seems happy already and what&#39;d be the poblem with taking things further?</tw-passagedata><tw-passagedata pid="92" name="Port day 3, empty" tags="" position="2625,50" size="100,100">//&#39;&#39;BBB (Bogus Business Buster) &#39;&#39;//

Vae hovered across town to the port, convinced that she’d have better luck there than anywhere else today. The wooden pier was a wash with fishmongers, their colorful stands making it almost appear as though a traveling circus had come into town. Strangely enough, the busiest stands seemed to be selling live fish, a whole school’s worth of small golden scaled ones held in a tank larger than a carriage. 

A large orc passed by her who was carrying one such fish in a glass bowl, she grabbed him on the shoulder. Never hurt to get hands on with advertising, at least when you can easily fly outside of trouble if you choose wrongly.

(text-colour:#ff7070)[“Excuse me good sir, but could I interest you in a wish? I’m a genie, you see.”] She offered with the warmest of smiles.

He laughed. 

Hard.

Then he easily broke away from her and left. She tried again with a human woman, who politely turned her down in an awkward manner. This happened again and again and again. Eventually she let out a roar of rage as a thin nervous man (the type with many insecurities which usually made for easy marks). 

“Well, no offence intended,” He began to explain nervously. “but genies have a… spotty reputation. Wish-fish are much more reliable.”

(text-colour:#ff7070)[“Wish fish?”] She inquired angrily through her gritted teeth.

“Y-yes. Those men over there with the parge tank are selling fish that grant any wish, I just got this one because I need some help with my marriage… cost a pretty penny.”

(text-colour:#ff7070)[“I hope your wife divorces you once she sees you spent money on that scam fish.”] Vae dismissed him as she began to fly away.

“I-I’m gay!” He cried out in a modicum of defiance. 

(text-colour:#ff7070)[“I&#39;m sure he&#39;s smart enough to leave you as well, once he sees how you wasted your money!”] She yelled back before leaving his range entirely. 

She effortlessly flew over the crowd, ignoring how some people cried out in fury, accusing her of skipping the line. She landed in the stand and approached the hucksters running it. One was a greasy looking halfling wearing a cheap suit and top hat that a stage magician wouldn&#39;t be seen dead in, but clearly had the intent of impressing the common folk. He was handling the money, taking it from the customers and sorting it in a ridiculously cubic contraption made of iron. His companion was a burly golem made of stone, stained and slicked by water and fish oil. Its surprisingly delicate hands used a long net to take fish from the tank and pass them to the customers when they paid. A tacky and awfully painted sign hung above the counter. 

It read:

//‘Wish fish, the miracle mackerel able to grant any wish your heart desires with 100% accuracy! No tricks, no backfires, completely safe unlike genie magic!

One per customer, 12 gold for a fish… and a wish!’//

The golem spotted her, its inanimate face made of empty space carved out of its head turning to the halfling. 

“Boss.” It said in a deep, hollow voice. “There&#39;s a strange lady behind the counter.”

“Throw her back into the crowd, they get rowdy sometimes.” The boss said, not even looking up from his money counting. 

“Well I would boss but uh… she’s flying and I can’t quite reach ‘er.” The golem said helplessly. 

The man looked up from his greedy work, only to see a very pissed genie in his face. His previously self satisfied expression almost instantaneously melted into one of worry, like a showboating boxer being challenged by a professional heavyweight. 

(text-colour:#ff7070)[“Wish fish… really?”] She said in an annoyed, disappointed tone. 

“Miss, I assure you that these fish are genuine! I&#39;m merely providing unrestricted access to wishes, unlike you elitist genies.”

(text-colour:#ff7070)[“Oh, don&#39;t give me that racist shit!”] She swooped down and slapped the little man in the face. (text-colour:#ff7070)[“Wishes are limited for good reason, what kind of a mess would the world be if everyone could rewrite reality with just a fishing rod and a quiet lakeside afternoon? Besides, these are obviously bogus!]”

“Whatever sister, get outta here before my stone friend flattens you!” The miniature man barked at her, intimidating as a chiwawa. 

(text-colour:#ff7070)[“Oh, you&#39;re threatening me, you deceptive little shit?! You wanna make an enemy out of an actual genie as a conman? I&#39;m your nightmare, asshole.”] She planted a finger on his chest, purposefully knocking off his cheap hat with the force of the motion. (text-colour:#ff7070)[“As soon as these one of your marks smarten up, you&#39;re done. No matter how far you run or how well you hide, my magic, real wish magic, will get you. Maybe they&#39;ll just wish for a full refund, maybe they&#39;ll wish you were dead or never existed to begin with. Either way, I&#39;ll be there to grant it.”]

He looked at her in utter horror, realizing his mistake of antagonizing her. Vae’s self satisfied smirk disappeared as she noticed the fear in his eye, that of a cornered animal. He sprung at her like a rabbit, ramming her out of the air and causing the two scrap with each other on the ground, screaming and yelling loudly. 

The stone golem put down the net and prepared to intervene on the behalf of his boss and squish the strange half bug woman. , but he was halted by an armored hand grabbing him by his shoulder. 

“Excuse me bub, but I’m afraid you&#39;re under arrest.” The city guard told him. His comrades worked quickly, disbursing the crowd with prejudice and pulling the genie and halfling off of each other, placing them in cuffs. 

----------------------------------------------------------------------------------------------

(text-colour:#ff7070)[“Ok, after our investigation, you&#39;re free to go. While you assaulted the suspect, he was a wanted and known criminal.”] The sheriff explained as he opened Vae’s cell and undid her cuffs.

The whole day had practically passed in that cell, marks left on her wrists from the too tight cuffs and a black eye from her scuffle with the halfling. She rubbed the red marks on her arms as she stepped out of the cell.

(text-colour:#ff7070)[“Before I go, can I ask a favor? I don&#39;t usually ask for handouts but could you help me out?”] She pointed to her black eye.

The man paused for a second, seemingly carefully considering the option, before shrugging. 

“I wish you were in perfect health?” He ventured.

Vae nodded thankfully before snapping her fingers. Her injuries didn’t heal, but simply vanished in a split instant, as if they had never been there at all. With herself taken care of, she floated down the hallway of the holding wing towards the front door. 

At least she didn’t have to worry about getting her wish tonight.


[[Vay is very tired-&gt;One last dream, before fate has its say]]</tw-passagedata></tw-storydata>
<script title="Twine engine code" data-main="harlowe">(function(){"use strict";
var require,define;!function(){var e={},r={};require=function(i){var n=e[i];return n&&(r[i]=n[1].apply(void 0,n[0].map(require)),e[i]=void 0),r[i]},(define=function(r,i,n){if("function"==typeof r)return r();e[r]=[i,n]}).amd=!0}();/*!
 * https://github.com/paulmillr/es6-shim
 * @license es6-shim Copyright 2013-2016 by Paul Miller (http://paulmillr.com)
 *   and contributors,  MIT License
 * es6-shim: v0.35.4
 * see https://github.com/paulmillr/es6-shim/blob/0.35.3/LICENSE
 * Details and documentation:
 * https://github.com/paulmillr/es6-shim/
 */
(function(e,t){if(typeof define==="function"&&define.amd){define(t)}else if(typeof exports==="object"){module.exports=t()}else{e.returnExports=t()}})(this,function(){"use strict";var e=Function.call.bind(Function.apply);var t=Function.call.bind(Function.call);var r=Array.isArray;var n=Object.keys;var o=function notThunker(t){return function notThunk(){return!e(t,this,arguments)}};var i=function(e){try{e();return false}catch(t){return true}};var a=function valueOrFalseIfThrows(e){try{return e()}catch(t){return false}};var u=o(i);var f=function(){return!i(function(){return Object.defineProperty({},"x",{get:function(){}})})};var s=!!Object.defineProperty&&f();var c=function foo(){}.name==="foo";var l=Function.call.bind(Array.prototype.forEach);var p=Function.call.bind(Array.prototype.reduce);var v=Function.call.bind(Array.prototype.filter);var y=Function.call.bind(Array.prototype.some);var h=function(e,t,r,n){if(!n&&t in e){return}if(s){Object.defineProperty(e,t,{configurable:true,enumerable:false,writable:true,value:r})}else{e[t]=r}};var b=function(e,t,r){l(n(t),function(n){var o=t[n];h(e,n,o,!!r)})};var g=Function.call.bind(Object.prototype.toString);var d=typeof/abc/==="function"?function IsCallableSlow(e){return typeof e==="function"&&g(e)==="[object Function]"}:function IsCallableFast(e){return typeof e==="function"};var m={getter:function(e,t,r){if(!s){throw new TypeError("getters require true ES5 support")}Object.defineProperty(e,t,{configurable:true,enumerable:false,get:r})},proxy:function(e,t,r){if(!s){throw new TypeError("getters require true ES5 support")}var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,{configurable:n.configurable,enumerable:n.enumerable,get:function getKey(){return e[t]},set:function setKey(r){e[t]=r}})},redefine:function(e,t,r){if(s){var n=Object.getOwnPropertyDescriptor(e,t);n.value=r;Object.defineProperty(e,t,n)}else{e[t]=r}},defineByDescriptor:function(e,t,r){if(s){Object.defineProperty(e,t,r)}else if("value"in r){e[t]=r.value}},preserveToString:function(e,t){if(t&&d(t.toString)){h(e,"toString",t.toString.bind(t),true)}}};var O=Object.create||function(e,t){var r=function Prototype(){};r.prototype=e;var o=new r;if(typeof t!=="undefined"){n(t).forEach(function(e){m.defineByDescriptor(o,e,t[e])})}return o};var w=function(e,t){if(!Object.setPrototypeOf){return false}return a(function(){var r=function Subclass(t){var r=new e(t);Object.setPrototypeOf(r,Subclass.prototype);return r};Object.setPrototypeOf(r,e);r.prototype=O(e.prototype,{constructor:{value:r}});return t(r)})};var j=function(){if(typeof self!=="undefined"){return self}if(typeof window!=="undefined"){return window}if(typeof global!=="undefined"){return global}throw new Error("unable to locate global object")};var S=j();var T=S.isFinite;var I=Function.call.bind(String.prototype.indexOf);var E=Function.apply.bind(Array.prototype.indexOf);var P=Function.call.bind(Array.prototype.concat);var C=Function.call.bind(String.prototype.slice);var M=Function.call.bind(Array.prototype.push);var x=Function.apply.bind(Array.prototype.push);var N=Function.call.bind(Array.prototype.join);var A=Function.call.bind(Array.prototype.shift);var _=Math.max;var R=Math.min;var k=Math.floor;var L=Math.abs;var F=Math.exp;var D=Math.log;var z=Math.sqrt;var q=Function.call.bind(Object.prototype.hasOwnProperty);var W;var G=function(){};var H=S.Map;var V=H&&H.prototype["delete"];var B=H&&H.prototype.get;var U=H&&H.prototype.has;var $=H&&H.prototype.set;var J=S.Symbol||{};var X=J.species||"@@species";var K=Number.isNaN||function isNaN(e){return e!==e};var Z=Number.isFinite||function isFinite(e){return typeof e==="number"&&T(e)};var Y=d(Math.sign)?Math.sign:function sign(e){var t=Number(e);if(t===0){return t}if(K(t)){return t}return t<0?-1:1};var Q=function log1p(e){var t=Number(e);if(t<-1||K(t)){return NaN}if(t===0||t===Infinity){return t}if(t===-1){return-Infinity}return 1+t-1===0?t:t*(D(1+t)/(1+t-1))};var ee=function isArguments(e){return g(e)==="[object Arguments]"};var te=function isArguments(e){return e!==null&&typeof e==="object"&&typeof e.length==="number"&&e.length>=0&&g(e)!=="[object Array]"&&g(e.callee)==="[object Function]"};var re=ee(arguments)?ee:te;var ne={primitive:function(e){return e===null||typeof e!=="function"&&typeof e!=="object"},string:function(e){return g(e)==="[object String]"},regex:function(e){return g(e)==="[object RegExp]"},symbol:function(e){return typeof S.Symbol==="function"&&typeof e==="symbol"}};var oe=function overrideNative(e,t,r){var n=e[t];h(e,t,r,true);m.preserveToString(e[t],n)};var ie=typeof J==="function"&&typeof J["for"]==="function"&&ne.symbol(J());var ae=ne.symbol(J.iterator)?J.iterator:"_es6-shim iterator_";if(S.Set&&typeof(new S.Set)["@@iterator"]==="function"){ae="@@iterator"}if(!S.Reflect){h(S,"Reflect",{},true)}var ue=S.Reflect;var fe=String;var se=typeof document==="undefined"||!document?null:document.all;var ce=se==null?function isNullOrUndefined(e){return e==null}:function isNullOrUndefinedAndNotDocumentAll(e){return e==null&&e!==se};var le={Call:function Call(t,r){var n=arguments.length>2?arguments[2]:[];if(!le.IsCallable(t)){throw new TypeError(t+" is not a function")}return e(t,r,n)},RequireObjectCoercible:function(e,t){if(ce(e)){throw new TypeError(t||"Cannot call method on "+e)}return e},TypeIsObject:function(e){if(e===void 0||e===null||e===true||e===false){return false}return typeof e==="function"||typeof e==="object"||e===se},ToObject:function(e,t){return Object(le.RequireObjectCoercible(e,t))},IsCallable:d,IsConstructor:function(e){return le.IsCallable(e)},ToInt32:function(e){return le.ToNumber(e)>>0},ToUint32:function(e){return le.ToNumber(e)>>>0},ToNumber:function(e){if(ie&&g(e)==="[object Symbol]"){throw new TypeError("Cannot convert a Symbol value to a number")}return+e},ToInteger:function(e){var t=le.ToNumber(e);if(K(t)){return 0}if(t===0||!Z(t)){return t}return(t>0?1:-1)*k(L(t))},ToLength:function(e){var t=le.ToInteger(e);if(t<=0){return 0}if(t>Number.MAX_SAFE_INTEGER){return Number.MAX_SAFE_INTEGER}return t},SameValue:function(e,t){if(e===t){if(e===0){return 1/e===1/t}return true}return K(e)&&K(t)},SameValueZero:function(e,t){return e===t||K(e)&&K(t)},GetIterator:function(e){if(re(e)){return new W(e,"value")}var t=le.GetMethod(e,ae);if(!le.IsCallable(t)){throw new TypeError("value is not an iterable")}var r=le.Call(t,e);if(!le.TypeIsObject(r)){throw new TypeError("bad iterator")}return r},GetMethod:function(e,t){var r=le.ToObject(e)[t];if(ce(r)){return void 0}if(!le.IsCallable(r)){throw new TypeError("Method not callable: "+t)}return r},IteratorComplete:function(e){return!!e.done},IteratorClose:function(e,t){var r=le.GetMethod(e,"return");if(r===void 0){return}var n,o;try{n=le.Call(r,e)}catch(i){o=i}if(t){return}if(o){throw o}if(!le.TypeIsObject(n)){throw new TypeError("Iterator's return method returned a non-object.")}},IteratorNext:function(e){var t=arguments.length>1?e.next(arguments[1]):e.next();if(!le.TypeIsObject(t)){throw new TypeError("bad iterator")}return t},IteratorStep:function(e){var t=le.IteratorNext(e);var r=le.IteratorComplete(t);return r?false:t},Construct:function(e,t,r,n){var o=typeof r==="undefined"?e:r;if(!n&&ue.construct){return ue.construct(e,t,o)}var i=o.prototype;if(!le.TypeIsObject(i)){i=Object.prototype}var a=O(i);var u=le.Call(e,a,t);return le.TypeIsObject(u)?u:a},SpeciesConstructor:function(e,t){var r=e.constructor;if(r===void 0){return t}if(!le.TypeIsObject(r)){throw new TypeError("Bad constructor")}var n=r[X];if(ce(n)){return t}if(!le.IsConstructor(n)){throw new TypeError("Bad @@species")}return n},CreateHTML:function(e,t,r,n){var o=le.ToString(e);var i="<"+t;if(r!==""){var a=le.ToString(n);var u=a.replace(/"/g,"&quot;");i+=" "+r+'="'+u+'"'}var f=i+">";var s=f+o;return s+"</"+t+">"},IsRegExp:function IsRegExp(e){if(!le.TypeIsObject(e)){return false}var t=e[J.match];if(typeof t!=="undefined"){return!!t}return ne.regex(e)},ToString:function ToString(e){if(ie&&g(e)==="[object Symbol]"){throw new TypeError("Cannot convert a Symbol value to a number")}return fe(e)}};if(s&&ie){var pe=function defineWellKnownSymbol(e){if(ne.symbol(J[e])){return J[e]}var t=J["for"]("Symbol."+e);Object.defineProperty(J,e,{configurable:false,enumerable:false,writable:false,value:t});return t};if(!ne.symbol(J.search)){var ve=pe("search");var ye=String.prototype.search;h(RegExp.prototype,ve,function search(e){return le.Call(ye,e,[this])});var he=function search(e){var t=le.RequireObjectCoercible(this);if(!ce(e)){var r=le.GetMethod(e,ve);if(typeof r!=="undefined"){return le.Call(r,e,[t])}}return le.Call(ye,t,[le.ToString(e)])};oe(String.prototype,"search",he)}if(!ne.symbol(J.replace)){var be=pe("replace");var ge=String.prototype.replace;h(RegExp.prototype,be,function replace(e,t){return le.Call(ge,e,[this,t])});var de=function replace(e,t){var r=le.RequireObjectCoercible(this);if(!ce(e)){var n=le.GetMethod(e,be);if(typeof n!=="undefined"){return le.Call(n,e,[r,t])}}return le.Call(ge,r,[le.ToString(e),t])};oe(String.prototype,"replace",de)}if(!ne.symbol(J.split)){var me=pe("split");var Oe=String.prototype.split;h(RegExp.prototype,me,function split(e,t){return le.Call(Oe,e,[this,t])});var we=function split(e,t){var r=le.RequireObjectCoercible(this);if(!ce(e)){var n=le.GetMethod(e,me);if(typeof n!=="undefined"){return le.Call(n,e,[r,t])}}return le.Call(Oe,r,[le.ToString(e),t])};oe(String.prototype,"split",we)}var je=ne.symbol(J.match);var Se=je&&function(){var e={};e[J.match]=function(){return 42};return"a".match(e)!==42}();if(!je||Se){var Te=pe("match");var Ie=String.prototype.match;h(RegExp.prototype,Te,function match(e){return le.Call(Ie,e,[this])});var Ee=function match(e){var t=le.RequireObjectCoercible(this);if(!ce(e)){var r=le.GetMethod(e,Te);if(typeof r!=="undefined"){return le.Call(r,e,[t])}}return le.Call(Ie,t,[le.ToString(e)])};oe(String.prototype,"match",Ee)}}var Pe=function wrapConstructor(e,t,r){m.preserveToString(t,e);if(Object.setPrototypeOf){Object.setPrototypeOf(e,t)}if(s){l(Object.getOwnPropertyNames(e),function(n){if(n in G||r[n]){return}m.proxy(e,n,t)})}else{l(Object.keys(e),function(n){if(n in G||r[n]){return}t[n]=e[n]})}t.prototype=e.prototype;m.redefine(e.prototype,"constructor",t)};var Ce=function(){return this};var Me=function(e){if(s&&!q(e,X)){m.getter(e,X,Ce)}};var xe=function(e,t){var r=t||function iterator(){return this};h(e,ae,r);if(!e[ae]&&ne.symbol(ae)){e[ae]=r}};var Ne=function createDataProperty(e,t,r){if(s){Object.defineProperty(e,t,{configurable:true,enumerable:true,writable:true,value:r})}else{e[t]=r}};var Ae=function createDataPropertyOrThrow(e,t,r){Ne(e,t,r);if(!le.SameValue(e[t],r)){throw new TypeError("property is nonconfigurable")}};var _e=function(e,t,r,n){if(!le.TypeIsObject(e)){throw new TypeError("Constructor requires `new`: "+t.name)}var o=t.prototype;if(!le.TypeIsObject(o)){o=r}var i=O(o);for(var a in n){if(q(n,a)){var u=n[a];h(i,a,u,true)}}return i};if(String.fromCodePoint&&String.fromCodePoint.length!==1){var Re=String.fromCodePoint;oe(String,"fromCodePoint",function fromCodePoint(e){return le.Call(Re,this,arguments)})}var ke={fromCodePoint:function fromCodePoint(e){var t=[];var r;for(var n=0,o=arguments.length;n<o;n++){r=Number(arguments[n]);if(!le.SameValue(r,le.ToInteger(r))||r<0||r>1114111){throw new RangeError("Invalid code point "+r)}if(r<65536){M(t,String.fromCharCode(r))}else{r-=65536;M(t,String.fromCharCode((r>>10)+55296));M(t,String.fromCharCode(r%1024+56320))}}return N(t,"")},raw:function raw(e){var t=arguments.length-1;var r=le.ToObject(e,"bad template");var raw=le.ToObject(r.raw,"bad raw value");var n=raw.length;var o=le.ToLength(n);if(o<=0){return""}var i=[];var a=0;var u,f,s,c;while(a<o){u=le.ToString(a);s=le.ToString(raw[u]);M(i,s);if(a+1>=o){break}f=a+1<arguments.length?arguments[a+1]:"";c=le.ToString(f);M(i,c);a+=1}return N(i,"")}};if(String.raw&&String.raw({raw:{0:"x",1:"y",length:2}})!=="xy"){oe(String,"raw",ke.raw)}b(String,ke);var Le=function repeat(e,t){if(t<1){return""}if(t%2){return repeat(e,t-1)+e}var r=repeat(e,t/2);return r+r};var Fe=Infinity;var De={repeat:function repeat(e){var t=le.ToString(le.RequireObjectCoercible(this));var r=le.ToInteger(e);if(r<0||r>=Fe){throw new RangeError("repeat count must be less than infinity and not overflow maximum string size")}return Le(t,r)},startsWith:function startsWith(e){var t=le.ToString(le.RequireObjectCoercible(this));if(le.IsRegExp(e)){throw new TypeError('Cannot call method "startsWith" with a regex')}var r=le.ToString(e);var n;if(arguments.length>1){n=arguments[1]}var o=_(le.ToInteger(n),0);return C(t,o,o+r.length)===r},endsWith:function endsWith(e){var t=le.ToString(le.RequireObjectCoercible(this));if(le.IsRegExp(e)){throw new TypeError('Cannot call method "endsWith" with a regex')}var r=le.ToString(e);var n=t.length;var o;if(arguments.length>1){o=arguments[1]}var i=typeof o==="undefined"?n:le.ToInteger(o);var a=R(_(i,0),n);return C(t,a-r.length,a)===r},includes:function includes(e){if(le.IsRegExp(e)){throw new TypeError('"includes" does not accept a RegExp')}var t=le.ToString(e);var r;if(arguments.length>1){r=arguments[1]}return I(this,t,r)!==-1},codePointAt:function codePointAt(e){var t=le.ToString(le.RequireObjectCoercible(this));var r=le.ToInteger(e);var n=t.length;if(r>=0&&r<n){var o=t.charCodeAt(r);var i=r+1===n;if(o<55296||o>56319||i){return o}var a=t.charCodeAt(r+1);if(a<56320||a>57343){return o}return(o-55296)*1024+(a-56320)+65536}}};if(String.prototype.includes&&"a".includes("a",Infinity)!==false){oe(String.prototype,"includes",De.includes)}if(String.prototype.startsWith&&String.prototype.endsWith){var ze=i(function(){return"/a/".startsWith(/a/)});var qe=a(function(){return"abc".startsWith("a",Infinity)===false});if(!ze||!qe){oe(String.prototype,"startsWith",De.startsWith);oe(String.prototype,"endsWith",De.endsWith)}}if(ie){var We=a(function(){var e=/a/;e[J.match]=false;return"/a/".startsWith(e)});if(!We){oe(String.prototype,"startsWith",De.startsWith)}var Ge=a(function(){var e=/a/;e[J.match]=false;return"/a/".endsWith(e)});if(!Ge){oe(String.prototype,"endsWith",De.endsWith)}var He=a(function(){var e=/a/;e[J.match]=false;return"/a/".includes(e)});if(!He){oe(String.prototype,"includes",De.includes)}}b(String.prototype,De);var Ve=["\t\n\x0B\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003","\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028","\u2029\ufeff"].join("");var Be=new RegExp("(^["+Ve+"]+)|(["+Ve+"]+$)","g");var Ue=function trim(){return le.ToString(le.RequireObjectCoercible(this)).replace(Be,"")};var $e=["\x85","\u200b","\ufffe"].join("");var Je=new RegExp("["+$e+"]","g");var Xe=/^[-+]0x[0-9a-f]+$/i;var Ke=$e.trim().length!==$e.length;h(String.prototype,"trim",Ue,Ke);var Ze=function(e){return{value:e,done:arguments.length===0}};var Ye=function(e){le.RequireObjectCoercible(e);h(this,"_s",le.ToString(e));h(this,"_i",0)};Ye.prototype.next=function(){var e=this._s;var t=this._i;if(typeof e==="undefined"||t>=e.length){this._s=void 0;return Ze()}var r=e.charCodeAt(t);var n,o;if(r<55296||r>56319||t+1===e.length){o=1}else{n=e.charCodeAt(t+1);o=n<56320||n>57343?1:2}this._i=t+o;return Ze(e.substr(t,o))};xe(Ye.prototype);xe(String.prototype,function(){return new Ye(this)});var Qe={from:function from(e){var r=this;var n;if(arguments.length>1){n=arguments[1]}var o,i;if(typeof n==="undefined"){o=false}else{if(!le.IsCallable(n)){throw new TypeError("Array.from: when provided, the second argument must be a function")}if(arguments.length>2){i=arguments[2]}o=true}var a=typeof(re(e)||le.GetMethod(e,ae))!=="undefined";var u,f,s;if(a){f=le.IsConstructor(r)?Object(new r):[];var c=le.GetIterator(e);var l,p;s=0;while(true){l=le.IteratorStep(c);if(l===false){break}p=l.value;try{if(o){p=typeof i==="undefined"?n(p,s):t(n,i,p,s)}f[s]=p}catch(v){le.IteratorClose(c,true);throw v}s+=1}u=s}else{var y=le.ToObject(e);u=le.ToLength(y.length);f=le.IsConstructor(r)?Object(new r(u)):new Array(u);var h;for(s=0;s<u;++s){h=y[s];if(o){h=typeof i==="undefined"?n(h,s):t(n,i,h,s)}Ae(f,s,h)}}f.length=u;return f},of:function of(){var e=arguments.length;var t=this;var n=r(t)||!le.IsCallable(t)?new Array(e):le.Construct(t,[e]);for(var o=0;o<e;++o){Ae(n,o,arguments[o])}n.length=e;return n}};b(Array,Qe);Me(Array);W=function(e,t){h(this,"i",0);h(this,"array",e);h(this,"kind",t)};b(W.prototype,{next:function(){var e=this.i;var t=this.array;if(!(this instanceof W)){throw new TypeError("Not an ArrayIterator")}if(typeof t!=="undefined"){var r=le.ToLength(t.length);if(e<r){var n=this.kind;var o;if(n==="key"){o=e}else if(n==="value"){o=t[e]}else if(n==="entry"){o=[e,t[e]]}this.i=e+1;return Ze(o)}}this.array=void 0;return Ze()}});xe(W.prototype);var et=Array.of===Qe.of||function(){var e=function Foo(e){this.length=e};e.prototype=[];var t=Array.of.apply(e,[1,2]);return t instanceof e&&t.length===2}();if(!et){oe(Array,"of",Qe.of)}var tt={copyWithin:function copyWithin(e,t){var r=le.ToObject(this);var n=le.ToLength(r.length);var o=le.ToInteger(e);var i=le.ToInteger(t);var a=o<0?_(n+o,0):R(o,n);var u=i<0?_(n+i,0):R(i,n);var f;if(arguments.length>2){f=arguments[2]}var s=typeof f==="undefined"?n:le.ToInteger(f);var c=s<0?_(n+s,0):R(s,n);var l=R(c-u,n-a);var p=1;if(u<a&&a<u+l){p=-1;u+=l-1;a+=l-1}while(l>0){if(u in r){r[a]=r[u]}else{delete r[a]}u+=p;a+=p;l-=1}return r},fill:function fill(e){var t;if(arguments.length>1){t=arguments[1]}var r;if(arguments.length>2){r=arguments[2]}var n=le.ToObject(this);var o=le.ToLength(n.length);t=le.ToInteger(typeof t==="undefined"?0:t);r=le.ToInteger(typeof r==="undefined"?o:r);var i=t<0?_(o+t,0):R(t,o);var a=r<0?o+r:r;for(var u=i;u<o&&u<a;++u){n[u]=e}return n},find:function find(e){var r=le.ToObject(this);var n=le.ToLength(r.length);if(!le.IsCallable(e)){throw new TypeError("Array#find: predicate must be a function")}var o=arguments.length>1?arguments[1]:null;for(var i=0,a;i<n;i++){a=r[i];if(o){if(t(e,o,a,i,r)){return a}}else if(e(a,i,r)){return a}}},findIndex:function findIndex(e){var r=le.ToObject(this);var n=le.ToLength(r.length);if(!le.IsCallable(e)){throw new TypeError("Array#findIndex: predicate must be a function")}var o=arguments.length>1?arguments[1]:null;for(var i=0;i<n;i++){if(o){if(t(e,o,r[i],i,r)){return i}}else if(e(r[i],i,r)){return i}}return-1},keys:function keys(){return new W(this,"key")},values:function values(){return new W(this,"value")},entries:function entries(){return new W(this,"entry")}};if(Array.prototype.keys&&!le.IsCallable([1].keys().next)){delete Array.prototype.keys}if(Array.prototype.entries&&!le.IsCallable([1].entries().next)){delete Array.prototype.entries}if(Array.prototype.keys&&Array.prototype.entries&&!Array.prototype.values&&Array.prototype[ae]){b(Array.prototype,{values:Array.prototype[ae]});if(ne.symbol(J.unscopables)){Array.prototype[J.unscopables].values=true}}if(c&&Array.prototype.values&&Array.prototype.values.name!=="values"){var rt=Array.prototype.values;oe(Array.prototype,"values",function values(){return le.Call(rt,this,arguments)});h(Array.prototype,ae,Array.prototype.values,true)}b(Array.prototype,tt);if(1/[true].indexOf(true,-0)<0){h(Array.prototype,"indexOf",function indexOf(e){var t=E(this,arguments);if(t===0&&1/t<0){return 0}return t},true)}xe(Array.prototype,function(){return this.values()});if(Object.getPrototypeOf){var nt=Object.getPrototypeOf([].values());if(nt){xe(nt)}}var ot=function(){return a(function(){return Array.from({length:-1}).length===0})}();var it=function(){var e=Array.from([0].entries());return e.length===1&&r(e[0])&&e[0][0]===0&&e[0][1]===0}();if(!ot||!it){oe(Array,"from",Qe.from)}var at=function(){return a(function(){return Array.from([0],void 0)})}();if(!at){var ut=Array.from;oe(Array,"from",function from(e){if(arguments.length>1&&typeof arguments[1]!=="undefined"){return le.Call(ut,this,arguments)}return t(ut,this,e)})}var ft=-(Math.pow(2,32)-1);var st=function(e,r){var n={length:ft};n[r?(n.length>>>0)-1:0]=true;return a(function(){t(e,n,function(){throw new RangeError("should not reach here")},[]);return true})};if(!st(Array.prototype.forEach)){var ct=Array.prototype.forEach;oe(Array.prototype,"forEach",function forEach(e){return le.Call(ct,this.length>=0?this:[],arguments)})}if(!st(Array.prototype.map)){var lt=Array.prototype.map;oe(Array.prototype,"map",function map(e){return le.Call(lt,this.length>=0?this:[],arguments)})}if(!st(Array.prototype.filter)){var pt=Array.prototype.filter;oe(Array.prototype,"filter",function filter(e){return le.Call(pt,this.length>=0?this:[],arguments)})}if(!st(Array.prototype.some)){var vt=Array.prototype.some;oe(Array.prototype,"some",function some(e){return le.Call(vt,this.length>=0?this:[],arguments)})}if(!st(Array.prototype.every)){var yt=Array.prototype.every;oe(Array.prototype,"every",function every(e){return le.Call(yt,this.length>=0?this:[],arguments)})}if(!st(Array.prototype.reduce)){var ht=Array.prototype.reduce;oe(Array.prototype,"reduce",function reduce(e){return le.Call(ht,this.length>=0?this:[],arguments)})}if(!st(Array.prototype.reduceRight,true)){var bt=Array.prototype.reduceRight;oe(Array.prototype,"reduceRight",function reduceRight(e){return le.Call(bt,this.length>=0?this:[],arguments)})}var gt=Number("0o10")!==8;var dt=Number("0b10")!==2;var mt=y($e,function(e){return Number(e+0+e)===0});if(gt||dt||mt){var Ot=Number;var wt=/^0b[01]+$/i;var jt=/^0o[0-7]+$/i;var St=wt.test.bind(wt);var Tt=jt.test.bind(jt);var It=function(e,t){var r;if(typeof e.valueOf==="function"){r=e.valueOf();if(ne.primitive(r)){return r}}if(typeof e.toString==="function"){r=e.toString();if(ne.primitive(r)){return r}}throw new TypeError("No default value")};var Et=Je.test.bind(Je);var Pt=Xe.test.bind(Xe);var Ct=function(){var e=function Number(t){var r;if(arguments.length>0){r=ne.primitive(t)?t:It(t,"number")}else{r=0}if(typeof r==="string"){r=le.Call(Ue,r);if(St(r)){r=parseInt(C(r,2),2)}else if(Tt(r)){r=parseInt(C(r,2),8)}else if(Et(r)||Pt(r)){r=NaN}}var n=this;var o=a(function(){Ot.prototype.valueOf.call(n);return true});if(n instanceof e&&!o){return new Ot(r)}return Ot(r)};return e}();Pe(Ot,Ct,{});b(Ct,{NaN:Ot.NaN,MAX_VALUE:Ot.MAX_VALUE,MIN_VALUE:Ot.MIN_VALUE,NEGATIVE_INFINITY:Ot.NEGATIVE_INFINITY,POSITIVE_INFINITY:Ot.POSITIVE_INFINITY});Number=Ct;m.redefine(S,"Number",Ct)}var Mt=Math.pow(2,53)-1;b(Number,{MAX_SAFE_INTEGER:Mt,MIN_SAFE_INTEGER:-Mt,EPSILON:2.220446049250313e-16,parseInt:S.parseInt,parseFloat:S.parseFloat,isFinite:Z,isInteger:function isInteger(e){return Z(e)&&le.ToInteger(e)===e},isSafeInteger:function isSafeInteger(e){return Number.isInteger(e)&&L(e)<=Number.MAX_SAFE_INTEGER},isNaN:K});h(Number,"parseInt",S.parseInt,Number.parseInt!==S.parseInt);if([,1].find(function(){return true})===1){oe(Array.prototype,"find",tt.find)}if([,1].findIndex(function(){return true})!==0){oe(Array.prototype,"findIndex",tt.findIndex)}var xt=Function.bind.call(Function.bind,Object.prototype.propertyIsEnumerable);var Nt=function ensureEnumerable(e,t){if(s&&xt(e,t)){Object.defineProperty(e,t,{enumerable:false})}};var At=function sliceArgs(){var e=Number(this);var t=arguments.length;var r=t-e;var n=new Array(r<0?0:r);for(var o=e;o<t;++o){n[o-e]=arguments[o]}return n};var _t=function assignTo(e){return function assignToSource(t,r){t[r]=e[r];return t}};var Rt=function(e,t){var r=n(Object(t));var o;if(le.IsCallable(Object.getOwnPropertySymbols)){o=v(Object.getOwnPropertySymbols(Object(t)),xt(t))}return p(P(r,o||[]),_t(t),e)};var kt={assign:function(e,t){var r=le.ToObject(e,"Cannot convert undefined or null to object");return p(le.Call(At,1,arguments),Rt,r)},is:function is(e,t){return le.SameValue(e,t)}};var Lt=Object.assign&&Object.preventExtensions&&function(){var e=Object.preventExtensions({1:2});try{Object.assign(e,"xy")}catch(t){return e[1]==="y"}}();if(Lt){oe(Object,"assign",kt.assign)}b(Object,kt);if(s){var Ft={setPrototypeOf:function(e){var r;var n=function(e,t){if(!le.TypeIsObject(e)){throw new TypeError("cannot set prototype on a non-object")}if(!(t===null||le.TypeIsObject(t))){throw new TypeError("can only set prototype to an object or null"+t)}};var o=function(e,o){n(e,o);t(r,e,o);return e};try{r=e.getOwnPropertyDescriptor(e.prototype,"__proto__").set;t(r,{},null)}catch(i){if(e.prototype!=={}.__proto__){return}r=function(e){this.__proto__=e};o.polyfill=o(o({},null),e.prototype)instanceof e}return o}(Object)};b(Object,Ft)}if(Object.setPrototypeOf&&Object.getPrototypeOf&&Object.getPrototypeOf(Object.setPrototypeOf({},null))!==null&&Object.getPrototypeOf(Object.create(null))===null){(function(){var e=Object.create(null);var t=Object.getPrototypeOf;var r=Object.setPrototypeOf;Object.getPrototypeOf=function(r){var n=t(r);return n===e?null:n};Object.setPrototypeOf=function(t,n){var o=n===null?e:n;return r(t,o)};Object.setPrototypeOf.polyfill=false})()}var Dt=!i(function(){return Object.keys("foo")});if(!Dt){var zt=Object.keys;oe(Object,"keys",function keys(e){return zt(le.ToObject(e))});n=Object.keys}var qt=i(function(){return Object.keys(/a/g)});if(qt){var Wt=Object.keys;oe(Object,"keys",function keys(e){if(ne.regex(e)){var t=[];for(var r in e){if(q(e,r)){M(t,r)}}return t}return Wt(e)});n=Object.keys}if(Object.getOwnPropertyNames){var Gt=!i(function(){return Object.getOwnPropertyNames("foo")});if(!Gt){var Ht=typeof window==="object"?Object.getOwnPropertyNames(window):[];var Vt=Object.getOwnPropertyNames;oe(Object,"getOwnPropertyNames",function getOwnPropertyNames(e){var t=le.ToObject(e);if(g(t)==="[object Window]"){try{return Vt(t)}catch(r){return P([],Ht)}}return Vt(t)})}}if(Object.getOwnPropertyDescriptor){var Bt=!i(function(){return Object.getOwnPropertyDescriptor("foo","bar")});if(!Bt){var Ut=Object.getOwnPropertyDescriptor;oe(Object,"getOwnPropertyDescriptor",function getOwnPropertyDescriptor(e,t){return Ut(le.ToObject(e),t)})}}if(Object.seal){var $t=!i(function(){return Object.seal("foo")});if(!$t){var Jt=Object.seal;oe(Object,"seal",function seal(e){if(!le.TypeIsObject(e)){return e}return Jt(e)})}}if(Object.isSealed){var Xt=!i(function(){return Object.isSealed("foo")});if(!Xt){var Kt=Object.isSealed;oe(Object,"isSealed",function isSealed(e){if(!le.TypeIsObject(e)){return true}return Kt(e)})}}if(Object.freeze){var Zt=!i(function(){return Object.freeze("foo")});if(!Zt){var Yt=Object.freeze;oe(Object,"freeze",function freeze(e){if(!le.TypeIsObject(e)){return e}return Yt(e)})}}if(Object.isFrozen){var Qt=!i(function(){return Object.isFrozen("foo")});if(!Qt){var er=Object.isFrozen;oe(Object,"isFrozen",function isFrozen(e){if(!le.TypeIsObject(e)){return true}return er(e)})}}if(Object.preventExtensions){var tr=!i(function(){return Object.preventExtensions("foo")});if(!tr){var rr=Object.preventExtensions;oe(Object,"preventExtensions",function preventExtensions(e){if(!le.TypeIsObject(e)){return e}return rr(e)})}}if(Object.isExtensible){var nr=!i(function(){return Object.isExtensible("foo")});if(!nr){var or=Object.isExtensible;oe(Object,"isExtensible",function isExtensible(e){if(!le.TypeIsObject(e)){return false}return or(e)})}}if(Object.getPrototypeOf){var ir=!i(function(){return Object.getPrototypeOf("foo")});if(!ir){var ar=Object.getPrototypeOf;oe(Object,"getPrototypeOf",function getPrototypeOf(e){return ar(le.ToObject(e))})}}var ur=s&&function(){var e=Object.getOwnPropertyDescriptor(RegExp.prototype,"flags");return e&&le.IsCallable(e.get)}();if(s&&!ur){var fr=function flags(){if(!le.TypeIsObject(this)){throw new TypeError("Method called on incompatible type: must be an object.")}var e="";if(this.global){e+="g"}if(this.ignoreCase){e+="i"}if(this.multiline){e+="m"}if(this.unicode){e+="u"}if(this.sticky){e+="y"}return e};m.getter(RegExp.prototype,"flags",fr)}var sr=s&&a(function(){return String(new RegExp(/a/g,"i"))==="/a/i"});var cr=ie&&s&&function(){var e=/./;e[J.match]=false;return RegExp(e)===e}();var lr=a(function(){return RegExp.prototype.toString.call({source:"abc"})==="/abc/"});var pr=lr&&a(function(){return RegExp.prototype.toString.call({source:"a",flags:"b"})==="/a/b"});if(!lr||!pr){var vr=RegExp.prototype.toString;h(RegExp.prototype,"toString",function toString(){var e=le.RequireObjectCoercible(this);if(ne.regex(e)){return t(vr,e)}var r=fe(e.source);var n=fe(e.flags);return"/"+r+"/"+n},true);m.preserveToString(RegExp.prototype.toString,vr);RegExp.prototype.toString.prototype=void 0}if(s&&(!sr||cr)){var yr=Object.getOwnPropertyDescriptor(RegExp.prototype,"flags").get;var hr=Object.getOwnPropertyDescriptor(RegExp.prototype,"source")||{};var br=function(){return this.source};var gr=le.IsCallable(hr.get)?hr.get:br;var dr=RegExp;var mr=function(){return function RegExp(e,t){var r=le.IsRegExp(e);var n=this instanceof RegExp;if(!n&&r&&typeof t==="undefined"&&e.constructor===RegExp){return e}var o=e;var i=t;if(ne.regex(e)){o=le.Call(gr,e);i=typeof t==="undefined"?le.Call(yr,e):t;return new RegExp(o,i)}else if(r){o=e.source;i=typeof t==="undefined"?e.flags:t}return new dr(e,t)}}();Pe(dr,mr,{$input:true});RegExp=mr;m.redefine(S,"RegExp",mr)}if(s){var Or={input:"$_",lastMatch:"$&",lastParen:"$+",leftContext:"$`",rightContext:"$'"};l(n(Or),function(e){if(e in RegExp&&!(Or[e]in RegExp)){m.getter(RegExp,Or[e],function get(){return RegExp[e]})}})}Me(RegExp);var wr=1/Number.EPSILON;var jr=function roundTiesToEven(e){return e+wr-wr};var Sr=Math.pow(2,-23);var Tr=Math.pow(2,127)*(2-Sr);var Ir=Math.pow(2,-126);var Er=Math.E;var Pr=Math.LOG2E;var Cr=Math.LOG10E;var Mr=Number.prototype.clz;delete Number.prototype.clz;var xr={acosh:function acosh(e){var t=Number(e);if(K(t)||e<1){return NaN}if(t===1){return 0}if(t===Infinity){return t}var r=1/(t*t);if(t<2){return Q(t-1+z(1-r)*t)}var n=t/2;return Q(n+z(1-r)*n-1)+1/Pr},asinh:function asinh(e){var t=Number(e);if(t===0||!T(t)){return t}var r=L(t);var n=r*r;var o=Y(t);if(r<1){return o*Q(r+n/(z(n+1)+1))}return o*(Q(r/2+z(1+1/n)*r/2-1)+1/Pr)},atanh:function atanh(e){var t=Number(e);if(t===0){return t}if(t===-1){return-Infinity}if(t===1){return Infinity}if(K(t)||t<-1||t>1){return NaN}var r=L(t);return Y(t)*Q(2*r/(1-r))/2},cbrt:function cbrt(e){var t=Number(e);if(t===0){return t}var r=t<0;var n;if(r){t=-t}if(t===Infinity){n=Infinity}else{n=F(D(t)/3);n=(t/(n*n)+2*n)/3}return r?-n:n},clz32:function clz32(e){var t=Number(e);var r=le.ToUint32(t);if(r===0){return 32}return Mr?le.Call(Mr,r):31-k(D(r+.5)*Pr)},cosh:function cosh(e){var t=Number(e);if(t===0){return 1}if(K(t)){return NaN}if(!T(t)){return Infinity}var r=F(L(t)-1);return(r+1/(r*Er*Er))*(Er/2)},expm1:function expm1(e){var t=Number(e);if(t===-Infinity){return-1}if(!T(t)||t===0){return t}if(L(t)>.5){return F(t)-1}var r=t;var n=0;var o=1;while(n+r!==n){n+=r;o+=1;r*=t/o}return n},hypot:function hypot(e,t){var r=0;var n=0;for(var o=0;o<arguments.length;++o){var i=L(Number(arguments[o]));if(n<i){r*=n/i*(n/i);r+=1;n=i}else{r+=i>0?i/n*(i/n):i}}return n===Infinity?Infinity:n*z(r)},log2:function log2(e){return D(e)*Pr},log10:function log10(e){return D(e)*Cr},log1p:Q,sign:Y,sinh:function sinh(e){var t=Number(e);if(!T(t)||t===0){return t}var r=L(t);if(r<1){var n=Math.expm1(r);return Y(t)*n*(1+1/(n+1))/2}var o=F(r-1);return Y(t)*(o-1/(o*Er*Er))*(Er/2)},tanh:function tanh(e){var t=Number(e);if(K(t)||t===0){return t}if(t>=20){return 1}if(t<=-20){return-1}return(Math.expm1(t)-Math.expm1(-t))/(F(t)+F(-t))},trunc:function trunc(e){var t=Number(e);return t<0?-k(-t):k(t)},imul:function imul(e,t){var r=le.ToUint32(e);var n=le.ToUint32(t);var o=r>>>16&65535;var i=r&65535;var a=n>>>16&65535;var u=n&65535;return i*u+(o*u+i*a<<16>>>0)|0},fround:function fround(e){var t=Number(e);if(t===0||t===Infinity||t===-Infinity||K(t)){return t}var r=Y(t);var n=L(t);if(n<Ir){return r*jr(n/Ir/Sr)*Ir*Sr}var o=(1+Sr/Number.EPSILON)*n;var i=o-(o-n);if(i>Tr||K(i)){return r*Infinity}return r*i}};var Nr=function withinULPDistance(e,t,r){return L(1-e/t)/Number.EPSILON<(r||8)};b(Math,xr);h(Math,"sinh",xr.sinh,Math.sinh(710)===Infinity);h(Math,"cosh",xr.cosh,Math.cosh(710)===Infinity);h(Math,"log1p",xr.log1p,Math.log1p(-1e-17)!==-1e-17);h(Math,"asinh",xr.asinh,Math.asinh(-1e7)!==-Math.asinh(1e7));
h(Math,"asinh",xr.asinh,Math.asinh(1e300)===Infinity);h(Math,"atanh",xr.atanh,Math.atanh(1e-300)===0);h(Math,"tanh",xr.tanh,Math.tanh(-2e-17)!==-2e-17);h(Math,"acosh",xr.acosh,Math.acosh(Number.MAX_VALUE)===Infinity);h(Math,"acosh",xr.acosh,!Nr(Math.acosh(1+Number.EPSILON),Math.sqrt(2*Number.EPSILON)));h(Math,"cbrt",xr.cbrt,!Nr(Math.cbrt(1e-300),1e-100));h(Math,"sinh",xr.sinh,Math.sinh(-2e-17)!==-2e-17);var Ar=Math.expm1(10);h(Math,"expm1",xr.expm1,Ar>22025.465794806718||Ar<22025.465794806718);h(Math,"hypot",xr.hypot,Math.hypot(Infinity,NaN)!==Infinity);var _r=Math.round;var Rr=Math.round(.5-Number.EPSILON/4)===0&&Math.round(-.5+Number.EPSILON/3.99)===1;var kr=wr+1;var Lr=2*wr-1;var Fr=[kr,Lr].every(function(e){return Math.round(e)===e});h(Math,"round",function round(e){var t=k(e);var r=t===-1?-0:t+1;return e-t<.5?t:r},!Rr||!Fr);m.preserveToString(Math.round,_r);var Dr=Math.imul;if(Math.imul(4294967295,5)!==-5){Math.imul=xr.imul;m.preserveToString(Math.imul,Dr)}if(Math.imul.length!==2){oe(Math,"imul",function imul(e,t){return le.Call(Dr,Math,arguments)})}var zr=function(){var e=S.setTimeout;if(typeof e!=="function"&&typeof e!=="object"){return}le.IsPromise=function(e){if(!le.TypeIsObject(e)){return false}if(typeof e._promise==="undefined"){return false}return true};var r=function(e){if(!le.IsConstructor(e)){throw new TypeError("Bad promise constructor")}var t=this;var r=function(e,r){if(t.resolve!==void 0||t.reject!==void 0){throw new TypeError("Bad Promise implementation!")}t.resolve=e;t.reject=r};t.resolve=void 0;t.reject=void 0;t.promise=new e(r);if(!(le.IsCallable(t.resolve)&&le.IsCallable(t.reject))){throw new TypeError("Bad promise constructor")}};var n;if(typeof window!=="undefined"&&le.IsCallable(window.postMessage)){n=function(){var e=[];var t="zero-timeout-message";var r=function(r){M(e,r);window.postMessage(t,"*")};var n=function(r){if(r.source===window&&r.data===t){r.stopPropagation();if(e.length===0){return}var n=A(e);n()}};window.addEventListener("message",n,true);return r}}var o=function(){var e=S.Promise;var t=e&&e.resolve&&e.resolve();return t&&function(e){return t.then(e)}};var i=le.IsCallable(S.setImmediate)?S.setImmediate:typeof process==="object"&&process.nextTick?process.nextTick:o()||(le.IsCallable(n)?n():function(t){e(t,0)});var a=function(e){return e};var u=function(e){throw e};var f=0;var s=1;var c=2;var l=0;var p=1;var v=2;var y={};var h=function(e,t,r){i(function(){g(e,t,r)})};var g=function(e,t,r){var n,o;if(t===y){return e(r)}try{n=e(r);o=t.resolve}catch(i){n=i;o=t.reject}o(n)};var d=function(e,t){var r=e._promise;var n=r.reactionLength;if(n>0){h(r.fulfillReactionHandler0,r.reactionCapability0,t);r.fulfillReactionHandler0=void 0;r.rejectReactions0=void 0;r.reactionCapability0=void 0;if(n>1){for(var o=1,i=0;o<n;o++,i+=3){h(r[i+l],r[i+v],t);e[i+l]=void 0;e[i+p]=void 0;e[i+v]=void 0}}}r.result=t;r.state=s;r.reactionLength=0};var m=function(e,t){var r=e._promise;var n=r.reactionLength;if(n>0){h(r.rejectReactionHandler0,r.reactionCapability0,t);r.fulfillReactionHandler0=void 0;r.rejectReactions0=void 0;r.reactionCapability0=void 0;if(n>1){for(var o=1,i=0;o<n;o++,i+=3){h(r[i+p],r[i+v],t);e[i+l]=void 0;e[i+p]=void 0;e[i+v]=void 0}}}r.result=t;r.state=c;r.reactionLength=0};var O=function(e){var t=false;var r=function(r){var n;if(t){return}t=true;if(r===e){return m(e,new TypeError("Self resolution"))}if(!le.TypeIsObject(r)){return d(e,r)}try{n=r.then}catch(o){return m(e,o)}if(!le.IsCallable(n)){return d(e,r)}i(function(){j(e,r,n)})};var n=function(r){if(t){return}t=true;return m(e,r)};return{resolve:r,reject:n}};var w=function(e,r,n,o){if(e===I){t(e,r,n,o,y)}else{t(e,r,n,o)}};var j=function(e,t,r){var n=O(e);var o=n.resolve;var i=n.reject;try{w(r,t,o,i)}catch(a){i(a)}};var T,I;var E=function(){var e=function Promise(t){if(!(this instanceof e)){throw new TypeError('Constructor Promise requires "new"')}if(this&&this._promise){throw new TypeError("Bad construction")}if(!le.IsCallable(t)){throw new TypeError("not a valid resolver")}var r=_e(this,e,T,{_promise:{result:void 0,state:f,reactionLength:0,fulfillReactionHandler0:void 0,rejectReactionHandler0:void 0,reactionCapability0:void 0}});var n=O(r);var o=n.reject;try{t(n.resolve,o)}catch(i){o(i)}return r};return e}();T=E.prototype;var P=function(e,t,r,n){var o=false;return function(i){if(o){return}o=true;t[e]=i;if(--n.count===0){var a=r.resolve;a(t)}}};var C=function(e,t,r){var n=e.iterator;var o=[];var i={count:1};var a,u;var f=0;while(true){try{a=le.IteratorStep(n);if(a===false){e.done=true;break}u=a.value}catch(s){e.done=true;throw s}o[f]=void 0;var c=t.resolve(u);var l=P(f,o,r,i);i.count+=1;w(c.then,c,l,r.reject);f+=1}if(--i.count===0){var p=r.resolve;p(o)}return r.promise};var x=function(e,t,r){var n=e.iterator;var o,i,a;while(true){try{o=le.IteratorStep(n);if(o===false){e.done=true;break}i=o.value}catch(u){e.done=true;throw u}a=t.resolve(i);w(a.then,a,r.resolve,r.reject)}return r.promise};b(E,{all:function all(e){var t=this;if(!le.TypeIsObject(t)){throw new TypeError("Promise is not object")}var n=new r(t);var o,i;try{o=le.GetIterator(e);i={iterator:o,done:false};return C(i,t,n)}catch(a){var u=a;if(i&&!i.done){try{le.IteratorClose(o,true)}catch(f){u=f}}var s=n.reject;s(u);return n.promise}},race:function race(e){var t=this;if(!le.TypeIsObject(t)){throw new TypeError("Promise is not object")}var n=new r(t);var o,i;try{o=le.GetIterator(e);i={iterator:o,done:false};return x(i,t,n)}catch(a){var u=a;if(i&&!i.done){try{le.IteratorClose(o,true)}catch(f){u=f}}var s=n.reject;s(u);return n.promise}},reject:function reject(e){var t=this;if(!le.TypeIsObject(t)){throw new TypeError("Bad promise constructor")}var n=new r(t);var o=n.reject;o(e);return n.promise},resolve:function resolve(e){var t=this;if(!le.TypeIsObject(t)){throw new TypeError("Bad promise constructor")}if(le.IsPromise(e)){var n=e.constructor;if(n===t){return e}}var o=new r(t);var i=o.resolve;i(e);return o.promise}});b(T,{"catch":function(e){return this.then(null,e)},then:function then(e,t){var n=this;if(!le.IsPromise(n)){throw new TypeError("not a promise")}var o=le.SpeciesConstructor(n,E);var i;var b=arguments.length>2&&arguments[2]===y;if(b&&o===E){i=y}else{i=new r(o)}var g=le.IsCallable(e)?e:a;var d=le.IsCallable(t)?t:u;var m=n._promise;var O;if(m.state===f){if(m.reactionLength===0){m.fulfillReactionHandler0=g;m.rejectReactionHandler0=d;m.reactionCapability0=i}else{var w=3*(m.reactionLength-1);m[w+l]=g;m[w+p]=d;m[w+v]=i}m.reactionLength+=1}else if(m.state===s){O=m.result;h(g,i,O)}else if(m.state===c){O=m.result;h(d,i,O)}else{throw new TypeError("unexpected Promise state")}return i.promise}});y=new r(E);I=T.then;return E}();if(S.Promise){delete S.Promise.accept;delete S.Promise.defer;delete S.Promise.prototype.chain}if(typeof zr==="function"){b(S,{Promise:zr});var qr=w(S.Promise,function(e){return e.resolve(42).then(function(){})instanceof e});var Wr=!i(function(){return S.Promise.reject(42).then(null,5).then(null,G)});var Gr=i(function(){return S.Promise.call(3,G)});var Hr=function(e){var t=e.resolve(5);t.constructor={};var r=e.resolve(t);try{r.then(null,G).then(null,G)}catch(n){return true}return t===r}(S.Promise);var Vr=s&&function(){var e=0;var t=Object.defineProperty({},"then",{get:function(){e+=1}});Promise.resolve(t);return e===1}();var Br=function BadResolverPromise(e){var t=new Promise(e);e(3,function(){});this.then=t.then;this.constructor=BadResolverPromise};Br.prototype=Promise.prototype;Br.all=Promise.all;var Ur=a(function(){return!!Br.all([1,2])});if(!qr||!Wr||!Gr||Hr||!Vr||Ur){Promise=zr;oe(S,"Promise",zr)}if(Promise.all.length!==1){var $r=Promise.all;oe(Promise,"all",function all(e){return le.Call($r,this,arguments)})}if(Promise.race.length!==1){var Jr=Promise.race;oe(Promise,"race",function race(e){return le.Call(Jr,this,arguments)})}if(Promise.resolve.length!==1){var Xr=Promise.resolve;oe(Promise,"resolve",function resolve(e){return le.Call(Xr,this,arguments)})}if(Promise.reject.length!==1){var Kr=Promise.reject;oe(Promise,"reject",function reject(e){return le.Call(Kr,this,arguments)})}Nt(Promise,"all");Nt(Promise,"race");Nt(Promise,"resolve");Nt(Promise,"reject");Me(Promise)}var Zr=function(e){var t=n(p(e,function(e,t){e[t]=true;return e},{}));return e.join(":")===t.join(":")};var Yr=Zr(["z","a","bb"]);var Qr=Zr(["z",1,"a","3",2]);if(s){var en=function fastkey(e,t){if(!t&&!Yr){return null}if(ce(e)){return"^"+le.ToString(e)}else if(typeof e==="string"){return"$"+e}else if(typeof e==="number"){if(!Qr){return"n"+e}return e}else if(typeof e==="boolean"){return"b"+e}return null};var tn=function emptyObject(){return Object.create?Object.create(null):{}};var rn=function addIterableToMap(e,n,o){if(r(o)||ne.string(o)){l(o,function(e){if(!le.TypeIsObject(e)){throw new TypeError("Iterator value "+e+" is not an entry object")}n.set(e[0],e[1])})}else if(o instanceof e){t(e.prototype.forEach,o,function(e,t){n.set(t,e)})}else{var i,a;if(!ce(o)){a=n.set;if(!le.IsCallable(a)){throw new TypeError("bad map")}i=le.GetIterator(o)}if(typeof i!=="undefined"){while(true){var u=le.IteratorStep(i);if(u===false){break}var f=u.value;try{if(!le.TypeIsObject(f)){throw new TypeError("Iterator value "+f+" is not an entry object")}t(a,n,f[0],f[1])}catch(s){le.IteratorClose(i,true);throw s}}}}};var nn=function addIterableToSet(e,n,o){if(r(o)||ne.string(o)){l(o,function(e){n.add(e)})}else if(o instanceof e){t(e.prototype.forEach,o,function(e){n.add(e)})}else{var i,a;if(!ce(o)){a=n.add;if(!le.IsCallable(a)){throw new TypeError("bad set")}i=le.GetIterator(o)}if(typeof i!=="undefined"){while(true){var u=le.IteratorStep(i);if(u===false){break}var f=u.value;try{t(a,n,f)}catch(s){le.IteratorClose(i,true);throw s}}}}};var on={Map:function(){var e={};var r=function MapEntry(e,t){this.key=e;this.value=t;this.next=null;this.prev=null};r.prototype.isRemoved=function isRemoved(){return this.key===e};var n=function isMap(e){return!!e._es6map};var o=function requireMapSlot(e,t){if(!le.TypeIsObject(e)||!n(e)){throw new TypeError("Method Map.prototype."+t+" called on incompatible receiver "+le.ToString(e))}};var i=function MapIterator(e,t){o(e,"[[MapIterator]]");h(this,"head",e._head);h(this,"i",this.head);h(this,"kind",t)};i.prototype={isMapIterator:true,next:function next(){if(!this.isMapIterator){throw new TypeError("Not a MapIterator")}var e=this.i;var t=this.kind;var r=this.head;if(typeof this.i==="undefined"){return Ze()}while(e.isRemoved()&&e!==r){e=e.prev}var n;while(e.next!==r){e=e.next;if(!e.isRemoved()){if(t==="key"){n=e.key}else if(t==="value"){n=e.value}else{n=[e.key,e.value]}this.i=e;return Ze(n)}}this.i=void 0;return Ze()}};xe(i.prototype);var a;var u=function Map(){if(!(this instanceof Map)){throw new TypeError('Constructor Map requires "new"')}if(this&&this._es6map){throw new TypeError("Bad construction")}var e=_e(this,Map,a,{_es6map:true,_head:null,_map:H?new H:null,_size:0,_storage:tn()});var t=new r(null,null);t.next=t.prev=t;e._head=t;if(arguments.length>0){rn(Map,e,arguments[0])}return e};a=u.prototype;m.getter(a,"size",function(){if(typeof this._size==="undefined"){throw new TypeError("size method called on incompatible Map")}return this._size});b(a,{get:function get(e){o(this,"get");var t;var r=en(e,true);if(r!==null){t=this._storage[r];if(t){return t.value}return}if(this._map){t=B.call(this._map,e);if(t){return t.value}return}var n=this._head;var i=n;while((i=i.next)!==n){if(le.SameValueZero(i.key,e)){return i.value}}},has:function has(e){o(this,"has");var t=en(e,true);if(t!==null){return typeof this._storage[t]!=="undefined"}if(this._map){return U.call(this._map,e)}var r=this._head;var n=r;while((n=n.next)!==r){if(le.SameValueZero(n.key,e)){return true}}return false},set:function set(e,t){o(this,"set");var n=this._head;var i=n;var a;var u=en(e,true);if(u!==null){if(typeof this._storage[u]!=="undefined"){this._storage[u].value=t;return this}a=this._storage[u]=new r(e,t);i=n.prev}else if(this._map){if(U.call(this._map,e)){B.call(this._map,e).value=t}else{a=new r(e,t);$.call(this._map,e,a);i=n.prev}}while((i=i.next)!==n){if(le.SameValueZero(i.key,e)){i.value=t;return this}}a=a||new r(e,t);if(le.SameValue(-0,e)){a.key=+0}a.next=this._head;a.prev=this._head.prev;a.prev.next=a;a.next.prev=a;this._size+=1;return this},"delete":function(t){o(this,"delete");var r=this._head;var n=r;var i=en(t,true);if(i!==null){if(typeof this._storage[i]==="undefined"){return false}n=this._storage[i].prev;delete this._storage[i]}else if(this._map){if(!U.call(this._map,t)){return false}n=B.call(this._map,t).prev;V.call(this._map,t)}while((n=n.next)!==r){if(le.SameValueZero(n.key,t)){n.key=e;n.value=e;n.prev.next=n.next;n.next.prev=n.prev;this._size-=1;return true}}return false},clear:function clear(){o(this,"clear");this._map=H?new H:null;this._size=0;this._storage=tn();var t=this._head;var r=t;var n=r.next;while((r=n)!==t){r.key=e;r.value=e;n=r.next;r.next=r.prev=t}t.next=t.prev=t},keys:function keys(){o(this,"keys");return new i(this,"key")},values:function values(){o(this,"values");return new i(this,"value")},entries:function entries(){o(this,"entries");return new i(this,"key+value")},forEach:function forEach(e){o(this,"forEach");var r=arguments.length>1?arguments[1]:null;var n=this.entries();for(var i=n.next();!i.done;i=n.next()){if(r){t(e,r,i.value[1],i.value[0],this)}else{e(i.value[1],i.value[0],this)}}}});xe(a,a.entries);return u}(),Set:function(){var e=function isSet(e){return e._es6set&&typeof e._storage!=="undefined"};var r=function requireSetSlot(t,r){if(!le.TypeIsObject(t)||!e(t)){throw new TypeError("Set.prototype."+r+" called on incompatible receiver "+le.ToString(t))}};var o;var i=function Set(){if(!(this instanceof Set)){throw new TypeError('Constructor Set requires "new"')}if(this&&this._es6set){throw new TypeError("Bad construction")}var e=_e(this,Set,o,{_es6set:true,"[[SetData]]":null,_storage:tn()});if(!e._es6set){throw new TypeError("bad set")}if(arguments.length>0){nn(Set,e,arguments[0])}return e};o=i.prototype;var a=function(e){var t=e;if(t==="^null"){return null}else if(t==="^undefined"){return void 0}var r=t.charAt(0);if(r==="$"){return C(t,1)}else if(r==="n"){return+C(t,1)}else if(r==="b"){return t==="btrue"}return+t};var u=function ensureMap(e){if(!e["[[SetData]]"]){var t=new on.Map;e["[[SetData]]"]=t;l(n(e._storage),function(e){var r=a(e);t.set(r,r)});e["[[SetData]]"]=t}e._storage=null};m.getter(i.prototype,"size",function(){r(this,"size");if(this._storage){return n(this._storage).length}u(this);return this["[[SetData]]"].size});b(i.prototype,{has:function has(e){r(this,"has");var t;if(this._storage&&(t=en(e))!==null){return!!this._storage[t]}u(this);return this["[[SetData]]"].has(e)},add:function add(e){r(this,"add");var t;if(this._storage&&(t=en(e))!==null){this._storage[t]=true;return this}u(this);this["[[SetData]]"].set(e,e);return this},"delete":function(e){r(this,"delete");var t;if(this._storage&&(t=en(e))!==null){var n=q(this._storage,t);return delete this._storage[t]&&n}u(this);return this["[[SetData]]"]["delete"](e)},clear:function clear(){r(this,"clear");if(this._storage){this._storage=tn()}if(this["[[SetData]]"]){this["[[SetData]]"].clear()}},values:function values(){r(this,"values");u(this);return new f(this["[[SetData]]"].values())},entries:function entries(){r(this,"entries");u(this);return new f(this["[[SetData]]"].entries())},forEach:function forEach(e){r(this,"forEach");var n=arguments.length>1?arguments[1]:null;var o=this;u(o);this["[[SetData]]"].forEach(function(r,i){if(n){t(e,n,i,i,o)}else{e(i,i,o)}})}});h(i.prototype,"keys",i.prototype.values,true);xe(i.prototype,i.prototype.values);var f=function SetIterator(e){h(this,"it",e)};f.prototype={isSetIterator:true,next:function next(){if(!this.isSetIterator){throw new TypeError("Not a SetIterator")}return this.it.next()}};xe(f.prototype);return i}()};var an=S.Set&&!Set.prototype["delete"]&&Set.prototype.remove&&Set.prototype.items&&Set.prototype.map&&Array.isArray((new Set).keys);if(an){S.Set=on.Set}if(S.Map||S.Set){var un=a(function(){return new Map([[1,2]]).get(1)===2});if(!un){S.Map=function Map(){if(!(this instanceof Map)){throw new TypeError('Constructor Map requires "new"')}var e=new H;if(arguments.length>0){rn(Map,e,arguments[0])}delete e.constructor;Object.setPrototypeOf(e,S.Map.prototype);return e};S.Map.prototype=O(H.prototype);h(S.Map.prototype,"constructor",S.Map,true);m.preserveToString(S.Map,H)}var fn=new Map;var sn=function(){var e=new Map([[1,0],[2,0],[3,0],[4,0]]);e.set(-0,e);return e.get(0)===e&&e.get(-0)===e&&e.has(0)&&e.has(-0)}();var cn=fn.set(1,2)===fn;if(!sn||!cn){oe(Map.prototype,"set",function set(e,r){t($,this,e===0?0:e,r);return this})}if(!sn){b(Map.prototype,{get:function get(e){return t(B,this,e===0?0:e)},has:function has(e){return t(U,this,e===0?0:e)}},true);m.preserveToString(Map.prototype.get,B);m.preserveToString(Map.prototype.has,U)}var ln=new Set;var pn=Set.prototype["delete"]&&Set.prototype.add&&Set.prototype.has&&function(e){e["delete"](0);e.add(-0);return!e.has(0)}(ln);var vn=ln.add(1)===ln;if(!pn||!vn){var yn=Set.prototype.add;Set.prototype.add=function add(e){t(yn,this,e===0?0:e);return this};m.preserveToString(Set.prototype.add,yn)}if(!pn){var hn=Set.prototype.has;Set.prototype.has=function has(e){return t(hn,this,e===0?0:e)};m.preserveToString(Set.prototype.has,hn);var bn=Set.prototype["delete"];Set.prototype["delete"]=function SetDelete(e){return t(bn,this,e===0?0:e)};m.preserveToString(Set.prototype["delete"],bn)}var gn=w(S.Map,function(e){var t=new e([]);t.set(42,42);return t instanceof e});var dn=Object.setPrototypeOf&&!gn;var mn=function(){try{return!(S.Map()instanceof S.Map)}catch(e){return e instanceof TypeError}}();if(S.Map.length!==0||dn||!mn){S.Map=function Map(){if(!(this instanceof Map)){throw new TypeError('Constructor Map requires "new"')}var e=new H;if(arguments.length>0){rn(Map,e,arguments[0])}delete e.constructor;Object.setPrototypeOf(e,Map.prototype);return e};S.Map.prototype=H.prototype;h(S.Map.prototype,"constructor",S.Map,true);m.preserveToString(S.Map,H)}var On=w(S.Set,function(e){var t=new e([]);t.add(42,42);return t instanceof e});var wn=Object.setPrototypeOf&&!On;var jn=function(){try{return!(S.Set()instanceof S.Set)}catch(e){return e instanceof TypeError}}();if(S.Set.length!==0||wn||!jn){var Sn=S.Set;S.Set=function Set(){if(!(this instanceof Set)){throw new TypeError('Constructor Set requires "new"')}var e=new Sn;if(arguments.length>0){nn(Set,e,arguments[0])}delete e.constructor;Object.setPrototypeOf(e,Set.prototype);return e};S.Set.prototype=Sn.prototype;h(S.Set.prototype,"constructor",S.Set,true);m.preserveToString(S.Set,Sn)}var Tn=new S.Map;var In=!a(function(){return Tn.keys().next().done});if(typeof S.Map.prototype.clear!=="function"||(new S.Set).size!==0||Tn.size!==0||typeof S.Map.prototype.keys!=="function"||typeof S.Set.prototype.keys!=="function"||typeof S.Map.prototype.forEach!=="function"||typeof S.Set.prototype.forEach!=="function"||u(S.Map)||u(S.Set)||typeof Tn.keys().next!=="function"||In||!gn){b(S,{Map:on.Map,Set:on.Set},true)}if(S.Set.prototype.keys!==S.Set.prototype.values){h(S.Set.prototype,"keys",S.Set.prototype.values,true)}xe(Object.getPrototypeOf((new S.Map).keys()));xe(Object.getPrototypeOf((new S.Set).keys()));if(c&&S.Set.prototype.has.name!=="has"){var En=S.Set.prototype.has;oe(S.Set.prototype,"has",function has(e){return t(En,this,e)})}}b(S,on);Me(S.Map);Me(S.Set)}var Pn=function throwUnlessTargetIsObject(e){if(!le.TypeIsObject(e)){throw new TypeError("target must be an object")}};var Cn={apply:function apply(){return le.Call(le.Call,null,arguments)},construct:function construct(e,t){if(!le.IsConstructor(e)){throw new TypeError("First argument must be a constructor.")}var r=arguments.length>2?arguments[2]:e;if(!le.IsConstructor(r)){throw new TypeError("new.target must be a constructor.")}return le.Construct(e,t,r,"internal")},deleteProperty:function deleteProperty(e,t){Pn(e);if(s){var r=Object.getOwnPropertyDescriptor(e,t);if(r&&!r.configurable){return false}}return delete e[t]},has:function has(e,t){Pn(e);return t in e}};if(Object.getOwnPropertyNames){Object.assign(Cn,{ownKeys:function ownKeys(e){Pn(e);var t=Object.getOwnPropertyNames(e);if(le.IsCallable(Object.getOwnPropertySymbols)){x(t,Object.getOwnPropertySymbols(e))}return t}})}var Mn=function ConvertExceptionToBoolean(e){return!i(e)};if(Object.preventExtensions){Object.assign(Cn,{isExtensible:function isExtensible(e){Pn(e);return Object.isExtensible(e)},preventExtensions:function preventExtensions(e){Pn(e);return Mn(function(){return Object.preventExtensions(e)})}})}if(s){var xn=function get(e,t,r){var n=Object.getOwnPropertyDescriptor(e,t);if(!n){var o=Object.getPrototypeOf(e);if(o===null){return void 0}return xn(o,t,r)}if("value"in n){return n.value}if(n.get){return le.Call(n.get,r)}return void 0};var Nn=function set(e,r,n,o){var i=Object.getOwnPropertyDescriptor(e,r);if(!i){var a=Object.getPrototypeOf(e);if(a!==null){return Nn(a,r,n,o)}i={value:void 0,writable:true,enumerable:true,configurable:true}}if("value"in i){if(!i.writable){return false}if(!le.TypeIsObject(o)){return false}var u=Object.getOwnPropertyDescriptor(o,r);if(u){return ue.defineProperty(o,r,{value:n})}return ue.defineProperty(o,r,{value:n,writable:true,enumerable:true,configurable:true})}if(i.set){t(i.set,o,n);return true}return false};Object.assign(Cn,{defineProperty:function defineProperty(e,t,r){Pn(e);return Mn(function(){return Object.defineProperty(e,t,r)})},getOwnPropertyDescriptor:function getOwnPropertyDescriptor(e,t){Pn(e);return Object.getOwnPropertyDescriptor(e,t)},get:function get(e,t){Pn(e);var r=arguments.length>2?arguments[2]:e;return xn(e,t,r)},set:function set(e,t,r){Pn(e);var n=arguments.length>3?arguments[3]:e;return Nn(e,t,r,n)}})}if(Object.getPrototypeOf){var An=Object.getPrototypeOf;Cn.getPrototypeOf=function getPrototypeOf(e){Pn(e);return An(e)}}if(Object.setPrototypeOf&&Cn.getPrototypeOf){var _n=function(e,t){var r=t;while(r){if(e===r){return true}r=Cn.getPrototypeOf(r)}return false};Object.assign(Cn,{setPrototypeOf:function setPrototypeOf(e,t){Pn(e);if(t!==null&&!le.TypeIsObject(t)){throw new TypeError("proto must be an object or null")}if(t===ue.getPrototypeOf(e)){return true}if(ue.isExtensible&&!ue.isExtensible(e)){return false}if(_n(e,t)){return false}Object.setPrototypeOf(e,t);return true}})}var Rn=function(e,t){if(!le.IsCallable(S.Reflect[e])){h(S.Reflect,e,t)}else{var r=a(function(){S.Reflect[e](1);S.Reflect[e](NaN);S.Reflect[e](true);return true});if(r){oe(S.Reflect,e,t)}}};Object.keys(Cn).forEach(function(e){Rn(e,Cn[e])});var kn=S.Reflect.getPrototypeOf;if(c&&kn&&kn.name!=="getPrototypeOf"){oe(S.Reflect,"getPrototypeOf",function getPrototypeOf(e){return t(kn,S.Reflect,e)})}if(S.Reflect.setPrototypeOf){if(a(function(){S.Reflect.setPrototypeOf(1,{});return true})){oe(S.Reflect,"setPrototypeOf",Cn.setPrototypeOf)}}if(S.Reflect.defineProperty){if(!a(function(){var e=!S.Reflect.defineProperty(1,"test",{value:1});var t=typeof Object.preventExtensions!=="function"||!S.Reflect.defineProperty(Object.preventExtensions({}),"test",{});return e&&t})){oe(S.Reflect,"defineProperty",Cn.defineProperty)}}if(S.Reflect.construct){if(!a(function(){var e=function F(){};return S.Reflect.construct(function(){},[],e)instanceof e})){oe(S.Reflect,"construct",Cn.construct)}}if(String(new Date(NaN))!=="Invalid Date"){var Ln=Date.prototype.toString;var Fn=function toString(){var e=+this;if(e!==e){return"Invalid Date"}return le.Call(Ln,this)};oe(Date.prototype,"toString",Fn)}var Dn={anchor:function anchor(e){return le.CreateHTML(this,"a","name",e)},big:function big(){return le.CreateHTML(this,"big","","")},blink:function blink(){return le.CreateHTML(this,"blink","","")},bold:function bold(){return le.CreateHTML(this,"b","","")},fixed:function fixed(){return le.CreateHTML(this,"tt","","")},fontcolor:function fontcolor(e){return le.CreateHTML(this,"font","color",e)},fontsize:function fontsize(e){return le.CreateHTML(this,"font","size",e)},italics:function italics(){return le.CreateHTML(this,"i","","")},link:function link(e){return le.CreateHTML(this,"a","href",e)},small:function small(){return le.CreateHTML(this,"small","","")},strike:function strike(){return le.CreateHTML(this,"strike","","")},sub:function sub(){return le.CreateHTML(this,"sub","","")},sup:function sub(){return le.CreateHTML(this,"sup","","")}};l(Object.keys(Dn),function(e){var r=String.prototype[e];var n=false;if(le.IsCallable(r)){var o=t(r,"",' " ');var i=P([],o.match(/"/g)).length;n=o!==o.toLowerCase()||i>2}else{n=true}if(n){oe(String.prototype,e,Dn[e])}});var zn=function(){if(!ie){return false}var e=typeof JSON==="object"&&typeof JSON.stringify==="function"?JSON.stringify:null;if(!e){return false}if(typeof e(J())!=="undefined"){return true}if(e([J()])!=="[null]"){return true}var t={a:J()};t[J()]=true;if(e(t)!=="{}"){return true}return false}();var qn=a(function(){if(!ie){return true}return JSON.stringify(Object(J()))==="{}"&&JSON.stringify([Object(J())])==="[{}]"});if(zn||!qn){var Wn=JSON.stringify;oe(JSON,"stringify",function stringify(e){if(typeof e==="symbol"){return}var n;if(arguments.length>1){n=arguments[1]}var o=[e];if(!r(n)){var i=le.IsCallable(n)?n:null;var a=function(e,r){var n=i?t(i,this,e,r):r;if(typeof n!=="symbol"){if(ne.symbol(n)){return _t({})(n)}return n}};o.push(a)}else{o.push(n)}if(arguments.length>2){o.push(arguments[2])}return Wn.apply(this,o)})}return S});
//# sourceMappingURL=es6-shim.map
/*! jQuery v3.7.1 | (c) OpenJS Foundation and other contributors | jquery.org/license */
!function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(ie,e){"use strict";var oe=[],r=Object.getPrototypeOf,ae=oe.slice,g=oe.flat?function(e){return oe.flat.call(e)}:function(e){return oe.concat.apply([],e)},s=oe.push,se=oe.indexOf,n={},i=n.toString,ue=n.hasOwnProperty,o=ue.toString,a=o.call(Object),le={},v=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType&&"function"!=typeof e.item},y=function(e){return null!=e&&e===e.window},C=ie.document,u={type:!0,src:!0,nonce:!0,noModule:!0};function m(e,t,n){var r,i,o=(n=n||C).createElement("script");if(o.text=e,t)for(r in u)(i=t[r]||t.getAttribute&&t.getAttribute(r))&&o.setAttribute(r,i);n.head.appendChild(o).parentNode.removeChild(o)}function x(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?n[i.call(e)]||"object":typeof e}var t="3.7.1",l=/HTML$/i,ce=function(e,t){return new ce.fn.init(e,t)};function c(e){var t=!!e&&"length"in e&&e.length,n=x(e);return!v(e)&&!y(e)&&("array"===n||0===t||"number"==typeof t&&0<t&&t-1 in e)}function fe(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}ce.fn=ce.prototype={jquery:t,constructor:ce,length:0,toArray:function(){return ae.call(this)},get:function(e){return null==e?ae.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=ce.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return ce.each(this,e)},map:function(n){return this.pushStack(ce.map(this,function(e,t){return n.call(e,t,e)}))},slice:function(){return this.pushStack(ae.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(ce.grep(this,function(e,t){return(t+1)%2}))},odd:function(){return this.pushStack(ce.grep(this,function(e,t){return t%2}))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(0<=n&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:s,sort:oe.sort,splice:oe.splice},ce.extend=ce.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,u=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[s]||{},s++),"object"==typeof a||v(a)||(a={}),s===u&&(a=this,s--);s<u;s++)if(null!=(e=arguments[s]))for(t in e)r=e[t],"__proto__"!==t&&a!==r&&(l&&r&&(ce.isPlainObject(r)||(i=Array.isArray(r)))?(n=a[t],o=i&&!Array.isArray(n)?[]:i||ce.isPlainObject(n)?n:{},i=!1,a[t]=ce.extend(l,o,r)):void 0!==r&&(a[t]=r));return a},ce.extend({expando:"jQuery"+(t+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==i.call(e))&&(!(t=r(e))||"function"==typeof(n=ue.call(t,"constructor")&&t.constructor)&&o.call(n)===a)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){m(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,r=0;if(c(e)){for(n=e.length;r<n;r++)if(!1===t.call(e[r],r,e[r]))break}else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},text:function(e){var t,n="",r=0,i=e.nodeType;if(!i)while(t=e[r++])n+=ce.text(t);return 1===i||11===i?e.textContent:9===i?e.documentElement.textContent:3===i||4===i?e.nodeValue:n},makeArray:function(e,t){var n=t||[];return null!=e&&(c(Object(e))?ce.merge(n,"string"==typeof e?[e]:e):s.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:se.call(t,e,n)},isXMLDoc:function(e){var t=e&&e.namespaceURI,n=e&&(e.ownerDocument||e).documentElement;return!l.test(t||n&&n.nodeName||"HTML")},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,a=!n;i<o;i++)!t(e[i],i)!==a&&r.push(e[i]);return r},map:function(e,t,n){var r,i,o=0,a=[];if(c(e))for(r=e.length;o<r;o++)null!=(i=t(e[o],o,n))&&a.push(i);else for(o in e)null!=(i=t(e[o],o,n))&&a.push(i);return g(a)},guid:1,support:le}),"function"==typeof Symbol&&(ce.fn[Symbol.iterator]=oe[Symbol.iterator]),ce.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){n["[object "+t+"]"]=t.toLowerCase()});var pe=oe.pop,de=oe.sort,he=oe.splice,ge="[\\x20\\t\\r\\n\\f]",ve=new RegExp("^"+ge+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ge+"+$","g");ce.contains=function(e,t){var n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(e.contains?e.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))};var f=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function p(e,t){return t?"\0"===e?"\ufffd":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e}ce.escapeSelector=function(e){return(e+"").replace(f,p)};var ye=C,me=s;!function(){var e,b,w,o,a,T,r,C,d,i,k=me,S=ce.expando,E=0,n=0,s=W(),c=W(),u=W(),h=W(),l=function(e,t){return e===t&&(a=!0),0},f="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",t="(?:\\\\[\\da-fA-F]{1,6}"+ge+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",p="\\["+ge+"*("+t+")(?:"+ge+"*([*^$|!~]?=)"+ge+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+t+"))|)"+ge+"*\\]",g=":("+t+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+p+")*)|.*)\\)|)",v=new RegExp(ge+"+","g"),y=new RegExp("^"+ge+"*,"+ge+"*"),m=new RegExp("^"+ge+"*([>+~]|"+ge+")"+ge+"*"),x=new RegExp(ge+"|>"),j=new RegExp(g),A=new RegExp("^"+t+"$"),D={ID:new RegExp("^#("+t+")"),CLASS:new RegExp("^\\.("+t+")"),TAG:new RegExp("^("+t+"|[*])"),ATTR:new RegExp("^"+p),PSEUDO:new RegExp("^"+g),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ge+"*(even|odd|(([+-]|)(\\d*)n|)"+ge+"*(?:([+-]|)"+ge+"*(\\d+)|))"+ge+"*\\)|)","i"),bool:new RegExp("^(?:"+f+")$","i"),needsContext:new RegExp("^"+ge+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ge+"*((?:-\\d)?\\d*)"+ge+"*\\)|)(?=[^-]|$)","i")},N=/^(?:input|select|textarea|button)$/i,q=/^h\d$/i,L=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,H=/[+~]/,O=new RegExp("\\\\[\\da-fA-F]{1,6}"+ge+"?|\\\\([^\\r\\n\\f])","g"),P=function(e,t){var n="0x"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},M=function(){V()},R=J(function(e){return!0===e.disabled&&fe(e,"fieldset")},{dir:"parentNode",next:"legend"});try{k.apply(oe=ae.call(ye.childNodes),ye.childNodes),oe[ye.childNodes.length].nodeType}catch(e){k={apply:function(e,t){me.apply(e,ae.call(t))},call:function(e){me.apply(e,ae.call(arguments,1))}}}function I(t,e,n,r){var i,o,a,s,u,l,c,f=e&&e.ownerDocument,p=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==p&&9!==p&&11!==p)return n;if(!r&&(V(e),e=e||T,C)){if(11!==p&&(u=L.exec(t)))if(i=u[1]){if(9===p){if(!(a=e.getElementById(i)))return n;if(a.id===i)return k.call(n,a),n}else if(f&&(a=f.getElementById(i))&&I.contains(e,a)&&a.id===i)return k.call(n,a),n}else{if(u[2])return k.apply(n,e.getElementsByTagName(t)),n;if((i=u[3])&&e.getElementsByClassName)return k.apply(n,e.getElementsByClassName(i)),n}if(!(h[t+" "]||d&&d.test(t))){if(c=t,f=e,1===p&&(x.test(t)||m.test(t))){(f=H.test(t)&&U(e.parentNode)||e)==e&&le.scope||((s=e.getAttribute("id"))?s=ce.escapeSelector(s):e.setAttribute("id",s=S)),o=(l=Y(t)).length;while(o--)l[o]=(s?"#"+s:":scope")+" "+Q(l[o]);c=l.join(",")}try{return k.apply(n,f.querySelectorAll(c)),n}catch(e){h(t,!0)}finally{s===S&&e.removeAttribute("id")}}}return re(t.replace(ve,"$1"),e,n,r)}function W(){var r=[];return function e(t,n){return r.push(t+" ")>b.cacheLength&&delete e[r.shift()],e[t+" "]=n}}function F(e){return e[S]=!0,e}function $(e){var t=T.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function B(t){return function(e){return fe(e,"input")&&e.type===t}}function _(t){return function(e){return(fe(e,"input")||fe(e,"button"))&&e.type===t}}function z(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&R(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function X(a){return F(function(o){return o=+o,F(function(e,t){var n,r=a([],e.length,o),i=r.length;while(i--)e[n=r[i]]&&(e[n]=!(t[n]=e[n]))})})}function U(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function V(e){var t,n=e?e.ownerDocument||e:ye;return n!=T&&9===n.nodeType&&n.documentElement&&(r=(T=n).documentElement,C=!ce.isXMLDoc(T),i=r.matches||r.webkitMatchesSelector||r.msMatchesSelector,r.msMatchesSelector&&ye!=T&&(t=T.defaultView)&&t.top!==t&&t.addEventListener("unload",M),le.getById=$(function(e){return r.appendChild(e).id=ce.expando,!T.getElementsByName||!T.getElementsByName(ce.expando).length}),le.disconnectedMatch=$(function(e){return i.call(e,"*")}),le.scope=$(function(){return T.querySelectorAll(":scope")}),le.cssHas=$(function(){try{return T.querySelector(":has(*,:jqfake)"),!1}catch(e){return!0}}),le.getById?(b.filter.ID=function(e){var t=e.replace(O,P);return function(e){return e.getAttribute("id")===t}},b.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&C){var n=t.getElementById(e);return n?[n]:[]}}):(b.filter.ID=function(e){var n=e.replace(O,P);return function(e){var t="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return t&&t.value===n}},b.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&C){var n,r,i,o=t.getElementById(e);if(o){if((n=o.getAttributeNode("id"))&&n.value===e)return[o];i=t.getElementsByName(e),r=0;while(o=i[r++])if((n=o.getAttributeNode("id"))&&n.value===e)return[o]}return[]}}),b.find.TAG=function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):t.querySelectorAll(e)},b.find.CLASS=function(e,t){if("undefined"!=typeof t.getElementsByClassName&&C)return t.getElementsByClassName(e)},d=[],$(function(e){var t;r.appendChild(e).innerHTML="<a id='"+S+"' href='' disabled='disabled'></a><select id='"+S+"-\r\\' disabled='disabled'><option selected=''></option></select>",e.querySelectorAll("[selected]").length||d.push("\\["+ge+"*(?:value|"+f+")"),e.querySelectorAll("[id~="+S+"-]").length||d.push("~="),e.querySelectorAll("a#"+S+"+*").length||d.push(".#.+[+~]"),e.querySelectorAll(":checked").length||d.push(":checked"),(t=T.createElement("input")).setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),r.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&d.push(":enabled",":disabled"),(t=T.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||d.push("\\["+ge+"*name"+ge+"*="+ge+"*(?:''|\"\")")}),le.cssHas||d.push(":has"),d=d.length&&new RegExp(d.join("|")),l=function(e,t){if(e===t)return a=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!le.sortDetached&&t.compareDocumentPosition(e)===n?e===T||e.ownerDocument==ye&&I.contains(ye,e)?-1:t===T||t.ownerDocument==ye&&I.contains(ye,t)?1:o?se.call(o,e)-se.call(o,t):0:4&n?-1:1)}),T}for(e in I.matches=function(e,t){return I(e,null,null,t)},I.matchesSelector=function(e,t){if(V(e),C&&!h[t+" "]&&(!d||!d.test(t)))try{var n=i.call(e,t);if(n||le.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){h(t,!0)}return 0<I(t,T,null,[e]).length},I.contains=function(e,t){return(e.ownerDocument||e)!=T&&V(e),ce.contains(e,t)},I.attr=function(e,t){(e.ownerDocument||e)!=T&&V(e);var n=b.attrHandle[t.toLowerCase()],r=n&&ue.call(b.attrHandle,t.toLowerCase())?n(e,t,!C):void 0;return void 0!==r?r:e.getAttribute(t)},I.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},ce.uniqueSort=function(e){var t,n=[],r=0,i=0;if(a=!le.sortStable,o=!le.sortStable&&ae.call(e,0),de.call(e,l),a){while(t=e[i++])t===e[i]&&(r=n.push(i));while(r--)he.call(e,n[r],1)}return o=null,e},ce.fn.uniqueSort=function(){return this.pushStack(ce.uniqueSort(ae.apply(this)))},(b=ce.expr={cacheLength:50,createPseudo:F,match:D,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(O,P),e[3]=(e[3]||e[4]||e[5]||"").replace(O,P),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||I.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&I.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return D.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&j.test(n)&&(t=Y(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(O,P).toLowerCase();return"*"===e?function(){return!0}:function(e){return fe(e,t)}},CLASS:function(e){var t=s[e+" "];return t||(t=new RegExp("(^|"+ge+")"+e+"("+ge+"|$)"))&&s(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(n,r,i){return function(e){var t=I.attr(e,n);return null==t?"!="===r:!r||(t+="","="===r?t===i:"!="===r?t!==i:"^="===r?i&&0===t.indexOf(i):"*="===r?i&&-1<t.indexOf(i):"$="===r?i&&t.slice(-i.length)===i:"~="===r?-1<(" "+t.replace(v," ")+" ").indexOf(i):"|="===r&&(t===i||t.slice(0,i.length+1)===i+"-"))}},CHILD:function(d,e,t,h,g){var v="nth"!==d.slice(0,3),y="last"!==d.slice(-4),m="of-type"===e;return 1===h&&0===g?function(e){return!!e.parentNode}:function(e,t,n){var r,i,o,a,s,u=v!==y?"nextSibling":"previousSibling",l=e.parentNode,c=m&&e.nodeName.toLowerCase(),f=!n&&!m,p=!1;if(l){if(v){while(u){o=e;while(o=o[u])if(m?fe(o,c):1===o.nodeType)return!1;s=u="only"===d&&!s&&"nextSibling"}return!0}if(s=[y?l.firstChild:l.lastChild],y&&f){p=(a=(r=(i=l[S]||(l[S]={}))[d]||[])[0]===E&&r[1])&&r[2],o=a&&l.childNodes[a];while(o=++a&&o&&o[u]||(p=a=0)||s.pop())if(1===o.nodeType&&++p&&o===e){i[d]=[E,a,p];break}}else if(f&&(p=a=(r=(i=e[S]||(e[S]={}))[d]||[])[0]===E&&r[1]),!1===p)while(o=++a&&o&&o[u]||(p=a=0)||s.pop())if((m?fe(o,c):1===o.nodeType)&&++p&&(f&&((i=o[S]||(o[S]={}))[d]=[E,p]),o===e))break;return(p-=g)===h||p%h==0&&0<=p/h}}},PSEUDO:function(e,o){var t,a=b.pseudos[e]||b.setFilters[e.toLowerCase()]||I.error("unsupported pseudo: "+e);return a[S]?a(o):1<a.length?(t=[e,e,"",o],b.setFilters.hasOwnProperty(e.toLowerCase())?F(function(e,t){var n,r=a(e,o),i=r.length;while(i--)e[n=se.call(e,r[i])]=!(t[n]=r[i])}):function(e){return a(e,0,t)}):a}},pseudos:{not:F(function(e){var r=[],i=[],s=ne(e.replace(ve,"$1"));return s[S]?F(function(e,t,n,r){var i,o=s(e,null,r,[]),a=e.length;while(a--)(i=o[a])&&(e[a]=!(t[a]=i))}):function(e,t,n){return r[0]=e,s(r,null,n,i),r[0]=null,!i.pop()}}),has:F(function(t){return function(e){return 0<I(t,e).length}}),contains:F(function(t){return t=t.replace(O,P),function(e){return-1<(e.textContent||ce.text(e)).indexOf(t)}}),lang:F(function(n){return A.test(n||"")||I.error("unsupported lang: "+n),n=n.replace(O,P).toLowerCase(),function(e){var t;do{if(t=C?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===n||0===t.indexOf(n+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=ie.location&&ie.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===r},focus:function(e){return e===function(){try{return T.activeElement}catch(e){}}()&&T.hasFocus()&&!!(e.type||e.href||~e.tabIndex)},enabled:z(!1),disabled:z(!0),checked:function(e){return fe(e,"input")&&!!e.checked||fe(e,"option")&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!b.pseudos.empty(e)},header:function(e){return q.test(e.nodeName)},input:function(e){return N.test(e.nodeName)},button:function(e){return fe(e,"input")&&"button"===e.type||fe(e,"button")},text:function(e){var t;return fe(e,"input")&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:X(function(){return[0]}),last:X(function(e,t){return[t-1]}),eq:X(function(e,t,n){return[n<0?n+t:n]}),even:X(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:X(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:X(function(e,t,n){var r;for(r=n<0?n+t:t<n?t:n;0<=--r;)e.push(r);return e}),gt:X(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=b.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})b.pseudos[e]=B(e);for(e in{submit:!0,reset:!0})b.pseudos[e]=_(e);function G(){}function Y(e,t){var n,r,i,o,a,s,u,l=c[e+" "];if(l)return t?0:l.slice(0);a=e,s=[],u=b.preFilter;while(a){for(o in n&&!(r=y.exec(a))||(r&&(a=a.slice(r[0].length)||a),s.push(i=[])),n=!1,(r=m.exec(a))&&(n=r.shift(),i.push({value:n,type:r[0].replace(ve," ")}),a=a.slice(n.length)),b.filter)!(r=D[o].exec(a))||u[o]&&!(r=u[o](r))||(n=r.shift(),i.push({value:n,type:o,matches:r}),a=a.slice(n.length));if(!n)break}return t?a.length:a?I.error(e):c(e,s).slice(0)}function Q(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function J(a,e,t){var s=e.dir,u=e.next,l=u||s,c=t&&"parentNode"===l,f=n++;return e.first?function(e,t,n){while(e=e[s])if(1===e.nodeType||c)return a(e,t,n);return!1}:function(e,t,n){var r,i,o=[E,f];if(n){while(e=e[s])if((1===e.nodeType||c)&&a(e,t,n))return!0}else while(e=e[s])if(1===e.nodeType||c)if(i=e[S]||(e[S]={}),u&&fe(e,u))e=e[s]||e;else{if((r=i[l])&&r[0]===E&&r[1]===f)return o[2]=r[2];if((i[l]=o)[2]=a(e,t,n))return!0}return!1}}function K(i){return 1<i.length?function(e,t,n){var r=i.length;while(r--)if(!i[r](e,t,n))return!1;return!0}:i[0]}function Z(e,t,n,r,i){for(var o,a=[],s=0,u=e.length,l=null!=t;s<u;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),l&&t.push(s)));return a}function ee(d,h,g,v,y,e){return v&&!v[S]&&(v=ee(v)),y&&!y[S]&&(y=ee(y,e)),F(function(e,t,n,r){var i,o,a,s,u=[],l=[],c=t.length,f=e||function(e,t,n){for(var r=0,i=t.length;r<i;r++)I(e,t[r],n);return n}(h||"*",n.nodeType?[n]:n,[]),p=!d||!e&&h?f:Z(f,u,d,n,r);if(g?g(p,s=y||(e?d:c||v)?[]:t,n,r):s=p,v){i=Z(s,l),v(i,[],n,r),o=i.length;while(o--)(a=i[o])&&(s[l[o]]=!(p[l[o]]=a))}if(e){if(y||d){if(y){i=[],o=s.length;while(o--)(a=s[o])&&i.push(p[o]=a);y(null,s=[],i,r)}o=s.length;while(o--)(a=s[o])&&-1<(i=y?se.call(e,a):u[o])&&(e[i]=!(t[i]=a))}}else s=Z(s===t?s.splice(c,s.length):s),y?y(null,t,s,r):k.apply(t,s)})}function te(e){for(var i,t,n,r=e.length,o=b.relative[e[0].type],a=o||b.relative[" "],s=o?1:0,u=J(function(e){return e===i},a,!0),l=J(function(e){return-1<se.call(i,e)},a,!0),c=[function(e,t,n){var r=!o&&(n||t!=w)||((i=t).nodeType?u(e,t,n):l(e,t,n));return i=null,r}];s<r;s++)if(t=b.relative[e[s].type])c=[J(K(c),t)];else{if((t=b.filter[e[s].type].apply(null,e[s].matches))[S]){for(n=++s;n<r;n++)if(b.relative[e[n].type])break;return ee(1<s&&K(c),1<s&&Q(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(ve,"$1"),t,s<n&&te(e.slice(s,n)),n<r&&te(e=e.slice(n)),n<r&&Q(e))}c.push(t)}return K(c)}function ne(e,t){var n,v,y,m,x,r,i=[],o=[],a=u[e+" "];if(!a){t||(t=Y(e)),n=t.length;while(n--)(a=te(t[n]))[S]?i.push(a):o.push(a);(a=u(e,(v=o,m=0<(y=i).length,x=0<v.length,r=function(e,t,n,r,i){var o,a,s,u=0,l="0",c=e&&[],f=[],p=w,d=e||x&&b.find.TAG("*",i),h=E+=null==p?1:Math.random()||.1,g=d.length;for(i&&(w=t==T||t||i);l!==g&&null!=(o=d[l]);l++){if(x&&o){a=0,t||o.ownerDocument==T||(V(o),n=!C);while(s=v[a++])if(s(o,t||T,n)){k.call(r,o);break}i&&(E=h)}m&&((o=!s&&o)&&u--,e&&c.push(o))}if(u+=l,m&&l!==u){a=0;while(s=y[a++])s(c,f,t,n);if(e){if(0<u)while(l--)c[l]||f[l]||(f[l]=pe.call(r));f=Z(f)}k.apply(r,f),i&&!e&&0<f.length&&1<u+y.length&&ce.uniqueSort(r)}return i&&(E=h,w=p),c},m?F(r):r))).selector=e}return a}function re(e,t,n,r){var i,o,a,s,u,l="function"==typeof e&&e,c=!r&&Y(e=l.selector||e);if(n=n||[],1===c.length){if(2<(o=c[0]=c[0].slice(0)).length&&"ID"===(a=o[0]).type&&9===t.nodeType&&C&&b.relative[o[1].type]){if(!(t=(b.find.ID(a.matches[0].replace(O,P),t)||[])[0]))return n;l&&(t=t.parentNode),e=e.slice(o.shift().value.length)}i=D.needsContext.test(e)?0:o.length;while(i--){if(a=o[i],b.relative[s=a.type])break;if((u=b.find[s])&&(r=u(a.matches[0].replace(O,P),H.test(o[0].type)&&U(t.parentNode)||t))){if(o.splice(i,1),!(e=r.length&&Q(o)))return k.apply(n,r),n;break}}}return(l||ne(e,c))(r,t,!C,n,!t||H.test(e)&&U(t.parentNode)||t),n}G.prototype=b.filters=b.pseudos,b.setFilters=new G,le.sortStable=S.split("").sort(l).join("")===S,V(),le.sortDetached=$(function(e){return 1&e.compareDocumentPosition(T.createElement("fieldset"))}),ce.find=I,ce.expr[":"]=ce.expr.pseudos,ce.unique=ce.uniqueSort,I.compile=ne,I.select=re,I.setDocument=V,I.tokenize=Y,I.escape=ce.escapeSelector,I.getText=ce.text,I.isXML=ce.isXMLDoc,I.selectors=ce.expr,I.support=ce.support,I.uniqueSort=ce.uniqueSort}();var d=function(e,t,n){var r=[],i=void 0!==n;while((e=e[t])&&9!==e.nodeType)if(1===e.nodeType){if(i&&ce(e).is(n))break;r.push(e)}return r},h=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},b=ce.expr.match.needsContext,w=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function T(e,n,r){return v(n)?ce.grep(e,function(e,t){return!!n.call(e,t,e)!==r}):n.nodeType?ce.grep(e,function(e){return e===n!==r}):"string"!=typeof n?ce.grep(e,function(e){return-1<se.call(n,e)!==r}):ce.filter(n,e,r)}ce.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?ce.find.matchesSelector(r,e)?[r]:[]:ce.find.matches(e,ce.grep(t,function(e){return 1===e.nodeType}))},ce.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!=typeof e)return this.pushStack(ce(e).filter(function(){for(t=0;t<r;t++)if(ce.contains(i[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)ce.find(e,i[t],n);return 1<r?ce.uniqueSort(n):n},filter:function(e){return this.pushStack(T(this,e||[],!1))},not:function(e){return this.pushStack(T(this,e||[],!0))},is:function(e){return!!T(this,"string"==typeof e&&b.test(e)?ce(e):e||[],!1).length}});var k,S=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(ce.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||k,"string"==typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&3<=e.length?[null,e,null]:S.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof ce?t[0]:t,ce.merge(this,ce.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:C,!0)),w.test(r[1])&&ce.isPlainObject(t))for(r in t)v(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(i=C.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):v(e)?void 0!==n.ready?n.ready(e):e(ce):ce.makeArray(e,this)}).prototype=ce.fn,k=ce(C);var E=/^(?:parents|prev(?:Until|All))/,j={children:!0,contents:!0,next:!0,prev:!0};function A(e,t){while((e=e[t])&&1!==e.nodeType);return e}ce.fn.extend({has:function(e){var t=ce(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(ce.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,i=this.length,o=[],a="string"!=typeof e&&ce(e);if(!b.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?-1<a.index(n):1===n.nodeType&&ce.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(1<o.length?ce.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?se.call(ce(e),this[0]):se.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(ce.uniqueSort(ce.merge(this.get(),ce(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),ce.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return d(e,"parentNode")},parentsUntil:function(e,t,n){return d(e,"parentNode",n)},next:function(e){return A(e,"nextSibling")},prev:function(e){return A(e,"previousSibling")},nextAll:function(e){return d(e,"nextSibling")},prevAll:function(e){return d(e,"previousSibling")},nextUntil:function(e,t,n){return d(e,"nextSibling",n)},prevUntil:function(e,t,n){return d(e,"previousSibling",n)},siblings:function(e){return h((e.parentNode||{}).firstChild,e)},children:function(e){return h(e.firstChild)},contents:function(e){return null!=e.contentDocument&&r(e.contentDocument)?e.contentDocument:(fe(e,"template")&&(e=e.content||e),ce.merge([],e.childNodes))}},function(r,i){ce.fn[r]=function(e,t){var n=ce.map(this,i,e);return"Until"!==r.slice(-5)&&(t=e),t&&"string"==typeof t&&(n=ce.filter(t,n)),1<this.length&&(j[r]||ce.uniqueSort(n),E.test(r)&&n.reverse()),this.pushStack(n)}});var D=/[^\x20\t\r\n\f]+/g;function N(e){return e}function q(e){throw e}function L(e,t,n,r){var i;try{e&&v(i=e.promise)?i.call(e).done(t).fail(n):e&&v(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}ce.Callbacks=function(r){var e,n;r="string"==typeof r?(e=r,n={},ce.each(e.match(D)||[],function(e,t){n[t]=!0}),n):ce.extend({},r);var i,t,o,a,s=[],u=[],l=-1,c=function(){for(a=a||r.once,o=i=!0;u.length;l=-1){t=u.shift();while(++l<s.length)!1===s[l].apply(t[0],t[1])&&r.stopOnFalse&&(l=s.length,t=!1)}r.memory||(t=!1),i=!1,a&&(s=t?[]:"")},f={add:function(){return s&&(t&&!i&&(l=s.length-1,u.push(t)),function n(e){ce.each(e,function(e,t){v(t)?r.unique&&f.has(t)||s.push(t):t&&t.length&&"string"!==x(t)&&n(t)})}(arguments),t&&!i&&c()),this},remove:function(){return ce.each(arguments,function(e,t){var n;while(-1<(n=ce.inArray(t,s,n)))s.splice(n,1),n<=l&&l--}),this},has:function(e){return e?-1<ce.inArray(e,s):0<s.length},empty:function(){return s&&(s=[]),this},disable:function(){return a=u=[],s=t="",this},disabled:function(){return!s},lock:function(){return a=u=[],t||i||(s=t=""),this},locked:function(){return!!a},fireWith:function(e,t){return a||(t=[e,(t=t||[]).slice?t.slice():t],u.push(t),i||c()),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!o}};return f},ce.extend({Deferred:function(e){var o=[["notify","progress",ce.Callbacks("memory"),ce.Callbacks("memory"),2],["resolve","done",ce.Callbacks("once memory"),ce.Callbacks("once memory"),0,"resolved"],["reject","fail",ce.Callbacks("once memory"),ce.Callbacks("once memory"),1,"rejected"]],i="pending",a={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},"catch":function(e){return a.then(null,e)},pipe:function(){var i=arguments;return ce.Deferred(function(r){ce.each(o,function(e,t){var n=v(i[t[4]])&&i[t[4]];s[t[1]](function(){var e=n&&n.apply(this,arguments);e&&v(e.promise)?e.promise().progress(r.notify).done(r.resolve).fail(r.reject):r[t[0]+"With"](this,n?[e]:arguments)})}),i=null}).promise()},then:function(t,n,r){var u=0;function l(i,o,a,s){return function(){var n=this,r=arguments,e=function(){var e,t;if(!(i<u)){if((e=a.apply(n,r))===o.promise())throw new TypeError("Thenable self-resolution");t=e&&("object"==typeof e||"function"==typeof e)&&e.then,v(t)?s?t.call(e,l(u,o,N,s),l(u,o,q,s)):(u++,t.call(e,l(u,o,N,s),l(u,o,q,s),l(u,o,N,o.notifyWith))):(a!==N&&(n=void 0,r=[e]),(s||o.resolveWith)(n,r))}},t=s?e:function(){try{e()}catch(e){ce.Deferred.exceptionHook&&ce.Deferred.exceptionHook(e,t.error),u<=i+1&&(a!==q&&(n=void 0,r=[e]),o.rejectWith(n,r))}};i?t():(ce.Deferred.getErrorHook?t.error=ce.Deferred.getErrorHook():ce.Deferred.getStackHook&&(t.error=ce.Deferred.getStackHook()),ie.setTimeout(t))}}return ce.Deferred(function(e){o[0][3].add(l(0,e,v(r)?r:N,e.notifyWith)),o[1][3].add(l(0,e,v(t)?t:N)),o[2][3].add(l(0,e,v(n)?n:q))}).promise()},promise:function(e){return null!=e?ce.extend(e,a):a}},s={};return ce.each(o,function(e,t){var n=t[2],r=t[5];a[t[1]]=n.add,r&&n.add(function(){i=r},o[3-e][2].disable,o[3-e][3].disable,o[0][2].lock,o[0][3].lock),n.add(t[3].fire),s[t[0]]=function(){return s[t[0]+"With"](this===s?void 0:this,arguments),this},s[t[0]+"With"]=n.fireWith}),a.promise(s),e&&e.call(s,s),s},when:function(e){var n=arguments.length,t=n,r=Array(t),i=ae.call(arguments),o=ce.Deferred(),a=function(t){return function(e){r[t]=this,i[t]=1<arguments.length?ae.call(arguments):e,--n||o.resolveWith(r,i)}};if(n<=1&&(L(e,o.done(a(t)).resolve,o.reject,!n),"pending"===o.state()||v(i[t]&&i[t].then)))return o.then();while(t--)L(i[t],a(t),o.reject);return o.promise()}});var H=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;ce.Deferred.exceptionHook=function(e,t){ie.console&&ie.console.warn&&e&&H.test(e.name)&&ie.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},ce.readyException=function(e){ie.setTimeout(function(){throw e})};var O=ce.Deferred();function P(){C.removeEventListener("DOMContentLoaded",P),ie.removeEventListener("load",P),ce.ready()}ce.fn.ready=function(e){return O.then(e)["catch"](function(e){ce.readyException(e)}),this},ce.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--ce.readyWait:ce.isReady)||(ce.isReady=!0)!==e&&0<--ce.readyWait||O.resolveWith(C,[ce])}}),ce.ready.then=O.then,"complete"===C.readyState||"loading"!==C.readyState&&!C.documentElement.doScroll?ie.setTimeout(ce.ready):(C.addEventListener("DOMContentLoaded",P),ie.addEventListener("load",P));var M=function(e,t,n,r,i,o,a){var s=0,u=e.length,l=null==n;if("object"===x(n))for(s in i=!0,n)M(e,t,s,n[s],!0,o,a);else if(void 0!==r&&(i=!0,v(r)||(a=!0),l&&(a?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(ce(e),n)})),t))for(;s<u;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return i?e:l?t.call(e):u?t(e[0],n):o},R=/^-ms-/,I=/-([a-z])/g;function W(e,t){return t.toUpperCase()}function F(e){return e.replace(R,"ms-").replace(I,W)}var $=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function B(){this.expando=ce.expando+B.uid++}B.uid=1,B.prototype={cache:function(e){var t=e[this.expando];return t||(t={},$(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[F(t)]=n;else for(r in t)i[F(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][F(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(F):(t=F(t))in r?[t]:t.match(D)||[]).length;while(n--)delete r[t[n]]}(void 0===t||ce.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!ce.isEmptyObject(t)}};var _=new B,z=new B,X=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,U=/[A-Z]/g;function V(e,t,n){var r,i;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(U,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n="true"===(i=n)||"false"!==i&&("null"===i?null:i===+i+""?+i:X.test(i)?JSON.parse(i):i)}catch(e){}z.set(e,t,n)}else n=void 0;return n}ce.extend({hasData:function(e){return z.hasData(e)||_.hasData(e)},data:function(e,t,n){return z.access(e,t,n)},removeData:function(e,t){z.remove(e,t)},_data:function(e,t,n){return _.access(e,t,n)},_removeData:function(e,t){_.remove(e,t)}}),ce.fn.extend({data:function(n,e){var t,r,i,o=this[0],a=o&&o.attributes;if(void 0===n){if(this.length&&(i=z.get(o),1===o.nodeType&&!_.get(o,"hasDataAttrs"))){t=a.length;while(t--)a[t]&&0===(r=a[t].name).indexOf("data-")&&(r=F(r.slice(5)),V(o,r,i[r]));_.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof n?this.each(function(){z.set(this,n)}):M(this,function(e){var t;if(o&&void 0===e)return void 0!==(t=z.get(o,n))?t:void 0!==(t=V(o,n))?t:void 0;this.each(function(){z.set(this,n,e)})},null,e,1<arguments.length,null,!0)},removeData:function(e){return this.each(function(){z.remove(this,e)})}}),ce.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=_.get(e,t),n&&(!r||Array.isArray(n)?r=_.access(e,t,ce.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=ce.queue(e,t),r=n.length,i=n.shift(),o=ce._queueHooks(e,t);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,function(){ce.dequeue(e,t)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return _.get(e,n)||_.access(e,n,{empty:ce.Callbacks("once memory").add(function(){_.remove(e,[t+"queue",n])})})}}),ce.fn.extend({queue:function(t,n){var e=2;return"string"!=typeof t&&(n=t,t="fx",e--),arguments.length<e?ce.queue(this[0],t):void 0===n?this:this.each(function(){var e=ce.queue(this,t,n);ce._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&ce.dequeue(this,t)})},dequeue:function(e){return this.each(function(){ce.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=ce.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};"string"!=typeof e&&(t=e,e=void 0),e=e||"fx";while(a--)(n=_.get(o[a],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var G=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Y=new RegExp("^(?:([+-])=|)("+G+")([a-z%]*)$","i"),Q=["Top","Right","Bottom","Left"],J=C.documentElement,K=function(e){return ce.contains(e.ownerDocument,e)},Z={composed:!0};J.getRootNode&&(K=function(e){return ce.contains(e.ownerDocument,e)||e.getRootNode(Z)===e.ownerDocument});var ee=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&K(e)&&"none"===ce.css(e,"display")};function te(e,t,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return ce.css(e,t,"")},u=s(),l=n&&n[3]||(ce.cssNumber[t]?"":"px"),c=e.nodeType&&(ce.cssNumber[t]||"px"!==l&&+u)&&Y.exec(ce.css(e,t));if(c&&c[3]!==l){u/=2,l=l||c[3],c=+u||1;while(a--)ce.style(e,t,c+l),(1-o)*(1-(o=s()/u||.5))<=0&&(a=0),c/=o;c*=2,ce.style(e,t,c+l),n=n||[]}return n&&(c=+c||+u||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=l,r.start=c,r.end=i)),i}var ne={};function re(e,t){for(var n,r,i,o,a,s,u,l=[],c=0,f=e.length;c<f;c++)(r=e[c]).style&&(n=r.style.display,t?("none"===n&&(l[c]=_.get(r,"display")||null,l[c]||(r.style.display="")),""===r.style.display&&ee(r)&&(l[c]=(u=a=o=void 0,a=(i=r).ownerDocument,s=i.nodeName,(u=ne[s])||(o=a.body.appendChild(a.createElement(s)),u=ce.css(o,"display"),o.parentNode.removeChild(o),"none"===u&&(u="block"),ne[s]=u)))):"none"!==n&&(l[c]="none",_.set(r,"display",n)));for(c=0;c<f;c++)null!=l[c]&&(e[c].style.display=l[c]);return e}ce.fn.extend({show:function(){return re(this,!0)},hide:function(){return re(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ee(this)?ce(this).show():ce(this).hide()})}});var xe,be,we=/^(?:checkbox|radio)$/i,Te=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Ce=/^$|^module$|\/(?:java|ecma)script/i;xe=C.createDocumentFragment().appendChild(C.createElement("div")),(be=C.createElement("input")).setAttribute("type","radio"),be.setAttribute("checked","checked"),be.setAttribute("name","t"),xe.appendChild(be),le.checkClone=xe.cloneNode(!0).cloneNode(!0).lastChild.checked,xe.innerHTML="<textarea>x</textarea>",le.noCloneChecked=!!xe.cloneNode(!0).lastChild.defaultValue,xe.innerHTML="<option></option>",le.option=!!xe.lastChild;var ke={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function Se(e,t){var n;return n="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&fe(e,t)?ce.merge([e],n):n}function Ee(e,t){for(var n=0,r=e.length;n<r;n++)_.set(e[n],"globalEval",!t||_.get(t[n],"globalEval"))}ke.tbody=ke.tfoot=ke.colgroup=ke.caption=ke.thead,ke.th=ke.td,le.option||(ke.optgroup=ke.option=[1,"<select multiple='multiple'>","</select>"]);var je=/<|&#?\w+;/;function Ae(e,t,n,r,i){for(var o,a,s,u,l,c,f=t.createDocumentFragment(),p=[],d=0,h=e.length;d<h;d++)if((o=e[d])||0===o)if("object"===x(o))ce.merge(p,o.nodeType?[o]:o);else if(je.test(o)){a=a||f.appendChild(t.createElement("div")),s=(Te.exec(o)||["",""])[1].toLowerCase(),u=ke[s]||ke._default,a.innerHTML=u[1]+ce.htmlPrefilter(o)+u[2],c=u[0];while(c--)a=a.lastChild;ce.merge(p,a.childNodes),(a=f.firstChild).textContent=""}else p.push(t.createTextNode(o));f.textContent="",d=0;while(o=p[d++])if(r&&-1<ce.inArray(o,r))i&&i.push(o);else if(l=K(o),a=Se(f.appendChild(o),"script"),l&&Ee(a),n){c=0;while(o=a[c++])Ce.test(o.type||"")&&n.push(o)}return f}var De=/^([^.]*)(?:\.(.+)|)/;function Ne(){return!0}function qe(){return!1}function Le(e,t,n,r,i,o){var a,s;if("object"==typeof t){for(s in"string"!=typeof n&&(r=r||n,n=void 0),t)Le(e,s,n,r,t[s],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=qe;else if(!i)return e;return 1===o&&(a=i,(i=function(e){return ce().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=ce.guid++)),e.each(function(){ce.event.add(this,t,i,r,n)})}function He(e,r,t){t?(_.set(e,r,!1),ce.event.add(e,r,{namespace:!1,handler:function(e){var t,n=_.get(this,r);if(1&e.isTrigger&&this[r]){if(n)(ce.event.special[r]||{}).delegateType&&e.stopPropagation();else if(n=ae.call(arguments),_.set(this,r,n),this[r](),t=_.get(this,r),_.set(this,r,!1),n!==t)return e.stopImmediatePropagation(),e.preventDefault(),t}else n&&(_.set(this,r,ce.event.trigger(n[0],n.slice(1),this)),e.stopPropagation(),e.isImmediatePropagationStopped=Ne)}})):void 0===_.get(e,r)&&ce.event.add(e,r,Ne)}ce.event={global:{},add:function(t,e,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=_.get(t);if($(t)){n.handler&&(n=(o=n).handler,i=o.selector),i&&ce.find.matchesSelector(J,i),n.guid||(n.guid=ce.guid++),(u=v.events)||(u=v.events=Object.create(null)),(a=v.handle)||(a=v.handle=function(e){return"undefined"!=typeof ce&&ce.event.triggered!==e.type?ce.event.dispatch.apply(t,arguments):void 0}),l=(e=(e||"").match(D)||[""]).length;while(l--)d=g=(s=De.exec(e[l])||[])[1],h=(s[2]||"").split(".").sort(),d&&(f=ce.event.special[d]||{},d=(i?f.delegateType:f.bindType)||d,f=ce.event.special[d]||{},c=ce.extend({type:d,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&ce.expr.match.needsContext.test(i),namespace:h.join(".")},o),(p=u[d])||((p=u[d]=[]).delegateCount=0,f.setup&&!1!==f.setup.call(t,r,h,a)||t.addEventListener&&t.addEventListener(d,a)),f.add&&(f.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,c):p.push(c),ce.event.global[d]=!0)}},remove:function(e,t,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=_.hasData(e)&&_.get(e);if(v&&(u=v.events)){l=(t=(t||"").match(D)||[""]).length;while(l--)if(d=g=(s=De.exec(t[l])||[])[1],h=(s[2]||"").split(".").sort(),d){f=ce.event.special[d]||{},p=u[d=(r?f.delegateType:f.bindType)||d]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=p.length;while(o--)c=p[o],!i&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,f.remove&&f.remove.call(e,c));a&&!p.length&&(f.teardown&&!1!==f.teardown.call(e,h,v.handle)||ce.removeEvent(e,d,v.handle),delete u[d])}else for(d in u)ce.event.remove(e,d+t[l],n,r,!0);ce.isEmptyObject(u)&&_.remove(e,"handle events")}},dispatch:function(e){var t,n,r,i,o,a,s=new Array(arguments.length),u=ce.event.fix(e),l=(_.get(this,"events")||Object.create(null))[u.type]||[],c=ce.event.special[u.type]||{};for(s[0]=u,t=1;t<arguments.length;t++)s[t]=arguments[t];if(u.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,u)){a=ce.event.handlers.call(this,u,l),t=0;while((i=a[t++])&&!u.isPropagationStopped()){u.currentTarget=i.elem,n=0;while((o=i.handlers[n++])&&!u.isImmediatePropagationStopped())u.rnamespace&&!1!==o.namespace&&!u.rnamespace.test(o.namespace)||(u.handleObj=o,u.data=o.data,void 0!==(r=((ce.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,s))&&!1===(u.result=r)&&(u.preventDefault(),u.stopPropagation()))}return c.postDispatch&&c.postDispatch.call(this,u),u.result}},handlers:function(e,t){var n,r,i,o,a,s=[],u=t.delegateCount,l=e.target;if(u&&l.nodeType&&!("click"===e.type&&1<=e.button))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==e.type||!0!==l.disabled)){for(o=[],a={},n=0;n<u;n++)void 0===a[i=(r=t[n]).selector+" "]&&(a[i]=r.needsContext?-1<ce(i,this).index(l):ce.find(i,this,null,[l]).length),a[i]&&o.push(r);o.length&&s.push({elem:l,handlers:o})}return l=this,u<t.length&&s.push({elem:l,handlers:t.slice(u)}),s},addProp:function(t,e){Object.defineProperty(ce.Event.prototype,t,{enumerable:!0,configurable:!0,get:v(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(e){return e[ce.expando]?e:new ce.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return we.test(t.type)&&t.click&&fe(t,"input")&&He(t,"click",!0),!1},trigger:function(e){var t=this||e;return we.test(t.type)&&t.click&&fe(t,"input")&&He(t,"click"),!0},_default:function(e){var t=e.target;return we.test(t.type)&&t.click&&fe(t,"input")&&_.get(t,"click")||fe(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},ce.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},ce.Event=function(e,t){if(!(this instanceof ce.Event))return new ce.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Ne:qe,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&ce.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[ce.expando]=!0},ce.Event.prototype={constructor:ce.Event,isDefaultPrevented:qe,isPropagationStopped:qe,isImmediatePropagationStopped:qe,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Ne,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Ne,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Ne,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},ce.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},ce.event.addProp),ce.each({focus:"focusin",blur:"focusout"},function(r,i){function o(e){if(C.documentMode){var t=_.get(this,"handle"),n=ce.event.fix(e);n.type="focusin"===e.type?"focus":"blur",n.isSimulated=!0,t(e),n.target===n.currentTarget&&t(n)}else ce.event.simulate(i,e.target,ce.event.fix(e))}ce.event.special[r]={setup:function(){var e;if(He(this,r,!0),!C.documentMode)return!1;(e=_.get(this,i))||this.addEventListener(i,o),_.set(this,i,(e||0)+1)},trigger:function(){return He(this,r),!0},teardown:function(){var e;if(!C.documentMode)return!1;(e=_.get(this,i)-1)?_.set(this,i,e):(this.removeEventListener(i,o),_.remove(this,i))},_default:function(e){return _.get(e.target,r)},delegateType:i},ce.event.special[i]={setup:function(){var e=this.ownerDocument||this.document||this,t=C.documentMode?this:e,n=_.get(t,i);n||(C.documentMode?this.addEventListener(i,o):e.addEventListener(r,o,!0)),_.set(t,i,(n||0)+1)},teardown:function(){var e=this.ownerDocument||this.document||this,t=C.documentMode?this:e,n=_.get(t,i)-1;n?_.set(t,i,n):(C.documentMode?this.removeEventListener(i,o):e.removeEventListener(r,o,!0),_.remove(t,i))}}}),ce.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,i){ce.event.special[e]={delegateType:i,bindType:i,handle:function(e){var t,n=e.relatedTarget,r=e.handleObj;return n&&(n===this||ce.contains(this,n))||(e.type=r.origType,t=r.handler.apply(this,arguments),e.type=i),t}}}),ce.fn.extend({on:function(e,t,n,r){return Le(this,e,t,n,r)},one:function(e,t,n,r){return Le(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,ce(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=qe),this.each(function(){ce.event.remove(this,e,n,t)})}});var Oe=/<script|<style|<link/i,Pe=/checked\s*(?:[^=]|=\s*.checked.)/i,Me=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Re(e,t){return fe(e,"table")&&fe(11!==t.nodeType?t:t.firstChild,"tr")&&ce(e).children("tbody")[0]||e}function Ie(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function We(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Fe(e,t){var n,r,i,o,a,s;if(1===t.nodeType){if(_.hasData(e)&&(s=_.get(e).events))for(i in _.remove(t,"handle events"),s)for(n=0,r=s[i].length;n<r;n++)ce.event.add(t,i,s[i][n]);z.hasData(e)&&(o=z.access(e),a=ce.extend({},o),z.set(t,a))}}function $e(n,r,i,o){r=g(r);var e,t,a,s,u,l,c=0,f=n.length,p=f-1,d=r[0],h=v(d);if(h||1<f&&"string"==typeof d&&!le.checkClone&&Pe.test(d))return n.each(function(e){var t=n.eq(e);h&&(r[0]=d.call(this,e,t.html())),$e(t,r,i,o)});if(f&&(t=(e=Ae(r,n[0].ownerDocument,!1,n,o)).firstChild,1===e.childNodes.length&&(e=t),t||o)){for(s=(a=ce.map(Se(e,"script"),Ie)).length;c<f;c++)u=e,c!==p&&(u=ce.clone(u,!0,!0),s&&ce.merge(a,Se(u,"script"))),i.call(n[c],u,c);if(s)for(l=a[a.length-1].ownerDocument,ce.map(a,We),c=0;c<s;c++)u=a[c],Ce.test(u.type||"")&&!_.access(u,"globalEval")&&ce.contains(l,u)&&(u.src&&"module"!==(u.type||"").toLowerCase()?ce._evalUrl&&!u.noModule&&ce._evalUrl(u.src,{nonce:u.nonce||u.getAttribute("nonce")},l):m(u.textContent.replace(Me,""),u,l))}return n}function Be(e,t,n){for(var r,i=t?ce.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||ce.cleanData(Se(r)),r.parentNode&&(n&&K(r)&&Ee(Se(r,"script")),r.parentNode.removeChild(r));return e}ce.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var r,i,o,a,s,u,l,c=e.cloneNode(!0),f=K(e);if(!(le.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||ce.isXMLDoc(e)))for(a=Se(c),r=0,i=(o=Se(e)).length;r<i;r++)s=o[r],u=a[r],void 0,"input"===(l=u.nodeName.toLowerCase())&&we.test(s.type)?u.checked=s.checked:"input"!==l&&"textarea"!==l||(u.defaultValue=s.defaultValue);if(t)if(n)for(o=o||Se(e),a=a||Se(c),r=0,i=o.length;r<i;r++)Fe(o[r],a[r]);else Fe(e,c);return 0<(a=Se(c,"script")).length&&Ee(a,!f&&Se(e,"script")),c},cleanData:function(e){for(var t,n,r,i=ce.event.special,o=0;void 0!==(n=e[o]);o++)if($(n)){if(t=n[_.expando]){if(t.events)for(r in t.events)i[r]?ce.event.remove(n,r):ce.removeEvent(n,r,t.handle);n[_.expando]=void 0}n[z.expando]&&(n[z.expando]=void 0)}}}),ce.fn.extend({detach:function(e){return Be(this,e,!0)},remove:function(e){return Be(this,e)},text:function(e){return M(this,function(e){return void 0===e?ce.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return $e(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Re(this,e).appendChild(e)})},prepend:function(){return $e(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Re(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return $e(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return $e(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(ce.cleanData(Se(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return ce.clone(this,e,t)})},html:function(e){return M(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Oe.test(e)&&!ke[(Te.exec(e)||["",""])[1].toLowerCase()]){e=ce.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(ce.cleanData(Se(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var n=[];return $e(this,arguments,function(e){var t=this.parentNode;ce.inArray(this,n)<0&&(ce.cleanData(Se(this)),t&&t.replaceChild(e,this))},n)}}),ce.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,a){ce.fn[e]=function(e){for(var t,n=[],r=ce(e),i=r.length-1,o=0;o<=i;o++)t=o===i?this:this.clone(!0),ce(r[o])[a](t),s.apply(n,t.get());return this.pushStack(n)}});var _e=new RegExp("^("+G+")(?!px)[a-z%]+$","i"),ze=/^--/,Xe=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=ie),t.getComputedStyle(e)},Ue=function(e,t,n){var r,i,o={};for(i in t)o[i]=e.style[i],e.style[i]=t[i];for(i in r=n.call(e),t)e.style[i]=o[i];return r},Ve=new RegExp(Q.join("|"),"i");function Ge(e,t,n){var r,i,o,a,s=ze.test(t),u=e.style;return(n=n||Xe(e))&&(a=n.getPropertyValue(t)||n[t],s&&a&&(a=a.replace(ve,"$1")||void 0),""!==a||K(e)||(a=ce.style(e,t)),!le.pixelBoxStyles()&&_e.test(a)&&Ve.test(t)&&(r=u.width,i=u.minWidth,o=u.maxWidth,u.minWidth=u.maxWidth=u.width=a,a=n.width,u.width=r,u.minWidth=i,u.maxWidth=o)),void 0!==a?a+"":a}function Ye(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(l){u.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",l.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",J.appendChild(u).appendChild(l);var e=ie.getComputedStyle(l);n="1%"!==e.top,s=12===t(e.marginLeft),l.style.right="60%",o=36===t(e.right),r=36===t(e.width),l.style.position="absolute",i=12===t(l.offsetWidth/3),J.removeChild(u),l=null}}function t(e){return Math.round(parseFloat(e))}var n,r,i,o,a,s,u=C.createElement("div"),l=C.createElement("div");l.style&&(l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",le.clearCloneStyle="content-box"===l.style.backgroundClip,ce.extend(le,{boxSizingReliable:function(){return e(),r},pixelBoxStyles:function(){return e(),o},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),s},scrollboxSize:function(){return e(),i},reliableTrDimensions:function(){var e,t,n,r;return null==a&&(e=C.createElement("table"),t=C.createElement("tr"),n=C.createElement("div"),e.style.cssText="position:absolute;left:-11111px;border-collapse:separate",t.style.cssText="box-sizing:content-box;border:1px solid",t.style.height="1px",n.style.height="9px",n.style.display="block",J.appendChild(e).appendChild(t).appendChild(n),r=ie.getComputedStyle(t),a=parseInt(r.height,10)+parseInt(r.borderTopWidth,10)+parseInt(r.borderBottomWidth,10)===t.offsetHeight,J.removeChild(e)),a}}))}();var Qe=["Webkit","Moz","ms"],Je=C.createElement("div").style,Ke={};function Ze(e){var t=ce.cssProps[e]||Ke[e];return t||(e in Je?e:Ke[e]=function(e){var t=e[0].toUpperCase()+e.slice(1),n=Qe.length;while(n--)if((e=Qe[n]+t)in Je)return e}(e)||e)}var et=/^(none|table(?!-c[ea]).+)/,tt={position:"absolute",visibility:"hidden",display:"block"},nt={letterSpacing:"0",fontWeight:"400"};function rt(e,t,n){var r=Y.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function it(e,t,n,r,i,o){var a="width"===t?1:0,s=0,u=0,l=0;if(n===(r?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(l+=ce.css(e,n+Q[a],!0,i)),r?("content"===n&&(u-=ce.css(e,"padding"+Q[a],!0,i)),"margin"!==n&&(u-=ce.css(e,"border"+Q[a]+"Width",!0,i))):(u+=ce.css(e,"padding"+Q[a],!0,i),"padding"!==n?u+=ce.css(e,"border"+Q[a]+"Width",!0,i):s+=ce.css(e,"border"+Q[a]+"Width",!0,i));return!r&&0<=o&&(u+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-u-s-.5))||0),u+l}function ot(e,t,n){var r=Xe(e),i=(!le.boxSizingReliable()||n)&&"border-box"===ce.css(e,"boxSizing",!1,r),o=i,a=Ge(e,t,r),s="offset"+t[0].toUpperCase()+t.slice(1);if(_e.test(a)){if(!n)return a;a="auto"}return(!le.boxSizingReliable()&&i||!le.reliableTrDimensions()&&fe(e,"tr")||"auto"===a||!parseFloat(a)&&"inline"===ce.css(e,"display",!1,r))&&e.getClientRects().length&&(i="border-box"===ce.css(e,"boxSizing",!1,r),(o=s in e)&&(a=e[s])),(a=parseFloat(a)||0)+it(e,t,n||(i?"border":"content"),o,r,a)+"px"}function at(e,t,n,r,i){return new at.prototype.init(e,t,n,r,i)}ce.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Ge(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=F(t),u=ze.test(t),l=e.style;if(u||(t=Ze(s)),a=ce.cssHooks[t]||ce.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(e,!1,r))?i:l[t];"string"===(o=typeof n)&&(i=Y.exec(n))&&i[1]&&(n=te(e,t,i),o="number"),null!=n&&n==n&&("number"!==o||u||(n+=i&&i[3]||(ce.cssNumber[s]?"":"px")),le.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,r))||(u?l.setProperty(t,n):l[t]=n))}},css:function(e,t,n,r){var i,o,a,s=F(t);return ze.test(t)||(t=Ze(s)),(a=ce.cssHooks[t]||ce.cssHooks[s])&&"get"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=Ge(e,t,r)),"normal"===i&&t in nt&&(i=nt[t]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),ce.each(["height","width"],function(e,u){ce.cssHooks[u]={get:function(e,t,n){if(t)return!et.test(ce.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?ot(e,u,n):Ue(e,tt,function(){return ot(e,u,n)})},set:function(e,t,n){var r,i=Xe(e),o=!le.scrollboxSize()&&"absolute"===i.position,a=(o||n)&&"border-box"===ce.css(e,"boxSizing",!1,i),s=n?it(e,u,n,a,i):0;return a&&o&&(s-=Math.ceil(e["offset"+u[0].toUpperCase()+u.slice(1)]-parseFloat(i[u])-it(e,u,"border",!1,i)-.5)),s&&(r=Y.exec(t))&&"px"!==(r[3]||"px")&&(e.style[u]=t,t=ce.css(e,u)),rt(0,t,s)}}}),ce.cssHooks.marginLeft=Ye(le.reliableMarginLeft,function(e,t){if(t)return(parseFloat(Ge(e,"marginLeft"))||e.getBoundingClientRect().left-Ue(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),ce.each({margin:"",padding:"",border:"Width"},function(i,o){ce.cssHooks[i+o]={expand:function(e){for(var t=0,n={},r="string"==typeof e?e.split(" "):[e];t<4;t++)n[i+Q[t]+o]=r[t]||r[t-2]||r[0];return n}},"margin"!==i&&(ce.cssHooks[i+o].set=rt)}),ce.fn.extend({css:function(e,t){return M(this,function(e,t,n){var r,i,o={},a=0;if(Array.isArray(t)){for(r=Xe(e),i=t.length;a<i;a++)o[t[a]]=ce.css(e,t[a],!1,r);return o}return void 0!==n?ce.style(e,t,n):ce.css(e,t)},e,t,1<arguments.length)}}),((ce.Tween=at).prototype={constructor:at,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||ce.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(ce.cssNumber[n]?"":"px")},cur:function(){var e=at.propHooks[this.prop];return e&&e.get?e.get(this):at.propHooks._default.get(this)},run:function(e){var t,n=at.propHooks[this.prop];return this.options.duration?this.pos=t=ce.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):at.propHooks._default.set(this),this}}).init.prototype=at.prototype,(at.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=ce.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){ce.fx.step[e.prop]?ce.fx.step[e.prop](e):1!==e.elem.nodeType||!ce.cssHooks[e.prop]&&null==e.elem.style[Ze(e.prop)]?e.elem[e.prop]=e.now:ce.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=at.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},ce.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},ce.fx=at.prototype.init,ce.fx.step={};var st,ut,lt,ct,ft=/^(?:toggle|show|hide)$/,pt=/queueHooks$/;function dt(){ut&&(!1===C.hidden&&ie.requestAnimationFrame?ie.requestAnimationFrame(dt):ie.setTimeout(dt,ce.fx.interval),ce.fx.tick())}function ht(){return ie.setTimeout(function(){st=void 0}),st=Date.now()}function gt(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i["margin"+(n=Q[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function vt(e,t,n){for(var r,i=(yt.tweeners[t]||[]).concat(yt.tweeners["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return r}function yt(o,e,t){var n,a,r=0,i=yt.prefilters.length,s=ce.Deferred().always(function(){delete u.elem}),u=function(){if(a)return!1;for(var e=st||ht(),t=Math.max(0,l.startTime+l.duration-e),n=1-(t/l.duration||0),r=0,i=l.tweens.length;r<i;r++)l.tweens[r].run(n);return s.notifyWith(o,[l,n,t]),n<1&&i?t:(i||s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l]),!1)},l=s.promise({elem:o,props:ce.extend({},e),opts:ce.extend(!0,{specialEasing:{},easing:ce.easing._default},t),originalProperties:e,originalOptions:t,startTime:st||ht(),duration:t.duration,tweens:[],createTween:function(e,t){var n=ce.Tween(o,l.opts,e,t,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(n),n},stop:function(e){var t=0,n=e?l.tweens.length:0;if(a)return this;for(a=!0;t<n;t++)l.tweens[t].run(1);return e?(s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l,e])):s.rejectWith(o,[l,e]),this}}),c=l.props;for(!function(e,t){var n,r,i,o,a;for(n in e)if(i=t[r=F(n)],o=e[n],Array.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(a=ce.cssHooks[r])&&"expand"in a)for(n in o=a.expand(o),delete e[r],o)n in e||(e[n]=o[n],t[n]=i);else t[r]=i}(c,l.opts.specialEasing);r<i;r++)if(n=yt.prefilters[r].call(l,o,c,l.opts))return v(n.stop)&&(ce._queueHooks(l.elem,l.opts.queue).stop=n.stop.bind(n)),n;return ce.map(c,vt,l),v(l.opts.start)&&l.opts.start.call(o,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),ce.fx.timer(ce.extend(u,{elem:o,anim:l,queue:l.opts.queue})),l}ce.Animation=ce.extend(yt,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return te(n.elem,e,Y.exec(t),n),n}]},tweener:function(e,t){v(e)?(t=e,e=["*"]):e=e.match(D);for(var n,r=0,i=e.length;r<i;r++)n=e[r],yt.tweeners[n]=yt.tweeners[n]||[],yt.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,i,o,a,s,u,l,c,f="width"in t||"height"in t,p=this,d={},h=e.style,g=e.nodeType&&ee(e),v=_.get(e,"fxshow");for(r in n.queue||(null==(a=ce._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,p.always(function(){p.always(function(){a.unqueued--,ce.queue(e,"fx").length||a.empty.fire()})})),t)if(i=t[r],ft.test(i)){if(delete t[r],o=o||"toggle"===i,i===(g?"hide":"show")){if("show"!==i||!v||void 0===v[r])continue;g=!0}d[r]=v&&v[r]||ce.style(e,r)}if((u=!ce.isEmptyObject(t))||!ce.isEmptyObject(d))for(r in f&&1===e.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],null==(l=v&&v.display)&&(l=_.get(e,"display")),"none"===(c=ce.css(e,"display"))&&(l?c=l:(re([e],!0),l=e.style.display||l,c=ce.css(e,"display"),re([e]))),("inline"===c||"inline-block"===c&&null!=l)&&"none"===ce.css(e,"float")&&(u||(p.done(function(){h.display=l}),null==l&&(c=h.display,l="none"===c?"":c)),h.display="inline-block")),n.overflow&&(h.overflow="hidden",p.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]})),u=!1,d)u||(v?"hidden"in v&&(g=v.hidden):v=_.access(e,"fxshow",{display:l}),o&&(v.hidden=!g),g&&re([e],!0),p.done(function(){for(r in g||re([e]),_.remove(e,"fxshow"),d)ce.style(e,r,d[r])})),u=vt(g?v[r]:0,r,p),r in v||(v[r]=u.start,g&&(u.end=u.start,u.start=0))}],prefilter:function(e,t){t?yt.prefilters.unshift(e):yt.prefilters.push(e)}}),ce.speed=function(e,t,n){var r=e&&"object"==typeof e?ce.extend({},e):{complete:n||!n&&t||v(e)&&e,duration:e,easing:n&&t||t&&!v(t)&&t};return ce.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in ce.fx.speeds?r.duration=ce.fx.speeds[r.duration]:r.duration=ce.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){v(r.old)&&r.old.call(this),r.queue&&ce.dequeue(this,r.queue)},r},ce.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ee).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(t,e,n,r){var i=ce.isEmptyObject(t),o=ce.speed(e,n,r),a=function(){var e=yt(this,ce.extend({},t),o);(i||_.get(this,"finish"))&&e.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(i,e,o){var a=function(e){var t=e.stop;delete e.stop,t(o)};return"string"!=typeof i&&(o=e,e=i,i=void 0),e&&this.queue(i||"fx",[]),this.each(function(){var e=!0,t=null!=i&&i+"queueHooks",n=ce.timers,r=_.get(this);if(t)r[t]&&r[t].stop&&a(r[t]);else for(t in r)r[t]&&r[t].stop&&pt.test(t)&&a(r[t]);for(t=n.length;t--;)n[t].elem!==this||null!=i&&n[t].queue!==i||(n[t].anim.stop(o),e=!1,n.splice(t,1));!e&&o||ce.dequeue(this,i)})},finish:function(a){return!1!==a&&(a=a||"fx"),this.each(function(){var e,t=_.get(this),n=t[a+"queue"],r=t[a+"queueHooks"],i=ce.timers,o=n?n.length:0;for(t.finish=!0,ce.queue(this,a,[]),r&&r.stop&&r.stop.call(this,!0),e=i.length;e--;)i[e].elem===this&&i[e].queue===a&&(i[e].anim.stop(!0),i.splice(e,1));for(e=0;e<o;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete t.finish})}}),ce.each(["toggle","show","hide"],function(e,r){var i=ce.fn[r];ce.fn[r]=function(e,t,n){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(gt(r,!0),e,t,n)}}),ce.each({slideDown:gt("show"),slideUp:gt("hide"),slideToggle:gt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,r){ce.fn[e]=function(e,t,n){return this.animate(r,e,t,n)}}),ce.timers=[],ce.fx.tick=function(){var e,t=0,n=ce.timers;for(st=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||ce.fx.stop(),st=void 0},ce.fx.timer=function(e){ce.timers.push(e),ce.fx.start()},ce.fx.interval=13,ce.fx.start=function(){ut||(ut=!0,dt())},ce.fx.stop=function(){ut=null},ce.fx.speeds={slow:600,fast:200,_default:400},ce.fn.delay=function(r,e){return r=ce.fx&&ce.fx.speeds[r]||r,e=e||"fx",this.queue(e,function(e,t){var n=ie.setTimeout(e,r);t.stop=function(){ie.clearTimeout(n)}})},lt=C.createElement("input"),ct=C.createElement("select").appendChild(C.createElement("option")),lt.type="checkbox",le.checkOn=""!==lt.value,le.optSelected=ct.selected,(lt=C.createElement("input")).value="t",lt.type="radio",le.radioValue="t"===lt.value;var mt,xt=ce.expr.attrHandle;ce.fn.extend({attr:function(e,t){return M(this,ce.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){ce.removeAttr(this,e)})}}),ce.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return"undefined"==typeof e.getAttribute?ce.prop(e,t,n):(1===o&&ce.isXMLDoc(e)||(i=ce.attrHooks[t.toLowerCase()]||(ce.expr.match.bool.test(t)?mt:void 0)),void 0!==n?null===n?void ce.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:null==(r=ce.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!le.radioValue&&"radio"===t&&fe(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(D);if(i&&1===e.nodeType)while(n=i[r++])e.removeAttribute(n)}}),mt={set:function(e,t,n){return!1===t?ce.removeAttr(e,n):e.setAttribute(n,n),n}},ce.each(ce.expr.match.bool.source.match(/\w+/g),function(e,t){var a=xt[t]||ce.find.attr;xt[t]=function(e,t,n){var r,i,o=t.toLowerCase();return n||(i=xt[o],xt[o]=r,r=null!=a(e,t,n)?o:null,xt[o]=i),r}});var bt=/^(?:input|select|textarea|button)$/i,wt=/^(?:a|area)$/i;function Tt(e){return(e.match(D)||[]).join(" ")}function Ct(e){return e.getAttribute&&e.getAttribute("class")||""}function kt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(D)||[]}ce.fn.extend({prop:function(e,t){return M(this,ce.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[ce.propFix[e]||e]})}}),ce.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&ce.isXMLDoc(e)||(t=ce.propFix[t]||t,i=ce.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=ce.find.attr(e,"tabindex");return t?parseInt(t,10):bt.test(e.nodeName)||wt.test(e.nodeName)&&e.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),le.optSelected||(ce.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),ce.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ce.propFix[this.toLowerCase()]=this}),ce.fn.extend({addClass:function(t){var e,n,r,i,o,a;return v(t)?this.each(function(e){ce(this).addClass(t.call(this,e,Ct(this)))}):(e=kt(t)).length?this.each(function(){if(r=Ct(this),n=1===this.nodeType&&" "+Tt(r)+" "){for(o=0;o<e.length;o++)i=e[o],n.indexOf(" "+i+" ")<0&&(n+=i+" ");a=Tt(n),r!==a&&this.setAttribute("class",a)}}):this},removeClass:function(t){var e,n,r,i,o,a;return v(t)?this.each(function(e){ce(this).removeClass(t.call(this,e,Ct(this)))}):arguments.length?(e=kt(t)).length?this.each(function(){if(r=Ct(this),n=1===this.nodeType&&" "+Tt(r)+" "){for(o=0;o<e.length;o++){i=e[o];while(-1<n.indexOf(" "+i+" "))n=n.replace(" "+i+" "," ")}a=Tt(n),r!==a&&this.setAttribute("class",a)}}):this:this.attr("class","")},toggleClass:function(t,n){var e,r,i,o,a=typeof t,s="string"===a||Array.isArray(t);return v(t)?this.each(function(e){ce(this).toggleClass(t.call(this,e,Ct(this),n),n)}):"boolean"==typeof n&&s?n?this.addClass(t):this.removeClass(t):(e=kt(t),this.each(function(){if(s)for(o=ce(this),i=0;i<e.length;i++)r=e[i],o.hasClass(r)?o.removeClass(r):o.addClass(r);else void 0!==t&&"boolean"!==a||((r=Ct(this))&&_.set(this,"__className__",r),this.setAttribute&&this.setAttribute("class",r||!1===t?"":_.get(this,"__className__")||""))}))},hasClass:function(e){var t,n,r=0;t=" "+e+" ";while(n=this[r++])if(1===n.nodeType&&-1<(" "+Tt(Ct(n))+" ").indexOf(t))return!0;return!1}});var St=/\r/g;ce.fn.extend({val:function(n){var r,e,i,t=this[0];return arguments.length?(i=v(n),this.each(function(e){var t;1===this.nodeType&&(null==(t=i?n.call(this,e,ce(this).val()):n)?t="":"number"==typeof t?t+="":Array.isArray(t)&&(t=ce.map(t,function(e){return null==e?"":e+""})),(r=ce.valHooks[this.type]||ce.valHooks[this.nodeName.toLowerCase()])&&"set"in r&&void 0!==r.set(this,t,"value")||(this.value=t))})):t?(r=ce.valHooks[t.type]||ce.valHooks[t.nodeName.toLowerCase()])&&"get"in r&&void 0!==(e=r.get(t,"value"))?e:"string"==typeof(e=t.value)?e.replace(St,""):null==e?"":e:void 0}}),ce.extend({valHooks:{option:{get:function(e){var t=ce.find.attr(e,"value");return null!=t?t:Tt(ce.text(e))}},select:{get:function(e){var t,n,r,i=e.options,o=e.selectedIndex,a="select-one"===e.type,s=a?null:[],u=a?o+1:i.length;for(r=o<0?u:a?o:0;r<u;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!fe(n.parentNode,"optgroup"))){if(t=ce(n).val(),a)return t;s.push(t)}return s},set:function(e,t){var n,r,i=e.options,o=ce.makeArray(t),a=i.length;while(a--)((r=i[a]).selected=-1<ce.inArray(ce.valHooks.option.get(r),o))&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),ce.each(["radio","checkbox"],function(){ce.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=-1<ce.inArray(ce(e).val(),t)}},le.checkOn||(ce.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var Et=ie.location,jt={guid:Date.now()},At=/\?/;ce.parseXML=function(e){var t,n;if(!e||"string"!=typeof e)return null;try{t=(new ie.DOMParser).parseFromString(e,"text/xml")}catch(e){}return n=t&&t.getElementsByTagName("parsererror")[0],t&&!n||ce.error("Invalid XML: "+(n?ce.map(n.childNodes,function(e){return e.textContent}).join("\n"):e)),t};var Dt=/^(?:focusinfocus|focusoutblur)$/,Nt=function(e){e.stopPropagation()};ce.extend(ce.event,{trigger:function(e,t,n,r){var i,o,a,s,u,l,c,f,p=[n||C],d=ue.call(e,"type")?e.type:e,h=ue.call(e,"namespace")?e.namespace.split("."):[];if(o=f=a=n=n||C,3!==n.nodeType&&8!==n.nodeType&&!Dt.test(d+ce.event.triggered)&&(-1<d.indexOf(".")&&(d=(h=d.split(".")).shift(),h.sort()),u=d.indexOf(":")<0&&"on"+d,(e=e[ce.expando]?e:new ce.Event(d,"object"==typeof e&&e)).isTrigger=r?2:3,e.namespace=h.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:ce.makeArray(t,[e]),c=ce.event.special[d]||{},r||!c.trigger||!1!==c.trigger.apply(n,t))){if(!r&&!c.noBubble&&!y(n)){for(s=c.delegateType||d,Dt.test(s+d)||(o=o.parentNode);o;o=o.parentNode)p.push(o),a=o;a===(n.ownerDocument||C)&&p.push(a.defaultView||a.parentWindow||ie)}i=0;while((o=p[i++])&&!e.isPropagationStopped())f=o,e.type=1<i?s:c.bindType||d,(l=(_.get(o,"events")||Object.create(null))[e.type]&&_.get(o,"handle"))&&l.apply(o,t),(l=u&&o[u])&&l.apply&&$(o)&&(e.result=l.apply(o,t),!1===e.result&&e.preventDefault());return e.type=d,r||e.isDefaultPrevented()||c._default&&!1!==c._default.apply(p.pop(),t)||!$(n)||u&&v(n[d])&&!y(n)&&((a=n[u])&&(n[u]=null),ce.event.triggered=d,e.isPropagationStopped()&&f.addEventListener(d,Nt),n[d](),e.isPropagationStopped()&&f.removeEventListener(d,Nt),ce.event.triggered=void 0,a&&(n[u]=a)),e.result}},simulate:function(e,t,n){var r=ce.extend(new ce.Event,n,{type:e,isSimulated:!0});ce.event.trigger(r,null,t)}}),ce.fn.extend({trigger:function(e,t){return this.each(function(){ce.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return ce.event.trigger(e,t,n,!0)}});var qt=/\[\]$/,Lt=/\r?\n/g,Ht=/^(?:submit|button|image|reset|file)$/i,Ot=/^(?:input|select|textarea|keygen)/i;function Pt(n,e,r,i){var t;if(Array.isArray(e))ce.each(e,function(e,t){r||qt.test(n)?i(n,t):Pt(n+"["+("object"==typeof t&&null!=t?e:"")+"]",t,r,i)});else if(r||"object"!==x(e))i(n,e);else for(t in e)Pt(n+"["+t+"]",e[t],r,i)}ce.param=function(e,t){var n,r=[],i=function(e,t){var n=v(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!ce.isPlainObject(e))ce.each(e,function(){i(this.name,this.value)});else for(n in e)Pt(n,e[n],t,i);return r.join("&")},ce.fn.extend({serialize:function(){return ce.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=ce.prop(this,"elements");return e?ce.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!ce(this).is(":disabled")&&Ot.test(this.nodeName)&&!Ht.test(e)&&(this.checked||!we.test(e))}).map(function(e,t){var n=ce(this).val();return null==n?null:Array.isArray(n)?ce.map(n,function(e){return{name:t.name,value:e.replace(Lt,"\r\n")}}):{name:t.name,value:n.replace(Lt,"\r\n")}}).get()}});var Mt=/%20/g,Rt=/#.*$/,It=/([?&])_=[^&]*/,Wt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ft=/^(?:GET|HEAD)$/,$t=/^\/\//,Bt={},_t={},zt="*/".concat("*"),Xt=C.createElement("a");function Ut(o){return function(e,t){"string"!=typeof e&&(t=e,e="*");var n,r=0,i=e.toLowerCase().match(D)||[];if(v(t))while(n=i[r++])"+"===n[0]?(n=n.slice(1)||"*",(o[n]=o[n]||[]).unshift(t)):(o[n]=o[n]||[]).push(t)}}function Vt(t,i,o,a){var s={},u=t===_t;function l(e){var r;return s[e]=!0,ce.each(t[e]||[],function(e,t){var n=t(i,o,a);return"string"!=typeof n||u||s[n]?u?!(r=n):void 0:(i.dataTypes.unshift(n),l(n),!1)}),r}return l(i.dataTypes[0])||!s["*"]&&l("*")}function Gt(e,t){var n,r,i=ce.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&ce.extend(!0,e,r),e}Xt.href=Et.href,ce.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Et.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Et.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":zt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":ce.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Gt(Gt(e,ce.ajaxSettings),t):Gt(ce.ajaxSettings,e)},ajaxPrefilter:Ut(Bt),ajaxTransport:Ut(_t),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var c,f,p,n,d,r,h,g,i,o,v=ce.ajaxSetup({},t),y=v.context||v,m=v.context&&(y.nodeType||y.jquery)?ce(y):ce.event,x=ce.Deferred(),b=ce.Callbacks("once memory"),w=v.statusCode||{},a={},s={},u="canceled",T={readyState:0,getResponseHeader:function(e){var t;if(h){if(!n){n={};while(t=Wt.exec(p))n[t[1].toLowerCase()+" "]=(n[t[1].toLowerCase()+" "]||[]).concat(t[2])}t=n[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return h?p:null},setRequestHeader:function(e,t){return null==h&&(e=s[e.toLowerCase()]=s[e.toLowerCase()]||e,a[e]=t),this},overrideMimeType:function(e){return null==h&&(v.mimeType=e),this},statusCode:function(e){var t;if(e)if(h)T.always(e[T.status]);else for(t in e)w[t]=[w[t],e[t]];return this},abort:function(e){var t=e||u;return c&&c.abort(t),l(0,t),this}};if(x.promise(T),v.url=((e||v.url||Et.href)+"").replace($t,Et.protocol+"//"),v.type=t.method||t.type||v.method||v.type,v.dataTypes=(v.dataType||"*").toLowerCase().match(D)||[""],null==v.crossDomain){r=C.createElement("a");try{r.href=v.url,r.href=r.href,v.crossDomain=Xt.protocol+"//"+Xt.host!=r.protocol+"//"+r.host}catch(e){v.crossDomain=!0}}if(v.data&&v.processData&&"string"!=typeof v.data&&(v.data=ce.param(v.data,v.traditional)),Vt(Bt,v,t,T),h)return T;for(i in(g=ce.event&&v.global)&&0==ce.active++&&ce.event.trigger("ajaxStart"),v.type=v.type.toUpperCase(),v.hasContent=!Ft.test(v.type),f=v.url.replace(Rt,""),v.hasContent?v.data&&v.processData&&0===(v.contentType||"").indexOf("application/x-www-form-urlencoded")&&(v.data=v.data.replace(Mt,"+")):(o=v.url.slice(f.length),v.data&&(v.processData||"string"==typeof v.data)&&(f+=(At.test(f)?"&":"?")+v.data,delete v.data),!1===v.cache&&(f=f.replace(It,"$1"),o=(At.test(f)?"&":"?")+"_="+jt.guid+++o),v.url=f+o),v.ifModified&&(ce.lastModified[f]&&T.setRequestHeader("If-Modified-Since",ce.lastModified[f]),ce.etag[f]&&T.setRequestHeader("If-None-Match",ce.etag[f])),(v.data&&v.hasContent&&!1!==v.contentType||t.contentType)&&T.setRequestHeader("Content-Type",v.contentType),T.setRequestHeader("Accept",v.dataTypes[0]&&v.accepts[v.dataTypes[0]]?v.accepts[v.dataTypes[0]]+("*"!==v.dataTypes[0]?", "+zt+"; q=0.01":""):v.accepts["*"]),v.headers)T.setRequestHeader(i,v.headers[i]);if(v.beforeSend&&(!1===v.beforeSend.call(y,T,v)||h))return T.abort();if(u="abort",b.add(v.complete),T.done(v.success),T.fail(v.error),c=Vt(_t,v,t,T)){if(T.readyState=1,g&&m.trigger("ajaxSend",[T,v]),h)return T;v.async&&0<v.timeout&&(d=ie.setTimeout(function(){T.abort("timeout")},v.timeout));try{h=!1,c.send(a,l)}catch(e){if(h)throw e;l(-1,e)}}else l(-1,"No Transport");function l(e,t,n,r){var i,o,a,s,u,l=t;h||(h=!0,d&&ie.clearTimeout(d),c=void 0,p=r||"",T.readyState=0<e?4:0,i=200<=e&&e<300||304===e,n&&(s=function(e,t,n){var r,i,o,a,s=e.contents,u=e.dataTypes;while("*"===u[0])u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||e.converters[i+" "+u[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==u[0]&&u.unshift(o),n[o]}(v,T,n)),!i&&-1<ce.inArray("script",v.dataTypes)&&ce.inArray("json",v.dataTypes)<0&&(v.converters["text script"]=function(){}),s=function(e,t,n,r){var i,o,a,s,u,l={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)l[a.toLowerCase()]=e.converters[a];o=c.shift();while(o)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(!(a=l[u+" "+o]||l["* "+o]))for(i in l)if((s=i.split(" "))[1]===o&&(a=l[u+" "+s[0]]||l["* "+s[0]])){!0===a?a=l[i]:!0!==l[i]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&e["throws"])t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}(v,s,T,i),i?(v.ifModified&&((u=T.getResponseHeader("Last-Modified"))&&(ce.lastModified[f]=u),(u=T.getResponseHeader("etag"))&&(ce.etag[f]=u)),204===e||"HEAD"===v.type?l="nocontent":304===e?l="notmodified":(l=s.state,o=s.data,i=!(a=s.error))):(a=l,!e&&l||(l="error",e<0&&(e=0))),T.status=e,T.statusText=(t||l)+"",i?x.resolveWith(y,[o,l,T]):x.rejectWith(y,[T,l,a]),T.statusCode(w),w=void 0,g&&m.trigger(i?"ajaxSuccess":"ajaxError",[T,v,i?o:a]),b.fireWith(y,[T,l]),g&&(m.trigger("ajaxComplete",[T,v]),--ce.active||ce.event.trigger("ajaxStop")))}return T},getJSON:function(e,t,n){return ce.get(e,t,n,"json")},getScript:function(e,t){return ce.get(e,void 0,t,"script")}}),ce.each(["get","post"],function(e,i){ce[i]=function(e,t,n,r){return v(t)&&(r=r||n,n=t,t=void 0),ce.ajax(ce.extend({url:e,type:i,dataType:r,data:t,success:n},ce.isPlainObject(e)&&e))}}),ce.ajaxPrefilter(function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")}),ce._evalUrl=function(e,t,n){return ce.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){ce.globalEval(e,t,n)}})},ce.fn.extend({wrapAll:function(e){var t;return this[0]&&(v(e)&&(e=e.call(this[0])),t=ce(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstElementChild)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(n){return v(n)?this.each(function(e){ce(this).wrapInner(n.call(this,e))}):this.each(function(){var e=ce(this),t=e.contents();t.length?t.wrapAll(n):e.append(n)})},wrap:function(t){var n=v(t);return this.each(function(e){ce(this).wrapAll(n?t.call(this,e):t)})},unwrap:function(e){return this.parent(e).not("body").each(function(){ce(this).replaceWith(this.childNodes)}),this}}),ce.expr.pseudos.hidden=function(e){return!ce.expr.pseudos.visible(e)},ce.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},ce.ajaxSettings.xhr=function(){try{return new ie.XMLHttpRequest}catch(e){}};var Yt={0:200,1223:204},Qt=ce.ajaxSettings.xhr();le.cors=!!Qt&&"withCredentials"in Qt,le.ajax=Qt=!!Qt,ce.ajaxTransport(function(i){var o,a;if(le.cors||Qt&&!i.crossDomain)return{send:function(e,t){var n,r=i.xhr();if(r.open(i.type,i.url,i.async,i.username,i.password),i.xhrFields)for(n in i.xhrFields)r[n]=i.xhrFields[n];for(n in i.mimeType&&r.overrideMimeType&&r.overrideMimeType(i.mimeType),i.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest"),e)r.setRequestHeader(n,e[n]);o=function(e){return function(){o&&(o=a=r.onload=r.onerror=r.onabort=r.ontimeout=r.onreadystatechange=null,"abort"===e?r.abort():"error"===e?"number"!=typeof r.status?t(0,"error"):t(r.status,r.statusText):t(Yt[r.status]||r.status,r.statusText,"text"!==(r.responseType||"text")||"string"!=typeof r.responseText?{binary:r.response}:{text:r.responseText},r.getAllResponseHeaders()))}},r.onload=o(),a=r.onerror=r.ontimeout=o("error"),void 0!==r.onabort?r.onabort=a:r.onreadystatechange=function(){4===r.readyState&&ie.setTimeout(function(){o&&a()})},o=o("abort");try{r.send(i.hasContent&&i.data||null)}catch(e){if(o)throw e}},abort:function(){o&&o()}}}),ce.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),ce.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return ce.globalEval(e),e}}}),ce.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),ce.ajaxTransport("script",function(n){var r,i;if(n.crossDomain||n.scriptAttrs)return{send:function(e,t){r=ce("<script>").attr(n.scriptAttrs||{}).prop({charset:n.scriptCharset,src:n.url}).on("load error",i=function(e){r.remove(),i=null,e&&t("error"===e.type?404:200,e.type)}),C.head.appendChild(r[0])},abort:function(){i&&i()}}});var Jt,Kt=[],Zt=/(=)\?(?=&|$)|\?\?/;ce.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Kt.pop()||ce.expando+"_"+jt.guid++;return this[e]=!0,e}}),ce.ajaxPrefilter("json jsonp",function(e,t,n){var r,i,o,a=!1!==e.jsonp&&(Zt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Zt.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return r=e.jsonpCallback=v(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Zt,"$1"+r):!1!==e.jsonp&&(e.url+=(At.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return o||ce.error(r+" was not called"),o[0]},e.dataTypes[0]="json",i=ie[r],ie[r]=function(){o=arguments},n.always(function(){void 0===i?ce(ie).removeProp(r):ie[r]=i,e[r]&&(e.jsonpCallback=t.jsonpCallback,Kt.push(r)),o&&v(i)&&i(o[0]),o=i=void 0}),"script"}),le.createHTMLDocument=((Jt=C.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Jt.childNodes.length),ce.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(le.createHTMLDocument?((r=(t=C.implementation.createHTMLDocument("")).createElement("base")).href=C.location.href,t.head.appendChild(r)):t=C),o=!n&&[],(i=w.exec(e))?[t.createElement(i[1])]:(i=Ae([e],t,o),o&&o.length&&ce(o).remove(),ce.merge([],i.childNodes)));var r,i,o},ce.fn.load=function(e,t,n){var r,i,o,a=this,s=e.indexOf(" ");return-1<s&&(r=Tt(e.slice(s)),e=e.slice(0,s)),v(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),0<a.length&&ce.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(r?ce("<div>").append(ce.parseHTML(e)).find(r):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},ce.expr.pseudos.animated=function(t){return ce.grep(ce.timers,function(e){return t===e.elem}).length},ce.offset={setOffset:function(e,t,n){var r,i,o,a,s,u,l=ce.css(e,"position"),c=ce(e),f={};"static"===l&&(e.style.position="relative"),s=c.offset(),o=ce.css(e,"top"),u=ce.css(e,"left"),("absolute"===l||"fixed"===l)&&-1<(o+u).indexOf("auto")?(a=(r=c.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(u)||0),v(t)&&(t=t.call(e,n,ce.extend({},s))),null!=t.top&&(f.top=t.top-s.top+a),null!=t.left&&(f.left=t.left-s.left+i),"using"in t?t.using.call(e,f):c.css(f)}},ce.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){ce.offset.setOffset(this,t,e)});var e,n,r=this[0];return r?r.getClientRects().length?(e=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if("fixed"===ce.css(r,"position"))t=r.getBoundingClientRect();else{t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;while(e&&(e===n.body||e===n.documentElement)&&"static"===ce.css(e,"position"))e=e.parentNode;e&&e!==r&&1===e.nodeType&&((i=ce(e).offset()).top+=ce.css(e,"borderTopWidth",!0),i.left+=ce.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-ce.css(r,"marginTop",!0),left:t.left-i.left-ce.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent;while(e&&"static"===ce.css(e,"position"))e=e.offsetParent;return e||J})}}),ce.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,i){var o="pageYOffset"===i;ce.fn[t]=function(e){return M(this,function(e,t,n){var r;if(y(e)?r=e:9===e.nodeType&&(r=e.defaultView),void 0===n)return r?r[i]:e[t];r?r.scrollTo(o?r.pageXOffset:n,o?n:r.pageYOffset):e[t]=n},t,e,arguments.length)}}),ce.each(["top","left"],function(e,n){ce.cssHooks[n]=Ye(le.pixelPosition,function(e,t){if(t)return t=Ge(e,n),_e.test(t)?ce(e).position()[n]+"px":t})}),ce.each({Height:"height",Width:"width"},function(a,s){ce.each({padding:"inner"+a,content:s,"":"outer"+a},function(r,o){ce.fn[o]=function(e,t){var n=arguments.length&&(r||"boolean"!=typeof e),i=r||(!0===e||!0===t?"margin":"border");return M(this,function(e,t,n){var r;return y(e)?0===o.indexOf("outer")?e["inner"+a]:e.document.documentElement["client"+a]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+a],r["scroll"+a],e.body["offset"+a],r["offset"+a],r["client"+a])):void 0===n?ce.css(e,t,i):ce.style(e,t,n,i)},s,n?e:void 0,n)}})}),ce.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){ce.fn[t]=function(e){return this.on(t,e)}}),ce.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.on("mouseenter",e).on("mouseleave",t||e)}}),ce.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,n){ce.fn[n]=function(e,t){return 0<arguments.length?this.on(n,null,e,t):this.trigger(n)}});var en=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;ce.proxy=function(e,t){var n,r,i;if("string"==typeof t&&(n=e[t],t=e,e=n),v(e))return r=ae.call(arguments,2),(i=function(){return e.apply(t||this,r.concat(ae.call(arguments)))}).guid=e.guid=e.guid||ce.guid++,i},ce.holdReady=function(e){e?ce.readyWait++:ce.ready(!0)},ce.isArray=Array.isArray,ce.parseJSON=JSON.parse,ce.nodeName=fe,ce.isFunction=v,ce.isWindow=y,ce.camelCase=F,ce.type=x,ce.now=Date.now,ce.isNumeric=function(e){var t=ce.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},ce.trim=function(e){return null==e?"":(e+"").replace(en,"$1")},"function"==typeof define&&define.amd&&define("jquery",[],function(){return ce});var tn=ie.jQuery,nn=ie.$;return ce.noConflict=function(e){return ie.$===ce&&(ie.$=nn),e&&ie.jQuery===ce&&(ie.jQuery=tn),ce},"undefined"==typeof e&&(ie.jQuery=ie.$=ce),ce});
"use strict";function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,s=[],c=!0,l=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(e){l=!0,a=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw a}}return s}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function ownKeys(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(n),!0).forEach(function(e){_defineProperty(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function _defineProperty(e,t,n){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey(e){e=_toPrimitive(e,"string");return"symbol"==_typeof(e)?e:String(e)}function _toPrimitive(e,t){if("object"!=_typeof(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _createForOfIteratorHelper(e,t){var n,r,a,o,i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(i)return r=!(n=!0),{s:function(){i=i.call(e)},n:function(){var e=i.next();return n=e.done,e},e:function(e){r=!0,a=e},f:function(){try{n||null==i.return||i.return()}finally{if(r)throw a}}};if(Array.isArray(e)||(i=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length)return i&&(e=i),o=0,{s:t=function(){},n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){var n;if(e)return"string"==typeof e?_arrayLikeToArray(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}define("engine",["jquery","utils","state","section","passages"],function(N,j,P,R,I){var t,V=j.impossible,M=j.passageSelector,D=j.transitionOut,F=j.options;function L(e,t,n){var r,a,o;if(n?(n=n.get("name"),(a=I.getTree(n)).children.length&&(r={type:"include",tag:t,name:n,children:a.children,text:a.text})):r=I.getTree(t),r){for(;(o=e[e.length-1])&&("root"===o.type||"include"===o.type)&&o.children.some(function(e){return e.type.startsWith("unclosed")});)e[e.length-1]=Object.create(o),e=e[e.length-1].children=o.children.slice();e.push(r)}}function n(e){var t,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=n.loadedGame,a=I.get(e),o=j.storyElement,i=o.parent(),s=n.stretch,n=n.transition,n=void 0===n?{}:n,c=n.depart,c=void 0===c?"instant":c,l=n.arrive,l=void 0===l?"dissolve":l,u=n.departOrigin,p=n.arriveOrigin,n=n.time,d=(i.findAndFilter("tw-enchantment").each(function(e,t){var n=(t=N(t)).data("enchantedProperties");n&&o.css(n.reduce(function(e,t){return e[t]="",e},{})),t[0]===i[0]&&(i=o.unwrap().parent())}),I.hasValid(e)||V("Engine.showPassage","There's no passage with the name \""+e+'"!'),o.children(M).not(".transition-out, .transition-out *")),a=(a.get("tags")||[]).join(" "),f=(t=N("<tw-passage><tw-sidebar>"),f=t.children("tw-sidebar"),h=N('<tw-icon tabindex=0 alt="Undo" title="Undo">&#8630;</tw-icon>'),g=N('<tw-icon tabindex=0 alt="Redo" title="Redo">&#8631;</tw-icon>'),P.pastLength<=0&&h.css("visibility","hidden"),P.futureLength<=0&&g.css("visibility","hidden"),f.append(h,g),t),h=("function"==typeof u&&(u=u.call(d)),"function"==typeof p&&(p=p.call(f)),!s&&c),m=h&&d.css("width"),g=(j.detachStoryElement(),f.appendTo(o).attr({tags:a}),h&&(D(d,c,n,0,0,0,u),d.css({position:"absolute",width:function(){return"0px"!==m?m:"100%"}})),o.attr({tags:a}),R.create(f)),y=(r&&(g.loadedGame=!0),[]);if(P.pastLength<=0&&1===P.turns){var b,v=_createForOfIteratorHelper(I.getTagged("startup"));try{for(v.s();!(b=v.n()).done;)L(y,"startup",b.value)}catch(e){v.e(e)}finally{v.f()}if(F.debug){var w,k=_createForOfIteratorHelper(I.getTagged("debug-startup"));try{for(k.s();!(w=k.n()).done;)L(y,"debug-startup",w.value)}catch(e){k.e(e)}finally{k.f()}}}var S,T=_createForOfIteratorHelper(I.getTagged("header"));try{for(T.s();!(S=T.n()).done;)L(y,"header",S.value)}catch(e){T.e(e)}finally{T.f()}if(F.debug){var _,x=_createForOfIteratorHelper(I.getTagged("debug-header"));try{for(x.s();!(_=x.n()).done;)L(y,"debug-header",_.value)}catch(e){x.e(e)}finally{x.f()}}L(y,e);var O,A=_createForOfIteratorHelper(I.getTagged("footer"));try{for(A.s();!(O=A.n()).done;)L(y,"footer",O.value)}catch(e){A.e(e)}finally{A.f()}if(F.debug){var C,E=_createForOfIteratorHelper(I.getTagged("debug-footer"));try{for(E.s();!(C=E.n()).done;)L(y,"debug-footer",C.value)}catch(e){E.e(e)}finally{E.f()}}g.renderInto(y,f,{transition:l,transitionTime:n,transitionOrigin:p}),g.loadedGame=!1,j.reattachStoryElement(),scroll(0,s?f.offset().top-.05*N(window).height():o[0].getBoundingClientRect().top+document.body.scrollTop)}return Object.freeze({goBack:function(e){P.rewind()&&n(P.passage,e)},goForward:function(e){P.fastForward()&&n(P.passage,e)},goToPassage:function(e,t){P.play(e),n(e,t)},redirect:function(e,t){P.redirect(e),n(e,t)},toggleFullscreen:function(){var e=document.documentElement;document.fullscreenElement?document.exitFullscreen():document.msFullscreenElement?document.msExitFullscreen():(e.msRequestFullscreen||e.requestFullscreen).call(e)},showPassage:n,enableDebugMode:function(){t&&t()},registerDebugMode:function(e){t=t||e}})}),define("harlowe",["jquery","debugmode/mode","renderer","state","section","engine","passages","utils","utils/renderutils","internaltypes/varscope","internaltypes/twineerror","macros","macrolib/values","macrolib/commands","macrolib/datastructures","macrolib/stylechangers","macrolib/enchantments","macrolib/metadata","macrolib/patterns","macrolib/links","macrolib/custommacros","utils/jqueryplugins","repl"],function($,DebugMode,Renderer,State,Section,Engine,Passages,Utils,_ref,VarScope){var dialog=_ref.dialog;function __HarloweEval(text){eval(text+"")}function printJSError(e){var t,n="".concat(e.name,": ").concat(e.message);return e.stack&&(t=(e=e.stack.split("\n")).findIndex(function(e){return e.includes("__HarloweEval")}),n+="\n".concat(e.slice(0,t).join("\n").replace(/\([^)]+\)/g,""))),"<div style='font-family:monospace;overflow-y:scroll;max-height:30vh'>```"+n+"```</div>"}!function(o){window.onerror=function(e,t,n,r,a){window.onerror=o,Utils.storyElement.parent().append(dialog({message:"Sorry to interrupt, but this page's code has got itself in a mess.\n\n".concat(printJSError(a),"\n(This is probably due to a bug in the Harlowe game engine.)")}).addClass("harlowe-crash")),"function"==typeof o&&o.apply(void 0,arguments)}}(window.onerror),Utils.onStartup(function(){var n,e,t,r,a=$("tw-storydata");0!==a.length&&(Utils.options.ifid=a.attr("ifid"),(a.attr("tags")||"").split(/\s/).forEach(function(e){"uncompressed-pure-values"!==e&&"uncompressed-saves"!==e||(Utils.options.uncompressedPureValues=!0),"uncompressed-structures"!==e&&"uncompressed-saves"!==e||(Utils.options.uncompressedStructures=!0)}),(a.attr("options")||"").split(/\s/).forEach(function(e){e&&(Utils.options[e]=!0),"debug"===e&&DebugMode()}),a=(a=a.attr("startnode"))||[].reduce.call($("tw-passagedata"),function(e,t){t=t.getAttribute("pid");return t<e?t:e},1/0),a=$("tw-passagedata[pid='"+a+"']").attr("name"),$(document.documentElement).on("keydown",function(e){13===e.which&&"0"===e.target.getAttribute("tabindex")&&$(e.target).trigger("click")}),n=!1,$("[role=script]").each(function(t){try{__HarloweEval($(this).html())}catch(e){n||(n=!0,dialog({parent:Utils.storyElement.parent(),message:"There is a problem with this story's "+Utils.nth(t+1)+" script:\n\n"+printJSError(e)}))}}),$("[role=stylesheet]").each(function(e,t){$(document.head).append("<style data-title=\"Story stylesheet '".concat(e+1,"'\">").concat($(t).html()))}),(e=Section.create()).stack=[{tempVariables:Object.create(VarScope)}],(r=Passages.loadMetadata(e)).length&&(t=dialog({parent:Utils.storyElement.parent(),message:"These errors occurred when running the `(metadata:)` macro calls in this story's passages:<p></p>"}),r.forEach(function(e){return t.find("p").append(e.render())})),(r=!Utils.options.debug&&State.hasSessionStorage&&sessionStorage.getItem("Saved Session"))&&!0===State.deserialise(e,r)?Engine.showPassage(State.passage):Engine.goToPassage(a))})}),define("macros",["utils/naturalsort","utils","utils/operationutils","datatypes/changercommand","datatypes/custommacro","datatypes/lambda","datatypes/codehook","internaltypes/changedescriptor","internaltypes/twineerror"],function(g,e,t,o,r,y,b,p,v){var w=e.insensitiveName,k=e.nth,S=e.andList,T=t.objectName,_=t.typeName,d=t.toSource,x=Array.isArray,i={};function O(e){return e===s.TypeSignature.Any||(x(e.innerType)?e.innerType.some(O):!!e.innerType&&O(e.innerType))}function a(e,t,n,r){var a,o,i,s,c,l,u,p,d=t.fn,f=t.typeSignature,h=t.returnType,m=(r=function(e){for(var t,n,r,a=[],o=0;o<e.length;o+=1)o in e&&(!0===(null==(t=e[o])?void 0:t.spreader)?(n=t.value,(r=v.containsError(n))?a.push(r):x(n)||"string"==typeof n?a.push.apply(a,_toConsumableArray(n)):n instanceof Set?a.push.apply(a,_toConsumableArray(Array.from(n).sort(g("en")))):a.push(v.create("operation","I can't spread out "+T(n)+", because it is not a string, dataset, or array."))):a.push(t));return a}(r),"string"!=typeof e&&(a=e,e=""),a?"":"("+(x(e)&&1<e.length?e[0]:e)+":)");for(e=a?a.TwineScript_KnownName?"the custom macro, ".concat(a.TwineScript_KnownName):"an unnamed custom macro":"the ".concat(m," macro"),o=0<f.length?1===f.length&&O(f[0])?1===r.length?"That value can't be given to macros as-is.":"Give only a single value to this macro.":e+" must only be given "+S(f.map(_))+(1<f.length?", in that order":"."):e+" must not be given any data."+(a?"":" Just write "+m),s=0,c=Math.max(r.length,f.length);s<c;s+=1){if(p=f[s],l=r[s],v.containsError(l))return l;if(s>=f.length&&!i)return v.create("datatype",r.length-f.length+" too many values were given to "+e+".",o);if(!(p=p||i).innerType||"rest"!==p.pattern&&"zero or more"!==p.pattern||(i=p.innerType,"rest"===p.pattern&&(p=p.innerType)),!function e(t,n){if(null===n)return void 0===t;var r=_typeof(t);if("function"!=typeof n&&n.pattern){if("optional"===n.pattern||"zero or more"===n.pattern)return void 0===t||e(t,n.innerType);if("either"===n.pattern){for(var a=0;a<n.innerType.length;a+=1)if(e(t,n.innerType[a]))return!0;return!1}if("lambda"===n.pattern&&e(t,n.innerType))return n.clauses.includes("where")===("where"in t||"each"in t)&&n.clauses.includes("making")==="making"in t&&n.clauses.includes("via")==="via"in t&&n.clauses.includes("with")==="with"in t;if("insensitive set"===n.pattern)return n.innerType.includes(w(t));if("range"===n.pattern)return n.range(t);if("wrapped"===n.pattern)return e(t,n.innerType)}return(void 0===n||void 0!==t)&&("anything"===n.TwineScript_TypeName&&void 0!==t&&!t.TwineScript_Unstorable||"everything"===n.TwineScript_TypeName&&void 0!==t||(n===String?"string"===r:n===Boolean?"boolean"===r:n===parseInt?"number"===r&&!Number.isNaN(t)&&!(t+"").includes("."):n===Number?"number"===r&&!Number.isNaN(t):n===Array?x(t):n===Map||n===Set?t instanceof n:Object.isPrototypeOf.call(n,t)))}(l,p))return void 0===l?(u=f.filter(function(e){return!("optional"===e.pattern||"zero or more"===e.pattern)}).length,v.create("datatype","".concat(e," was given ").concat(r.length?S(r.map(T)):"nothing",", but needs ").concat(u-s," more value").concat(1<u-s?"s":"","."),o)):null!=(u=l)&&u.TwineScript_Unstorable&&O(p)?v.create("datatype",e+"'s "+k(s+1)+" value, "+T(l)+", is not valid data for this macro.",o):b.isPrototypeOf(l)&&"Changer"===h?v.create("syntax","Please put this hook outside the parentheses of "+e+", not inside it.","Hooks should appear after a macro"+(a?".":": "+m+"[Some text]")):l&&y.isPrototypeOf(l)&&"lambda"===p.pattern?v.create("datatype",e+"'s "+k(s+1)+" value (a lambda) should have "+S(["where","when","making","via","with"].filter(function(e){return p.clauses.includes(e)}).map(function(e){return"a '"+e+"' clause"}))+", not "+S(["where","when","making","via","with"].filter(function(e){return e in l}).map(function(e){return"a '"+e+"' clause"}))+"."):"insensitive set"===p.pattern?v.create("datatype",T(l)+" is not a valid name string for "+e+".","Only the following names are recognised (capitalisation and hyphens ignored): "+S(p.innerType)+"."):v.create("datatype","".concat(e,"'s ").concat(k(s+1)," value is ").concat(T(l),", but should be ").concat(_(p),"."),p.message||o)}return d.apply(null,[n].concat(r))}function f(e,t,n,r){var a={fn:n,typeSignature:r=[].concat(r||[]),returnType:t};Object.freeze(a),[].concat(e).forEach(function(e){return Object.defineProperty(i,w(e),{value:a})})}var s={has:function(e){return e=w(e),hasOwnProperty.call(i,e)},get:function(e){return e=w(e),hasOwnProperty.call(i,e)&&i[e]},add:function e(t,n,r,a){return f(t,n,r,a),e},addChanger:function e(t,n,r,a){return f(t,"Changer",n,a),o.register(x(t)?t[0]:t,r),e},addCommand:function e(t,n,r,a){var s,c,l,u,o=!(4<arguments.length&&void 0!==arguments[4])||arguments[4],i=[].concat(t)[0];return f(t,"Command",(s=i,c=n,l=r,u=o,function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a,o,i=c.apply(void 0,n);return i||(a=p.create(),o=_objectSpread({TwineScript_TypeID:"command",TwineScript_ObjectName:"a (".concat(s,":) command"),TwineScript_TypeName:"a (".concat(s,":) command"),TwineScript_Print:function(){return"`[A (".concat(s,":) command]`")},TwineScript_ToSource:function(){return"(".concat(s,":").concat(n.map(d),")")},TwineScript_is:function(e){return d(this)===d(e)}},u?{TwineScript_Attach:function(e,t){return a.section=e,t.run(a),o},TwineScript_Run:function(e){e=l.apply(void 0,[a,e].concat(n));return a=p.create(),e}}:{TwineScript_Run:function(e){return l.apply(void 0,[e].concat(n))}}))}),a),e},TypeSignature:{optional:function(e){return{pattern:"optional",innerType:e}},zeroOrMore:function(e){return{pattern:"zero or more",innerType:e}},either:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{pattern:"either",innerType:t}},rest:function(e){return{pattern:"rest",innerType:e}},insensitiveSet:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{pattern:"insensitive set",innerType:t}},numberRange:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1/0;return{pattern:"range",min:t,max:n,range:function(e){return"number"==typeof e&&!Number.isNaN(e)&&t<=e&&e<=n}}},nonNegativeInteger:{pattern:"range",integer:!0,min:0,max:1/0,range:function(e){return"number"==typeof e&&!Number.isNaN(e)&&0<=e&&!(e+"").includes(".")}},positiveInteger:{pattern:"range",integer:!0,min:1,max:1/0,range:function(e){return"number"==typeof e&&!Number.isNaN(e)&&1<=e&&!(e+"").includes(".")}},wrapped:function(e,t){return{pattern:"wrapped",innerType:e,message:t}},Any:{TwineScript_TypeName:"anything"},Everything:{TwineScript_TypeName:"everything"}},run:function(e,t,n){return s.has(e)?a(e,s.get(e),t,n):v.create("macrocall","I can't run the macro '"+e+"' because it doesn't exist.","Did you mean to run a macro? If you have a word written like (this:), it is regarded as a macro name.")},runCustom:function(e,t,n){return r.isPrototypeOf(e)?a(e,e,t,n):v.containsError(e)?e:v.create("macrocall","I can't call ".concat(T(e)," because it isn't a custom macro."))}};return Object.assign(s.TypeSignature,{positiveNumber:s.TypeSignature.numberRange(Math.pow(2,-52),1/0),nonNegativeNumber:s.TypeSignature.numberRange(0,1/0),percent:s.TypeSignature.numberRange(0,1)}),Object.freeze(s)}),define("passages",["jquery","utils/naturalsort","utils","markup","internaltypes/twineerror"],function(t,s,e,c,l){var u=e.insensitiveName,p=e.unescape,n=e.onStartup,o=e.impossible,d=Object.assign,f=RegExp(c.Patterns.macroFront+c.Patterns.macroName,"ig");function r(e){var t,r,a,o,n=e.attr("name"),i=p(e.html()),s=(t=n,o=["metadata","storylet","exclusivity","urgency"],((s=i).match(f)||[]).some(function(t){return o.some(function(e){return u(t.slice(1,-1))===e})})?(r=!1,a={},c.lex(s,t).children.forEach(function e(t){if("macro"===t.type){var n=u(t.name);if(o.some(function(e){return n===e})){if(l.isPrototypeOf(a[n]))return;if(r)return void(a[n]=l.create("syntax","The (".concat(t.name,":) macro can't appear after non-metadata macros.")));if(a[n])return void(a[n]=l.create("syntax","There is more than one (".concat(t.name,":) macro.")));a[n]=t}else r=!0;t.children.forEach(function e(t){var n=u(t.name);"macro"===t.type&&o.some(function(e){return n===e})?a[n]=l.create("syntax","The (".concat(t.name,":) macro can't be inside another macro.")):t.children.forEach(e)})}else t.children.forEach(e)}),a):{});return d(new Map([["source",i],["tags",(e.attr("tags")||"").split(/\s/)||[]],["name",n]]),{TwineScript_TypeName:"a passage datamap",TwineScript_ObjectName:"a passage datamap",metadata:s,tree:null})}var a=Object.create(null),i=[],h=null,m=d(new Map,{TwineScript_ObjectName:"the Passages datamap",getTagged:function(n){var e,r;return a[n]||(e=s("en",function(e){return e.get("name")}),r=[],this.forEach(function(e){var t=e instanceof Map&&e.get("tags");Array.isArray(t)&&t.includes(n)&&r.push(e)}),r.sort(e),a[n]=r)},clearTagCache:function(){a=Object.create(null)},clear:function(){Map.prototype.clear.call(this),this.clearTagCache(),this.clearTreeCache(),this.clearStoryletCache()},delete:function(){var e;(e=Map.prototype.delete).call.apply(e,[this].concat(Array.prototype.slice.call(arguments))),this.clearTagCache(),this.clearTreeCache(),this.clearStoryletCache()},getTree:function(e){if(!this.has(e))return o("Passages.getTree","No passage name?"),[];var t=this.get(e),n=t.get("tags");if(n.includes("header")||n.includes("footer")||n.includes("debug-header")||n.includes("debug-footer"))return t.tree||(t.tree=c.lex(t.get("source"),e)),t.tree;for(var r,a=0;a<i.length;a+=1)if(i[a]&&i[a].place===e)return r=i.splice(a,1)[0],i.unshift(r),r;n=c.lex(t.get("source"),e);return i.unshift(n),16<i.length&&i.pop(),n},clearTreeCache:function(){i=[]},getStorylets:function(r,e){var a,o,i,e=e?e.filter(r,_toConsumableArray(m.values())):_toConsumableArray(m.values());return l.containsError(e)?e:(a=[],o=-1/0,e.reduce(function(e,t){if(e)return e;e=t.get("storylet");if(e){var n=r.speculate(e,t.get("name"),"a (storylet:) macro");if(l.containsError(n))return n.message="There's an error in the storylet passage \""+t.get("name")+'":\n'+n.message,n.source=e.TwineScript_ToSource(),n;n&&(e=t.get("exclusivity"),o=Math.max(o,"number"==typeof e?e:0),a.push(t))}},void 0)||(i=s("en"),a.filter(function(e){e=e.get("exclusivity");return("number"==typeof e?e:0)===o}).sort(function(e,t){var n=e.get("urgency"),r=t.get("urgency");return(n="number"==typeof n?n:0)!==(r="number"==typeof r?r:0)?r-n:i(e.get("name"),t.get("name"))})))},allStorylets:function(){return h=h||_toConsumableArray(m.values()).filter(function(e){return e.get("storylet")})},clearStoryletCache:function(){h=null},loadMetadata:function(i){var s=[];return m.forEach(function(o){o.metadata&&Object.keys(o.metadata).forEach(function(e){var t,n,r;function a(e,t){o.has(e)?s.push(l.create("syntax","This passage's datamap already has a '"+JSON.stringify(e)+"' data name.")):o.set(e,t)}l.containsError(o.metadata[e])?s.push(o.metadata[e]):(t=o.metadata[e],n=i.speculate(t,o.get("name"),"a ("+e+":) macro"),r='In "'+o.get("name")+'":\n',l.containsError(n)?(n.message=r+n.message,n.source=t.text,s.push(n)):n instanceof Map?n.forEach(function(e,t){return a(t,e)}):a(e,n))}),o.metadata=void 0}),s},hasValid:function(e){e=this.get(e);return e&&e instanceof Map&&e.has("source")},create:r});return n(function(){t("tw-storydata > tw-passagedata").get().forEach(function(e){e=t(e),m.set(e.attr("name"),new r(e))})}),m}),define("renderer",["jquery","utils","markup","internaltypes/twineerror"],function(a,e,S,T){var _=e.escape,x=e.insensitiveName,O=e.options;function A(e,t,n){n=2<arguments.length&&void 0!==n?n:"";return"<"+t+(n?" "+n:"")+">"+e+"</"+t+">"}var C="text-align: center; max-width:50%; ";function E(m,g){function y(e,t,n){e=E(e.children,g);return e&&A(e,t,n)}var b="",v=[];if(m)for(var e,w=(m=Array.isArray(m)?m:[m]).length,k=0;k<w;k+=1)if(e=function(e){var n=m[e];switch(n.type){case"include":b+=y(n,"tw-"+n.type,'type="'.concat(n.tag,'" name="').concat(n.name,'"'));break;case"error":b+=T.create("syntax",n.message,n.explanation).render(_(n.text))[0].outerHTML;break;case"numbered":case"bulleted":for(var t="numbered"===n.type?"ol":"ul",r=(b+="<"+t+">",1);e<w&&m[e];){if("br"===m[e].type){if(b+="</li>",!m[e+1]||m[e+1].type!==n.type)break}else m[e].type===n.type?(b=(b+=("<"+t+">").repeat(Math.max(0,m[e].depth-r)))+("</"+t+">").repeat(Math.max(0,r-m[e].depth))+"<li>",r=m[e].depth):b+=E([m[e]],g);e+=1}b+=("</"+t+">").repeat(r+1);break;case"align":for(;n&&"align"===n.type;){var a=n.align,o=e+=1;if("left"===a){--e;break}for(;e<w&&m[e]&&"align"!==m[e].type;)e+=1;var o=E(m.slice(o,e),g),i="";switch(a){case"center":i+=C+"margin-left: auto; margin-right: auto;";break;case"justify":case"right":i+="text-align: "+a+";";break;default:+a&&(i+=C+"margin-left: "+a+"%;")}b+="<tw-align "+(i?'style="'+i+'"':"")+">"+o+"</tw-align>\n",n=m[e]}break;case"column":for(var s,c=[];n&&"column"===n.type;){var l=n.column,u=e+=1;if("none"===l){--e;break}for(;e<w&&m[e]&&"column"!==m[e].type;)e+=1;c.push({text:n.text,type:l,body:E(m.slice(u,e),g),width:n.width,marginLeft:n.marginLeft,marginRight:n.marginRight}),n=m[e]}c.length&&(s=c.reduce(function(e,t){return e+t.width},0),b+="<tw-columns>"+c.map(function(e){return"<tw-column type=".concat(e.type," ",' style="width:').concat(e.width/s*100,"%; margin-left: ").concat(e.marginLeft,"em; margin-right: ").concat(e.marginRight,'em;">').concat(e.body,"</tw-column>\n")}).join("")+"</tw-columns>");break;case"heading":for(b+="<h"+n.depth+">";++e<w&&m[e];){if("br"===m[e].type){b+="</h"+n.depth+">";break}b+=E([m[e]],g)}break;case"br":if(!v.length||/td|th/.test(v[0])){b+="<br>";for(var p=m[e+1];p&&("br"===p.type||"tag"===p.type&&/^<br\b/i.test(p.text));)b+="<tw-consecutive-br"+("tag"===p.type?" data-raw":"")+"></tw-consecutive-br>",p=m[(e+=1)+1]}break;case"hr":b+="<hr>";break;case"escapedLine":case"comment":break;case"inlineUrl":b+='<a class="link" href="'+_(n.text)+'">'+n.text+"</a>";break;case"scriptStyleTag":case"tag":var d=n.text.toLowerCase();/^<\/?(?:table|thead|tbody|tr|tfoot|td|th|svg)\b/.test(d)&&!n.text.endsWith("/>")&&v[n.text.startsWith("</")?"shift":"unshift"](d),b+=n.text.startsWith("</")?n.text:n.text.replace(/(\/)?>$/,function(e,t){return" data-raw".concat(t?"></".concat(n.text.match(/[\w-]+/)):"",">")});break;case"sub":case"sup":case"strong":case"em":b+=y(n,n.type);break;case"strike":b+=y(n,"s");break;case"bold":b+=y(n,"b");break;case"italic":b+=y(n,"i");break;case"twineLink":d=_slicedToArray(S.lex("(link-goto:"+JSON.stringify(n.innerText)+","+JSON.stringify(n.passage)+")").children,1)[0];b+='<tw-expression type="macro" name="link-goto"'+(O.debug?' title="'+_(n.text)+'"':"")+' code="'+g.code.length+'"></tw-expression>',g.code.push(d);break;case"hook":b+="<tw-hook "+(n.hidden?"hidden ":"")+(n.name?'name="'+x(n.name)+'"':"")+(O.debug&&n.name?' title="Hook: ?'+n.name+'"':"")+' source="'+g.source.length+'"></tw-hook>',g.source.push(n.children);break;case"unclosedHook":return b+="<tw-hook "+(n.hidden?"hidden ":"")+(n.name?'name="'+x(n.name)+'"':"")+'source="'+g.source.length+'"></tw-hook>',g.source.push(m.slice(e+1,w)),{v:b};case"verbatim":b+=A(_(n.innerText).replace(/\n/g,"<br>"),"tw-verbatim");break;case"collapsed":b+=y(n,"tw-collapsed");break;case"unclosedCollapsed":return{v:b+="<tw-collapsed>"+E(m.slice(e+1,w),g)+"</tw-collapsed>"};case"variable":case"tempVariable":case"macro":var f=[],h=[];if("macro"===n.type&&!function e(t){"string"!==t.type&&"hook"!==t.type&&t.children.every(e);var n=x(t.name);if("macro"!==t.type||"prompt"!==n&&"confirm"!==n){if("hook"===t.type&&!t.everyLeaf(function(e){return"error"!==e.type||(h.push(e),!1)}))return!1}else f.push(t);return!0}(n),h.length)return{v:T.create("syntax","This code hook's markup contained "+h.length+" error"+(h.length?"s":"")+":<br>\u2014"+h.map(function(e){return e.message}).join("<br>\u2014")).render(_(n.text))[0].outerHTML};d=f.map(function(e){return e.blockerTree=g.blockers.length,g.blockers.push(e),e.blockerTree});b+='<tw-expression type="'+n.type+'" name="'+_(n.name||n.text)+'"'+(O.debug?' title="'+_(n.text)+'"':"")+(d.length?' blockers="'+d+'"':"")+' code="'+g.code.length+'"></tw-expression>',g.code.push(n);break;default:b+=n.children&&n.children.length?E(n.children,g):n.text}k=e}(k))return e.v;return b}return Object.freeze({exec:function(e){var r={code:[],blockers:[],source:[]},e=E(e="string"==typeof e?S.lex(e).children:e,r),e=a(a.parseHTML(e,document,!0));return e.findAndFilter("script:not([src])").each(function(e,t){var n=t.getAttribute("type");n&&"text/javascript"!==n.toLowerCase()||t.setAttribute("type","application/x-harlowe")}),r.blockers=r.blockers.map(function(e){e.blockedValue=!0;e=Object.create(e);return e.blockedValue=!1,e}),e.findAndFilter("tw-expression[code]:not([data-raw]), tw-expression[blockers]:not([data-raw]), tw-hook[source]:not([data-raw])").each(function(e,t){var n;(t=a(t)).attr("blockers")&&(n=t.popAttr("blockers").split(",").map(function(e){return r.blockers[e]}),t.data("blockers",n)),t.attr("source")&&t.data("source",r.source[t.popAttr("source")]),t.attr("code")&&t.data("code",r.code[t.popAttr("code")])}),e}})}),define("repl",["utils","markup","section"],function(e,t,n){e.onStartup(function(){return setTimeout(function(){e.options.debug&&(window.REPL=function(e){e=n.create().eval(t.lex("(print:"+e+")"));return e.TwineScript_Run?e.TwineScript_Run().source:e},window.LEX=function(e){e=t.lex(e);return 1===e.length?e[0]:e})})})}),define("section",["jquery","utils","twinescript/runner","twinescript/operations","state","utils/operationutils","utils/renderutils","utils/scripttag","datatypes/changercommand","datatypes/colour","datatypes/lambda","datatypes/codehook","internaltypes/changedescriptor","internaltypes/varscope","internaltypes/twineerror","internaltypes/twinenotifier"],function(p,f,a,u,r,e,t,i,d,h,o,m,g,y,b,v){var w=e.printBuiltinValue,k=e.objectName,S=e.typeID,T=e.isObject,s=t.collapse,_=Object.assign,x=Object.create,O=Object.keys;function A(e,t,n){if(t&&"object"===_typeof(t)&&d.isPrototypeOf(t)){var r=n.popData("source")||(null==(r=n[0].cachedData)?void 0:r.source),a=(null!=(a=n[0])&&a.cachedData&&(n[0].cachedData.source=void 0),n.data("originalSource",r),g.create({target:n,source:r,section:this,append:"append"})),o=t.run(a);if(b.containsError(o)&&e.replaceWith(o.render(e.attr("title"))),!this.renderInto(r,null,a))return o=f.insensitiveName(e.attr("name")),["if","elseif","unless","else","testfalse"].includes(o)&&(e.addClass("false"),"elseif"!==o)&&(this.stackTop.lastHookShown=!1),n.data("live")&&function(t,n,r){function a(e){p&&(d-=(e-p)*(f.options.debug&&void 0!==f.options.speedMultiplier?f.options.speedMultiplier:1)),p=e,0<d?requestAnimationFrame(a):(d=s,o())}var o,i=this,e=r.data("live"),s=e.delay,c=e.event,l=((n=_objectSpread(_objectSpread({},n),{},{append:"replace",transitionDeferred:!1,enabled:!0})).data=_objectSpread(_objectSpread({},n.data),{},{live:void 0}),r.data("originalSource")||""),u=this.stackTop.tempVariables,p=null,d=s;o=this.whenUnblocked.bind(this,function(){var e;i.inDOM()&&(e=null==c?void 0:c.filter(i,[!0],u),b.containsError(e)?e.render(i,t.attr("title")).replaceAll(t):c&&!e[0]?requestAnimationFrame(a):(i.renderInto(l,r,n,u),e||r.find("tw-expression[name='stop']").length||i.inDOM()&&requestAnimationFrame(a)))}),requestAnimationFrame(a)}.call(this,e,a,n),!0}else{if(!1===t)return o=n.popData("source")||(null==(r=n[0].cachedData)?void 0:r.source),null!=(a=n[0])&&a.cachedData&&(n[0].cachedData.source=void 0),o&&(n.cachedData&&(n.cachedData.source=void 0),n.data("originalSource",o),n.data("hidden",!0)),e.addClass("false"),!(this.stackTop.lastHookShown=!1);if(!0!==t)return!1}return this.stackTop.lastHookShown=!0}function C(e){var t,n,e=(e instanceof p?e[0]:e).nextSibling;return e&&(e instanceof Text&&!e.textContent.trim()||["br","tw-consecutive-br"].includes((e.tagName||"").toLowerCase()))?(t=(n=C(e)).whitespace,n=n.nextElem,{whitespace:p(e).add(t),nextElem:n}):{whitespace:p(),nextElem:p(e)}}function E(e){if(null!=e&&e.length)return p("<tw-open-button replay label='\ud83d\udd0d'>").data("evalReplay",e)}function c(e,t){var n=this.eval(t);e.append(E(this.evalReplay)),e.append(function(e,t){if(/a \((go-to|undo|redirect|restart):\) command/.exec(null==t?void 0:t.TwineScript_TypeName))return p("<tw-open-button goto label='GO'>").data("goto",{section:e,command:t})}(this,n)),this.stackTop.evaluateOnly&&n&&(d.isPrototypeOf(n)||"function"==typeof n.TwineScript_Run)&&(n=b.create("syntax","I can't work out what ".concat(this.stackTop.evaluateOnly," should evaluate to, because it contains a ").concat(d.isPrototypeOf(n)?"changer.":"command."),"Please rewrite this without putting changers or commands here."));var r=p();for(i=e;d.isPrototypeOf(n);){var a=C(i),o=a.whitespace;if((i=a.nextElem)[0]&&i[0].nodeType===Node.TEXT_NODE&&"+"===i[0].textContent.trim()){var i,a=i,s=C(a),c=s.whitespace;if((i=s.nextElem).is("tw-expression")){var s=i.popData("code")||(null==(s=i[0])||null==(s=s.cachedData)?void 0:s.code),l=(null!=(l=i[0])&&l.cachedData&&(i[0].cachedData.code=void 0),this.eval(s));if(b.containsError(l)){n=l;break}s=u["+"](n,l);p(o).add(a).add(c).remove(),n=b.containsError(s)?b.create("operation","I can't combine "+k(n)+" with "+k(l)+".","function"==typeof l.TwineScript_Run?"If you want to attach this changer to ".concat(k(l),", remove the + between them."):"Changers can only be added to other changers."):s;continue}}if(i.is("tw-expression")){c=i.popData("code")||(null==(a=i[0])||null==(a=a.cachedData)?void 0:a.code),s=(null!=(l=i[0])&&l.cachedData&&(i[0].cachedData.code=void 0),this.eval(c));if(i.append(E(this.evalReplay)),b.containsError(s)){n=s;break}if(s&&"object"===_typeof(s)&&"function"==typeof s.TwineScript_Attach){n=s.TwineScript_Attach(this,n);break}return d.isPrototypeOf(s)?void e.replaceWith(b.create("operation","Changers like (".concat(n.macroName,":) need to be combined using + between them."),"Place the + between the changer macros, or the variables holding them. The + is absent only between a changer and its attached hook or command.").render(e.attr("title"))):void e.replaceWith(b.create("operation","".concat(k(s)," can't have changers like (").concat(n.macroName,":) attached."),"Changers placed just before hooks, links and commands will attempt to attach, but in this case it didn't work.").render(e.attr("title")))}if(i.is("tw-hook")){o.remove(),r=i;break}n.macroName||f.impossible("Section.runExpression","changer has no macroName");a=e.attr("title")||"("+n.macroName+": ...)";return void e.replaceWith(b.create("syntax","The (".concat(n.macroName,":) changer should be stored in a variable or attached to a hook."),"Macros like this should appear before a hook: ".concat(a,"[Some text]")).render(e.attr("title")))}e.attr("return",S(n)),r=r.length?r:C(e).nextElem.filter("tw-hook"),(t=b.containsError(n))?e.replaceWith(t.render(e.attr("title")).append(E(this.evalReplay))):v.isPrototypeOf(n)?e.append(n.render()):n&&"function"==typeof n.TwineScript_Run?(n=n.TwineScript_Run(this),b.containsError(n)?e.replaceWith(n.render(e.attr("title"))):g.isPrototypeOf(n)?null!=(t=n.data)&&t.live?e.replaceWith(b.create("unimplemented","I currently can't attach (live:) or (event:) macros to commands - only hooks.").render(e.attr("title"))):(n.section=this,n.target=i,this.renderInto("",i,n)):T(n)&&n.blocked?(this.stackTop.blocked=n.blocked,e.data("code",{type:"macro",blockedValue:!0,text:e.attr("title")||"",start:0,end:(e.attr("title")||"").length})):n&&f.impossible("Section.runExpression","TwineScript_Run() returned a non-ChangeDescriptor ".concat(_typeof(n),': "').concat(n,'"'))):r.length&&A.call(this,e,n,r)||("string"==typeof n||"number"==typeof n||n instanceof Map||n instanceof Set||Array.isArray(n)||h.isPrototypeOf(n)||m.isPrototypeOf(n)||n&&"function"==typeof n.TwineScript_Print&&!d.isPrototypeOf(n)?(n=w(n),b.containsError(n)?e.replaceWith(n.render(e.attr("title"))):"string"==typeof n||Array.isArray(n)?this.renderInto(n,e):f.impossible("printBuiltinValue() produced a non-string non-array ".concat(_typeof(n)))):d.isPrototypeOf(n)||"boolean"==typeof n||f.impossible("Section.runExpression","The expression evaluated to an unknown value: ".concat(n)))}var l={add:[],remove:[]};return Object.preventExtensions({create:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:f.storyElement,n=_(x(this),{timestamp:Date.now(),dom:e,stack:[],enchantments:[],unblockCallbacks:[],freeVariables:null,evalReplay:null,loadedGame:!1,Identifiers:{TwineScript_Identifiers:!0,it:0,get time(){var e;return null!=(e=n.stackTop)&&e.evaluateOnly?b.create("operation","'time' can't be used in ".concat(n.stackTop.evaluateOnly,".")):(Date.now()-n.timestamp)*(f.options.debug&&void 0!==f.options.speedMultiplier?f.options.speedMultiplier:1)},get turns(){return r.turns},get turn(){return r.turns},get visits(){var t=n.stackTop.speculativePassage;return r.history().filter(function(e){return e===(t||r.passage)}).length+(!t||t===r.passage)},get visit(){return n.Identifiers.visits},get exits(){var e;return null!=(e=n.stackTop)&&e.evaluateOnly?b.create("operation","'exit' and 'exits' can't be used in ".concat(n.stackTop.evaluateOnly,".")):n.dom.find("tw-enchantment, tw-link").filter(function(e,t){return(t=p(t)).data("enchantmentEvent")||t.parent().data("linkPassageName")||t.parent().data("clickEvent")}).length},get exit(){return n.Identifiers.exits},get pos(){return n.stackTop&&!n.stackTop.evaluateOnly&&n.stackTop.lambdaPos?+n.stackTop.lambdaPos||1:b.create("operation","'pos' can only be used in lambdas that aren't 'when' lambdas.")}}});return n},eval:function(t){var e,n;f.options.debug&&f.options.evalReplay&&(n=Array.isArray(t)?t.reduce(function(e,t){return e+t.text},""):t.text||"",this.evalReplay=[{code:n,fromCode:n,basis:(Array.isArray(t)?t[0]:t).start,start:0,end:n.length,diff:0}]);try{e=a(this,t)}catch(e){return null!=(n=window.console)&&n.error(e),this.evalReplay=null,b.create("","An internal error occurred while trying to run ".concat([].concat(t).map(function(e){return e.text}).join(""),"."),'The error was "'.concat(e.message,'".\nIf this is the latest version of Harlowe, please consider reporting a bug (see the documentation).'))}return this.evalReplay&&2===this.evalReplay.length&&this.evalReplay.shift(),e},get stackTop(){return this.stack[0]},inDOM:function(){return 0<f.storyElement.find(this.dom).length},evaluateTwineMarkup:function(e,t){var n=p("<p>");return this.stack.unshift({desc:g.create({target:n,source:e,section:this,append:"append"}),tempVariables:this.stackTop.tempVariables,evaluateOnly:t,finalIter:!0}),this.execute(),0<(e=n.find("tw-error")).length?e:n},speculate:function(e,t,n){this.stack.unshift({evaluateOnly:n,finalIter:!0,tempVariables:_(x(y),{TwineScript_VariableStore:{type:"temp",name:n}}),speculativePassage:t});var r,n=this.evalReplay;return this.evalReplay=null,o.isPrototypeOf(e)?r=e.apply(this,{fail:!1,pass:!0}):e&&(r=a(this,e)),this.stack.shift(),this.evalReplay=n,r},renderInto:function(e,a,t){var o=this,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,i=g.create({target:a,source:e,section:this,append:"append"});if(t)if(d.isPrototypeOf(t)){var e=t.run(i);if(b.containsError(e))return e.render(a.attr("title")).replaceAll(a),!1}else _(i,t);if((a=i.target,50<=this.stack.length)&&50<=this.stack.reduce(function(e,t){return e+!!t.finalIter},0))return b.create("infinite","Printing this expression may have trapped me in an infinite loop.").render(a.attr("title")).replaceAll(a),!1;var s=function(e,t,n){var r=a instanceof p&&a.is("tw-hook")&&0<a.parents("tw-collapsed,[collapsing=true]").length;o.stack.unshift({desc:e,finalIter:n,tempVariables:t,collapses:r,evaluateOnly:o.stackTop&&o.stackTop.evaluateOnly})},r=r||x(this.stack.length?this.stackTop.tempVariables:y),t=(hasOwnProperty.call(r,"TwineScript_VariableStore")||(t=null==(e=a)?void 0:e.tag(),r.TwineScript_VariableStore={type:"temp",name:"tw-hook"===t?a.attr("name")?"?"+a.attr("name"):"an unnamed hook":"tw-expression"===t?"a "+a.attr("type")+" expression":"tw-passage"===t?"this passage":"an unknown scope"}),null==(e=this.stackTop)?void 0:e.blocked);if(O(i.loopVars).length){var c=_objectSpread({},i.loopVars),l=Math.min.apply(Math,_toConsumableArray(O(c).map(function(e){return c[e].length})));if(v.create(l+" loop"+(1!==l?"s":"")).render().prependTo(a),l){for(var n=l-1;0<=n;--n)!function(n){s(i,O(c).reduce(function(e,t){return e[t]=c[t][n],e},x(r),n===l-1))}(n);for(var u=l-1;0<=u&&!this.stackTop.blocked;--u)this.execute()}}else s(i,r,!0),this.execute();return(0===this.stack.length||!t&&null!=(e=this.stackTop)&&e.blocked)&&this.updateEnchantments(),i.enabled},execute:function(){var a=this,e=this.stackTop,t=e.desc,n=e.dom,r=e.collapses,o=e.evaluateOnly;t&&!n&&(n=t.render(),this.stackTop.dom=n,this.stackTop.desc=void 0),n.findAndFilter('tw-hook,tw-expression,script[type="application/x-harlowe"]').each(function(e,t){var n=p(t).data();t.cachedData={blockers:n.blockers,code:n.code,source:n.source}}).each(function(e,t){if(a.stackTop.blocked)return!1;var n=t.cachedData;switch(n&&(t.cachedData=void 0),(t=p(t)).tag()){case"tw-hook":var r=t.popData("source")||(null==n?void 0:n.source);(r&&t.data("originalSource",r),t.data("tempVariables",a.stackTop.tempVariables),t.popAttr("hidden"))?t.data("hidden",!0):r&&a.renderInto(r,t);break;case"tw-expression":var r=t.data("blockers")||(null==n?void 0:n.blockers);if(r){if(o)return void t.removeData("blockers").removeData("code").replaceWith(b.create("syntax","I can't use a macro like (prompt:) or (confirm:) in ".concat(o,"."),"Please rewrite this without putting such macros here.").render(t.attr("title"),t));if(r.length)return a.stackTop.blocked=!0,r=a.eval(r.shift()),b.containsError(r)&&(a.stackTop.blocked=!1,t.removeData("blockers").replaceWith(r.render(t.attr("title"),t))),!1;t.removeData("blockers")}r=t.popData("code")||(null==n?void 0:n.code);r&&c.call(a,t,r);break;case"script":if(f.reattachStoryElement(),t.text())try{i(t.text(),a.stackTop.tempVariables)}catch(e){b.isPrototypeOf(e)?t.replaceWith(e.render(t.text(),t)):(null!=(r=window.console)&&r.error(e),t.replaceWith(b.create("","A Javascript error occurred while running this <script> element.",'The error was "'.concat(e,'". Check the browser console for more details.')).render(t.text(),t)))}}}),this.stackTop.blocked||(n.length&&r&&s(n),n.findAndFilter("tw-collapsed,[collapsing=true]").each(function(){s(p(this))}),setTimeout(function(){return n.find("input, textarea").first().focus()},100),this.stack.shift())},updateEnchantments:function(){this.enchantments.forEach(function(e){e.disenchant(),e.enchantScope()})},on:function(e,t){return l[e].push(t),this},addEnchantment:function(t){var n=this;this.enchantments.push(t),l.add.forEach(function(e){return e(n,t)})},removeEnchantment:function(t){var n=this,e=this.enchantments.indexOf(t);this.enchantments.splice(e,1),t.disenchant(),l.remove.forEach(function(e){return e(n,t)})},unblock:function(e){for(this.stack.length||f.impossible("Section.unblock","stack is empty"),this.stackTop.blocked=!1,void 0!==e&&(this.stackTop.blockedValues=(this.stackTop.blockedValues||[]).concat(e));this.stack.length&&!this.stackTop.blocked;)this.execute();if(!this.stack.length)for(;0<this.unblockCallbacks.length;){var t;if(this.unblockCallbacks.shift()(),null!=(t=this.stackTop)&&t.blocked)return}},whenUnblocked:function(e,t){this.stack.length&&this.stackTop.blocked?this.unblockCallbacks=this.unblockCallbacks.concat(e):(t||e)()},blockedValue:function(){var e=this.stackTop;return e?e.blockedValues&&e.blockedValues.length?e.blockedValues.shift():(f.impossible("Section.blockedValue","blockedValues is missing or empty"),0):(f.impossible("Section.blockedValue","stack is empty"),0)}})}),define("state",["jquery","utils","passages","datatypes/customcommand","utils/operationutils","markup"],function(n,y,b,v,e,t){var i,w,C=e.toSource,E=e.is,k=t.lex,o=Object.assign,h=Object.create,e=Object.defineProperty,N=Array.isArray,s=Math.imul,t=(e(Map.prototype,"toJSON",{value:void 0}),e(Set.prototype,"toJSON",{value:void 0}),["localStorage","sessionStorage"].map(function(e){try{return!!window[e]&&(window[e].setItem("test","1"),window[e].removeItem("test"),!0)}catch(e){return!1}}));function S(e,t){var n=0<arguments.length&&void 0!==e?e:String.fromCodePoint(Date.now()%1114112),e=1<arguments.length&&void 0!==t?t:0;i.seedIter=e,i.seed=n;for(var r,a=0,o=2166136261;a<n.length;a+=1)r=s(n.charCodeAt(a),3432918353),o^=s(r<<15|r>>>17,461845907),o=s(o=o<<13|o>>>19,5)+3864292196|0;return o^=n.length,o=s(o^=o>>>16,2246822507),o=s(o^=o>>>13,3266489909),o=((o^=o>>>16)>>>0)+1831565813*e,function(){i.seedIter+=1;var e=o+=1831565813,e=s(e^e>>>15,1|e);return(((e^=e+s(e^e>>>7,61|e))^e>>>14)>>>0)/4294967296}}function r(e,t){for(var n,r=t.variables,a=h(null),o=e.length-1;0<=o;--o){for(var i,s,c=e[o],l=0,u=["mockVisits","mockTurns","seed","seedIter"];l<u.length;l++){var p=u[l];hasOwnProperty.call(c,p)&&!hasOwnProperty.call(t,p)&&(t[p]=c[p])}for(i in c.forgetVisits&&(t.forgetVisits=Math.max(t.forgetVisits||0,c.forgetVisits)),void 0!==c.turns&&(t.turns=(t.turns||0)+c.turns),t.pastVisits||(t.pastVisits=[]),o!==e.length-1&&(void 0!==e[o+1].visits&&Array.isArray(t.pastVisits[0])?t.pastVisits[0]:t.pastVisits).unshift(c.passage),void 0!==c.pastVisits&&t.pastVisits.unshift(c.pastVisits),void 0!==c.visits&&t.pastVisits.unshift(c.visits),c.variables)if("TwineScript_TypeDefs"===i)for(var d in r[i]||(r[i]=h(null)),c.variables[i])r[i][d]||(r[i][d]=c.variables[i][d]);else i.startsWith("TwineScript_")||i in r||(null===c.variables[i]&&(a[i]=!0),a[i])||(r[i]=c.variables[i],!(s=c.valueRefs[i]))||"via"in s||t.valueRefs[i]||(t.valueRefs[i]=s)}for(n in t.valueRefs){var f=t.valueRefs[n];f&&"via"in f&&delete t.valueRefs[n]}}var a,c={passage:"",variables:h(null),visits:void 0,turns:void 0,seed:void 0,seedIter:void 0,mockVisits:void 0,mockTurns:void 0,forgetVisits:void 0,create:function(e){var t=h(c);return t.passage=e||"",t.variables=h(null),t.valueRefs=h(null),t}},l={forward:[],back:[],load:[],beforeForward:[],beforeBack:[],beforeLoad:[],forgetUndos:[]},u=[],p=-1,d=c.create(),f="";function m(){i.history=i.pastVisits.slice(i.forgetVisits).reduce(function(e,t){return e.concat(t)},[]),i.mockVisits&&(i.history=i.mockVisits.concat(i.history))}function g(){var e=c.create();e.pastVisits=[],o(e.variables,{TwineScript_ObjectName:"this story's variables",TwineScript_TypeDefs:h(null),TwineScript_VariableStore:{type:"global",name:"this story's variables"},TwineScript_Delete:function(e){delete this[e],d.variables[e]=null,delete d.valueRefs[e]},TwineScript_Set:function(e,t,n){if(this[e]=t,d.variables[e]=t,n)d.valueRefs[e]=n;else if((N(t)||t instanceof Map||t instanceof Set||"string"==typeof t)&&!y.options.uncompressedStructures)for(var r=p;0<=r;--r){var a=u[r].variables[e];if(void 0!==a){a=function e(t,n,r){var a="it"===r?"its":r+"'s",o="";if(N(n)&&N(t)&&n.length){for(var i=n.length===t.length,o="(a:",s=0;s<n.length;s+=1){var c,l,u,p=n[s];E(p,t[s])?(c=C(p),l="".concat(a," ").concat(s+1,"th"),o+=(c.length<l.length?c:l)+","):(i=!1,-1<(c=t.indexOf(p))?(l=C(p),u="".concat(a," ").concat(c+1,"th"),o+=(l.length<u.length?l:u)+","):o+=e(t[s],p,"".concat(a," ").concat(s+1,"th"))+",")}o=i?r:o.slice(0,-1)+")"}else if(n instanceof Map&&t instanceof Map&&n.size){var d,f=n.size===t.size,h=(o="(dm:",_createForOfIteratorHelper(n.entries()));try{for(h.s();!(d=h.n()).done;){var m,g,y=_slicedToArray(d.value,2),b=y[0],v=y[1];o+="".concat(C(b),","),E(v,t.get(b))?(m=C(v),g="".concat(a," (").concat(C(b),")"),o+=(m.length<g.length?m:g)+","):(f=!1,o+=e(t.get(b),v,"".concat(a," (").concat(C(b),")"))+",")}}catch(e){h.e(e)}finally{h.f()}o=f?r:o.slice(0,-1)+")"}else if(n instanceof Set&&t instanceof Set&&n.size){var w,k=new Set,S=new Set,T=_createForOfIteratorHelper(t);try{for(T.s();!(w=T.n()).done;){var _=w.value;n.has(_)||k.add(_)}}catch(e){T.e(e)}finally{T.f()}var x,O=_createForOfIteratorHelper(n);try{for(O.s();!(x=O.n()).done;){var A=x.value;t.has(A)||S.add(A)}}catch(e){O.e(e)}finally{O.f()}k.size||S.size||(o=r),o=k.size+S.size>n.size?C(n):r+(S.size?"+"+C(S):"")+(k.size?"-"+C(k):"")}else"string"==typeof n&&"string"==typeof t&&n&&(n.startsWith(t)?o=r+"+"+C(n.slice(t.length)):n.endsWith(t)&&(o=C(n.slice(0,n.length-t.length))+"+"+r));return o?"it"===r?{via:o}:o:"it"===r?void 0:C(n)}(a,t,"it");a&&("it"===a.via?delete d.variables[e]:d.valueRefs[e]=a);break}}},TwineScript_GetProperty:function(e){return this[e]},TwineScript_DefineType:function(e,t){this.TwineScript_TypeDefs[e]=t,hasOwnProperty.call(d.variables,"TwineScript_TypeDefs")||(d.variables.TwineScript_TypeDefs=h(null)),d.variables.TwineScript_TypeDefs[e]=t}}),r(u.slice(0,p+1),e),i=e,m(),w=S(e.seed,e.seedIter)}function T(e){d=c.create(e);e=a.serialise(!0),f=e.past,e=e.pastAndPresent;if(a.hasSessionStorage&&"string"==typeof e)try{sessionStorage.setItem("Saved Session",e)}catch(e){}}function _(e,t,n,r){for(var a in r)if(hasOwnProperty.call(r,a)&&!a.startsWith("TwineScript_"))if("object"===_typeof(r[a]))if(hasOwnProperty.call(r[a],"at")){n.valueRefs[a]=r[a];var o=r[a],i=o.at,s=o.from,c=o.to,l=o.hash,u=o.seed,p=o.seedIter,o=o.blockedValues;if(!b.has(i))throw Error('The data refers to a passage named `"'.concat(n.passage,"\"`, but it isn't in this story."));var d=b.get(i).get("source"),f=d.slice(s,c);if(void 0!==l)for(var h=0,m=c-s;y.hash(f).toString(16)!==l;){if(h+m>=d.length)throw Error("The value (or type) of the variable `$".concat(a,"` couldn't be found in the passage `\"").concat(i,'"`.'));(h+=1)===s&&(h+=1),f=d.slice(h,h+m)}c=k(f,"","macro");void 0!==u&&void 0!==p&&(w=S(u,p)),void 0!==o&&(e.stackTop.blockedValues=o,c.forEach(function e(t){var n;"string"!==t.type&&"hook"!==t.type&&t.children.every(e),"macro"!==t.type||"prompt"!==(n=y.insensitiveName(t.name))&&"confirm"!==n||(t.blockedValue=!0)})),r[a]=e.eval(c)}else if(hasOwnProperty.call(r[a],"via")){for(var g=t.length-1;0<=g;--g)if(hasOwnProperty.call(t[g].variables,a)){e.Identifiers.it=t[g].variables[a];break}r[a]=e.eval(k(r[a].via,"","macro")),e.Identifiers.it=0}else hasOwnProperty.call(r[a],"changer")&&(r[a].changer=e.eval(k(r[a].changer,"","macro")),r[a].hook=e.eval(k(r[a].hook,"","macro")),_(e,t,n,r[a].variables),r[a]=v.create(r[a]));else r[a]=e.eval(k(r[a],"","macro"));else"TwineScript_MockVisits"===a&&(n.mockVisits=r[a])}return g(),d.seed=i.seed,d.seedIter=0,(a={get passage(){return d.passage},get variables(){return i.variables},get pastLength(){return p},get turns(){return p+1+(i.turns||0)+(i.mockTurns||0)},get futureLength(){return u.length-1-p},get mockVisits(){return i.mockVisits||[]},set mockVisits(e){i.mockVisits=e,d.mockVisits=e,m()},get mockTurns(){return i.mockTurns||0},set mockTurns(e){i.mockTurns=e,d.mockTurns=e},history:function(){return i.history},forgetUndos:function(e){e<0&&(e=u.length+e);var t,e=u.splice(0,Math.min(u.length-1,e));e.length&&(p=u.length-1,t=u[0],r(e,t),t.pastVisits.push(e[e.length-1].passage),t.turns=(t.turns||0)+e.length,i.turns=(i.turns||0)+e.length,t.forgetVisits&&(t.pastVisits=t.pastVisits.slice(t.forgetVisits-t.turns),t.forgetVisits-=t.turns),f="",0===p&&n("tw-link[undo], tw-icon[alt='Undo']",y.storyElement).each(function(e,t){(n(t).closest("tw-expression, tw-hook").data("forgetUndosEvent")||Object)(t)}),l.forgetUndos.forEach(function(e){return e()}))},forgetVisits:function(e){(e=e<0?u.length+e:e)>p+i.turns&&(e=p+i.turns),d.forgetVisits=i.forgetVisits=Math.max(i.forgetVisits||0,e),m()},passageNameVisited:function(e){var t=0;if(!b.get(e))return 0;for(var n=0;n<i.history.length;n++)t+=+(e===i.history[n]);return t},get timeline(){return u},play:function(t){var e;d||y.impossible("State.play","present is undefined!"),l.beforeForward.forEach(function(e){return e()}),d.passage&&((null!=(e=d.visits)&&e.length&&Array.isArray(i.pastVisits[i.pastVisits.length-1])?i.pastVisits[i.pastVisits.length-1]:i.pastVisits).push(d.passage),i.history.push(d.passage)),d.passage=t,u=u.slice(0,p+1).concat(d),p+=1,T(t),l.forward.forEach(function(e){return e(t)})},redirect:function(e){var t;d||y.impossible("State.redirect","present is undefined!"),d.passage&&(null!=(t=d.visits)&&t.length&&Array.isArray(i.pastVisits[i.pastVisits.length-1])?i.pastVisits[i.pastVisits.length-1].push(d.passage):i.pastVisits.push([d.passage]),i.history.push(d.passage)),d.visits=(d.visits||[]).concat(e),d.passage=e},rewind:function(e){for(var t=void 0!==e?e:1,n=!1;0<t&&0<p;t--)n=!0,--p;return n&&(l.beforeBack.forEach(function(e){return e()}),f="",T(u[p].passage),g(),l.back.forEach(function(e){return e()})),n},fastForward:function(e){var t=1,n=!1;for("number"==typeof e&&(t=e);0<t&&0<u.length;t--)n=!0,p+=1;return n&&(l.beforeForward.forEach(function(e){return e()}),T(u[p].passage),g(),l.forward.forEach(function(e){return e(u[p].passage,"fastForward")})),n},on:function(e,t){if(e in l)return"function"!=typeof t||l[e].includes(t)||l[e].push(t),a;y.impossible("State.on","invalid event name")},reset:function(){l.beforeLoad.forEach(function(e){return e()}),u=[],p=-1,g(),(d=c.create()).seed=i.seed,d.seedIter=0,f="",w=S(),l.load.forEach(function(e){return e(u)})},hasStorage:t[0],hasSessionStorage:t[1],setSeed:function(e){w=S(e),d.seed=i.seed,d.seedIter=0},get seed(){return i.seed},get seedIter(){return i.seedIter},random:function(){var e=w();return d.seedIter=i.seedIter,e},shuffled:function(){for(var a=this,e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.reduce(function(e,t,n){var r=a.random()*(n+1)|0;return r===n?e.push(t):(e.push(e[r]),e[r]=t),e},[]);return d.seedIter=i.seedIter,r}}).serialise=function(e){function o(e,t){if("TwineScript_TypeDefs"===t){var n,r={};for(n in e[t])r[n]=C(e[t][n]);return r}var a;return null===e[t]?null:e[t]&&hasOwnProperty.call(e[t],"TwineScript_CustomCommand")?(a=e[t].TwineScript_CustomCommand(),{changer:C(a.changer),toSource:a.toSource,hook:C(a.hook),variables:Object.keys(a.variables).reduce(function(e,t){return e[t]=o(a.variables,t),e},{})}):C(e[t])}function t(e,t){if(c.isPrototypeOf(t)&&void 0===t.visits&&void 0===t.turns&&void 0===t.mockVisits&&void 0===t.forgetVisits&&void 0===t.pastVisits&&void 0===t.mockTurns&&void 0===t.seed&&void 0===t.seedIter&&Object.keys(t.variables).every(function(e){return e.startsWith("TwineScript_")}))return t.passage;if(!c.isPrototypeOf(this)||"valueRefs"!==e){if(c.isPrototypeOf(this)&&"variables"===e){var n,r={};for(n in this.variables)this.valueRefs[n]?r[n]=this.valueRefs[n]:r[n]=o(this.variables,n);return r}return t}}var e=u.slice(f?e?p-1:p:0,p+1),n=e.slice(0,-1),r=f;try{return{past:r=n.length?(r?r.slice(0,-1)+",":"[")+JSON.stringify(n,t).slice(1):r,pastAndPresent:r.slice(0,-1)+(r?",":"[")+JSON.stringify(e.slice(-1),t).slice(1)}}catch(e){return{past:!1,pastAndPresent:!1}}},a.deserialise=function(e,t){var n;try{n=JSON.parse(t)}catch(e){return Error("The save data is unintelligible.")}if(!N(n))return Error("The save data isn't a sequence of past turns.");for(var r=0;r<n.length;r+=1){var a=n[r];if("string"==typeof a)a={passage:a,variables:{}};else if("object"!==_typeof(a)||!hasOwnProperty.call(a,"variables")){n.splice(r--,1);continue}if(a.valueRefs=h(null),a.variables=o(h(null),a.variables),!b.hasValid(a.passage))return Error('The data refers to a passage named `"'.concat(a.passage,"\"`, but it isn't in this story."));if(hasOwnProperty.call(a.variables,"TwineScript_TypeDefs"))try{_(e,n.slice(0,r),a,a.variables.TwineScript_TypeDefs)}catch(e){return Error("The variable types on turn ".concat(r+1," couldn't be reconstructed.").concat(e.message?" (".concat(e.message,")"):""))}try{_(e,n.slice(0,r),a,a.variables)}catch(e){return Error("The variables on turn ".concat(r+1," couldn't be reconstructed.").concat(e.message?" (".concat(e.message,")"):""))}n[r]=o(h(c),a)}return p=(u=n).length-1,l.load.forEach(function(e){return e(u)}),f="",g(),T(u[p].passage),!0},Object.seal(c),Object.freeze(a)}),define("utils",["jquery","markup","utils/polyfills"],function(d){var r=String.fromCharCode,n="audio,blockquote,canvas,div,h1,h2,h3,h4,h5,hr,ol,p,pre,table,ul,video,tw-align,tw-story,tw-passage,tw-sidebar,tw-columns,tw-column,tw-meter".split(","),a="a,b,i,em,strong,sup,sub,abbr,acronym,s,strike,del,big,small,script,img,button,input,tw-link,tw-broken-link,tw-verbatim,tw-collapsed,tw-error,tw-colour,tw-icon".split(","),f=["audio"],e=_slicedToArray([function(e){return r(e)!==r(e).toLowerCase()},function(e){return r(e)!==r(e).toUpperCase()},function(e){return r(e).toLowerCase()!==r(e).toUpperCase()}].map(function(e){return"["+Array.from(Array(57343)).map(function(e,t){return t}).filter(e).map(function(e,t,n){return e===n[t-1]+1&&e===n[t+1]-1?"-":r(e)}).join("").replace(/-+/g,"-")+"]"}),3),t=e[0],o=e[1],e=e[2];function s(e){return"instant"===e?0:800}var i,c,l=[],u={},p=0,h={},m=0,g={};function y(n,r,e,a,o){var i=null,s=0,c=r+e;function l(e){var t;1&n[0].compareDocumentPosition(document)&&(c=0),i&&(c-=t=e-i),i=e,0<a&&0<p+m&&n.data("expediteAnim")(a),c<=r&&(s+=t||0,"paused"===n.css("animation-play-state"))&&n.css({visibility:"","animation-play-state":"running"}),c<=0?(n.removeData("expediteAnim"),o()):requestAnimationFrame(l)}n.data("expediteAnim",function(e){var t;c-=e=void 0===e?s:e,"running"===n.css("animation-play-state")&&n.css("animation-delay",(("ms"===(t=(t=n.css("animation-delay")).toLowerCase()).slice(-2)?+t.slice(0,-2)||0:"s"===t.slice(-1)&&1e3*+t.slice(0,-1)||0)||0)-e+"ms")}),c?requestAnimationFrame(l):l()}d(document.documentElement).on("keydown keyup mousedown mouseup",function(e){var t=e.key,n=e.button,e=e.type.includes("down"),r=t?u:h,n=t&&v.insensitiveName(t)||n;r[n]&&!e?t?p=Math.max(p-1,0):m=Math.max(m-1,0):!r[n]&&e&&(t?p+=1:m+=1),r[n]=e}).on("mousemove",function(e){var t=e.pageX,e=e.pageY;g.x=t,g.y=e});var b=/-|_/g,v={hash:function(e){for(var t=9,n=e.length;0<n;)--n,t=Math.imul(t^e.charCodeAt(n),Math.pow(9,9));return(t^t>>>9)>>>0},permutations:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r,a,o=t.length,i=[[].concat(t)],s=Array(o).fill(0),c=1;c<o;)s[c]<c?(r=c%2&&s[c],a=t[c],t[c]=t[r],t[r]=a,++s[c],c=1,i.push([].concat(t))):(s[c]=0,++c);return i},nth:function(e){var t=+e+"";return e+("1"!==t[t.length-1]||1!==t.length&&"1"===t[t.length-2]?"2"!==t[t.length-1]||1!==t.length&&"1"===t[t.length-2]?"3"!==t[t.length-1]||1!==t.length&&"1"===t[t.length-2]?"th":"rd":"nd":"st")},plural:function(e,t,n){return e+" "+(1!==Math.abs(e)?n||t+"s":t)},andList:function(e){return e.length<=1?e[0]:e.slice(0,-1).join(", ")+" and "+e[e.length-1]},realWhitespace:"[ \\n\\r\\f\\t\\v\\u00a0\\u2000-\\u200a\\u2028\\u2029\\u202f\\u205f\\u3000]",anyRealLetter:"[\\dA-Za-z\\u00c0-\\u00de\\u00df-\\u00ff\\u0150\\u0170\\u0151\\u0171\\uD800-\\uDFFF]",anyUppercase:t,anyLowercase:o,anyCasedLetter:e,anyNewline:"(?:\\n|\\r|\\r\\n)",unescape:function(e){return e.replace(/&(?:amp|lt|gt|quot|nbsp|zwnj|#39|#96);/g,function(e){return{"&amp;":"&","&gt;":">","&lt;":"<","&quot;":'"',"&#39;":"'","&nbsp;":String.fromCharCode(160),"&zwnj;":String.fromCharCode(8204)}[e]})},escape:function(e){return e.replace(/[&><"']/g,function(e){return{"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#39;"}[e]})},insensitiveName:function(e){return(e+"").toLowerCase().replace(b,"")},allKeysDown:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.every(function(e){return u[e]})},someKeysDown:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.some(function(e){return u[e]})},buttonsDown:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.every(function(e){return h[e]})},anyInputDown:function(){return 0<p+m},mouseCoords:g,parentColours:function(e){for(var t,n={colour:null,backgroundColour:null},r=/^\w+a\(.+?,\s*0\s*\)$|^transparent$/;e.length&&e[0]!==document;e=e.parent())if(n.backgroundColour||(t=e.css("background-color")).match(r)||(n.backgroundColour=t),n.colour||(t=e.css("color")).match(r)||(n.colour=t),n.colour&&n.backgroundColour)return n;return{colour:"#fff",backgroundColour:"#000"}},childrenProbablyInline:function(e){var t=[];return[].every.call(e.findAndFilter("*"),function(e){if(!(e.hidden||/none|inline/.test(e.style.display)||/display: (none|inline)/.test(e.getAttribute("style")))){if(n.includes(e.tagName.toLowerCase())||/display: (?!none|inline|inherit|unset)/.test(e.getAttribute("style")))return!1;a.includes(e.tagName.toLowerCase())||t.push(e)}return!0})&&t.every(function(e){return/inline|none/.test(window.getComputedStyle(e).display)})},transitionOut:function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,a=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,o=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0,i=6<arguments.length&&void 0!==arguments[6]?arguments[6]:void 0;0!==e.length&&(n=n||s(t),!(1<e.length)&&v.childrenProbablyInline(e)&&["tw-hook","tw-passage","tw-sidebar","tw-expression"].includes(e.tag())||(e=e.wrapAll("<tw-transition-container>").parent()),i&&e.css("transform-origin",i),e.attr("data-t8n",t).addClass("transition-out").css({"animation-duration":"".concat(n,"ms"),"animation-delay":"".concat(-o,"ms"),"animation-play-state":"paused"}),requestAnimationFrame(function(){v.childrenProbablyInline(e)?e.css("display","inline"):e.parent().is("tw-backdrop,tw-story")||e[0].setAttribute("style",e[0].getAttribute("style")+"display:block !important;width:100%")}),y(e,n,r-o,a,function(){e.remove()}))},transitionIn:function(u,e,t){var p,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,a=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0,o=6<arguments.length&&void 0!==arguments[6]?arguments[6]:void 0;0!==u.length&&(t=t||s(e),(p=1<u.length||!v.childrenProbablyInline(u)||!["tw-hook","tw-passage","tw-sidebar","tw-expression"].includes(u.tag()))&&(u=u.wrapAll("<tw-transition-container>").parent()),o&&u.css("transform-origin",o),u.attr("data-t8n",e).addClass("transition-in").css(_objectSpread({"animation-duration":"".concat(t,"ms"),"animation-delay":"".concat(-a,"ms")},n-a?{visibility:"hidden","animation-play-state":"paused"}:{})),requestAnimationFrame(function(){v.childrenProbablyInline(u)?u.css("display","inline"):u.parent().is("tw-backdrop,tw-story")||u[0].setAttribute("style",u[0].getAttribute("style")+"display:block !important;width:100%")}),y(u,t,n-a,r,function(){var e=0===u.filter(f.join(",")).length;if(p&&e){u.find("tw-transition-container, .transition-in, .transition-out").each(function(e,t){((t=d(t)).data("expediteAnim")||Object)()});for(var t=[],n=u.find("*"),r=0;r<n.length;r+=1){var a=n[r];0===a.scrollTop&&0===a.scrollLeft||t.push([a,a.scrollLeft,a.scrollTop])}e=u.find(document.activeElement);u.contents().unwrap();for(var o=0,i=t;o<i.length;o++){var s=_slicedToArray(i[o],3),c=s[0],l=s[1],s=s[2];c.scrollLeft=l,c.scrollTop=s}e.length&&e[0].focus()}else u.removeClass("transition-in").removeAttr("data-t8n")}))},debounce:function(e){function t(){300<Date.now()-l||s<=u?(u=n=0,p=!i,o?(e(c),c=[]):e.apply(void 0,_toConsumableArray(c)),p=!1):n=requestAnimationFrame(t)}var n,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},a=r.batch,o=void 0!==a&&a,a=r.recur,i=void 0!==a&&a,a=r.maxWait,s=void 0===a?1/0:a,c=[],l=0,u=0,p=!1;return function(){var e;p||(e=Date.now(),u+=e-l,l=e,o?c.push(arguments):c=arguments,n&&cancelAnimationFrame(n),n=requestAnimationFrame(t))}},impossible:function(e,t){window.console&&console.error(e+"(): "+t)},onStartup:function(e){l?l.push(e):e()},get storyElement(){return i},detachStoryElement:function(){document.documentElement.contains(i[0])&&(c=i.parent(),i.detach())},reattachStoryElement:function(){document.documentElement.contains(i[0])||(c||d(document.body)).append(i.parents().length?i.parents().last():i)},options:{speedMultiplier:1}};return d(function(){i=d("tw-story"),l.forEach(function(e){return e()}),l=null}),Object.freeze(v)}),define("datatypes/assignmentrequest",["utils/operationutils","datatypes/typedvar","datatypes/datatype","internaltypes/varref","internaltypes/twineerror"],function(e,y,b,v,w){var k=e.objectName,S=e.matches,t=e.toSource;return Object.freeze({assignmentRequest:!0,TwineScript_TypeName:"a VariableToValue (a 'to' or 'into' expression)",TwineScript_ObjectName:"a VariableToValue (a 'to' or 'into' expression)",TwineScript_ToSource:function(){return"into"===this.operator?"".concat(t(this.src)," ").concat(this.operator," ").concat(t(this.dest)):"".concat(t(this.dest)," ").concat(this.operator," ").concat(t(this.src))},TwineScript_Unstorable:!0,set:function(){var e,t=0<arguments.length&&void 0!==arguments[0]&&arguments[0],n=[],r=function e(t,n,r){var a=!(2<arguments.length&&void 0!==r)||r,o=[],i=n&&v.isPrototypeOf(n)?n.get():n;if(w.containsError(i))return i;if(Array.isArray(i)&&Array.isArray(t)){for(var s=0,c=0;s<t.length&&c<i.length;){var l=t[s],u=i[c];if(y.isPrototypeOf(l)&&l.datatype.rest||b.isPrototypeOf(l)&&l.rest){for(var p=c;c<i.length&&S(l,u);)u=i[c+=1];y.isPrototypeOf(l)?l.datatype=[l.datatype]:b.isPrototypeOf(l)&&(l=b.create("array")),o=o.concat(e(l,v.isPrototypeOf(n)?v.create(n,{first:p+1,last:c+1}):i.slice(p,c)))}else o=o.concat(e(l,v.isPrototypeOf(n)?v.create(n,c+1):u)),c+=1;s+=1}return s<t.length?a&&w.create("operation","I can't unpack this array because it needs ".concat(t.length-s," more value").concat(0<t.length-s?"s":"",".")):o}if(t instanceof Map&&i instanceof Map){var d,f=_createForOfIteratorHelper(t.entries());try{for(f.s();!(d=f.n()).done;){var h=_slicedToArray(d.value,2),m=h[0],g=h[1];if(!i.has(m))return a&&w.create("operation","I can't unpack this datamap because it needs a '"+m+"' data name.");o=o.concat(e(g,v.isPrototypeOf(n)?v.create(n,m):i.get(m)))}}catch(e){f.e(e)}finally{f.f()}return o}if(y.isPrototypeOf(t)){if("function"==typeof t.datatype.destructure)return[{dest:t,value:i,src:n}].concat(t.datatype.destructure(i));if(!S(i,t.datatype))return a&&w.create("operation","I can't put ".concat(k(i)," into ").concat(t.varRef.TwineScript_ToSource()," because it doesn't match ").concat(t.varRef.TwineScript_ToSource(),"'s datatype, ").concat(k(t.datatype),"."));o=o.concat(e(t.datatype,i))}return v.isPrototypeOf(t)||y.isPrototypeOf(t)?o.concat({dest:t,value:i,src:n}):"function"==typeof t.destructure?o.concat(t.destructure(i)):S(i,t)?o:a&&w.create("operation","I tried to unpack, but "+k(t)+" in the pattern didn't match "+k(i)+".")}(this.dest,this.src);if(e=w.containsError(r))return e;if(!r.length)return w.create("operation","I can't store a new value inside "+k(this.dest)+" that isn't in a variable.","You need a variable, or a data structure containing variables at certain positions, to store the value.");var a,o=_createForOfIteratorHelper(r.reverse());try{for(o.s();!(a=o.n()).done;){var i=a.value,s=i.dest,c=i.value,l=i.src;if(y.isPrototypeOf(s)){if(e=w.containsError(s.defineType()))return e;s=s.varRef}if(e=s.set(c,this.srcRef),w.isPrototypeOf(e))return e;t&&l&&l.delete(),n.shift(k(s)+" is now "+k(c))}}catch(e){o.e(e)}finally{o.f()}return n.join("; ")},create:function(e,t,n,r){return w.containsError(e)?e:w.containsError(t)?t:Object.assign(Object.create(this),{dest:e,src:t,operator:n,srcRef:r})}})}),define("datatypes/changercommand",["utils","utils/operationutils","internaltypes/changedescriptor","internaltypes/twineerror"],function(e,t,n,r){var i=e.plural,a=e.impossible,o=t.is,s=t.toSource,c={},l={TwineScript_TypeID:"changer",TwineScript_TypeName:"a changer",TwineScript_Print:function(){return"`[A ("+this.macroName+":) changer]`"},TwineScript_ToSource:function(){return"("+this.macroName+":"+("else"===this.name?"":this.params.map(s))+")"+(this.next?"+"+this.next.TwineScript_ToSource():"")},get TwineScript_ObjectName(){1===this.params.length&&36<(e=s(this.params[0])).length&&(e=void 0);for(var e,t="a (".concat(this.macroName,":").concat(e||"",") changer"),n=this.next,r=(n&&(t+=" combined with "),0);n&&t.length<48;){var a="(".concat(n.macroName,":)");t+=(0<r&&!n.next?" and ":"")+a+(n.next?", ":""),n=n.next,r+=1}for(var o=0;n&&o<99;)n=n.next,o+=1;return 0<o&&(t+="".concat(0<r?" and ":"").concat(i(o,"other changer"))),t},summary:function(){var e=n.create();return this.run(e),e.summary()},create:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,r=!(3<arguments.length&&void 0!==arguments[3])||arguments[3];return Array.isArray(t)||a("ChangerCommand.create","params was not an array but "+t),Object.assign(Object.create(this),{macroName:e,params:t,next:n,canEnchant:r})},"TwineScript_+":function(e){for(var t=this.TwineScript_Clone(),n=t;n.next;)n=n.next;return n.next=e,t.canEnchant=this.canEnchant&&e.canEnchant,t},TwineScript_is:function(e){if(l.isPrototypeOf(e))return this.macroName===e.macroName&&o(this.params,e.params)&&o(this.next,e.next)},TwineScript_Clone:function(){for(var e=l.create(this.macroName,this.params,this.next),t=e;t.next;)t=t.next=t.next.TwineScript_Clone();return e.canEnchant=this.canEnchant,e},run:function(e,t){var n="output"===this.macroName?[t||this]:this.params,n=c[this.macroName].apply(c,[e].concat(_toConsumableArray(n)));if(r.containsError(n))return n;this.next&&this.next.run(e,t||this)},register:function(e,t){c[e]=t}};return Object.freeze(l)}),define("datatypes/codehook",[],function(){var t=Object.freeze({TwineScript_TypeName:"a code hook",TwineScript_ObjectName:"a code hook",TwineScript_ToSource:function(){return this.source},TwineScript_Print:function(){return this.code},TwineScript_toString:function(){return this.source},TwineScript_is:function(e){return t.isPrototypeOf(e)&&this.source===e.source},TwineScript_Clone:function(){return t.create(this.code,this.source)},create:function(e,t){return Object.assign(Object.create(this),{code:e,source:t})}});return t}),define("datatypes/colour",["jquery"],function(c){var l=Math.max,u=Math.min,a=Math.sin,o=Math.cos,i=Math.pow,p=Math.round,d=Math.floor,s=Math.atan2,f=Math.cbrt,h=Math.sqrt,m=Math.PI,g=Object.assign,y=Object.create,b=/^([\da-fA-F])([\da-fA-F])([\da-fA-F])$/,t=/^([\da-fA-F])([\da-fA-F])([\da-fA-F])([\da-fA-F])([\da-fA-F])([\da-fA-F])$/,v=y(null);function w(e,t){for(var n=arguments.length,r=new Array(2<n?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];if(0<r.length)return w.apply(void 0,[w(e,t)].concat(r));if(!t)return e;for(var o=[],i=0;i<e.length;i++){o[i]=[];for(var s=0;s<t[0].length;s++){for(var c=0,l=0;l<e[0].length;l++)c+=e[i][l]*t[l][s];o[i][s]=c}}return o}function n(e){var t,n=e.r,r=e.g,a=e.b,e=e.a,o=l(n/=255,r/=255,a/=255),i=u(n,r,a),s=(o+i)/2,c=o-i;if(o===i)return{h:0,s:0,l:s};switch(o){case n:t=(r-a)/c+(r<a?6:0);break;case r:t=(a-n)/c+2;break;case a:t=(n-r)/c+4}return{h:t=p(60*t),s:.5<s?c/(2-o-i):c/(o+i),l:s,a:e}}var k=[.9642956764295677,1,.8251046025104602],S=24389/27,T=216/24389,_=function(e){return e.map(function(e){return[e]})},x=function(e){return e.map(function(e){return e[0]})};function O(e){var t=e.l,n=e.c,r=e.h,e=e.a,n=[t*=100,n*o(r*m/180),n*a(r*m/180)],r=[];r[1]=(n[0]+16)/116,r[0]=n[1]/500+r[1],r[2]=r[1]-n[2]/200;n=[i(r[0],3)>T?i(r[0],3):(116*r[0]-16)/S,S*T<t?i((16+t)/116,3):t/S,i(r[2],3)>T?i(r[2],3):(116*r[2]-16)/S].map(function(e,t){return e*k[t]}),t=_slicedToArray(x(w([[3.2409699419045226,-1.537383177570094,-.4986107602930034],[-.9692436362808796,1.8759675015077202,.04155505740717559],[.05563007969699366,-.20397695888897652,1.0569715142428786]],w([[.9554734527042182,-.023098536874261423,.0632593086610217],[-.028369706963208136,1.0099954580058226,.021041398966943008],[.012314001688319899,-.020507696433477912,1.3303659366080753]],_(n)))).map(function(e){return u(255,l(0,255*(.0031308<(e=e)?1.055*i(e,1/2.4)-.055:12.92*e)))}),3);return{r:t[0],g:t[1],b:t[2],a:e}}function e(e){function t(e){return 1e-5<=n[e]&&n[e]<=255-1e-5}var n=O(e);if(Object.keys(n).every(t))return n;var r=(e=_objectSpread({},e)).c,a=0;for(e.c/=2;1e-5<r-a;)n=O(e),Object.keys(n).every(t)?a=e.c:r=e.c,e.c=(r+a)/2;return O(e)}var A=Object.freeze({TwineScript_TypeID:"colour",TwineScript_TypeName:"a colour",TwineScript_ObjectName:"a colour",TwineScript_DebugName:function(){return"a colour "+this.TwineScript_Print()},"TwineScript_+":function(e){var t=this.toRGBA(),e=e.toRGBA();return A.create({r:u(p(.6*(t.r+e.r)),255),g:u(p(.6*(t.g+e.g)),255),b:u(p(.6*(t.b+e.b)),255),a:(t.a+e.a)/2})},TwineScript_Print:function(){var e=this.toRGBA();return"<tw-colour style='background-color:rgba("+[e.r,e.g,e.b,e.a]+");'></tw-colour>"},TwineScript_is:function(e){var t;return!!A.isPrototypeOf(e)&&(e.lcha&&this.lcha?e.lcha.l===this.lcha.l&&e.lcha.c===this.lcha.c&&e.lcha.h===this.lcha.h&&e.a===this.a:(t=this.toRGBA(),(e=e.toRGBA()).r===t.r&&e.g===t.g&&e.b===t.b&&e.a===t.a))},TwineScript_Clone:function(){return A.create(this)},toRGBAString:function(){var e=this.toRGBA(),t=e.r,n=e.g,r=e.b,e=e.a;return"rgba(".concat(t,", ").concat(n,", ").concat(r,", ").concat(e,")")},toHSLA:function(){return n(this.toRGBA())},toRGBA:function(){return this.lch?e(_objectSpread({a:this.a},this.lch)):this},toLCHA:function(){return this.lch?_objectSpread({a:this.a},this.lch):(t=(e=this).r,n=e.g,r=e.b,e=e.a,n=[116*(t=x(w([[1.0479298208405488,.022946793341019088,-.05019222954313557],[.029627815688159344,.990434484573249,-.01707382502938514],[-.009243058152591178,.015055144896577895,.7518742899580008]],w([[.41239079926595934,.357584339383878,.1804807884018343],[.21263900587151027,.715168678767756,.07219231536073371],[.01933081871559182,.11919477979462598,.9505321522496607]],_([t/255,n/255,r/255].map(function(e){return e<.04045?e/12.92:i((e+.055)/1.055,2.4)}))))).map(function(e,t){return e/k[t]}).map(function(e){return T<e?f(e):(S*e+16)/116}))[1]-16,500*(t[0]-t[1]),200*(t[1]-t[2])],r=180*s(n[2],n[1])/m,{l:n[0]/100,c:h(i(n[1],2)+i(n[2],2)),h:0<=r?r:360+r,a:e});var e,t,n,r},LCHRotate:function(e){e<0&&(e=360+e);var t=this.toLCHA();return t.h=(t.h+e)%360,A.create(t)},TwineScript_GetProperty:function(e){var t;return"lch"===e?(t=this.toLCHA(),new Map([["l",t.l],["c",t.c],["h",t.h]])):(t=this.toRGBA(),"h"===e||"s"===e||"l"===e?n(t)[e]:"r"===e||"g"===e||"b"===e||"a"===e?t[e]:void 0)},TwineScript_Properties:["h","s","l","r","g","b","a","lch"],TwineScript_ToSource:function(){if(0===this.a)return"transparent";var e=!this.lch&&n(this);if(1===e.l&&!e.h&&!e.s)return"white";if(0===e.l&&!e.h&&!e.s)return"black";if(.5<=e.l&&e.l<.5334&&0===e.s)return"gray";if(.5===e.l&&.8<=e.s&&e.s<.804){var t={0:"red",30:"orange",60:"yellow",90:"lime",120:"green",180:"cyan",210:"blue",240:"navy",270:"purple",300:"magenta"}[e.h];if(t)return t}return"(".concat(this.lch?"lch":"hsl",":").concat(this.lch?[this.lch.l,this.lch.c,this.lch.h]:[e.h,e.s,e.l]).concat(1!==this.a?","+this.a:"",")")},create:function(e){var t,n,r,a,o,i;return"string"==typeof e?this.create((A.isHexString(e)?function(e){return"string"!=typeof e?e:(e=(e=e.replace("#","")).replace(b,"$1$1$2$2$3$3"),{r:parseInt(e.slice(0,2),16),g:parseInt(e.slice(2,4),16),b:parseInt(e.slice(4,6),16)})}:function(e){var t;return e in v?v[e]:(t="transparent"===(t=c("<p>").css("background-color",e).css("background-color"))?{r:0,g:0,b:0,a:0}:t.startsWith("rgb")?t.match(/\d+/g).reduce(function(e,t,n){return e["rgb"[n]]=+t,e},{}):{r:192,g:192,b:192},v[e]=t)})(e)):!("h"in e&&"s"in e&&"l"in e)||"r"in e||"g"in e||"b"in e?("a"in e&&"number"==typeof e.a||(e.a=1),"h"in e&&"c"in e&&!("s"in e)&&"l"in e?g(y(this),{a:e.a,lch:{l:e.l,c:e.c,h:e.h}}):g(y(this),e)):this.create((a=(t=e).h,o=e.s,i=e.l,t=e.a,0===o?{r:e=d(255*i),g:e,b:e}:(r=2*i-(n=i<.5?i*(1+o):i+o-i*o),{r:d(255*s((a/=360)+1/3)),g:d(255*s(a)),b:d(255*s(a-1/3)),a:t})));function s(e){return e<0&&(e+=1),1<e&&--e,e<1/6?r+6*(n-r)*e:e<.5?n:e<2/3?r+(n-r)*(2/3-e)*6:r}},isHexString:function(e){return"string"==typeof e&&"#"===e[0]&&(e.slice(1).match(b)||e.slice(1).match(t))},isCSS3Function:function(e){return"string"==typeof e&&/^(?:rgb|hsl)a?\(\s*\d+(?:\.\d+)?\s*,\s*\d+(?:\.\d+)?%?\s*,\s*\d+(?:\.\d+)?%?(?:,\s*\d+(?:\.\d+)?\s*)?\)$/.test(e)}});return A}),define("datatypes/customcommand",["internaltypes/changedescriptor","internaltypes/twineerror"],function(l,u){var p=Object.assign,d=Object.create;return Object.seal({TwineScript_TypeID:"command",TwineScript_ObjectName:"a custom command",TwineScript_TypeName:"a custom command",TwineScript_Print:function(){return"`[a custom command]`"},create:function(e){var t,n=e.toSource,r=e.changer,a=e.hook,o=e.variables,i={};for(t in o)i[t]=[o[t]];var s,c=l.create({source:a,loopVars:i},r);return u.containsError(c)?c:s=p(d(this),{TwineScript_Attach:function(e,t){c.section=e;e=t.run(c);return u.containsError(e)?e:s},TwineScript_Run:function(e){c.section=e;e=c;return c=l.create({source:a,loopVars:i},r),e},TwineScript_ToSource:function(){return n},TwineScript_CustomCommand:function(){return e}})}})}),define("datatypes/custommacro",["jquery","utils","renderer","utils/operationutils","datatypes/customcommand","internaltypes/varref","internaltypes/varscope","internaltypes/twineerror","internaltypes/twinenotifier"],function(w,e,k,t,S,T,_,x,O){function n(v){return function(e){v.called+=1;for(var t=v.varNames,n=v.params,r=v.body,a=E(N(_),{TwineScript_VariableStore:{type:"temp",name:v.TwineScript_ObjectName+" call #"+v.called},TwineScript_TypeDefs:N(null)}),o=[],i=0,s=!1,c=arguments.length,l=new Array(1<c?c-1:0),u=1;u<c;u++)l[u-1]=arguments[u];for(var p=0;p<l.length;p+=1){var d=l[p],f=t[i],h=(a.TwineScript_TypeDefs[f]=n[i].datatype.rest?n[i].datatype.create("array"):n[i].datatype,T.create(a,f));if(x.containsError(h))return h;if(n[i].datatype.rest){var s=!0,m=(a[f]||[]).concat([d]);if(p<l.length-1){a[f]=m;continue}h.set(m)}else h.set(d),i+=1;o.push(O.create(A(h)+" is now "+A(a[f])))}if(!s&&null!=(g=n[i])&&g.datatype.rest){var g=T.create(a,t[i]);if(x.containsError(g))return g;g.set([]),a.TwineScript_TypeDefs[name]=n[i].datatype.create("array")}var y,g=w("<p>").append(k.exec(r.code)),b=e.stack.length,r=(e.stack.unshift({tempVariables:a,dom:g,output:function(e){y=e}}),e.evalReplay);for(e.evalReplay=null,e.execute();e.stack.length>b;)e.stack.shift();e.evalReplay=r;r=g.find("tw-error");return r.length?(g.prepend(o.map(function(e){return e.render()}),"<br>"),x.create("propagated","".concat(r.length," error").concat(1<r.length?"s":""," occurred when running ").concat(v.TwineScript_ObjectName,"."),void 0,g)):void 0===y?x.create("custommacro","".concat(v.TwineScript_ObjectName," didn't output any data or hooks using (output:) or (output-data:).")):"object"===_typeof(y)&&"changer"in y?S.create(E(y,{toSource:"(".concat(v.TwineScript_KnownName||"unnamed",":").concat(l.map(C),")")})):y}}var r=e.andList,A=t.objectName,a=t.typeName,o=t.matches,C=t.toSource,E=Object.assign,N=Object.create,i=Object.seal({TwineScript_TypeID:"macro",TwineScript_TypeName:"a custom macro",TwineScript_GetProperty:function(e){if("params"===e)return _toConsumableArray(this.params)},TwineScript_Properties:["params"],TwineScript_Print:function(){return"`["+this.TwineScript_ObjectName+"]`"},TwineScript_Clone:function(){var e=E(N(i),this);return e.fn=n(e),e},TwineScript_ToSource:function(){return"(macro:"+this.params.map(function(e){return e.TwineScript_ToSource()}).concat("")+this.body.TwineScript_ToSource()+")"},createFromFn:function(e,t,n,r){return E(N(i),{params:[],fn:e,typeSignature:r,TwineScript_ObjectName:t,TwineScript_ToSource:n,TwineScript_KnownName:""})},create:function(e,t){t=E(N(i),{params:e,called:0,varNames:e.map(function(e){return e.varRef.propertyChain[0]}),typeSignature:e.map(function(t){var e=t.datatype.toTypeSignatureObject?t.datatype.toTypeSignatureObject({rest:t.rest}):{pattern:"range",range:function(e){return o(t.datatype,e)},name:a(t.datatype)};return t.rest?{pattern:"zero or more",innerType:e}:e}),body:t,TwineScript_KnownName:"",TwineScript_ObjectName:"a custom macro (with ".concat(e.length?r(e.map(C)):"no params",")")});return t.fn=n(t),t}});return i}),define("datatypes/datatype",["utils","utils/operationutils","datatypes/changercommand","datatypes/colour","datatypes/gradient","datatypes/lambda","datatypes/custommacro","datatypes/codehook","internaltypes/twineerror"],function(e,t,n,r,a,o,i,s,c){var l=e.realWhitespace,u=e.anyRealLetter,p=e.anyCasedLetter,d=e.anyNewline,f=t.objectName,e=Object.seal,h=Object.keys,m=Math.floor,g=Math.abs,y={TwineScript_TypeID:"datatype",TwineScript_TypeName:"a datatype",TwineScript_Print:function(){return"`["+this.TwineScript_ObjectName+"]`"},get TwineScript_ObjectName(){return"the "+(this.rest?"...":"")+this.name+" datatype"},TwineScript_is:function(e){return y.isPrototypeOf(e)&&e.name===this.name},TwineScript_Clone:function(){return this.rest?this:Object.create(this)},TwineScript_ToSource:function(){return(this.rest?"...":"")+this.name},TwineScript_IsTypeOf:function(e){var t=this.name,n=this.rest;return!!v[t]&&v[t](e,n)},toTypeSignatureObject:function(){var e=this.name,e={pattern:"range",range:v[e],name:"a "+("dm"===e?"datamap":"ds"===e?"dataset":"num"===e?e+"ber":"str"===e?e+"ing":"color"===e?"colour":"bool"===e?e+"ean":"alnum"===e?"alphanumeric character":"int"===e?e+"eger":"even"===e||"odd"===e?e+" number":e.endsWith("case")||"whitespace"===e?e+" character":"empty"===e?e+" value":e)};return this.rest?{pattern:"zero or more",innerType:e}:e},create:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=(e="datamap"===e?"dm":"dataset"===e?"ds":"number"===e?"num":"string"===e?"str":"color"===e?"colour":"boolean"===e?"bool":"alphanumeric"===e?"alnum":"integer"===e?"int":"newline"===e?"linebreak":e,Object.create(this));return n.name=e,n.rest=t,n},from:function(t){var e=h(b).find(function(e){return b[e](t)});return e?y.create(e):c.create("datatype",f(t)+" doesn't correspond to a datatype value.")}},b={array:Array.isArray,dm:function(e){return e instanceof Map},ds:function(e){return e instanceof Set},datatype:function(e){return y.isPrototypeOf(e)},changer:function(e){return n.isPrototypeOf(e)},colour:function(e){return r.isPrototypeOf(e)},gradient:function(e){return a.isPrototypeOf(e)},lambda:function(e){return o.isPrototypeOf(e)},macro:function(e){return i.isPrototypeOf(e)},codehook:function(e){return s.isPrototypeOf(e)},command:function(e){return e&&"command"===e.TwineScript_TypeID},str:function(e){return"string"==typeof e},num:function(e){return"number"==typeof e},bool:function(e){return"boolean"==typeof e}},v=_objectSpread(_objectSpread({},b),{},{even:function(e){return!isNaN(e)&&m(g(e))%2==0},odd:function(e){return!isNaN(e)&&m(g(e))%2==1},empty:function(e){return e instanceof Map||e instanceof Set?!e.size:!(!Array.isArray(e)&&"string"!=typeof e||e.length)},int:function(e){return"number"==typeof e&&e===(0|e)},uppercase:function(e){return"string"==typeof e&&1===_toConsumableArray(e).length&&_toConsumableArray(e).every(function(e){return e!==e.toLowerCase()})},lowercase:function(e){return"string"==typeof e&&1===_toConsumableArray(e).length&&_toConsumableArray(e).every(function(e){return e!==e.toUpperCase()})},whitespace:function(e){return"string"==typeof e&&!!e.match("^"+l+"$")},digit:function(e){return"string"==typeof e&&!!e.match("^\\d$")},alnum:function(e){return"string"==typeof e&&!!e.match("^"+u+"$")},anycase:function(e){return"string"==typeof e&&!!e.match("^"+p+"$")},linebreak:function(e){return"string"==typeof e&&!!e.match("^"+d+"$")},any:function(){return!0},const:function(){return!0}});return e(y)}),define("datatypes/gradient",["utils/operationutils"],function(e){var t=e.toSource,n=Object.freeze({TwineScript_TypeID:"gradient",TwineScript_TypeName:"a gradient",TwineScript_ObjectName:"a gradient",TwineScript_DebugName:function(){return"a gradient "+this.TwineScript_Print()},TwineScript_GetProperty:function(e){var t=this;return"angle"===e?this.angle:"stops"===e?this.stops.map(function(e){return new Map([[t.repeating?"pixels":"percent",e.stop],["colour",e.colour.TwineScript_Clone()]])}):void 0},TwineScript_Properties:["angle","stops"],TwineScript_ToSource:function(){return"(gradient:"+this.angle+","+this.stops.map(function(e){return t(e.stop)+","+t(e.colour)})+")"},TwineScript_is:function(e){var r=this;return e.angle===this.angle&&e.stops.length===this.stops.length&&e.stops.every(function(e,t){var n=e.colour,e=e.stop;return r.stops[t].stop===e&&r.stops[t].colour.TwineScript_is(n)})},TwineScript_Clone:function(){return n.create(this.angle,_toConsumableArray(this.stops))},TwineScript_Print:function(){return"<tw-colour style='background:"+this.toLinearGradientString()+"'></tw-colour>"},create:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2];return Object.assign(Object.create(this),{angle:e,stops:t.sort(function(e,t){return e.stop-t.stop}),repeating:n})},multiply:function(t){return n.create(this.angle,this.stops.map(function(e){return{colour:e.colour,stop:e.stop*t}}))},toLinearGradientString:function(){var r=this;return(this.repeating?"repeating-":"")+"linear-gradient(".concat(this.angle,"deg, ").concat(this.stops.reduce(function(e,t){var n=t.colour,t=t.stop;return e+n.toRGBAString()+" "+t*(r.repeating?1:100)+(r.repeating?"px,":"%,")},"").slice(0,-1),")")}});return n}),define("datatypes/hookset",["jquery","utils","utils/renderutils","utils/operationutils"],function(g,s,e,t){var y=e.textNodeToChars,b=e.realWhitespace,c=e.findTextInNodes,r=t.toSource;function l(e){function t(n,e){if(Array.isArray(e))return e.reduce(function(e,t){return e.add(n.get(t))},g());if(e&&"object"===_typeof(e)&&"first"in e&&"last"in e){for(var t=e.first,r=e.last,a=n.length,o=(t<0&&(t+=a),r<0&&(r+=a),[n.get(t)]);t!==r;)t+=Math.sign(r-t),o.push(n.get(t));return g(o)}if("string"==typeof e){if("chars"===e){var i,s=[],c=_createForOfIteratorHelper(n.textNodes(m));try{for(c.s();!(i=c.n()).done;){var l,u=i.value,p=_createForOfIteratorHelper(y(u));try{for(p.s();!(l=p.n()).done;){var d=l.value;d.textContent.match(b)||s.push(d)}}catch(e){p.e(e)}finally{p.f()}}}catch(e){c.e(e)}finally{c.f()}return g(s)}if("links"===e)return n.findAndFilter("tw-link, .enchantment-link");if("visited"===e)return n.findAndFilter("tw-link.visited");var f,h;if("lines"===e)return f=n.findAndFilter("br:not(tw-sidebar *),tw-consecutive-br:not(tw-sidebar *)").get(),h=[[]],n.contents().each(function e(t,n){var r=(n.tagName||"").toLowerCase();if("tw-sidebar"!==r)if("tw-passage"===r||"tw-transition-container"===r)g(n).contents().each(e);else{if(f.length){if(n===f[0])return f.shift(),void h.push([]);if(16&n.compareDocumentPosition(f[0]))return h.push([]),g(n).contents().each(e),void h.push([])}h[h.length-1].push(n)}}),g(h.map(function(e){return!!e.length&&g(e).wrapAll("<tw-pseudo-hook>").parent()[0]}).filter(Boolean))}return g(n.get(e))}var n,r,a=e.dom,m=":not(tw-error, tw-error *)",o=g();this.next&&(o=o.add(l.call(this.next,e)));if(this.selector){if("string"===this.selector.type)i=this.selector.data,n=c((n=a).textNodes(),i),r=g(),n.forEach(function(e){r=r.add(g(e).wrapAll("<tw-pseudo-hook>").parent())}),i=r;else{if("base"===this.selector.type)return o.add(t(l.call(this.selector.data,e),this.property));n=this.selector.data,e='tw-hook[name="'+(n=s.insensitiveName(n).replace(/"/g,"&quot;"))+'"],tw-enchantment[name="'+n+'"]';var e=e+={page:", tw-story",passage:", tw-passage",sidebar:", tw-sidebar",link:", tw-link, .enchantment-link"}[n]||"",i=a.findAndFilter(e).add(a.parentsUntil(s.storyElement.parent())).filter(e)}o=this.property?o.add(t(i,this.property)):o.add(i)}return o=o.get().reduce(function(e,t){return t=g(t),e.add(t.is("tw-enchantment")&&t.contents().length<=1?t.contents():t)},g())}function a(e){var t,n;return e?(t=e.selector,n=e.property,e=e.next,[JSON.stringify(["base"===t.type?a(t.data):s.insensitiveName(t.data),n])].concat(_toConsumableArray(a(e))).sort()):[]}var o=Object.freeze({forEach:function(e,n){var t=l.call(this,e).each(function(e,t){return n(g(t),e)});return e.dom.findAndFilter("tw-pseudo-hook").contents().unwrap(),t},hooks:function(e){return l.call(this,e)},get TwineScript_ObjectName(){return"the hook name ".concat(this.TwineScript_ToSource())},TwineScript_TypeID:"hookName",TwineScript_TypeName:"a hook name (like ?this)",TwineScript_Unstorable:!0,TwineScript_ToSource:function(){var e="",t=this.selector,n=t.type,t=t.data;return"name"===n?t.match(RegExp("^"+s.anyRealLetter+"+$"))?e+="?"+t:e+="(hooks-named:"+JSON.stringify(t)+")":"string"===n?e+=JSON.stringify(t):"base"===n&&(e+=t.TwineScript_ToSource()+"'s "+r(this.property,"property")),this.next&&(e+=" + "+this.next.TwineScript_ToSource()),e},"TwineScript_+":function(e){for(var t=this.TwineScript_Clone(),n=t;n.next;)n=n.next;return n.next=e,t},TwineScript_is:function(e){return a(this)+""==a(e)+""},TwineScript_GetProperty:function(e){return o.create({type:"base",data:this},e,void 0)},TwineScript_Properties:["chars","links","lines","visited"],TwineScript_Clone:function(){return o.create(this.selector,this.property,this.next)},create:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:void 0;return Object.assign(Object.create(this||o),{selector:Object.freeze(e),property:t,next:n})},from:function(e){return o.isPrototypeOf(e)||"string"==typeof e||s.impossible("HookSet.from() was given a non-HookSet non-string."),o.isPrototypeOf(e)?e:o.create({type:"string",data:e})}});return o}),define("datatypes/lambda",["utils/operationutils","internaltypes/varscope","internaltypes/varref","internaltypes/twineerror"],function(e,h,s,m){var g=e.objectName;var c=Object.freeze({TwineScript_TypeID:"lambda",TwineScript_TypeName:"a lambda",get TwineScript_ObjectName(){return'a "'+("making"in this?"making ... ":"")+("each"in this?"each ... ":"")+("where"in this?"where ... ":"")+("when"in this?"when ... ":"")+("via"in this?"via ... ":"")+'" lambda'},TwineScript_Print:function(){return"`[A lambda]`"},TwineScript_is:function(e){return e===this},TwineScript_ToSource:function(){return this.source},TypeSignature:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{pattern:"lambda",innerType:c,clauses:t,typeName:'a "'+t.concat("").join(" ...")+'" lambda'}},TwineScript_Clone:function(){return Object.assign(Object.create(c),this)},create:function(e,t,n,r){var a,o="temp variable, or typed temp variable";function i(e){e=e&&e.varRef?e.varRef:e;return void 0===e||e&&s.isPrototypeOf(e)&&h.isPrototypeOf(e.object)&&1===e.propertyChain.length}if(m.containsError(n))return n;if("making"===t&&!i(n))return m.create("syntax","I need a "+o+", to the right of '"+t+"', not "+g(n)+".");if(m.containsError(e))return e;if(c.isPrototypeOf(e)){if("when"===t||"when"in e)return m.create("syntax","A 'when' lambda cannot have any other clauses, such as '"+t+"'.");if(t in e)return m.create("syntax","This lambda has two '"+t+"' clauses.");a=e}else{if("when"===t&&void 0!==e)return m.create("syntax","A 'when' lambda shouldn't begin with a temp variable (just use 'when' followed by the condition).");if(!i(e))return m.create("syntax","This lambda needs to start with a single "+o+", not "+g(e)+".");(a=Object.create(this)).loop=e||""}return a.source=r.trim(),a[t]=n,a.making&&a.making.getName()===(a.loop&&a.loop.getName())?m.create("syntax","This lambda has two variables named '"+a.loop.getName()+"'.","Lambdas should have all-unique parameter names."):a},apply:function(e,t){var n=t.loop,r=t.pos,a=t.making,o=t.ignoreVia;function i(e,t){if(e){var n,r;if("datatype"in e&&"varRef"in e)return n=e.varRef.create(s,e.varRef.propertyChain),m.containsError(n)?n:(r=n.defineType(e.datatype),m.containsError(r)||(r=n.set(t),m.containsError(r))?r:void 0);s[e.getName()]=t}}var s=(s=t.tempVariables)||Object.create(e.stack.length?e.stackTop.tempVariables:h),t=i(this.loop,n)||i(this.making,a);if(m.containsError(t))return t;e.stack.unshift(Object.assign(Object.create(e.stackTop||null),{tempVariables:s,lambdaPos:this.when?void 0:r})),!n||this.making||this.when?e.Identifiers.it=m.create("operation","I can't use 'it', or an implied 'it', in "+this.TwineScript_ObjectName):e.Identifiers.it=n;var c,l,u,p,d,t=!o&&this.via,o="where"in this||"when"in this,f=e.evalReplay;return e.evalReplay=f?[]:null,o?(c=e.eval(this.where||this.when),l=e.evalReplay,e.evalReplay=l&&t?[]:null,!n||this.making||this.when||(e.Identifiers.it=n),u=c,p=!t||e.eval(t),d=null,u=m.containsError(u)||("boolean"!=typeof u?m.create("operation","This lambda's 'where' clause must evaluate to true or false, not "+g(u)+"."):u?p:d)):c=u=!t||e.eval(t),p=t?e.evalReplay:null,e.stack.shift(),(e.evalReplay=f)&&(o||t)&&(((d=f[f.length-1])||{}).lambda&&d.lambda.obj===this||((d={lambda:{obj:this,loops:[]},code:(f[f.length-1]||{}).code||""}).fromCode=d.code,f.push(d)),d.lambda.loops.push(_objectSpread(_objectSpread(_objectSpread({it:n,pos:r},void 0!==a&&{making:a}),t&&{viaReplay:p,viaResult:u}),o&&{whereReplay:l,whereResult:null!==c&&c}))),u},filter:function(r,e){var a,o=this,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return e.reduce(function(e,t,n){return a||(n=o.apply(r,{loop:t,pos:n+1,ignoreVia:!0,tempVariables:i}),a=m.containsError(n))||e.concat(n?[t]:[])},[])}});return c}),define("datatypes/typedvar",["utils/operationutils","internaltypes/varref","internaltypes/twineerror"],function(e,a,o){var i=e.typeName,t=e.matches,n=e.toSource,s=e.unstorableValue,e=Object.freeze,c=Object.assign,l=Object.create,u=e({TwineScript_TypeName:"a TypedVar (typed variable name)",get TwineScript_ObjectName(){var e=n(this.datatype);return"the ".concat(e.length<24?e+"-":"","typed variable name, ").concat(this.varRef.TwineScript_ToSource())},TwineScript_Print:function(){return"`[A typed variable name]`"},TwineScript_Unstorable:!0,TwineScript_Clone:function(){return c(l(u),{datatype:this.datatype.TwineScript_Clone(),varRef:this.varRef})},TwineScript_ToSource:function(){return n(this.datatype)+"-type "+this.varRef.TwineScript_ToSource()},TwineScript_GetProperty:function(e){return"name"===e?this.getName():this[e]},TwineScript_Properties:["datatype","name"],TwineScript_IsTypeOf:function(e){return t(this.datatype,e)},get:function(){var e;return(e=this.varRef).get.apply(e,arguments)},getName:function(){return this.varRef.getName()},defineType:function(){if("any"!==this.datatype.name)return this.varRef.defineType(this.datatype)},create:function(e,t){var n,r;return(n=o.containsError(t)||o.containsError(e)||t.error)||(a.isPrototypeOf(t)?(n=t.object,r=t.compiledPropertyChain,n&&n.TwineScript_VariableStore&&1===r.length&&n.TwineScript_TypeDefs?(r=s(e))&&!u.isPrototypeOf(r)?o.create("syntax","The -type syntax can't have "+i(r)+" to its left."):c(l(this),{datatype:e,varRef:t}):o.create("unimplemented","I can only restrict the datatypes of variables, not data names or anything else.")):o.create("syntax","The -type syntax must have a variable to its right."))}});return u}),define("datatypes/varbind",["jquery","utils","utils/operationutils","internaltypes/varref","internaltypes/twineerror"],function(o,e,t,n,r){var a=t.objectName;return n.on("set",function(r,a){r.TwineScript_VariableStore&&e.storyElement.find("[data-2bind]").each(function(e,t){var n=(t=o(t)).data("twoWayBindEvent");"function"==typeof n&&n(t,r,a)})}),Object.freeze({TwineScript_TypeName:"a VarBind (bound variable name)",get TwineScript_ObjectName(){return"a ".concat(this.bind," bind to ").concat(this.varRef.TwineScript_ToSource())},TwineScript_Print:function(){return"`[A bound variable name]`"},TwineScript_Unstorable:!0,TwineScript_ToSource:function(){return("two way"===this.bind?"2":"")+"bind "+this.varRef.TwineScript_ToSource()},set:function(e){var e=this.varRef.set(e);if(e=r.containsError(e))return e},create:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"one way";return r.containsError(e)?e:n.isPrototypeOf(e)?e.error||Object.assign(Object.create(this),{varRef:e,bind:t}):r.create("operation","I can only 'bind' a variable, not "+a(e)+".")}})}),define("debugmode/highlight",["jquery","utils","utils/typecolours","macros","lexer"],function(u,e,t,p,n){var d=e.insensitiveName,f=t.versionClass,h=n.lex;return function(e,t,n,r){if(9999<e.length)return[u("<span>").text(e)];for(var a=h(e,"",t||"macro"),o=[],i="",s=a,c=a.start;c<a.end;c+=1){var l=a.pathAt(c);l[0]!==s[0]&&(o.length&&(o[o.length-1].textContent=i),i="",s=l,o.push(u("<".concat(r&&n<=c&&c<r?"mark":"span",' class="').concat(function(e){for(var t={},n="",r=0;r<e.length;r+=1){var a=e[r],o=a.type,i=a.text,s=("verbatim"!==o&&"comment"!==o||(n=""),f+o);switch(t[s]=(t[s]||0)+1,1<t[s]&&(s+="-"+t[s]),o){case"text":i.trim()&&e.slice(r+1).reduce(function(e,t){return void 0===e?"macro"===t.type||"hook"!==t.type&&e:e},void 0)&&(s+=" ".concat(f,"error"));break;case"macroName":var c,l=e[r].text[0];"_"!==l&&"$"!==l?(c=d(e[r].text.slice(0,-1)),p.has(c)?s+="-"+p.get(c).returnType.toLowerCase():s+=" ".concat(f,"error")):s+=" ".concat(f,"customMacro ").concat(f+("_"===l?"tempV":"v"),"ariable")}n+=s+" "}return n}(s),'">'))[0])),i+=a.text[c-a.start]}return o.length&&(o[o.length-1].textContent=i),o}}),define("debugmode/mode",["jquery","utils","utils/naturalsort","state","engine","internaltypes/varref","internaltypes/twineerror","utils/operationutils","utils/renderutils","passages","section","debugmode/panel","debugmode/highlight","utils/typecolours"],function(I,V,M,D,F,L,H,e,t,z,q,W,B,n){var U=e.objectName,$=e.isObject,G=e.toSource,Y=e.typeID,J=t.dialog,X=n.CSS,K=function(e,t){var f=V.escape,i=V.nth,n=V.debounce,r=I(document.documentElement),a=M(),o={darkMode:!0,fadePanel:!0,evalReplay:!0,width:null,maxHeight:400};if(D.hasStorage)try{var s=localStorage.getItem("(Debug Options "+V.options.ifid+")");s&&(o=JSON.parse(s))}catch(e){}function c(){if(D.hasStorage)try{localStorage.setItem("(Debug Options "+V.options.ifid+")",JSON.stringify(o))}catch(e){}}W.defaultMaxHeight=o.maxHeight;function l(e){return n(function(){if(V.options.debug)return e.apply(this,arguments)},{maxWait:2e3})}var h=I('<tw-debugger class="'.concat([o.darkMode?"theme-dark":"",o.fadePanel?"fade-panel":""].join(" "),'" style="').concat(o.width?"width:"+o.width+"px":"","\">\n<div class='panel panel-errors' hidden><table></table></div>\n<div class='tabs'></div>\n<label style='user-select:none'>Turns: </label><select class='turns' disabled></select>\n<button class='show-invisibles'>\ud83d\udd0d Debug View</button>\n<button class='show-dom'><span style=\"vertical-align:text-top\">&lt;</span><span style=\"vertical-align:text-bottom\">&gt;</span> DOM View</button>\n<button class='close'>\u2716</button>\n<div class='resizer-h'>\n</tw-debugger>")),s=h.find(".tabs"),u=h.find(".show-dom"),p=h.find(".show-invisibles"),d=h.find(".close"),m=h.find(".turns");I(document.documentElement).on("click","tw-expression, tw-error, tw-eval-explanation",n(function(e){var r,a,o,i,l,u,p,d,t=I(e.target).data("evalReplay");function n(){var e,s,c=r[a],t=o.find("tw-eval-explanation").empty(),n=o.find("tw-eval-code");c.toCode||c.toDesc||c.error||c.lambda?(o.find("tw-eval-code").empty().append(B(c.code,"macro",0<a&&c.start,0<a&&c.end+c.diff)),t.append(c.lambda?"":"<code class='".concat(56<c.fromCode.length?"from-block":"from-inline","'></code>"),c.error?"<span> caused an error: </span>":c.lambda?"<span>The lambda <code class='to-lambda'></code> was run, producing these results.</span>":"<span> became".concat(c.ToDesc?"\u2026":""," </span>").concat(c.toDesc?"<span class='to-desc'>".concat(f(c.toDesc),".</span>"):"<code class='to-code'></code>")),c.error?t.append(c.error):c.lambda?(s=function(e,t){return I("<".concat(e,"><code></").concat(e,">")).find("code").append(B(t,"macro")).end()},t.find(".to-lambda").append(B(c.lambda.obj.source,"macro")).end().append((e=I("<table>")).append.apply(e,[I("<tr>").append(s("th","pos"),c.lambda.obj.loop?s("th","_"+c.lambda.obj.loop.getName()).append(" / ",I("<code>").append(B("it","macro"))):s("th","it"),c.lambda.obj.making&&s("th","_"+c.lambda.obj.making.getName()),c.lambda.obj.where&&s("th","where").append(" result"),c.lambda.obj.via&&s("th","via").append(" result"))].concat(_toConsumableArray(c.lambda.loops.map(function(e){var t=e.it,n=e.pos,r=e.making,a=e.whereResult,o=e.whereReplay,i=e.viaResult,e=e.viaReplay;return I("<tr>").append(s("td",G(n)),s("td",G(t)),void 0!==r&&s("td",G(r)),null!=a&&(H.containsError(a)?I("<td>").append(a.render(c.lambda.obj.source,!0)):s("td",G(a))).append(o&&I("<tw-open-button replay label='\ud83d\udd0d'>").data("evalReplay",o)),null!=i&&(H.containsError(i)?I("<td>").append(i.render(c.lambda.obj.source,!0)):s("td",G(i))).append(e&&I("<tw-open-button replay label='\ud83d\udd0d'>").data("evalReplay",e)))})))))):c.toDesc||t.find(".to-code").append(B(c.toCode,"macro")),t.next().html(c.itIdentifier?'(The <code class="cm-harlowe-3-identifier">it</code> identifier now refers to '.concat(f(c.itIdentifier),".)"):"").next().text(c.reason||"")):(n.html(B(c.code,"macro")),t.html("<center>First, there was <code></code>.</center>").next().empty().next().empty()),c.lambda||t.find("code").first().append(B(c.fromCode,"macro")),o.find("mark").each(function(e,t){t.scrollIntoView()}),i.css("visibility",a<=9?"hidden":"visible"),l.css("visibility",a<=0?"hidden":"visible"),p.css("visibility",a>=r.length-1?"hidden":"visible"),d.css("visibility",a>=r.length-10?"hidden":"visible"),u.html("( ".concat(a+1,"/").concat(r.length," )"))}t&&(r=t,t=J({buttons:[{name:"Understood",confirm:!(a=0),callback:function(){return!h.find("tw-backdrop").length&&h.removeClass("show-dialog")}}]}).addClass("eval-replay"),o=I("<tw-eval-replay>".concat(1===r.length?"":"<tw-eval-code></tw-eval-code>","<tw-eval-explanation></tw-eval-explanation><tw-eval-it></tw-eval-it><tw-eval-reason></tw-eval-reason>").concat(1===r.length?"":"<tw-dialog-links><tw-link style='visibility:hidden'>\u2190 10</tw-link><tw-link style='visibility:hidden'>\u2190 \u2190</tw-link><b></b><tw-link>\u2192 \u2192</tw-link><tw-link>10 \u2192</tw-link></tw-dialog-links>","</tw-eval-replay>")),t.find("tw-dialog").css({width:"75vw","max-width":"75vw"}).prepend(o),i=o.find("tw-link:first-of-type"),l=i.next(),u=l.next(),p=u.next(),d=p.next(),n(),i.on("click",function(){a=Math.max(0,a-10),n()}),l.on("click",function(){a=Math.max(0,a-1),n()}),p.on("click",function(){a=Math.min(r.length-1,a+1),n()}),d.on("click",function(){a=Math.min(r.length-1,a+10),n()}),h.find("tw-backdrop").length?h.find("tw-backdrop").before(t):h.addClass("show-dialog").append(t));var s,t=I(e.target).data("goto");t&&(s=V.options.ignoreGotos,V.options.ignoreGotos=!1,t.command.TwineScript_Run(t.section),V.options.ignoreGotos=s),e.stopPropagation()})),h.find(".resizer-h").mousedown(function(e){if(1!==e.which)return!0;e.stopPropagation();var t=e.pageX,n=h.width();r.on("mousemove.debugger-resizer-h",function(e){e=e.pageX;h.width("".concat(n+t-e|0,"px"))}).on("mouseup.debugger-resizer-h",function(){r.off(".debugger-resizer-h"),o.width=h.width(),c()})}),h.on("mousedown",".resizer-v",function(e){if(1!==e.which)return!0;e.stopPropagation();var t=e.pageY,n=I(e.target.parentNode).height();r.on("mousemove.debugger-resizer-v",function(e){e=e.pageY;h.find(".panel").css("maxHeight","".concat(n+t-(0|e),"px"))}).on("mouseup.debugger-resizer-v",function(){r.off(".debugger-resizer-v"),o.maxHeight=h.find(".panel").css("maxHeight"),c()})}),p.click(function(){r.toggleClass("debug-mode").removeClass("dom-debug-mode"),p.toggleClass("enabled"),u.removeClass("enabled")}),u.click(function(){r.toggleClass("dom-debug-mode").removeClass("debug-mode"),u.toggleClass("enabled"),p.removeClass("enabled")}),d.click(function(){r.removeClass("debug-mode dom-debug-mode"),h.detach(),Object.assign(V.options,{debug:!1,speedMultiplier:1,ignoreClickEvents:!1,ignoreGotos:!1})});function g(e){(e=e.parents(".variable-row, .enchantment-row, .source-row")).next(".panel-row-source").find("td").empty().append(B(e.data("value")||G(e.data("enchantment").changer),e.is("source-row")?"markup":"macro"))}function y(){return k=new Set}function b(){I(document.body).append(h),V.options.debug=!0,V.options.evalReplay=o.evalReplay,V.options.speedMultiplier=1,V.options.ignoreClickEvents=!1,V.options.ignoreGotos=!1,R()}var v,w=l(function(){var r=m.children().get(),e=D.timeline,a=0;e.forEach(function(e,t){var n=e.turns,e=e.passage,n=(a+=1+(void 0===n?0:n))+": "+e;r[t]?r[t].textContent=n:m.append("<option value='".concat(t,"'>").concat(n,"</option>"))}),e.length<r.length&&I(r.slice(e.length)).remove(),m[1<=e.length?"removeAttr":"attr"]("disabled"),m.val(D.pastLength)}),k=(m.change(function(e){e=e.target.value-D.pastLength;0!=e&&(D[e<0?"rewind":"fastForward"](Math.abs(e)),F.showPassage(D.passage))}),w(),D.on("forward",w).on("load",w).on("forgetUndos",function(){return w}).on("back",function(){D.pastLength<=1&&m.attr("disabled"),m.find("[selected]").removeAttr("selected"),m.val(D.pastLength)}),new Set),S=W.create({className:"variables",tabName:"Variable",rowWrite:function(e,t){var n,r=e.name,a=e.dataset,o=e.path,i=e.value,s=e.tempScope,e=e.type,c=i&&48<i.length&&!i.TwineScript_DebugName,l=$(i)&&i.TwineScript_DebugName?i.TwineScript_DebugName():f(U(i)),u="",a=(o.length&&(u=o.reduce(function(e,t){return e+t+"'s "},"")),a&&(r="???"),e?G(e):""),e="object"===_typeof(i)||c;return t?(t[0].firstChild.innerHTML=a||"",u&&I(t[0].firstChild).children(".variable-path").html((s?"_":"$")+f(u)),t[0].childNodes[1].lastChild.textContent=(u?"":s?"_":"$")+f(r+""),t[0].childNodes[2].textContent=s||"",t[0].childNodes[3].innerHTML=l,n=(c=I(t[0].lastChild.firstChild)).is(".open"),c[e?"show":"hide"](),c=t.next(".panel-row-source"),n&&c.find("td").empty().append(B(G(i))),t.data("value",G(i)),t.add(c)):I('<div class="variable-row">').attr("data-name",r).attr("data-path",o+"").attr("data-scope",s||"").css("padding-left",Math.min(5,o.length)+"em").append("<td class='variable-type'>".concat(a||"","</td>"),"<td class='variable-name cm-harlowe-3-"+(s?"tempV":"v")+"ariable'><span class='variable-path'>"+(u?(s?"_":"$")+f(u):"")+"</span> "+(u?"":s?"_":"$")+f(r+"")+"</td>","<td class='temporary-variable-scope'>".concat(s||"","</td>"),"<td class='variable-value cm-harlowe-3-macroName-"+Y(i)+"'>"+l+"</td><td class='panel-row-buttons'><tw-folddown tabindex=0 style='display:"+(e?"visible":"none")+"'>(source:) </tw-folddown></td>").data("value",G(i)).find("tw-folddown").data("folddown",g).end().add("<tr class='variable-row panel-row-source' style='display:none'><td colspan='5'></td></tr>")},rowCheck:function(e,t){var n=e.name,r=e.path,e=e.tempScope;return t[0]&&t[0].getAttribute("data-name")===n&&t[0].getAttribute("data-path")===r+""&&t[0].getAttribute("data-scope")===e},columnHead:function(){return'<tr class="panel-head"><th data-col="variable-type">Type</th><th data-col="variable-name">Name</th><th data-col="temporary-variable-scope">Scope</th><th data-col="variable-value">Value</th></tr>'},rowSort:function(e,t,n){if("variable-value"===e)return a(t.attr("class"),n.attr("class"))||a(t.parent().data("value"),n.parent().data("value"))}}),T=l(function(){var e,t,o=[],n=D.variables,r=o.length;for(e in n)e.startsWith("TwineScript")||(r+=1,function n(e){var r,t,a;500<o.length||(o.push(e),r=e.path.concat(e.name),t=e.value,a=e.tempScope,r.length<=4&&(Array.isArray(t)?t.forEach(function(e,t){return n({name:i(t+1),path:r,value:e,tempScope:a})}):t instanceof Map?_toConsumableArray(t).forEach(function(e){var t=(e=_slicedToArray(e,2))[0],e=e[1];return n({name:t,path:r,value:e,tempScope:a})}):t instanceof Set&&_toConsumableArray(t).forEach(function(e,t){return n({name:t,dataset:!0,path:r,value:e,tempScope:a})})))}({name:e,path:[],value:n[e],tempScope:"",type:null==(t=n.TwineScript_TypeDefs)?void 0:t[e]}));o.push.apply(o,_toConsumableArray(k)),r+=k.size,S.update(o,r),0===r!==S.panel[0].classList.contains("panel-variables-empty")&&S.panel.toggleClass("panel-variables-empty")}),_=(L.on("set",function(e,t,n){var r,a;e===D.variables||"temp"!==(null==(a=e.TwineScript_VariableStore)?void 0:a.type)||null!=(a=e.TwineScript_VariableStore)&&a.name.match(/#\d+$/)||(r=null==(a=e.TwineScript_VariableStore)?void 0:a.name,e=null==(a=e.TwineScript_TypeDefs)?void 0:a[t],(a=_toConsumableArray(k).find(function(e){return e.name===t&&e.tempScope===r}))?a.value=n:k.add({name:t,path:[],value:n,tempScope:r,type:e})),T(),v()}).on("delete",function(){T(),v()}),S.panel.append("<div class='panel-variables-bottom'>\n\t\t\t<button class='panel-variables-copy'>Copy $ variables as (set:) call</button>\n\t\t\t<input class='clipboard' type=\"text\" style='opacity:0;pointer-events:none;position:absolute;'></input>\n\t\t</div>").removeAttr("hidden"),S.tab.addClass("enabled"),S.panel.find(".clipboard")),x=(r.on("click",".panel-variables-copy",function(){var e,t=[];for(e in D.variables)e.startsWith("TwineScript")||t.push("$"+e+" to "+G(D.variables[e]));_.val("(set:"+t+")")[0].select(),document.execCommand("copy")}),W.create({className:"enchantments",tabName:"Enchantment",rowWrite:function(e,t){var n=e.scope,r=e.changer,a=e.lambda,o=e.name,i=e.localHook,a=r?f(U(r)):a?f(G(a)):"<em>enchanted with ("+o+":)</em>";return t||I('<div class="enchantment-row">').data("enchantment",e).append("<td><span class='enchantment-name'>"+G(n)+(i?"</span><span class='enchantment-local cm-harlowe-3-hookName'>"+("function"==typeof i.TwineScript_ToSource?i.TwineScript_ToSource():i.attr("name")?"?"+i.attr("name"):"an unnamed hook"):"")+"</span></td><td class='enchantment-value cm-harlowe-3-macroName-"+(r?"changer":"command")+" '>"+a+"</td>"+(r?"<td class='panel-row-buttons'><tw-folddown tabindex=0>(source:)</tw-folddown></td>":"")).find("tw-folddown").data("folddown",g).end().add(r?I("<tr class='panel-row-source' style='display:none'><td colspan='3'></td></tr>"):"")},rowCheck:function(e,t){return t.data("enchantment")===e},columnHead:function(){return'<tr class="panel-head"><th data-col="enchantment-name">Scope</th><th data-col="enchantment-value">Value</th></div>'}})),d=l(function(e){x.update(e.enchantments,e.enchantments.length)}),O=(q.on("add",d).on("remove",d),q.create()),A=W.create({className:"storylets",tabName:"Storylet",rowWrite:function(e,t){var n=e.name,r=e.active,a=e.storyletSource,o=e.exclusive,e=e.urgent;return t?(t.toggleClass("storylet-closed",!r),t[0].firstChild.textContent=r?"\u2713":""):(t=I('<tr class="storylet-row '.concat(r?"":"storylet-closed",'">')).attr("data-name",n).append("<td class='storylet-open'>"+(r?"\u2713":"")+"</td><td class='storylet-name'>"+n+"</td><td class='storylet-lambda'></td><td class='storylet-exclusive'>"+o+"</td><td class='storylet-urgent'>"+e+"</td>")).find(".storylet-lambda").append(B(a.replace(/^when\s+/i,""))),t},rowCheck:function(e,t){e=e.name;return t[0].getAttribute("data-name")===f(e+"")},columnHead:function(){return'<tr class="panel-head"><th data-col="storylet-open" data-order="desc">Open</th><th data-col="storylet-name">Name</th><th data-col="storylet-lambda">Condition</th><th data-col="storylet-exclusive" class=\'storylet-exclusive\'>Exclusivity</th><th data-col="storylet-urgent" class=\'storylet-urgent\'>Urgency</th></tr>'}}),C=(A.tab.hide(),v=l(function(){var r,a,o=z.getStorylets(O),i=H.containsError(o),e=z.allStorylets();A.update(e.map(function(t){var e="number"==typeof t.get("exclusivity")?t.get("exclusivity"):0,n="number"==typeof t.get("urgency")?t.get("urgency"):0;return r=r||e,a=a||e,{name:t.get("name"),storyletSource:t.get("storylet").TwineScript_ToSource(),active:!i&&o.some(function(e){return e.get("name")===t.get("name")}),exclusive:e,urgent:n}}),i?0:o.length),A.panel.toggleClass("storylet-error",i),A.panel.toggleClass("panel-exclusive",r),A.panel.toggleClass("panel-urgent",a),e.length&&A.tab.show()}),W.create({className:"source",tabName:"Source",tabNameCounter:!1,rowWrite:function(e,t){var n=e.name,e=e.tag;return t?t.add(t.next(".panel-row-source")):(t=z.get(n).get("source"),I('<div class="source-row" data-tag="'.concat(e,'">')).data("value",t).append('<td class="source-name">'.concat(n,'</td><td class="source-tags">').concat(e,"</td><td class='panel-row-buttons'><tw-folddown class='").concat(e?"":"open","' tabindex=0></tw-folddown></td>")).find("tw-folddown").data("folddown",g).end().add(I("<tr class='panel-row-source' style='".concat(e?"display:none":"","'><td colspan='3'></td></tr>")).find("td").append(!e&&B(t,"markup")).end()))},rowCheck:function(e,t){e=e.name;return t[0].firstChild.textContent===f(e+"")},tabUpdate:I.noop,columnHead:I.noop})),E=["debug-startup","startup","header","debug-header","footer","debug-footer"].reduce(function(e,t){return e.concat(z.getTagged(t).map(function(e){return{name:e.get("name"),tag:t}}))},[]),N=W.create({className:"errors",tabName:"Error",rowWrite:I.noop,rowCheck:I.noop,columnHead:I.noop,tabUpdate:function(e){return N.tab.css({background:e?"rgba(230,101,204,0.3)":""}).text("".concat(e," Error").concat(1!==e?"s":""))}}),d=n(function(e){var t;V.options.debug&&(N.panelRows.append(e.reduce(function(e,t){var t=_slicedToArray(t,2),n=t[0],t=t[1];return"propagated"===n.type?e:e+'<tr class="error-row"><td class="error-passage">'+D.passage+'</td><td class="error-message" title="'+f(t)+'">'+n.message+"</td></tr>"},"")),500<(t=(e=N.panelRows.children()).length)&&I(Array.prototype.slice.call(N.panelRows[0].childNodes,0,t-500)).remove(),N.tabUpdate(Math.min(500,e.length)))},{batch:!0}),j=(H.on(d),N.panel.append("<div class='panel-errors-bottom'>\n\t\t\t<button class='panel-errors-clean'>\ud83e\uddf9 Clear this panel</button>\n\t\t</div>"),r.on("click",".panel-errors-clean",function(){N.panelRows.empty(),N.tabUpdate(0)}),W.create({className:"tools",tabName:"Tools",tabNameCounter:!1,rowWrite:function(e,t){var n=e.id,r=e.type,a=e.label,o=e.dropdownItems,i=e.dropdownValue;return"checkbox"===r?t?t.find("input").prop("checked",!1):I('<span><input id="debug-'.concat(n,'" type="checkbox"></input><label for="debug-').concat(n,'">').concat(a,"</label></span>")):"dropdown"===r?t?t.find("input").prop("checked",!1):I("<span>".concat(a,'<select style="width:3em" data-default="').concat(i,'" id="debug-').concat(n,'"></span>')).find("select").append(o.map(function(e){return"<option value='".concat(e,"' ").concat(e===i?"selected":"",">").concat(e,"x</option>")})).end():void 0},rowCheck:I.noop,columnHead:I.noop,tabUpdate:function(e){return j.tab.css({background:e?"hsla(210, 72%, 65%, .3)":""})}})),P=(r.on("click, change",'.panel-tools [type="checkbox"], .panel-tools select',function(e){var e=e.target,t=(e=I(e)).attr("id"),n=e.is(":checked")||e.is("select")&&e.val()!==+e.attr("data-default");"debug-peekBehindDialogs"===t&&r.toggleClass("debug-dialogs",n),"debug-ignoreClickEvents"===t&&(V.options.ignoreClickEvents=n),"debug-ignoreGotos"===t&&(V.options.ignoreGotos=n),"debug-speedMultiplier"===t&&(V.options.speedMultiplier=+e.val()),j.tabUpdate(n)}),j.update([{id:"peekBehindDialogs",type:"checkbox",label:"See through and click through <code>(dialog:)</code> boxes"},{id:"ignoreClickEvents",type:"checkbox",label:"Stop links, <code>(click:)</code> and <code>(hover-style:)</code> from activating"},{id:"ignoreGotos",type:"checkbox",label:"Stop <code>(go-to:)</code>, <code>(undo:)</code>, <code>(redirect:)</code> and <code>(restart:)</code> from activating<br><small>(Click 'GO' buttons in Debug View to activate later)</small>"},{id:"speedMultiplier",label:"Speed of timed events (<code>time</code>, <code>(live:)</code>, <code>(after:)</code>): ",type:"dropdown",dropdownValue:1,dropdownItems:[.25,.5,.75,1,1.25,1.5,1.75,2,3,5,10]}]),W.create({className:"options",tabName:"\u2699\ufe0f",tabNameCounter:!1,rowWrite:function(e,t){var n=e.name,e=e.label,r={darkMode:o.darkMode,fadePanel:o.fadePanel,evalReplay:o.evalReplay}[n];return t?t.find("input").prop("checked",r):I('<span><input id="debug-'.concat(n,'" type="checkbox" ').concat(r?"checked":"",'></input><label for="debug-').concat(n,'">').concat(e,"</label></span>"))},rowCheck:I.noop,tabUpdate:I.noop,columnHead:I.noop})),R=(r.on("click",'.panel-options [type="checkbox"]',function(e){var e=e.target,t=(e=I(e)).attr("id"),e=e.is(":checked");"debug-darkMode"===t&&(o.darkMode=e,h.toggleClass("theme-dark",e)),"debug-fadePanel"===t&&(o.fadePanel=e,h.toggleClass("fade-panel",e)),"debug-evalReplay"===t&&(V.options.evalReplay=o.evalReplay=e),c()}),P.update([{name:"darkMode",label:"Debug panel is dark"},{name:"fadePanel",label:"Debug panel is transparent unless the cursor is over it"},{name:"evalReplay",label:"Record expression replays (viewable via \ud83d\udd0d buttons in Debug View; slower)"}]),h.prepend(S.panel,x.panel,N.panel,A.panel,C.panel,j.panel,P.panel),s.prepend(S.tab,x.tab,N.tab,A.tab,C.tab,j.tab,P.tab),D.on("beforeForward",y).on("beforeBack",y).on("beforeLoad",y),l(function(){T(),v(),x.panelRows.empty(),x.tabUpdate(0),D.passage&&z.get(D.passage)&&(C.update(E.concat({name:D.passage,tag:""})),C.panel.find('[data-tag=""], [data-tag=""] + .panel-row-source').insertBefore(C.panel.find('[data-tag="footer"]').first()))}));D.on("forward",R).on("back",R).on("load",R);K=b,I(document.head).append(I("<style>").html(X)),b(),e&&d(e,t)};return F.registerDebugMode(function(e,t){return!V.options.debug&&K(e,t)}),K}),define("debugmode/panel",["jquery","utils/naturalsort"],function(d,e){var i=e();return Object.seal({create:function(e){var n,t=e.className,r=e.rowWrite,a=e.rowCheck,o=e.rowSort,i=e.columnHead,s=e.tabName,c=e.tabNameCounter,l=void 0===c||c,c=e.tabUpdate,u=d("<div class='panel panel-".concat(t,"' style='").concat(this.defaultMaxHeight?"max-height:"+this.defaultMaxHeight+"px":"","' hidden><div class=\"resizer-v\"></div><table class='panel-rows'></table></div>")),p=d("<button class='tab tab-".concat(t,"'>").concat(l?"0 ".concat(s,"s"):s,"</button>"));return p.click(function(){p.toggleClass("enabled"),p.parent().siblings(".panel").attr("hidden",""),p.is(".enabled")&&(p.siblings(".tab:not(.tab-"+t+")").removeClass("enabled"),u.removeAttr("hidden"))}),u.on("click","th",function(e){var e=e.target,t="desc"===(e=d(e)).attr("data-order")?"asc":"desc";n.sort(e.attr("data-col"),t),u.find("th[data-order]").removeAttr("data-order"),e.attr("data-order",t)}),c=c||function(e){return p.text(l?"".concat(e," ").concat(s).concat(1!==e?"s":""):s)},n=Object.assign(Object.create(this),{tabName:s,tab:p,panel:u,panelRows:u.find(".panel-rows"),rowWrite:r,rowSort:o,rowCheck:a,columnHead:i,tabUpdate:c})},sort:function(r,a){var o=this;this.panelRows.children(":not(.panel-head, .panel-row-source)").get().sort(function(e,t){var n;return"desc"===a&&(e=(n=[t,e])[0],t=n[1]),e=e.querySelector("."+r),t=t.querySelector("."+r),o.rowSort&&o.rowSort(r,d(e),d(t))||i(e.textContent,t.textContent)}).forEach(function(e){var t=d(e).next(".panel-row-source").get();o.panelRows.append(e,t)})},update:function(e,t){var r=this.rowCheck,a=this.rowWrite,o=this.panelRows,n=this.columnHead,i=this.panel,s=[],c=o.children(),e=(e.forEach(function(t){var e=c.get().filter(function(e){return r(t,d(e))}),n=a(t,e.length&&d(e));e.length||o.append(n),s.push.apply(s,_toConsumableArray(n.get()))}),c.filter(function(e,t){return!s.includes(t)&&!t.className.includes("panel-head")}).remove(),this.tabUpdate(t),0<t&&!o.find(".panel-head").length?o.prepend(n()):0===t&&o.find(".panel-head").remove(),i.find("th[data-order]"));e.length&&this.sort(e.attr("data-col"),e.attr("data-order"))},defaultMaxHeight:300})}),define("internaltypes/changedescriptor",["jquery","utils","renderer","datatypes/hookset","internaltypes/twineerror"],function(b,e,t,v,n){function w(e){return("string"==typeof e?e:e.map(function(e){return e.text}).join("")).split(/\n/g).reduce(function(e,t,n,r){r=r.length;return e.concat(document.createTextNode(t),n!==r-1&&document.createElement(t.length?"br":"tw-consecutive-br"))},[])}var k=e.impossible,S=e.transitionIn,T=t.exec,r=Object.assign,p=Object.keys,a=Object.create,e=Object.seal,_=Array.isArray,x={source:"",appendSource:null,enabled:!0,enablers:null,verbatim:!1,target:null,append:"",newTargets:null,transition:"",transitionTime:null,transitionDeferred:!1,transitionDelay:0,transitionSkip:0,transitionOrigin:null,loopVars:null,styles:null,attr:null,data:null,innerEnchantments:null,section:null,timestamp:0,output:!1,summary:function(){var t=this;return["source","appendSource","enabled","verbatim","target","append","newTargets","transition","transitionTime","transitionDeferred","transitionDelay","transitionSkip","transitionOrigin","innerEnchantments","enablers","output"].filter(function(e){return hasOwnProperty.call(t,e)}).concat([this.attr.length&&"attr",this.styles.length&&"styles",p(this.loopVars).length&&"loopVars",p(this.data).length&&"data"].filter(Boolean))},create:function(e,t){e=r(a(this),{attr:this.attr?this.attr.slice():[],styles:this.styles?this.styles.slice():[],loopVars:this.loopVars||{},data:this.data||{}},e);if(t){t=t.run(e);if(n.containsError(t))return t}return e},update:function(){function e(t){var e,n,r;_(a.styles)&&0<a.styles.length&&(n=(e=_slicedToArray(a.styles.reduce(function(n,r){return p(r).forEach(function(e){var t=r[e];n[+("function"==typeof t)].push(_defineProperty({},e,t))}),n},[[],[]]),2))[0],r=e[1],n.forEach(function(e){return t.css(e)}),setTimeout(function(){r.forEach(function(e){return t.css(e)})})),a.attr&&a.attr.forEach(function(e){return t.attr(e)}),a.data&&t.data(a.data)}var a=this,t=this.section,n=this.newTargets,r=this.transition,o=this.transitionDeferred,i=this.append,s=this.target;"function"==typeof s&&(s=s());if(_(n)&&n.length&&(s=n.map(function(e){return e.target})),_(s))for(var c=0;c<s.length;c+=1)v.isPrototypeOf(s[c])?s[c].forEach(t,e):e(s[c]);else v.isPrototypeOf(s)?s.forEach(t,e):e(s);if(r&&!o&&!i){for(var l,u=s;(l=u.data("timestamp"))||(u=u.parent()),!l&&u.length;);S(s,r,this.transitionTime,this.transitionDelay,this.transitionSkip,l?Date.now()-l:0,this.transitionOrigin)}},render:function(){var e,r=this,t=this.source,n=this.transition,a=this.transitionTime,o=this.transitionDeferred,i=this.enabled,s=this.enablers,c=this.data,l=this.section,u=this.newTargets,p=this.innerEnchantments,d=this.appendSource,f=this.output,h=this.target,m=this.target,g=this.append;if("function"==typeof h&&(h=h()),!g)return k("ChangeDescriptor.render","This doesn't have an 'append' method chosen."),b();if(f)return b();if(null!=s&&s.length)return s=(f=s[0]).descriptor,f=f.changer,s=s.render(),f&&(e=x.create({section:l,target:s}),f.run(e),e.update()),s;if(!i||void 0!==h.attr("hidden"))return x.create({target:h,attr:this.attr.filter(function(e){return!("style"in e)}),data:_objectSpread(_objectSpread({},c),{},{originalSource:t,hidden:!0})}).update(),b();if(!(h=_(u)&&u.length?u:h))return k("ChangeDescriptor.render","ChangeDescriptor has source but not a target!"),b();var y=b();if([].concat(h).filter(function(e){return!e.jquery}).map(function(e){var t,n,r=g;return e.target&&e.append&&(r=(t=e).append,n=t.before,e=e.target),{elements:e.hooks(l,m).filter(function(){return!(n&&1&this.compareDocumentPosition(document)&&2&this.compareDocumentPosition(m[0]))}),append:r}},[]).forEach(function(e){var t=e.elements,n=e.append;t.each(function(e,t){t=b(t),y=y.add(r.create({target:t,append:n,newTargets:null}).render()),t.filter("tw-pseudo-hook").contents().unwrap()})}),!(y.length||_(h)||v.isPrototypeOf(h))){f=g;if(!(f in h)){if("replace"!==f)return k("ChangeDescriptor.render","The target doesn't have a '"+f+"' method."),b();f=h[0]instanceof Text?"replaceWith":(h.empty(),"append")}h[0]instanceof Text&&"prepend"===(f="append"===f?"after":f)&&(f="before"),y=b(t&&(this.verbatim?w:T)(t)),_(d)&&d.forEach(function(e){var t=e.source,e=e.append,t=b((r.verbatim?w:T)(t));y="append"===e?y.add(t):"prepend"===e?t.add(y):t}),h[f](y.length?y:void 0),h.data("timestamp",Date.now()),this.update(),n&&!o&&S("replace"===g?h:y,n,a,this.transitionDelay,this.transitionSkip,this.expedite,this.transitionOrigin),p&&p.map(function(e){return e(h)}).forEach(function(e){return l.addEnchantment(e)})}return y}};return e(x)}),define("internaltypes/enchantment",["jquery","utils","internaltypes/changedescriptor","datatypes/changercommand","utils/operationutils","internaltypes/twineerror","utils/renderutils"],function(g,y,b,v,e,w,t){var k=e.objectName,S=e.toSource,T=t.collapse;return Object.freeze({create:function(e){return Object.assign(Object.create(this),{enchantments:g()},e)},enchantScope:function(){var i=this,s=this.attr,c=this.data,l=this.functions,u=this.section,p=this.scope,d=this.localHook,f=this.lambda,h=[],m=0;p.forEach(u,function(e,t){if(d){d=d.jquery?d:d.hooks(u);var n=e.find(d);if(n.length)e=n;else if(!d.has(e[0]).length)return}var r,a,o;(!e.is(":empty")||e.data("source")&&e.data("source").length)&&(m+=1,f?(o=f.apply(u,{loop:p.TwineScript_GetProperty(t),pos:m}),w.containsError(o)?(e.replaceWith(o.render()),f=o=null):v.isPrototypeOf(o)?o.canEnchant||(e.replaceWith(w.create("macrocall",'The lambda "'.concat(S(f),"\" can't be or include a revision, enchantment, or interaction changer like (replace:), (click:), or (link:).")).render()),f=o=null):(e.replaceWith(w.create("macrocall",'The lambda "'.concat(S(f),'" must return a changer, not ').concat(k(o),".")).render()),f=o=null)):o=i.changer,n=!s&&!c&&(!o||o.summary().every(function(e){return e.startsWith("transition")})),r=n?e:e.wrap("<tw-enchantment>").parent(),s&&r.attr(s),c&&r.data(c),l&&l.forEach(function(e){return e(r)}),o&&(t=b.create({section:u,target:r}),o.run(t),t.update(),e.is(y.storyElement)?(a=Object.keys(Object.assign.apply(Object,[{}].concat(_toConsumableArray(t.styles)))),e.css(a.reduce(function(e,t){return"background-color"===t||"background-image"===t?(e["background-color"]="transparent",e["background-image"]="none",a.push("background-".concat("background-color"===t?"image":"color"))):e[t]="inherit",e},{})),r.data({enchantedProperties:a})):e.is("tw-passage")&&t.styles.some(function(e){return"margin-left"in e||"margin"in e||"margin-right"in e})&&(o="padding-right",y.storyElement.css(t="padding-left","0px").css(o,"0px"),r.data({enchantedProperties:[t,o]}))),e.is(y.storyElement)&&r.css({"min-width":"100%","min-height":"100%"}),"true"===r.attr("collapsing")&&(r.find("[collapsing=false]").each(function(){g(this).removeAttr("collapsing")}),T(r)),n||h.push(r))}),this.enchantments=g(h)},disenchant:function(){this.enchantments.each(function(e,t){(t=g(t)).contents().unwrap();t=t.data("enchantedProperties");t&&y.storyElement.css(t.reduce(function(e,t){return e[t]="",e},{}))})}})}),define("internaltypes/twineerror",["jquery","utils"],function(i,s){var a=s.impossible,c=s.escape,l=(i(document.documentElement).on("click","tw-folddown",function(e){var t=e.target,e=((t=i(t)).toggleClass("open"),t.popData("folddown"));for("function"==typeof e&&e(t);t&&!t.next().length;)t=t.parent();null!=(e=t)&&e.next().toggle()}),{syntax:"The markup seems to contain a mistake.",saving:"I tried to save or load the game, but I couldn't do it.",operation:"I tried to perform an operation on some data, but the data's type was incorrect.",macrocall:"I tried to use a macro, but its call wasn't written correctly.",datatype:"I tried to use a macro, but was given the wrong type of data to it.",custommacro:"I tried to use a custom macro, but its code hook had a mistake in it.",infinite:"I almost ended up doing the same thing over and over, forever.",property:"I tried to access a value in a string/array/datamap, but I couldn't find it.",unimplemented:"I currently don't have this particular feature. I'm sorry.",propagated:"Click the 'Open' button to see the code hook as it was executed.",user:"This is a custom error created by (error:). It usually means you used a custom macro incorrectly.",assertion:"This command exists to provide a helpful error if a certain important condition wasn't true.",debugonly:"This macro is not meant to be used outside of debugging your story."}),u=[],n={TwineError:!0,create:function(e,t,n,r){return t&&"string"==typeof t||a("TwineError.create","has a bad message string"),n||e in l||a("TwineError.create","no error explanation given"),"user"!==e&&(t=t[0].toUpperCase()+t.slice(1)),Object.assign(Object.create(this),{type:e,message:t,explanation:n,source:void 0,innerDOM:r,appendTitleText:!1})},containsError:function(){for(var e=0;e<arguments.length;e+=1){var t=arguments[e];if(n.isPrototypeOf(t))return t;if(Array.isArray(t)){t=n.containsError.apply(n,t);if(t)return t}}return!1},createWarning:function(e,t){return Object.assign(this.create(e,t),{warning:!0})},render:function(t){var n=this,e=1<arguments.length&&void 0!==arguments[1]&&arguments[1],r=(t="string"==typeof t?t:this.source||"",i("<tw-error class='"+(this.warning?"warning":"error")+"' title='"+c(t)+"'>"+c(this.message+(this.appendTitleText?" "+t:""))+"</tw-error>")),a=i("<tw-error-explanation>").text(this.explanation||l[this.type]).hide(),o=i("<tw-folddown tabindex=0>");return this.innerDOM&&i("<tw-open-button label='Open'>").on("click",function(){var e=i("<tw-backdrop><tw-dialog></tw-backdrop>");e.find("tw-dialog").prepend(n.innerDOM,i("<tw-link tabindex=0>OK</tw-link>").on("click",function(){n.innerDOM.detach(),e.remove()}).wrap("<tw-dialog-links>").parent()),s.storyElement.prepend(e)}).appendTo(r),r.append(o).append(a),r.data("TwineError",this),e||u.forEach(function(e){return e(n,t)}),r},on:function(e){return"function"!=typeof e||u.includes(e)||u.push(e),n}};return Object.preventExtensions(n)}),define("internaltypes/twinenotifier",["jquery","utils"],function(e,t){var n=t.impossible,r={create:function(e){return e||n("TwineNotifier.create","called with only 1 string."),Object.assign(Object.create(r),{message:e})},render:function(){return e("<tw-notifier>").attr("message",this.message)}};return Object.preventExtensions(r)}),define("internaltypes/varref",["state","internaltypes/twineerror","utils","utils/operationutils","datatypes/hookset"],function(u,p,e,t,i){var c,n=e.impossible,s=e.andList,r=e.nth,o=t.is,d=t.isObject,f=t.toSource,h=t.isSequential,m=t.objectName,l=t.typeName,g=t.clone,y=t.isValidDatamapName,b=t.subset,v=t.collectionType,w=t.unstorableValue,a=t.matches,k=Array.isArray,S={set:[],delete:[]},T="You can only access position strings/numbers ('4th', 'last', '2ndlast', (2), etc.), slices ('1stTo2ndlast', '3rdTo5th'), ",_="You can't access the '0th' or '0thlast' position of ";function x(e,t){if(p.containsError(t))return n;if(e instanceof Map&&(n=p.containsError(y(e,t))))return n;if(h(e))if("number"==typeof t){if(0===t)return p.create("property","You can't access elements at position 0 of ".concat(m(e),"."),"Only positive and negative position values exist.");0<t&&--t}else if("string"==typeof t&&(r=/^(\d+)(?:st|[nr]d|th)last$/i.exec(t))){if("0"===r[1])return p.create("property",_+m(e)+".");t=-r[1]}else if("string"==typeof t&&(r=/^(\d+)(?:st|[nr]d|th)$/i.exec(t))){if("0"===r[1])return p.create("property",_+m(e)+".");t=r[1]-1}else if("string"==typeof t&&(r=/^(?:(\d+)(?:st|[nr]d|th)(last)?|last)to(?:(\d+)(?:st|[nr]d|th)(last)?|last)$/i.exec(t))){var n=_slicedToArray(r,5),r=n[1],r=void 0===r?0:r,a=n[2],o=n[3],o=void 0===o?0:o;t={last:n[4]?-o:o-1,first:a?-r:r-1}}else if("last"===t)t=-1;else if("random"===t){if(!e.length)return p.create("property","I can't get a random value from ".concat(m(e),", because it's empty."));t=u.random()*Array.from(e).length|0}else{if(i.isPrototypeOf(e)&&!i.TwineScript_Properties.includes(t))return p.create("property","".concat(T+s(i.TwineScript_Properties.map(function(e){return"'"+e+"'"}))," of ").concat(m(e),", not ").concat(("string"==typeof t?f:m)(t),"."));if(!["length","some","any","all","start","end","random"].includes(t)&&!i.isPrototypeOf(e))return p.create("property","".concat(T,"'length', 'some', 'any', 'all', 'start', 'end', and 'random' of ").concat(m(e),", not ").concat(("string"==typeof t?f:m)(t),"."))}else if(e instanceof Set){if(!["length","some","any","all"].includes(t))return p.create("property","".concat(T,"'length', 'some', 'any', and 'all' of ").concat(m(e),"."),"You can't access specific individual data values from datasets.");"length"===t&&(t="size")}else{if(k(e.TwineScript_Properties)&&!e.TwineScript_Properties.includes(t))return p.create("property","You can only get the ".concat(s(e.TwineScript_Properties.map(function(e){return"'"+e+"'"}))," of ").concat(m(e),", not ").concat(("string"==typeof t?f:m)(t),"."));if("number"==typeof e||"boolean"==typeof e)return p.create("property","You can't get any data values, let alone ".concat(m(t),", from ").concat(m(e)))}return t}function O(e,t){return+t<0&&Math.abs(t)<=e.length?e.length+ +t:t}var A=/[^\uD801-\uDFFF]/,C=new Map;function E(e,t){var n,r,a;return void 0===e?e:e instanceof Map?e.get(t):"some"!==t&&"any"!==t&&"all"!==t&&"start"!==t&&"end"!==t||e.TwineScript_VariableStore?("string"==typeof e&&(C.has(e)?e=C.get(e):A.test(e)?(a=_toConsumableArray(e),C.set(e,a),e=a):C.set(e,e)),h(e)&&Number.isFinite(t)&&(t=O(e,t)),e.TwineScript_GetProperty?e.TwineScript_GetProperty(t):"function"!=typeof(a=e[t])?a:void 0):(n=e,r=t,a='"'.concat(r," value").concat("any"===r?"":"s",'" of '),{determiner:r,determined:n,array:_toConsumableArray(n),string:"string"==typeof n&&n,TwineScript_ObjectName:a+m(n),TwineScript_ToSource:function(){return"".concat(r," of ").concat(f(n))},TwineScript_TypeName:a+"a data structure",TwineScript_Unstorable:!0,TwineScript_Print:function(){return"`["+this.TwineScript_TypeName+"]`"}})}function N(e){var t;return e.computed?(t=e.value,"string"==typeof(t=c.isPrototypeOf(t)?t.get():t)?"('"+t+"')":"("+t+")"):"number"==typeof e?r(e):"'"+e+"'"}function j(t,e,n){if(t.TwineScript_VariableStore){if(t.TwineScript_TypeDefs&&e in t.TwineScript_TypeDefs){var r=t.TwineScript_TypeDefs[e];if("const"===r.name){if(void 0!==t[e])return p.create("operation","I can't alter ".concat(t===u.variables?"$":"_").concat(e," because it's been restricted to a constant value."),"This variable can't be changed for the rest of the story.")}else if(!a(r,n))return p.create("operation","I can't set ".concat(t===u.variables?"$":"_").concat(e," to ").concat(l(n)," because it's been restricted to ").concat(f(r),"-type data."),"You can restrict a variable or data name by giving a typed variable to (set:) or (put:).")}return!0}return k(e)?e.map(function(e){return j(t,e)}):t instanceof Map?"string"==typeof e||p.create("operation","".concat(m(t)," can only have string data names, not ").concat(m(e),".")):h(t)?["length","random","some","any","all","start","end"].includes(e)?p.create("operation","I can't forcibly alter the '"+e+"' of "+m(t)+".","start"===e||"end"===e?"Alter the values at actual positions, like 1st or 2ndlast, rather than just the '"+e+"'.":void 0):+e==(0|e)||p.create("property",m(t)+" can only have position keys ('3rd', '1st', (5), etc.), not "+N(e)+"."):t.TwineScript_Identifiers&&e in t?p.create("keyword","I can't alter the value of the '"+e+"' identifier.","You can only alter data in variables, not fixed identifiers."):p.create("operation","I can't modify "+m(t),t instanceof Set?"You should use an (array:) if you need to modify the data inside this dataset.":i.isPrototypeOf(t)?"You should alter hooks indirectly using macros like (replace:) or (enchant:).":void 0)}function P(t,e,n,r){var a=e;t instanceof Map?t.set(e,n):(h(t)&&(e=O(t,e)),t.TwineScript_Set?t.TwineScript_Set(e,n,r):t[e]=n),S.set.forEach(function(e){return e(t,a,n)})}function R(t,e){var n=e;h(t)&&(e=O(t,e)),k(t)&&/^(?:[1-9]\d*|0)$/.exec(e)?t.splice(e,1):t instanceof Map||t instanceof Set?t.delete(e):t.TwineScript_Delete?t.TwineScript_Delete(e):delete t[e],S.delete.forEach(function(e){return e(t,n)})}function I(t,e){var n,r,a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:e,o=3<arguments.length&&void 0!==arguments[3]&&arguments[3];return e&&"object"===_typeof(e)&&"last"in e&&"first"in e?i.isPrototypeOf(t)?t.TwineScript_GetProperty(e):(n=e.first,r=e.last,b(t,n+(0<=n),r+(0<=r))):k(e)?i.isPrototypeOf(t)?t.TwineScript_GetProperty(e):e.map(function(e){return I(t,e,e)})["string"==typeof t?"join":"valueOf"](""):void 0!==(n=E(t,e))||o?n:t===u.variables?0:"temp"===(null==(r=t.TwineScript_VariableStore)?void 0:r.type)?p.create("property","There isn't a temp variable named _".concat(a," in this place."),"Temp variables only exist inside the same passage, hook, or lambda in which they're created."):k(t)&&"number"==typeof e?p.create("property","This array of ".concat(t.length," elements doesn't have a ").concat(N(a+("number"==typeof a?1:""))," element."),t.length?"It contains: ".concat(s(t.map(m)),"."):"The array is empty."):(o=Array.from("function"==typeof t.keys&&t.keys()),p.create("property","I can't find a ".concat(N(a)," data name in ").concat(m(t)),t instanceof Map&&o.length?"Its names include: ".concat(s(o),"."):void 0))}function V(e,t){var r=this,e=this.compiledPropertyChain.reduce(function(e,t){var n=0===e.length?r.object:I.apply(void 0,_toConsumableArray(e[e.length-1]));return e.push([n,t])&&e},[]).reduceRight(e,t);return p.containsError(e)?e:void 0}return c=Object.freeze({get:function(){for(var e=this.object,t=0;t<this.compiledPropertyChain.length-1;t+=1)if(e=I(e,this.compiledPropertyChain[t]),p.containsError(e))return e;return I(e,this.compiledPropertyChain.slice(-1)[0],this.propertyChain.slice(-1)[0])},has:function(){for(var e=this.object,t=0;t<this.compiledPropertyChain.length-1;t+=1)if(void 0===(e=I(e,this.compiledPropertyChain[t],void 0,!0))||p.containsError(e))return!1;return void 0!==I(e,this.compiledPropertyChain.slice(-1)[0],void 0,!0)},set:function(e,c){var l=this;return!this.object||this.object.TwineScript_VariableStore||this.object.TwineScript_Identifiers?V.call(this,function(n,e,t){var e=_slicedToArray(e,2),r=e[0],a=e[1];if(e=p.containsError(n,r,a)||p.containsError(j(r,a,n)))return e;if(e=w(n))return p.create("operation","".concat(m(n)," can't be stored").concat(!n.TwineScript_Unstorable&&v(n)?" because it holds ".concat(m(e)):"","."));if(0<t)r=g(r);else if("temp"===(null==(e=r.TwineScript_VariableStore)?void 0:e.type)&&r!==u.variables){for(var o=r;"temp"===(null==(i=o.TwineScript_VariableStore)?void 0:i.type)&&!hasOwnProperty.call(o,a);)var i,o=Object.getPrototypeOf(o);"temp"===(null==(t=o.TwineScript_VariableStore)?void 0:t.type)&&(r=o)}if("string"==typeof r){if("string"!=typeof n)return p.create("datatype","I can't put this non-string value, ".concat(m(n),", in a string."));if(n.length!==(k(a)?a.length:1))return p.create("datatype","".concat(m(n),"is not the right length to fit into this string location."));var r=_toConsumableArray(r),s=_toConsumableArray(n);[].concat(a).forEach(function(e){0+e<0&&(e=r.length+(0+e)),r=[].concat(_toConsumableArray(r.slice(0,e)),[s.shift()],_toConsumableArray(r.slice(e+1)))}),r=r.join("")}else d(r)&&(void 0!==n.TwineScript_KnownName&&((n=""!==n.TwineScript_KnownName?g(n):n).TwineScript_KnownName=f(l)),k(a)&&h(n)?("string"==typeof n&&(n=_toConsumableArray(n)),a.map(function(e,t){return[e,n[t]]}).forEach(function(e){var e=_slicedToArray(e,2),t=e[0],e=e[1];return P(r,t,e,c)})):P(r,a,n,c));return r},e):p.create("macrocall","I can't (set:) ".concat(m(this),", if the ").concat((m(this.object).match(/ (.+$)/)||["","value"])[1]," isn't stored in a variable."),"Modifying data structures that aren't in variables won't change the game state at all.")},delete:function(){return V.call(this,function(e,t,n){var r,t=_slicedToArray(t,2),a=t[0],t=t[1];return(r=p.containsError(e,a,t)||p.containsError(j(a,t)))||(0<n&&(a=g(a)),null===e?((r="string"==typeof a)&&(a=_toConsumableArray(a)),k(t)?(h(a)&&(t=_toConsumableArray(new Set(t))).sort(function(e,t){return O(a,t)-O(a,e)}),t.forEach(function(e){return R(a,e)})):R(a,t),r&&(a=a.join(""))):P(a,t,e,!1),a)},null)},defineType:function(e){var t=this.object,n=this.compiledPropertyChain[0],r=(hasOwnProperty.call(t,"TwineScript_TypeDefs")||(t.TwineScript_TypeDefs=Object.create(t.TwineScript_TypeDefs||null)),t.TwineScript_TypeDefs),a=r[n];if(a&&!o(a,e))return p.create("operation","I can't redefine the type of "+m(this)+" to "+(e.TwineScript_ObjectName||l(e))+", as it is already "+(a.TwineScript_ObjectName||l(a))+".");t.TwineScript_DefineType?t.TwineScript_DefineType(n,e):r[n]=e,"const"===e.name&&(t[n]=void 0)},matches:function(e,t){return this.object===e&&this.compiledPropertyChain[0]===t},getName:function(){return this.compiledPropertyChain[0]},create:function(e,t){var n;if(n=p.containsError(e))return n;Array.isArray(t)||(t=[].concat(t)),c.isPrototypeOf(e)&&(t=e.propertyChain.concat(t),e=e.object);var r=function(e,t){for(var n,r=[],a=0;a<t.length;a+=1){var o=t[a];if(o.computed&&(o=o.value),c.isPrototypeOf(o)&&(o=o.get()),k(o)){for(var i=[],s=0;s<o.length;s+=1)i[s]=x(e,o[s]);o=i}else o=x(e,o);if(n=p.containsError(o))return n;a<t.length-1&&(e=I(e,o)),r.push(o)}return r}(e,t);return(n=p.containsError(r))||Object.assign(Object.create(c),{object:e,propertyChain:t,compiledPropertyChain:r})},TwineScript_ToSource:function(){function r(e,t){return!t&&n.object.TwineScript_VariableStore?e:N(e)}var e,n=this;return(this.object===u.variables?"$":"temp"===(null==(e=this.object.TwineScript_VariableStore)?void 0:e.type)?"_":f(this.object)+"'s ")+(1===this.propertyChain.length?r(this.propertyChain[0]):this.propertyChain.reduce(function(e,t,n){return e+"'s "+r(t,n)}))},get TwineScript_ObjectName(){var e;return this.object.TwineScript_VariableStore?"the ".concat("temp"===(null==(e=this.object.TwineScript_VariableStore)?void 0:e.type)?"temp ":"","variable ").concat(this.TwineScript_ToSource()):m(this.object)+"'s "+(1===this.propertyChain.length?N(this.propertyChain[0]):this.propertyChain.reduce(function(e,t,n){return e+"'s "+N(t)}))},on:function(e,t){if(e in S)return"function"!=typeof t||S[e].includes(t)||S[e].push(t),c;n("VarRef.on","invalid event name")}})}),define("internaltypes/varscope",[],function(){return Object.seal({TwineScript_ObjectName:"the temporary variables",TwineScript_VariableStore:{type:"temp",name:"an unknown scope"},TwineScript_TypeDefs:Object.create(null)})}),define("macrolib/commands",["jquery","macros","utils","state","passages","engine","internaltypes/twineerror","internaltypes/twinenotifier","datatypes/assignmentrequest","datatypes/hookset","datatypes/codehook","datatypes/colour","datatypes/gradient","internaltypes/varref","datatypes/typedvar","datatypes/varbind","utils/operationutils","utils/renderutils"],function(u,n,b,c,l,a,y,M,e,o,t,p,d,i,s,v,r,f){var h=r.printBuiltinValue,m=r.objectName,g=r.clone,w=r.toSource,k=f.dialog,S=f.geomParse,D=f.geomStringRegExp,r=n.TypeSignature,f=r.Any,F=r.Everything,T=r.rest,_=r.either,x=r.optional,O=r.zeroOrMore,L=r.percent,H=r.nonNegativeInteger,A=r.positiveInteger,r=r.positiveNumber,C=Object.assign,E=Math.floor,N=Math.ceil,j=Math.abs,z=Math.max,q=Math.min,P=u.noop;function R(e){return"(".concat(e," ").concat(b.options.ifid,") ")}["set","put","unpack"].forEach(function(r){return n.add(r,"Instant",function(e){for(var t=0;t<(arguments.length<=1?0:arguments.length-1);t+=1){var n=t+1<1||arguments.length<=t+1?void 0:arguments[t+1];if("into"===n.operator&&"set"===r)return y.create("macrocall","Please say 'to' when using the (set:) macro.");if("to"===n.operator&&"set"!==r)return y.create("macrocall","Please say 'into' when using the (put:) or (unpack:) macro.");if((i.isPrototypeOf(n.dest)||s.isPrototypeOf(n.dest))===("unpack"===r))return y.create("macrocall","unpack"===r?"Please use the (unpack:) macro with arrays, datamaps or (p:) patterns containing variables to the right of 'into'.":"Please use the (".concat(r,":) macro with just single variables and typed variables to the ").concat("set"===r?"left of 'to'.":"right of 'into'."),"You may wish to change this to the (".concat("unpack"!==r?"unpack":"to"===n.operator?"set":"put",":) macro."));n=n.set();if(y.containsError(n))return n}return{TwineScript_TypeID:"instant",TwineScript_TypeName:"a (".concat(r,":) operation"),TwineScript_ObjectName:"a (".concat(r,":) operation"),TwineScript_Unstorable:!0,TwineScript_Print:function(){return b.options.debug,""}}},[T(e)])}),n.add("move","Instant",function(e){for(var t=0;t<(arguments.length<=1?0:arguments.length-1);t+=1){var n=t+1<1||arguments.length<=t+1?void 0:arguments[t+1];if("into"!==n.operator)return y.create("macrocall","Please say 'into' when using the (move:) macro.");n=n.set(!0);if(y.containsError(n))return n}return{TwineScript_TypeID:"instant",TwineScript_TypeName:"a (move:) operation",TwineScript_ObjectName:"a (move:) operation",TwineScript_Unstorable:!0,TwineScript_Print:function(){return b.options.debug,""}}},[T(e)]),n.addCommand("display",function(e){if(!l.hasValid(e))return y.create("macrocall","I can't (display:) the passage '".concat(e,"' because it doesn't exist."))},function(e,t,n){return e.source=l.getTree(n),e},[String])("print",P,function(e,t,n){return C(e,{source:h(n)})},[f])(["verbatim-print","v6m-print"],P,function(e,t,n){return C(e,{verbatim:!0,source:h(n)})},[f])(["verbatim-source","v6m-source"],function(e){if("command"===(null==e?void 0:e.TwineScript_TypeID)&&!e.TwineScript_ToSource)return y.create("datatype","I can't construct the source code of a command created by a custom macro.")},function(e,t,n){return C(e,{verbatim:!0,source:h(w(n))})},[f])("go-to",function(e){if(!l.hasValid(e))return y.create("macrocall","I can't (go-to:) to the passage '".concat(e,"' because it doesn't exist."),"Check that you didn't mistype the passage name, or rename the passage to something else.")},function(e,t,n){if(!b.options.ignoreGotos)return requestAnimationFrame(function(){return a.goToPassage(n,{transition:e.data.passageT8n})}),{blocked:!0}},[String])("redirect",function(e){if(!l.hasValid(e))return y.create("macrocall","I can't (redirect:) to the passage '".concat(e,"' because it doesn't exist."),"Check that you didn't mistype the passage name, or rename the passage to something else.")},function(e,t,n){if(!b.options.ignoreGotos)return requestAnimationFrame(function(){return a.redirect(n,{transition:e.data.passageT8n})}),{blocked:!0}},[String])("undo",P,function(e,t,n){return c.pastLength<1?C(e,{source:n}):b.options.ignoreGotos?void 0:(requestAnimationFrame(function(){return a.goBack({transition:e.data.passageT8n})}),{blocked:!0})},[x(String)])("debug",P,a.enableDebugMode,[],!1),b.onStartup(function(){return b.storyElement.on("click.icon","tw-icon",function(e){var t=u(this),n=t.data("clickEvent"),r=t.attr("alt");n&&n(t),"Undo"===r&&(e.stopPropagation(),a.goBack()),"Redo"===r&&(e.stopPropagation(),a.goForward()),"Fullscreen"===r&&(e.stopPropagation(),a.toggleFullscreen()),"Restart"===r&&(c.hasSessionStorage&&sessionStorage.removeItem("Saved Session"),window.location.reload())})}),[["Undo","&#8630;",function(){return 0<c.pastLength}],["Redo","&#8631;",function(){return 0<c.futureLength}],["Fullscreen","&#9974;",function(){return document.fullscreenEnabled||document.msFullscreenEnabled}],["Restart","&#10226;",Object]].forEach(function(e){var e=_slicedToArray(e,3),o=e[0],i=e[1],s=e[2];n.addCommand("icon-".concat(o.toLowerCase()),function(e,t){if("string"==typeof e&&"string"==typeof t)return e=_toConsumableArray(e).length,t=_toConsumableArray(t).length,1<e&&1<t?y.create("datatype","One of the two strings given to (icon-".concat(o.toLowerCase(),":) should be 1 character long, for its icon.")):1===e&&1===t?y.create("datatype","One of the two strings given to (icon-".concat(o.toLowerCase(),":) should be 2 or more characters long, for its label.")):void 0},function(t,e,n,r){var a;return("string"==typeof r&&1===_toConsumableArray(r).length||"string"==typeof n&&1<_toConsumableArray(n).length)&&(n=(a=[r,n])[0],r=a[1]),"Undo"===o&&(t.data.forgetUndosEvent=function(e){t.section.whenUnblocked(function(){return u(e).css("visibility","hidden")})}),C(t,{source:'<tw-icon tabindex=0 alt="'.concat(o,'" ').concat(r?'data-label="'.concat(r.replace('"',"&quot;"),'"'):"",' title="').concat(o,'" ').concat(s()?"":'style="visibility:hidden"',">").concat(n||i,"</tw-icon>")})},[x(String),x(String)])}),n.addCommand("icon-counter",function(e,t,n){var r=" label string given to (icon-counter:) can't be empty or only whitespace.";return t&&t.trim()?"string"!=typeof n||n.trim()?void 0:y.create("datatype","The 2nd "+r):y.create("datatype","The 1st "+r)},function(r,e,a,o,i){r.attr.push({"data-2bind":!0}),r.data.twoWayBindEvent=function(e,t,n){a.varRef.matches(t,n)&&"number"==typeof(t=a.varRef.get())&&r.target.children("tw-icon").text((0<t?E:N)(t)).attr("data-label",1!==j(t)&&void 0!==i?i:o)};var t=a.varRef.get();return"number"!=typeof t?y.create("datatype","(icon-counter:) can only be bound to a variable holding a number, not ".concat(m(t),".")):C(r,{source:'<tw-icon data-label="'.concat(b.escape(1!==j(t)&&void 0!==i?i:o),'">').concat((0<t?E:N)(t),"</tw-icon>")})},[v,String,x(String)]),n.addCommand("meter",function(e,t,n,r){return"two way"===e.bind?y.create("datatype","(meter:) shouldn't be given two-way bound variables.",'Change the "2bind" keyword to just "bind".'):"string"!=typeof r||r.trim()?-1===n.search(D)||!n.includes("=")&&1<n.length?y.create("datatype",'The (meter:) macro requires a sizing line("==X==", "==X", "=XXXX=" etc.) be provided, not '+JSON.stringify(n)+"."):void 0:y.create("datatype","The label string given to (meter:) can't be empty or only whitespace.")},function(r,e,a,n,t,o,i){o&&"string"!=typeof o&&(i=o,o=void 0),i=i||p.create({h:0,s:0,l:.5,a:.5}),p.isPrototypeOf(i)&&(i=d.create(90,[{colour:i,stop:0},{colour:i,stop:1}]));function s(e){var t=z(0,q(1,e/n)),e=i.repeating?i:i.multiply(n/e);return"height:100%;background-repeat:no-repeat;background-image:".concat((l?C(e,e.repeating?{}:{angle:270}).toLinearGradientString()+", ":"")+C(e,e.repeating?{}:{angle:l||0===c?90:270}).toLinearGradientString(),";background-size:").concat(l?Array(2).fill(50*t+"%"):100*t+"%",";background-position-x:").concat(l?-100/(2-t)+100+"%,"+100/(2-t)+"%":0===c?"left":"right",";text-align:").concat(l?"center":0===c?"left":"right")}var t=S(t),c=t.marginLeft,t=t.size,l=0<c&&Math.ceil(c+t)<100,u=(r.styles.push({"margin-left":c+"%",width:t+"%",height:"1.5em",display:"block"}),r.attr.push({"data-2bind":!0}),o&&e.stackTop.tempVariables),t=(r.data.twoWayBindEvent=function(e,t,n){a.varRef.matches(t,n)&&"number"==typeof(t=a.varRef.get())&&((n=r.target.children("tw-meter")).attr("style",s(t)),o)&&r.section.renderInto("",null,{source:o,target:n,append:"replace",transitionDeferred:!1},u)},a.varRef.get());return"number"!=typeof t?y.create("datatype","(meter:) can only be bound to a variable holding a number, not ".concat(m(t),".")):C(r,{source:'<tw-meter style="'.concat(s(t),'">').concat(o||"","</tw-meter>")})},[v,r,String,x(_(String,p,d)),x(_(p,d))]),[["cycling-link"],["seq-link","sequence-link"]].forEach(function(t,u){return n.addCommand(t,function(){var e;return""===(arguments.length<=0?void 0:arguments[0])?y.create("datatype","The first string in a ("+t[0]+":) can't be empty."):arguments.length<=(v.isPrototypeOf(arguments.length<=0?void 0:arguments[0])?2:1)?y.create("datatype","I need two or more strings to "+(u?"sequence":"cycle")+" through, not just '"+((e=arguments.length-1)<0||arguments.length<=e?void 0:arguments[e])+"'."):void 0},function(a,e){for(var o,t=arguments.length,i=new Array(2<t?t-2:0),n=2;n<t;n++)i[n-2]=arguments[n];v.isPrototypeOf(i[0])&&(o=i.shift());var s=0,c=("two way"===(null==(l=o)?void 0:l.bind)&&(a.attr.push({"data-2bind":!0}),-1<(l=i.indexOf(o.varRef.get())))&&(s=l),e.stackTop.tempVariables);function r(e,t){var n=s>=i.length-1&&u,r=""===i[s]?"":n?i[s]:"<tw-link>".concat(i[s],"</tw-link>");if(n&&(a.data.clickEvent=void 0),o&&!t){n=o.set(i[s]);if(y.containsError(n))return void e.replaceWith(n.render(i[s]))}t=_objectSpread(_objectSpread({},a),{},{source:r,transitionDeferred:!1});a.section.renderInto("",null,t,c)}i[s]&&(a.data.clickEvent=function(e){s=(s+1)%i.length,r(e,!1)},a.data.twoWayBindEvent=function(e,t,n){o.varRef.matches(t,n)&&(t=o.varRef.get(),-1<(n=i.indexOf(t)))&&n!==s&&(s=n,r(e,!0))});var l="<tw-link>".concat(i[s],"</tw-link>");if(o){e=o.set(i[s]);if(y.containsError(e))return e}return C(a,{source:l,append:"replace",transitionDeferred:!0})},[_(v,String),T(String)])}),b.onStartup(function(){return b.storyElement.on("change.dropdown-macro","select",function(){var e=u(this),t=e.closest("tw-expression, tw-hook").data("dropdownEvent");t&&t(e)})}),n.addCommand("dropdown",function(e){var t;return""===(arguments.length<=1?void 0:arguments[1])||""===((t=(arguments.length<=1?0:arguments.length-1)-1+1)<1||arguments.length<=t?void 0:arguments[t])?y.create("datatype","The first or last strings in a (dropdown:) can't be empty.","Because empty strings create separators within (dropdown:)s, having them at the start or end doesn't make sense."):(arguments.length<=1?0:arguments.length-1)<=1?y.create("datatype","I need two or more strings to create a (dropdown:) menu, not just "+(arguments.length<=1?0:arguments.length-1)+"."):void 0},function(e,t,r){for(var n=arguments.length,a=new Array(3<n?n-3:0),o=3;o<n;o++)a[o-3]=arguments[o];var i=0,s=("two way"===r.bind&&(e.attr.push({"data-2bind":!0}),-1<(c=a.indexOf(r.varRef.get())))&&(i=c),Math.max.apply(Math,_toConsumableArray(a.map(function(e){return _toConsumableArray(e).length})))),c="<select>"+a.map(function(e,t){return"<option".concat(t===i?" selected":"").concat(""===e?" disabled":"",">").concat(b.escape(e||"\u2500".repeat(s)),"</option>")}).join("\n")+"</select>",l=(e.data.dropdownEvent=function(e){var t=e.val(),n=r.set(t);y.containsError(n)&&e.replaceWith(n.render(t))},e.data.twoWayBindEvent=function(e,t,n){r.varRef.matches(t,n)&&(t=r.varRef.get(),-1<(n=a.indexOf(t)))&&n!==i&&(e.find("select").val(t),i=n)},e.styles.push({"background-color":function(){return b.parentColours(u(this)).backgroundColour}}),r.set(a[i]));return y.containsError(l)?l:C(e,{source:c,append:"replace"})},[v,String,T(String)]),b.onStartup(function(){return b.storyElement.on("input.checkbox-macro","input[type=checkbox]",function(){var e=u(this),t=e.closest("tw-expression").data("checkboxEvent");t&&t(e)})});function I(e){return["I can't use a dialog macro in "+e+".","Please rewrite this without putting such macros here."]}var V=1;n.addCommand("checkbox",function(){},function(e,t,r,n){var a=!1,o="checkbox-"+ ++V,i=("two way"===r.bind&&(e.attr.push({"data-2bind":!0}),"boolean"==typeof(i=r.varRef.get())&&(a=i),e.data.twoWayBindEvent=function(e,t,n){r.varRef.matches(t,n)&&"boolean"==typeof(t=r.varRef.get())&&e.children("input[type=checkbox]").prop("checked",t)}),e.data.checkboxEvent=function(e){var t=e.is(":checked"),t=r.set(t);y.containsError(t)&&e.replaceWith(t.render(""))},r.set(a));return y.containsError(i)?i:C(e,{source:'<input id="'.concat(o,'" type="checkbox" ').concat(a?"checked":"",'><label for="').concat(o,'">').concat(n,"</label>"),append:"replace"})},[v,String]),b.onStartup(function(){return u(document).on("fullscreenchange",function(){u("input[type=checkbox][id^=fullscreen]",b.storyElement).each(function(e,t){(u(t).closest("tw-expression").data("fullscreenEvent")||Object)(t)})})}),n.addCommand("checkbox-fullscreen",function(){},function(e,t,n){var r="fullscreenCheckbox-"+ ++V;return e.data.fullscreenEvent=function(e){return u(e).prop("checked",!(!document.fullscreenElement&&!document.msFullscreenElement))},e.data.checkboxEvent=function(){return a.toggleFullscreen()},C(e,{source:'<input id="'.concat(r,'" type="checkbox" ').concat(document.fullscreenEnabled||document.msFullscreenEnabled?" ":"disabled ").concat(document.fullscreenElement||document.msFullscreenElement?"checked":"",'><label for="').concat(r,'">').concat(n,"</label>"),append:"replace"})},[String]),b.onStartup(function(){return b.storyElement.on("input.input-box-macro","textarea, input[type=text]",function(){var e=u(this),t=e.closest("tw-expression").data("inputBoxEvent");t&&t(e)})}),["input","force-input","input-box","force-input-box"].forEach(function(g){return n.addCommand(g,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=g.endsWith("box"),a=v.isPrototypeOf(t[0]),o="string"==typeof t[+a],r=r&&"number"==typeof t[o+a],i=o?t[+a]:t[a+r],s=0<S(i).size,o=s?t[a+r+o]:i;return g.startsWith("force")&&"string"!=typeof o?y.create("datatype","The (".concat(g,":) macro requires a string of text to forcibly input.")):t.length>a+r+s+("string"==typeof o)?y.create("datatype","An incorrect combination of values was given to this (".concat(g,":) macro.")):void 0},function(e,t){for(var n=arguments.length,r=new Array(2<n?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];var o=g.startsWith("force"),i=g.endsWith("box"),s=v.isPrototypeOf(r[0]),c="string"==typeof r[+s],l=i&&"number"==typeof r[c+s],u=s&&r[0],p=l?r[1+s]:3,d=c?S(r[+s]):{},f=d.marginLeft,d=d.size,h=(d?r[s+l+c]:c&&r[+s])||"",l=o?"":h,c=!1;if("two way"===u.bind){e.attr.push({"data-2bind":!0});s=u.varRef.get();if("string"==typeof s){l=o?h.slice(0,s.length):s,s=u.set(l),c=!0;if(y.containsError(s))return s}e.data.twoWayBindEvent=function(e,t,n){u.varRef.matches(t,n)&&"string"==typeof(t=u.varRef.get())&&e.find(i?"textarea":"input").val(o?h.slice(0,t.length):t)}}if(u&&!c){s=u.set(o?"":h);if(y.containsError(s))return s}!o&&u&&(e.data.inputBoxEvent=function(e){var t=e.val(),t=u.set(t);y.containsError(t)&&e.replaceWith(t.render(""))});var m,c="<".concat(i?"textarea":"input type=text",' style="width:100%" ').concat(i?"rows=".concat(p,">"):'value="').concat(b.escape(l)).concat(i?"</textarea>":'">');return o&&(m=Array.from(h),e.data.inputBoxEvent=function(e){var t=e.val().length,t=m.slice(0,t).join("");return e.val(t),u&&(t=u.set(t),y.containsError(t))&&e.replaceWith(t.render("")),!0}),e.styles.push({display:"block","margin-left":d?f+"%":void 0,width:d?d+"%":"100%","border-style":function(){return this.style.borderStyle||"solid"}}),C(e,{source:c,append:"replace"})},g.endsWith("box")?[_(v,String),x(_(A,String)),x(_(A,String)),x(String)]:[x(_(v,String)),x(String),x(String)])}),["show","rerun"].forEach(function(s){return n.addCommand(s,function(){for(var r,e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.some(function e(t){var n=t.selector,t=t.next;return"name"===n.type&&"page"===n.data?(r=y.create("macrocall","You can't (hide:) the ?page. Sorry."),!0):!!("base"===n.type&&e(n.data)||t&&e(t))||void 0}),r},function(o,i){for(var e=arguments.length,t=new Array(2<e?e-2:0),n=2;n<e;n++)t[n-2]=arguments[n];return t.forEach(function(e){return e.forEach(i,function(e){var t,n,r,a=e.data("hidden");void 0!==a!=("rerun"===s)&&(e.removeData("hidden"),a instanceof u?e.empty().append(a):(a=e.data("tempVariables"),n=(t="tw-passage"===e.tag())?l.getTree(c.passage):e.data("originalSource")||"",t&&(r=e.find("tw-sidebar").detach()),i.renderInto("",null,_objectSpread(_objectSpread({},o),{},{append:"replace",source:n,target:e}),a&&Object.create(a)),r&&e.prepend(r)))})}),o},[T(o)])});n.addCommand("hide",function(){for(var r,e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.some(function e(t){var n=t.selector,t=t.next;return"name"===n.type&&"page"===n.data?(r=y.create("macrocall","You can't (hide:) the ?page. Sorry."),!0):!!("base"===n.type&&e(n.data)||t&&e(t))||void 0}),r},function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var a=0,o=n;a<o.length;a++)o[a].forEach(e,function(e){e.data("hidden")||e.data("hidden",e.contents().detach())})},[T(o)],!1)("scroll",P,function(m,e,g){var y="number"==typeof g&&g;requestAnimationFrame(function(){e.forEach(m,function(e){if(!1!==y){var t,n,r=e[0];null!=(t=(n=r=r===b.storyElement[0]&&r.scrollHeight===r.clientHeight?getComputedStyle(document.body).overflow.includes(" scroll")?document.body:document.documentElement:r).scrollTo)&&t.call(n,0,(r.scrollHeight-r.clientHeight)*y)}else{var a,o=_createForOfIteratorHelper(g.hooks(m).get());try{for(o.s();!(a=o.n()).done;){var i=a.value;if(e.find(i)){for(var s=[],c=e[0];(c=c.parentNode)&&c!==document.body;)s.push([c,c.scrollLeft,c.scrollTop]);i.scrollIntoView();for(var l=0,u=s;l<u.length;l++){var p=_slicedToArray(u[l],3),d=p[0],f=p[1],h=p[2];d.scrollLeft=f,d.scrollTop=h}break}}}catch(e){o.e(e)}finally{o.f()}}})})},[o,_(L,o)],!1)("stop",P,P,[],!1)("load-game",P,function(e,t){var n,r;return e.loadedGame?y.create("infinite","I can't use (load-game:) immediately after loading a game."):(n=localStorage.getItem(R("Saved Game")+t))?(n=c.deserialise(e,n))instanceof Error?{blocked:r=k({message:"Sorry to interrupt... The story tried to load saved data, but there was a problem.\n"+n.message+"\n\nThat data might have been saved from a different version of this story. Should I delete it?\n(Type 'delete' and choose Yes to delete it.)\n\nEither way, the story will now continue without loading the data.",defaultValue:"",buttons:[{name:"Yes",confirm:!0,callback:function(){"delete"===r.find("input").last().val()&&localStorage.removeItem(R("Saved Game")+t),e.unblock("")}},{name:"No",cancel:!0,callback:function(){return e.unblock()}}]})}:void requestAnimationFrame(a.showPassage.bind(a,c.passage,{loadedGame:!0})):y.create("saving","I can't find a save slot named '"+t+"'!")},[String],!1)("forget-undos",P,function(e,t){c.futureLength||c.forgetUndos(t)},[parseInt],!1)("forget-visits",P,function(e,t){c.forgetVisits(t)},[parseInt],!1)("mock-visits",function(){if(!b.options.debug)return y.create("debugonly","(mock-visits:) cannot be used outside of debug mode.");for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.find(function(e){return!l.hasValid(e)});return r?y.create("datatype","I can't mock-visit '"+r+"' because no passage with that name exists."):void 0},function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];c.mockVisits=g(n)},[T(String)],!1)("mock-turns",function(){if(!b.options.debug)return y.create("debugonly","(mock-turns:) cannot be used outside of debug mode.")},function(e,t){c.mockTurns=t},[H],!1)("seed",P,function(e,t){c.setSeed(t)},[String],!1)(["dialog","alert"],function(e,t){for(var n=arguments.length,r=new Array(2<n?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];if(v.isPrototypeOf(e)){if("two way"===e.bind)return y.create("datatype","(dialog:) shouldn't be given two-way bound variables.",'Change the "2bind" keyword to just "bind".');if(void 0===t)return y.create("datatype","(dialog:) needs a message string or codehook to display.")}else void 0!==t&&r.unshift(t);e=r.findIndex(function(e){return""===e});if(-1<e)return y.create("datatype","(dialog:)'s ".concat(b.nth(e+1)," link text shouldn't be an empty string."))},function(e,n,r,t){for(var a=arguments.length,o=new Array(4<a?a-4:0),i=4;i<a;i++)o[i-4]=arguments[i];return v.isPrototypeOf(r)||(void 0!==t&&o.unshift(t),t=r,r=void 0),o.length||(o=["OK"]),{blocked:k({section:n,message:t,cd:e,buttons:o.map(function(t){return{name:t,callback:function(){var e;n.unblock((null==(e=r)?void 0:e.set(t))||"")}}})})}},[_(v,String,t),x(_(t,String)),O(String)])("open-url",P,function(e,t){window.open(t,"")},[String],!1)(["restart","reload"],P,function(){if(!b.options.ignoreGotos){if(c.turns<=1)return y.create("infinite","I mustn't (restart:) the story in the starting passage.");c.hasSessionStorage&&sessionStorage.removeItem("Saved Session"),window.location.reload()}},[],!1)("goto-url",P,function(e,t){window.location.assign(t)},[String],!1)("ignore",P,P,[O(F)])("assert-exists",function(e){if(""===e)return y.create("datatype","(assert-exists:) mustn't be given an empty string.")},function(e,t,n){var r=0;return("string"==typeof n?o.create({type:"string",data:n}):n).forEach(t,function(){++r}),r?e:y.create("assertion","I didn't see any ".concat("string"==typeof n?"text occurrences of":"hooks matching"," ").concat(w(n)," in this passage."))},[_(o,String)]),n.add("assert","Instant",function(e,t){return t?{TwineScript_TypeID:"instant",TwineScript_TypeName:"an (assert:) operation",TwineScript_ObjectName:"an (assert:) operation",TwineScript_Unstorable:!0,TwineScript_Print:function(){return""}}:C(y.create("assertion","An assertion failed: "),{appendTitleText:!0})},[Boolean])("save-game","Boolean",function(e,t,n){if(n=n||"",!c.hasStorage)return!1;var r=c.serialise(!1).pastAndPresent;if(y.containsError(r))return r;if(!1===r)return!1;try{return localStorage.setItem(R("Saved Game")+t,r),localStorage.setItem(R("Saved Game Filename")+t,n),!0}catch(e){return!1}},[String,x(String)])("prompt","String",function(e,t,n,r,a){var o,i;return null!=(o=e.stackTop)&&o.evaluateOnly?y.create.apply(y,["macrocall"].concat(_toConsumableArray(I(e.stackTop.evaluateOnly)))):""===a?y.create("datatype","The text for (prompt:)'s confirm link can't be blank."):(i=k({section:e,message:t,defaultValue:n,buttons:[{name:a||"OK",confirm:!0,callback:function(){return e.unblock(i.find("input").last().val())}}].concat(""===r?[]:{name:r||"Cancel",cancel:!0,callback:function(){return e.unblock(n)}})}),e.stackTop.blocked=i,0)},[_(String,t),String,x(String),x(String)])("confirm","Boolean",function(e,t,n,r){var a;return null!=(a=e.stackTop)&&a.evaluateOnly?y.create.apply(y,["macrocall"].concat(_toConsumableArray(I(e.stackTop.evaluateOnly)))):""===r?y.create("datatype","The text for (confirm:)'s confirm link can't be blank."):(a=k({section:e,message:t,defaultValue:!1,buttons:[{name:r||"OK",confirm:!0,callback:function(){return e.unblock(!0)}}].concat(""===n?[]:{name:n||"Cancel",cancel:!0,callback:function(){return e.unblock(!1)}})}),e.stackTop.blocked=a,0)},[_(String,t),x(String),x(String)])("page-url","String",function(){return window.location.href},[])}),define("macrolib/custommacros",["utils","macros","state","utils/operationutils","datatypes/changercommand","datatypes/custommacro","datatypes/codehook","datatypes/typedvar","internaltypes/twineerror"],function(c,l,u,e,t,p,n,d,f){function s(e,t,n){if(!t.some(function(e){if("function"==typeof e.output)return e.output(n),!0}))return f.create("macrocall","("+e+":) should only be used inside a code hook passed to (macro:).")}var h=e.objectName,m=e.toSource,e=l.add,r=l.addChanger,a=l.addCommand,o=l.TypeSignature,i=o.rest,g=o.either,y=o.Any,b=o.Everything,o=o.zeroOrMore;e("macro","CustomMacro",function(e){for(var t,n=[],r=arguments.length,a=new Array(1<r?r-1:0),o=1;o<r;o++)a[o-1]=arguments[o];for(t=0;t<a.length;t+=1){var i=t===a.length-1;if(d.isPrototypeOf(a[t])===i)return f.create("datatype","The "+(i?"":c.nth(a.length-t+1)+"-")+"last value given to (macro:) should be a "+(i?"code hook":"datatyped variable")+", not "+h(a[t]));if(!i){i="A custom macro";if(a[t].varRef.object===u.variables)return f.create("datatype",i+"'s typed variables must be temp variables (with a '_'), not global variables (with a '$').","Write them with a _ symbol at the start instead of a $ symbol.");if(1<a[t].varRef.propertyChain.length)return f.create("datatype",i+"'s typed variables can't be properties inside a data structure.");if(a[t].datatype.rest&&t!==a.length-2)return f.create("datatype",i+" can only have one spread variable, and it must be its last variable.");var s=a[t].varRef.propertyChain[0];if(n.includes(s))return f.create("datatype",i+"'s typed variables can't both be named '"+s+"'.");n.push(s)}}return p.create(a.slice(0,-1),a[a.length-1])},[i(g(d,n))]);a(["output-data","out-data"],function(){},function(e,t){e=e.stack;return s("output-data",e,t)||{blocked:!0}},[y],!1),r(["output","out"],function(){return Object.assign(t.create("output",[]))},function(e,t){if(e.section){var n,r=e.section,a=r.stack,o=r.stackTop,i={};for(n in o.tempVariables)n.startsWith("TwineScript_")||(i[n]=o.tempVariables[n]);s("output",a,{changer:t,variables:i,hook:Array.isArray(e.source)?"["+e.source.map(function(e){return e.text}).join("")+"]":e.source}),e.output=!0,o.blocked=!0}},[]),a("error",function(e){if(!e)return f.create("datatype","This (error:) macro was given an empty string.")},function(e,t){e=e.stack;return s("error",e,f.create("user",t))||{blocked:!0}},[String],!1),e("partial","CustomMacro",function(e,a){for(var t=arguments.length,o=new Array(2<t?t-2:0),n=2;n<t;n++)o[n-2]=arguments[n];var r="string"!=typeof a&&a,i=!r&&a;if(!r){if(!l.has(i))return f.create("macrocall",'The macro name given to (partial:), "'.concat(a,"\", isn't the name of a built-in macro."));if("Metadata"===l.get(i).returnType)return f.create("macrocall","(partial:) can't be used with metadata macros such as (".concat(a,":)"))}var s="(partial:".concat(m(a),",").concat(o.map(function(e){return m(e)}),")"),c=p.createFromFn(function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e=l["string"==typeof a?"run":"runCustom"](a,e,o.concat(n));return f.containsError(e)&&(e.message="An error occurred while running the (partial:)-created macro, ".concat(c.TwineScript_ObjectName,":\n")+e.message),e},"a (partial:) custom macro of ".concat(i||r.TwineScript_KnownName?"(".concat(i||r.TwineScript_KnownName,":").concat(o.map(function(e){return m(e)}),")"):"another unnamed custom macro"),function(){return s},(i?l.get(i):r).typeSignature.filter(function(e,t){return t>=o.length||"rest"===e.pattern||"zero or more"===e.pattern}));return c},[g(String,p),o(b)])}),define("macrolib/datastructures",["utils","utils/naturalsort","macros","utils/operationutils","state","engine","passages","datatypes/lambda","datatypes/typedvar","internaltypes/twineerror"],function(e,i,t,n,s,r,a,c,o,l){var u=e.permutations,p=e.options,d=n.objectName,f=n.subset,h=n.collectionType,m=n.isValidDatamapName,g=n.is,y=n.unique,b=n.clone,v=n.range,e=t.TypeSignature,n=e.optional,w=e.rest,k=e.either,S=e.zeroOrMore,T=e.Any,e=e.nonNegativeInteger,_=i("en");t.add(["a","array"],"Array",function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n},S(k(o,T)))("range","Array",function(e,t,n){return v(t,n)},[parseInt,parseInt])("subarray","Array",function(e,t,n,r){return f(t,n,r)},[Array,parseInt,parseInt])("reversed","Array",function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.reverse().map(b)},S(T))("shuffled","Array",function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return s.shuffled.apply(s,n).map(b)},[S(T)])("sorted","Array",function(e){for(var t,n=arguments.length,r=new Array(1<n?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];if(!c.isPrototypeOf(r[0]))return(t=r.filter(function(e){return"string"!=typeof e&&"number"!=typeof e}))&&t.length?1===t.length&&Array.isArray(t[0])?l.create("macrocall","Please give multiple numbers or strings to (sorted:), not a single array.","You can use the spread ... syntax to spread out the array's values into (sorted:)."):l.create("datatype","If (sorted:) isn't given a 'via' lambda, it must be given only numbers and strings, not ".concat(d(t[0]),".")):r.sort(_);var o=r.shift();if("making"in o||"where"in o||"when"in o||!("via"in o))return l.create("datatype","The optional lambda given to (sorted:) must be a 'via' lambda, not ".concat(d(o),"."));for(var i=0;i<r.length;i+=1){var s=o.apply(e,{loop:r[i],pos:i+1});if(l.containsError(s))return s;if("string"!=typeof s&&"number"!=typeof s)return l.create("datatype",'The "via" lambda given to (sorted:) couldn\'t convert '.concat(d(r[i])," into a string or number."));r[i]=[r[i],s]}return r.sort(function(e,t){return _(e[1],t[1])}).map(function(e){return e[0]})},[S(T)])("rotated","Array",function(e,t){if(0===t)return l.create("macrocall","I can't rotate these values by 0 positions.");for(var n=arguments.length,r=new Array(2<n?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];t=-1*(t=Math.abs(t)%r.length*Math.sign(t));return r.slice(t).concat(r.slice(0,t)).map(b)},[parseInt,S(T)])("rotated-to","Array",function(e,t){for(var n=arguments.length,r=new Array(2<n?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];t=t.filter(e,r);return l.containsError(t)?t:t.length?(e=r.indexOf(t[0]),r.slice(e).concat(r.slice(0,e)).map(b)):l.create("macrocall","None of these "+r.length+" values matched the lambda, so I can't rotate them.")},[c.TypeSignature("where"),w(T)])("repeated","Array",function(e,t){for(var n=[],r=arguments.length,a=new Array(2<r?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];if(!a.length)return n;for(;0<t--;)n.push.apply(n,a);return n.map(b)},[e,w(T)])("interlaced","Array",function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var a=Math.min.apply(Math,_toConsumableArray(n.map(function(e){return e.length}))),o=[],i=0;i<a;i+=1)for(var s=0;s<n.length;s+=1)o.push(b(n[s][i]));return o},[Array,w(Array)])("permutations","Array",function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.length?u.apply(void 0,n):[]},[S(T)])("unique","Array",function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.filter(y)},[S(T)])("altered","Array",function(n,r){for(var e=arguments.length,t=new Array(2<e?e-2:0),a=2;a<e;a++)t[a-2]=arguments[a];return t.map(function(e,t){t=r.apply(n,{loop:e,pos:t+1});return null===t?e:t})},[k(c.TypeSignature("via"),c.TypeSignature("where","via")),S(T)])("find","Array",function(e,t){for(var n=arguments.length,r=new Array(2<n?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];return t.filter(e,r)},[c.TypeSignature("where"),S(T)])(["all-pass","pass"],"Boolean",function(e,t){for(var n=arguments.length,r=new Array(2<n?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];t=t.filter(e,r);return l.containsError(t)||t.length===r.length},[c.TypeSignature("where"),S(T)])("some-pass","Boolean",function(e,t){for(var n=arguments.length,r=new Array(2<n?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];t=t.filter(e,r);return l.containsError(t)||0<t.length},[c.TypeSignature("where"),S(T)])("none-pass","Boolean",function(e,t){for(var n=arguments.length,r=new Array(2<n?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];t=t.filter(e,r);return l.containsError(t)||0===t.length},[c.TypeSignature("where"),S(T)])("folded","Any",function(r,a){for(var e=arguments.length,t=new Array(2<e?e-2:0),n=2;n<e;n++)t[n-2]=arguments[n];return"where"in a&&(t=[t[0]].concat(_toConsumableArray(a.filter(r,t.slice(1))))),l.containsError(t)||t.reduce(function(e,t,n){return a.apply(r,{making:e,loop:t,pos:n+1})})},[k(c.TypeSignature("where","via","making"),c.TypeSignature("via","making")),w(T)])(["dm-names","datamap-names","datanames"],"Array",function(e,t){return Array.from(t.keys()).sort(i("en"))},[Map])(["dm-values","datamap-values","datavalues"],"Array",function(e,t){return Array.from(t.entries()).sort(i("en",function(e){return String(e[0])})).map(function(e){return b(e[1])})},[Map])(["dm-entries","datamap-entries","dataentries"],"Array",function(e,t){return Array.from(t.entries()).sort(function(e,t){return[e[0],t[0]].sort(i("en"))[0]===e[0]?-1:1}).map(function(e){return new Map([["name",e[0]],["value",b(e[1])]])})},[Map])(["dm-altered","datamap-altered"],"Datamap",function(a,o,e){return Array.from(e.entries()).sort(function(e,t){return[e[0],t[0]].sort(i("en"))[0]===e[0]?-1:1}).reduce(function(e,t,n){if(!l.containsError(e)){var r=new Map([["name",t[0]],["value",b(t[1])]]),r=o.apply(a,{loop:r,pos:n+1});if(l.containsError(r))return r;e.set(t[0],null===r?t[1]:r)}return e},new Map)},[k(c.TypeSignature("via"),c.TypeSignature("where","via")),Map])("history","Array",function(e,t){var n=s.history();return t?(t=t.filter(e,n.map(function(e){return a.get(e)})),l.containsError(t)?t:t.map(function(e){return e.get("name")})):n},[n(c.TypeSignature("where"))])("visited","Boolean",function(e,t){var n;return"string"==typeof t?a.has(t)?0<s.passageNameVisited(t)||s.passage===t:l.create("macrocall","There's no passage named '"+t+"' in this story."):(n=s.history(),n=t.filter(e,n.concat(s.passage).map(function(e){return a.get(e)})),l.containsError(n)?n:0<n.length)},[k(String,c.TypeSignature("where"))])("passage","Datamap",function(e,t){return b(a.get(t||s.passage))||l.create("macrocall","There's no passage named '"+t+"' in this story.")},[n(String)])("passages","Array",function(e,t){var n=i("en"),r=_toConsumableArray(a.values()).map(function(e){return b(e)}),t=t?t.filter(e,r):r,e=l.containsError(t);return e||t.sort(function(e,t){return n(e.get("name"),t.get("name"))})},[n(c.TypeSignature("where"))])("open-storylets","Array",function(e,t){return e.stackTop.evaluateOnly?l.create("macrocall","(open-storylets:) can't be used in "+e.stackTop.evaluateOnly+"."):(e=a.getStorylets(e,t),l.containsError(e)||e.map(b))},[n(c.TypeSignature("where"))])("savedgames","Datamap",function(){function e(e){return"("+e+" "+p.ifid+") "}var t,n,r=0,a=new Map;do{if(!s.hasStorage)break;t=localStorage.key(r),r+=1;var o=e("Saved Game")}while(null!=(n=t)&&n.startsWith(o)&&(t=t.slice(o.length),a.set(t,localStorage.getItem(e("Saved Game Filename")+t))),t);return a},[])(["datamap","dm"],"Datamap",function(e){for(var r,a=new Map,t=arguments.length,n=new Array(1<t?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];var i=n.reduce(function(e,t){var n;if(!l.containsError(e))if(void 0===r)r=t;else{if(n=l.containsError(m(a,r)))return n;if(a.has(r))return l.create("macrocall","You used the same data name ("+d(r)+") twice in the same (datamap:) call.");a.set(r,b(t)),r=void 0}return e},!0);return l.containsError(i)?i:void 0!==r?l.create("macrocall","This datamap has a data name without a value."):a},S(k(o,T)))(["dataset","ds"],"Dataset",function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return new Set(n.filter(y).map(b))},S(T))("count","Number",function t(n,r){for(var e,a=arguments.length,o=new Array(2<a?a-2:0),i=2;i<a;i++)o[i-2]=arguments[i];if(1<o.length)return e=o.map(function(e){return t(n,r,e)}),l.containsError(e)||e.reduce(function(e,t){return e+t},0);var s=o[0];switch(h(r)){case"dataset":case"datamap":return l.create("macrocall","(count:) shouldn't be given a datamap or dataset.","You should use the 'contains' operator instead. For instance, write: $variable contains 'value'.");case"string":return"string"!=typeof s?l.create("macrocall",d(r)+" can't contain  "+d(s)+" because it isn't also a string."):s?r.split(s).length-1:0;case"array":return r.reduce(function(e,t){return e+g(t,s)},0);default:return l.create("macrocall",d(r)+" can't contain values, let alone "+d(s)+".")}},[T,w(T)])}),define("macrolib/enchantments",["jquery","utils","utils/operationutils","engine","state","passages","macros","datatypes/hookset","datatypes/codehook","datatypes/changercommand","datatypes/lambda","internaltypes/changedescriptor","internaltypes/enchantment","internaltypes/twineerror"],function(c,r,e,l,s,n,u,p,a,d,t,i,f,h){var m=e.is,e=u.TypeSignature,g=e.either,y=e.rest,o=e.optional,b=Object.assign;function v(e,t){if(d.isPrototypeOf(t)&&!t.canEnchant)return h.create("datatype","The changer given to (".concat(e,":) can't include a revision, enchantment, or interaction changer like (replace:), (click:), or (link:)."))}["enchant","change"].forEach(function(o){u.addCommand(o,function(e,t){t=v(o,t);if(t)return t},function(t,n,e){n=p.from(n);var r,a=[];return d.isPrototypeOf(e)&&(r=i.create({section:t}),e.run(r),0<(r.innerEnchantments||[]).length)&&(r=r.innerEnchantments.map(function(e){return e(n)}),a.push.apply(a,_toConsumableArray(r))),a.push(f.create(_defineProperty(_defineProperty({scope:n},d.isPrototypeOf(e)?"changer":"lambda",e),"section",t))),a.forEach(function(e){"enchant"===o?(t.addEnchantment(e),t.updateEnchantments()):e.enchantScope()}),""},[g(p,String),g(d,t.TypeSignature("via"))],!1)}),u.addChanger("enchant-in",function(e,t,n){var r=v("enchant-in",n);return r||d.create("enchant-in",[t,n])},function(t,n,r){return t.innerEnchantments=(t.innerEnchantments||[]).concat(function(e){return f.create(_defineProperty(_defineProperty({scope:p.from(n),localHook:e},d.isPrototypeOf(r)?"changer":"lambda",r),"section",t.section))}),t},[g(p,String),g(d,t.TypeSignature("via"))]),[["link-style",p.create({type:"name",data:"link"})],["line-style",p.create({type:"base",data:p.create({type:"name",data:"page"})},"lines",void 0)],["char-style",p.create({type:"base",data:p.create({type:"name",data:"page"})},"chars",void 0)]].forEach(function(e){var e=_slicedToArray(e,2),r=e[0],a=e[1];u.addChanger(r,function(e,t){var n=v(r,t);return n||d.create(r,[t])},function(t,n){return t.innerEnchantments=(t.innerEnchantments||[]).concat(function(e){return f.create(_defineProperty(_defineProperty({scope:a,localHook:e},d.isPrototypeOf(n)?"changer":"lambda",n),"section",t.section))}),t},[g(d,t.TypeSignature("via"))])});e=["replace","append","prepend"];function w(i,s){return r.onStartup(function(){var e=i.classList.replace(/ /g,"."),t=i.blockClassList?i.blockClassList.replace(/ /g,"."):"",n="."+e+(t?",."+t:"");r.storyElement.on(i.event.map(function(e){return e+".enchantment"}).join(" "),n,function(){var e,t=c(this);r.options.debug&&r.options.ignoreClickEvents&&!t.is("tw-backdrop.eval-replay *, tw-backdrop.harlowe-crash *")||t.is("tw-open-button")||(e=(t=c(Array.from(t.parents(n).add(this)).sort(function(e,t){return 8&e.compareDocumentPosition(t)?1:-1})[0])).data("enchantmentEvent"))&&e(t)})}),[function(e,t,n){if(!t)return h.create("datatype","A string given to this ("+s+":) macro was empty.");if(n){var r=v(s,n);if(r)return r}return d.create(s,[p.from(t)].concat(n?[n]:[]))},function(t,e,n){t.enabled=!1,t.transitionDeferred=!0,i.rerender&&(t.newTargets=(t.newTargets||[]).concat({target:e,append:i.rerender}));var r,a=null!=(r=t.section)&&r.stackTop?t.section.stackTop.tempVariables:Object.create(null),o=f.create(_defineProperty({functions:[function(e){e.attr("class",e.children().is("tw-story, tw-sidebar, tw-passage")||["block","flex"].includes(e.children().css("display"))?i.blockClassList:i.classList),e.attr({tabIndex:"0"})}],data:{enchantmentEvent:function(){var e;null!=(e=t.section.stackTop)&&e.blocked||(i.once&&t.section.removeEnchantment(o),i.goto?l.goToPassage(i.goto,{transition:i.transition}):i.undo?l.goBack({transition:i.transition}):t.section.renderInto(t.source,null,_objectSpread(_objectSpread({},t),{},{append:i.once?"append":"replace",enabled:!0,transitionDeferred:!1}),a))}},scope:e,section:t.section,name:s},d.isPrototypeOf(n)?"changer":"lambda",n));return t.section&&(t.section.addEnchantment(o),o.enchantScope()),t},[g(p,String),o(g(d,t.TypeSignature("via")))]]}e.forEach(function(o){u.addChanger(o,function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.every(Boolean)?d.create(o,n.map(p.from),null,!1):h.create("datatype","A string given to this (".concat(o,":) macro was empty."))},function(e){var t;0<c(e.target).parents().filter("tw-collapsed,[collapsing=true]").length||e.attr.some(function(e){return e.collapsing})||(e.attr=[].concat(_toConsumableArray(e.attr),[{collapsing:!1}])),e.newTargets=e.newTargets||[];for(var n=arguments.length,r=new Array(1<n?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return(t=e.newTargets).push.apply(t,_toConsumableArray(r.filter(function(n){return!e.newTargets.some(function(e){var t=e.target,e=e.append;return m(n,t)&&o===e})}).map(function(e){return{target:e,append:o,before:!0}}))),e},y(g(p,String)))(o+"-with",function(e,t){return d.create(o+"-with",[t],null,!1)},function(e,t){return a.isPrototypeOf(t)&&(t=t.code),e.appendSource=(e.appendSource||[]).concat({source:t,append:o}),e},g(a,String))});var k="ontouchstart"in window||0<navigator.maxTouchPoints||0<navigator.msMaxTouchPoints,S=[{name:"click",enchantDesc:{event:["click"],once:!0,rerender:"",classList:"link enchantment-link",blockClassList:"enchantment-clickblock"}},{name:"mouseover",enchantDesc:{event:["mouseenter",k?"click":""].filter(Boolean),once:!0,rerender:"",classList:"link enchantment-mouseover",blockClassList:"enchantment-mouseoverblock"}},{name:"mouseout",enchantDesc:{event:["mouseleave",k?"click":""].filter(Boolean),once:!0,rerender:"",classList:"link enchantment-mouseout",blockClassList:"enchantment-mouseoutblock"}},{name:"doubleclick",enchantDesc:{event:["dblclick"],once:!0,rerender:"",classList:"link enchantment-dblclick",blockClassList:"enchantment-dblclickblock"}}];S.forEach(function(e){"doubleclick"!==e.name&&(u.addChanger.apply(u,[e.name].concat(_toConsumableArray(w(e.enchantDesc,e.name)))),"click"===e.name)&&u.addChanger.apply(u,[e.name+"-rerun"].concat(_toConsumableArray(w(_objectSpread(_objectSpread({},e.enchantDesc),{},{once:!1}),e.name+"-rerun"))))}),r.onStartup(function(){S.forEach(function(e){var n=e.enchantDesc;n.blockClassList&&r.storyElement.on(n.event.map(function(e){return e+".enchantment"}).join(" "),function(){var e,t=c(this);r.options.debug&&r.options.ignoreClickEvents&&!t.is("tw-backdrop.eval-replay *, tw-backdrop.harlowe-crash *")||t.is("tw-open-button")||(e=(t=c(Array.from(t.parents("."+n.blockClassList.replace(/ /g,"."))).sort(function(e,t){return 8&e.compareDocumentPosition(t)?1:-1})[0])).data("enchantmentEvent"))&&e(t)})})}),e.forEach(function(n){S.forEach(function(e){var t;"doubleclick"!==e&&(t=_objectSpread(_objectSpread({},e.enchantDesc),{},{rerender:n}),e=e.name+"-"+n,u.addChanger.apply(u,[e].concat(_toConsumableArray(w(t,e)))))})}),S.forEach(function(i){"doubleclick"!==i&&["goto","undo"].forEach(function(a){var o=i.name+"-"+a;u.addCommand(o,function(e,t){return!e||!t&&"goto"===a?h.create("datatype","A string given to this ("+o+":) macro was empty."):"goto"!==a||n.hasValid(t)?void 0:h.create("macrocall","I can't ("+o+":) the passage '"+t+"' because it doesn't exist.")},function(e,t,n,r){return"undo"===a&&s.pastLength<1?h.create("macrocall","I can't (undo:) on the first turn."):((0,_slicedToArray(w(_objectSpread(_objectSpread({},i.enchantDesc),{},{transition:e.data.passageT8n},"undo"===a?{undo:!0}:{goto:r}),o),2)[1])({section:t},p.from(n)),b(e,{source:""}))},[g(p,String)].concat("undo"===a?[]:String))})})}),define("macrolib/links",["jquery","macros","utils","state","passages","engine","datatypes/changercommand","internaltypes/changedescriptor","datatypes/hookset","datatypes/lambda","internaltypes/twineerror"],function(i,e,c,l,u,p,a,d,t,f,h){var n=e.TypeSignature,r=n.optional,o=n.rest,n=n.either,m=["Links can't have empty strings for their displayed text.","In the link syntax, a link's displayed text is inside the [[ and ]], and on the non-pointy side of the -> or <- arrow if it's there."],g=Object.assign;function s(e,t,n){n=n||t;var r,a=u.hasValid(t)&&t===n,e=e.evaluateTwineMarkup(c.unescape(n),"a link's passage name");return a?t=(a=0<e.children().length?"`".repeat((n.match(/`+/)||[]).reduce(function(e,t){return Math.max(e,t.length+1)},1)):"")+"\0".repeat(!!a)+t+"\0".repeat(!!a)+a:(e.findAndFilter("tw-error").length&&(r=e.findAndFilter("tw-error").data("TwineError")),n=e.text()),{text:t,passage:n,error:r}}c.onStartup(function(){var e="ontouchstart"in window||0<navigator.maxTouchPoints||0<navigator.msMaxTouchPoints;function t(e){var t=i(this),n=t.closest("tw-expression"),r=t.closest("tw-expression, tw-hook"),a=r.data("clickEvent"),r=r.data("section");if((!c.options.debug||!c.options.ignoreClickEvents||t.is("tw-backdrop.eval-replay *, tw-backdrop.harlowe-crash *"))&&!t.is("tw-open-button")&&(null==r||!r.stackTop||!r.stackTop.blocked||r.stackTop.blocked instanceof i&&r.stackTop.blocked.find(t).length)){if(a)return 0<t.find("tw-error").length?void 0:(e.stopPropagation(),void a(t));var r=n.data("linkPassageName"),o=_objectSpread({},n.data("passageT8n")||{});n.find("tw-enchantment").each(function(e,t){Object.assign(o,i(t).data("passageT8n")||{})}),r?(e.stopPropagation(),p.goToPassage(r,{transition:o})):t.is("[undo]")?(e.stopPropagation(),p.goBack({transition:o})):t.is("[fullscreen]")&&(e.stopPropagation(),p.toggleFullscreen())}}c.storyElement.on("click.passage-link","tw-link"+(e?"":":not(.enchantment-mouseover):not(.enchantment-mouseout):not(.enchantment-dblclick)"),t).on("mouseover.passage-link","tw-link.enchantment-mouseover, tw-expression.enchantment-mouseover > tw-link",t).on("mouseout.passage-link","tw-link.enchantment-mouseout, tw-expression.enchantment-mouseout > tw-link",t).on("dblclick.passage-link","tw-link.enchantment-dblclick, tw-expression.enchantment-dblclick > tw-link",t),i(document).on("fullscreenchange",function(){i("tw-link[fullscreen]",c.storyElement).each(function(e,t){(i(t).closest("tw-expression, tw-hook").data("fullscreenEvent")||Object)(t)})})}),[["link","link-replace"],["link-reveal","link-append"],["link-repeat"],["link-rerun"]].forEach(function(s){return e.addChanger(s,function(e,t,n){return t?n&&!n.canEnchant?h.create("datatype","The changer given to (".concat(s[0],":) can't be (or include) a revision, enchantment, or interaction changer like (replace:), (click:), or (link:).")):a.create(s[0],[t].concat(n||[]),null,!0):h.create("datatype",m[0])},function(r,e,t){var n,a=s[0],o=null!=(n=r.section)&&n.stackTop?r.section.stackTop.tempVariables:Object.create(null),i=d.create({source:"<tw-link tabindex=0>"+e+"</tw-link>",target:function(){return r.target},append:"replace",data:{section:r.section,clickEvent:function(e){r.enablers=r.enablers.filter(function(e){return e.descriptor!==i}),"link-reveal"===a&&e.contents().unwrap();var t,n=e.parentsUntil(":not(tw-enchantment)").parent();n.length||(n=e.parent()),"link-rerun"===a&&(t=e.parentsUntil(":not(tw-enchantment)"),e.detach(),t.remove()),"link"!==a&&"link-rerun"!==a||n.empty(),r.section.renderInto("",null,r,o),"link-rerun"===a&&n.prepend(e)}}});return r.enablers=(r.enablers||[]).concat({descriptor:i,changer:t}),r},[String,r(a)])}),e.addCommand("link-goto",function(e){if(!e)return h.create.apply(h,["datatype"].concat(m))},function(e,t,n,r){var a,o=s(t,n,r);return n=o.text,r=o.passage,(o=o.error)||(e.transition?h.create("datatype","Please attach ("+(o="transition")+"-depart:) or ("+o+"-arrive:) to a passage link, not ("+o+":)."):(a=(a=u.hasValid(r)?a:'<tw-broken-link passage-name="'+c.escape(r)+'">'+n+"</tw-broken-link>")||"<tw-link tabindex=0 "+(0<l.passageNameVisited(r)?'class="visited" ':"")+">"+n+"</tw-link>",e.data.linkPassageName=r,e.data.section=t,g(e,{source:a,transitionDeferred:!0})))},[String,r(String)])("link-storylet",function(){var e=(e=1===arguments.length||"string"!=typeof(arguments.length<=0?void 0:arguments[0])?0:1)<0||arguments.length<=e?void 0:arguments[e];if(!e||"string"==typeof e)return h.create("datatype","(link-storylet:) should be given one index number or one 'where' lambda, after the optional link text string.")},function(e,t){var n=(n=2+("string"==typeof(arguments.length<=2?void 0:arguments[2])?1:0))<2||arguments.length<=n?void 0:arguments[n],r="string"==typeof(arguments.length<=2?void 0:arguments[2])&&(arguments.length<=2?void 0:arguments[2]),a=((a=(arguments.length<=2?0:arguments.length-2)-1+2)<2||arguments.length<=a?void 0:arguments[a])!==n&&((a=(arguments.length<=2?0:arguments.length-2)-1+2)<2||arguments.length<=a?void 0:arguments[a]);if(e.transition)return h.create("datatype","Please attach (".concat(o="transition","-depart:) or (").concat(o,"-arrive:) to (link-storylet:), not (").concat(o,":)."));var o=f.isPrototypeOf(n),i=u.getStorylets(t,o&&n),s=h.containsError(i);if(s)return s;var c,s=i[o?0:n<0?i.length+n:n-1];if(s)s=s.get("name"),r=r||s,c=c||"<tw-link tabindex=0 "+(0<l.passageNameVisited(s)?'class="visited" ':"")+">"+r+"</tw-link>",e.data.linkPassageName=s,e.data.section=t;else{if(!a)return e;c=a}return g(e,{source:c,transitionDeferred:!0})},[n(parseInt,String,f.TypeSignature("where")),r(n(parseInt,String,f.TypeSignature("where"))),r(String)])("link-undo",function(e){if(!e)return h.create("datatype",m[0])},function(t,e,n){var r,a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"";return l.pastLength<1?g(t,{source:a}):(r=(t.data.section=e).stackTop.tempVariables,t.data.forgetUndosEvent=function(){return t.data.section.whenUnblocked(function(){var e=_objectSpread(_objectSpread({},t),{},{append:"replace",source:a,transitionDeferred:!1});t.section.renderInto("",null,e,r)})},g(t,{source:"<tw-link tabindex=0 undo>"+n+"</tw-link>",transitionDeferred:!0}))},[String,r(String)])("link-show",function(e){if(!e)return h.create("datatype",m[0])},function(r,a,e){for(var t=arguments.length,n=new Array(3<t?t-3:0),o=3;o<t;o++)n[o-3]=arguments[o];return r.data.section=a,r.data.clickEvent=function(e){e.contents().unwrap(),n.forEach(function(e){return e.forEach(a,function(e){var t=e.data("originalSource")||"",n=e.data("hidden");n&&(e.removeData("hidden"),n instanceof i?e.empty().append(n):(n=e.data("tempVariables"),a.renderInto("",null,_objectSpread(_objectSpread({},r),{},{source:t,target:e,transitionDeferred:!1}),n&&Object.create(n))))})})},g(r,{source:"<tw-link tabindex=0>"+e+"</tw-link>",transitionDeferred:!0})},[String,o(t)])("link-fullscreen",function(e,t){if(!e||!t)return h.create("datatype",m[0])},function(t,e,n,r){function a(){return document.fullscreenEnabled||document.msFullscreenEnabled?"<tw-link tabindex=0 fullscreen>"+(document.fullscreenElement||document.msFullscreenElement?r:n)+"</tw-link>":r?"<tw-broken-link>"+r+"</tw-broken-link>":""}var o=e.stackTop.tempVariables;return t.data.section=e,t.data.fullscreenEvent=function(){(document.fullscreenEnabled||document.msFullscreenEnabled)&&t.data.section.whenUnblocked(function(){var e=_objectSpread(_objectSpread({},t),{},{append:"replace",source:a(),transitionDeferred:!1});t.section.renderInto("",null,e,o)})},g(t,{source:a(),transitionDeferred:!0})},[String,String,r(String)]),e.addChanger(["link-reveal-goto"],function(e,t,n,r){if(!t)return h.create.apply(h,["datatype"].concat(m));if(a.isPrototypeOf(n)){if(a.isPrototypeOf(r))return h.create("datatype","You mustn't give two changers to (link-reveal-goto:)");r=n,n=void 0}return r&&!r.canEnchant?h.create("datatype","The changer given to (link-reveal-goto:) can't include a revision, enchantment, or interaction changer like (replace:), (click:), or (link:)."):(t=(e=s(e,t,n)).text,n=e.passage,e.error||a.create("link-reveal-goto",[t,n,r].filter(function(e){return void 0!==e}),null,!1))},function(t,e,n,r){var a,o,i,s;if(u.hasValid(n))return o=l.passageNameVisited(n),i=null!=(a=t.section)&&a.stackTop?t.section.stackTop.tempVariables:Object.create(null),s=d.create({source:"<tw-link tabindex=0 "+(0<o?'class="visited" ':"")+">"+e+"</tw-link>",target:t.target,append:"replace",data:{section:t.section,append:"replace",clickEvent:function(e){t.enablers=t.enablers.filter(function(e){return e.descriptor!==s}),e.contents().unwrap(),t.section.renderInto("",null,t,i),t.section.whenUnblocked(function(){return p.goToPassage(n,{transition:t.data.passageT8n})})}}}),t.enablers=(t.enablers||[]).concat({descriptor:s,changer:r}),t;t.source='<tw-broken-link passage-name="'+c.escape(n)+'">'+e+"</tw-broken-link>"},[String,r(n(a,String)),r(a)])}),define("macrolib/metadata",["macros","utils/operationutils","datatypes/lambda","internaltypes/twineerror"],function(t,e,n,s){function c(e){return{TwineScript_TypeName:"a ("+e+":) macro",TwineScript_ObjectName:"a ("+e+":) macro",TwineScript_Unstorable:!0,TwineScript_Print:function(){return""}}}var l=e.clone,u=e.objectName,p=e.isValidDatamapName,e=t.TypeSignature,r=e.zeroOrMore,e=e.Any;[["storylet",n.TypeSignature("when")],["urgency",Number],["exclusivity",Number]].forEach(function(e){var e=_slicedToArray(e,2),n=e[0],e=e[1];t.add(n,"Metadata",function(e,t){return e.stackTop.speculativePassage?t:c(n)},e)}),t.add("metadata","Metadata",function(e){for(var r,a=new Map,t=arguments.length,n=new Array(1<t?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];var i=n.reduce(function(e,t){var n;if(!s.containsError(e))if(void 0===r)r=t;else{if(n=s.containsError(p(a,r)))return n;if(a.has(r))return s.create("macrocall","You used the same data name ("+u(r)+") twice in the same (metadata:) call.");a.set(r,l(t)),r=void 0}return e},!0);return s.containsError(i)?i:void 0!==r?s.create("macrocall","This (metadata:) macro has a data name without a value."):e.stackTop.speculativePassage?a:c("metadata")},r(e))}),define("macrolib/patterns",["macros","utils","utils/operationutils","datatypes/lambda","datatypes/datatype","datatypes/typedvar","internaltypes/twineerror","internaltypes/varscope"],function(e,t,n,y,b,h,v,w){function k(e){var r,t,a=e.name,n=e.fullArgs,o=e.args,i=e.makeRegExpString,s=void 0===i?function(e){return e.join("")}:i,c=void 0!==(i=e.insensitive)&&i,l=void 0===(i=e.canContainTypedVars)||i,u=void 0===(i=e.canBeUsedAlone)||i,p=void 0===(i=e.canContainTypedGlobals)||i,d=o||n,f=E(null),e=d.map(function e(t){if(h.isPrototypeOf(t)){var n=t.varRef;if(!l)return v.create("operation","Optional string patterns, like (".concat(a,":)").concat("p-many"===a?" with a minimum of 0 matches":"",", can't have typed variables inside them."));if(!p&&!w.isPrototypeOf(n.object))return v.create("operation","Only typed temp variables can be used in patterns given to (".concat(a,":)"));n=n.getName();if(n in f)return v.create("operation","There's already a typed temp variable named _".concat(n," inside this (").concat(a,":) call."));f[n]=!0;n=e(t.datatype);return v.containsError(n)?n:"("+n+")"}if(b.isPrototypeOf(t)){if(!(l&&p||"function"!=typeof t.typedVars)){n=t.typedVars();if(!l&&n.length)return v.create("operation","(".concat(a,":) can't have typed variables inside its pattern."));if(!p&&n.some(function(e){return!w.isPrototypeOf(e.varRef.object)}))return v.create("operation","Only typed temp variables can be used in patterns given to (".concat(a,":)"))}var r;return t.regExp?(t.rest?"(?:":"")+(c?t.insensitive():t).regExp+(t.rest?")*":""):(n=t.name,r=t.rest?"*":"","alnum"===n?m+r:"whitespace"===n?_+r:"uppercase"===n?(c?T:g)+r:"lowercase"===n?(c?T:S)+r:"anycase"===n?T+r:"digit"===n?"\\d"+r:"linebreak"===n?"(?:\\r|\\n|\\r\\n)"+r:"str"===n?".*?":["even","odd","int","num"].includes(n)?v.create("datatype","Please use string datatypes like 'digit' in (".concat(a,":) instead of number datatypes.")):v.create("datatype","The (".concat(a,":) macro must only be given string-related datatypes, not ").concat(O(t),".")))}return"string"==typeof t?(t=t.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&"),c?t.replace(RegExp("(".concat(g,"|").concat(S,")"),"g"),function(e){return"["+e.toUpperCase()+e.toLowerCase()+"]"}):t):(x("createPattern","mapper() was given a non-string non-datatype "+t),"")});return(i=v.containsError(e))||(r=s(e),t=C(E(b),{name:a,regExp:r,insensitive:function(){return c?t:k({name:a,fullArgs:n,args:d.map(function(e){return b.isPrototypeOf(e)&&"function"==typeof e.insensitive?e.insensitive():e}),makeRegExpString:s,insensitive:!0,canContainTypedVars:l,canBeUsedAlone:u})},typedVars:function(){return d.reduce(function(e,t){return h.isPrototypeOf(t)&&(e=e.concat(c?h.create(k({name:"p-ins",fullArgs:[t.datatype],insensitive:!0}),t.varRef):t),t=t.datatype),e=b.isPrototypeOf(t)&&"function"==typeof t.typedVars?e.concat(t.typedVars()):e},[])},destructure:function(e){var n,t;return"string"!=typeof e?[v.create("operation","I can't put ".concat(O(e)," into ").concat(this.TwineScript_ToSource()," because it isn't a string."))]:(n=this.typedVars()).length?(t=(RegExp("^"+(this.rest?"(?:":"")+r+(this.rest?")*":"")+"$").exec(e)||[]).slice(1)).length?t.map(function(e,t){t=n[t];if(t)return t.datatype.rest&&!t.datatype.regExp&&((t=t.TwineScript_Clone()).datatype=k({name:"p",fullArgs:[t.datatype]})),{dest:t,value:e||"",src:void 0}}).filter(Boolean):[v.create("operation","I can't put ".concat(O(e)," because it doesn't match the pattern ").concat(this.TwineScript_ToSource(),"."))]:[]},TwineScript_IsTypeOf:function(e){return u?"string"==typeof e&&!!e.match("^"+(this.rest?"(?:":"")+r+(this.rest?")*":"")+"$"):v.create("operation","A (".concat(a,":) datatype must only be used with a (p:) macro."))},TwineScript_toTypeSignatureObject:function(){var t=this;return{pattern:"range",name:a,range:function(e){return t.TwineScript_IsTypeOf(e)}}},TwineScript_ToSource:function(){return(this.rest?"...":"")+"("+a+":"+n.map(A)+")"}}),Object.defineProperty(t,"TwineScript_ObjectName",{get:function(){return"a (".concat(a,":) datatype")}}),t)}var m=t.anyRealLetter,g=t.anyUppercase,S=t.anyLowercase,T=t.anyCasedLetter,_=t.realWhitespace,x=t.impossible,O=n.objectName,A=n.toSource,t=e.TypeSignature,n=t.rest,r=t.either,a=t.optional,t=t.nonNegativeInteger,C=Object.assign,E=Object.create,o=n(r(String,b,h));e.add(["p","pattern"],"Datatype",function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return k({name:"p",fullArgs:n})},o)(["p-either","pattern-either"],"Datatype",function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return k({name:"p-either",fullArgs:n,canContainTypedVars:!1,makeRegExpString:function(e){return"(?:"+e.join("|")+")"}})},o)(["p-opt","pattern-opt","p-optional","pattern-optional"],"Datatype",function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return k({name:"p-opt",fullArgs:n,canContainTypedVars:!1,makeRegExpString:function(e){return"(?:"+e.join("")+")?"}})},o)(["p-not","pattern-not"],"Datatype",function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.find(function(e){return"string"==typeof e?1!==_toConsumableArray(e).length:e.rest||e.regExp||["str","empty"].includes(e.name)})?v.create("datatype","(p-not:) should only be given single characters, or datatypes that match single characters"):k({name:"p-not",fullArgs:n,canContainTypedVars:!1,makeRegExpString:function(e){return"[^"+e.map(function(e){return e.startsWith("[")&&e.endsWith("]")?e.slice(1,-1):e}).join("")+"]"}})},o)(["p-not-before","pattern-not-before"],"Datatype",function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return k({name:"p-not-before",fullArgs:n,canContainTypedVars:!1,makeRegExpString:function(e){return"(?!"+e.join("")+")"}})},o)(["p-before","pattern-before"],"Datatype",function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return k({name:"p-before",fullArgs:n,canContainTypedVars:!1,makeRegExpString:function(e){return"(?="+e.join("")+")"}})},o)(["p-start","pattern-start"],"Datatype",function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return k({name:"p-start",fullArgs:n,makeRegExpString:function(e){return"^(?:"+e.join("")+")"}})},o)(["p-end","pattern-end"],"Datatype",function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return k({name:"p-end",fullArgs:n,makeRegExpString:function(e){return"(?:"+e.join("")+")$"}})},o)(["p-many","pattern-many"],"Datatype",function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a,o,i,s=n.slice();return"number"==typeof n[0]&&(a=n.shift(),o="number"==typeof n[0]?n.shift():1/0),!(void 0!==o&&o<a)&&n.length?(i=n.find(function(e){return"string"!=typeof e&&!b.isPrototypeOf(e)&&!h.isPrototypeOf(e)}))?v.create("datatype","This (p-many:) macro can only be given a min and max number followed by datatypes or strings, but was also given "+O(i)+"."):k({name:"p-many",args:n,fullArgs:s,canContainTypedVars:0<a,makeRegExpString:function(e){return"(?:"+e.join("")+")"+(void 0!==a?"{"+a+(o===1/0?",":o!==a?","+o:"")+"}":"+")}}):v.create("datatype","The (p-many:) macro needs to be given string patterns, not just min and max numbers.")},[n(r(t,String,b,h))])(["p-ins","pattern-ins","p-insensitive","pattern-insensitive"],"Datatype",function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return k({name:"p-ins",fullArgs:n,insensitive:!0})},o)(["split","splitted"],"Array",function(e,t,n){if(t=k({name:"split",fullArgs:[t],canContainTypedVars:!1}),v.containsError(t))return t;if(!n)return[""];if(!t.regExp)return _toConsumableArray(n);for(var r,a=RegExp(t.regExp),o=[];n&&(r=a.exec(n));){if(r.index+r[0].length===0)return o;o.push(n.slice(0,r.index)),n=n.slice(r.index+r[0].length)}return o.concat(n||[])},[r(String,b),String])("trimmed","String",function(e,t,n){return void 0===n||b.isPrototypeOf(t)&&"whitespace"===t.name?t.trim():(t=k({name:"trimmed",fullArgs:[t],canContainTypedVars:!1}),v.containsError(t)?t:t.regExp?n.replace(RegExp("^("+t.regExp+")*|("+t.regExp+")*$","g"),""):n)},[r(String,b),a(String)])(["str-find","string-find"],"String",function(e,t,n){if(t=k({name:"str-find",fullArgs:[t],canContainTypedGlobals:!1}),v.containsError(t))return t;for(var r,a=t.typedVars(),o=RegExp(t.regExp,"g"),i=[],s=o.lastIndex;(r=o.exec(n))&&s!==o.lastIndex;)if(s=o.lastIndex,a.length){for(var c=new Map,l=0;l<a.length;l+=1){if("match"===a[l].varRef.getName())return v.create("macrocall","There was a typed temp variable named _match in the pattern given to (str-find:)","The variable _match is reserved, and can't be used inside (str-find:)'s pattern.");c.set(a[l].varRef.getName(),r[l+1]),c.set("match",r[0])}i.push(c)}else i.push(r[0]);return i},[b,String])(["str-replaced","string-replaced","replaced"],"String",function(e,t,n,r,a){if("number"!=typeof t){if(void 0!==a)return v.create("macrocall","1 too many values were given to (str-replaced:).","If this is given 5 values, the first value must be a number of replacements.");a=r,r=n,n=t,t=1/0}else if(void 0===a)return v.create("macrocall","The (str-replaced:) macro needs 1 more value.","The final string seems to be missing.");if(b.isPrototypeOf(r))return v.create("datatype","The replacement value for (str-replaced:) must be a string or lambda, not ".concat(O(r)));if(y.isPrototypeOf(a)||y.isPrototypeOf(n))return v.create("datatype","The ".concat(y.isPrototypeOf(a)?"final string":"search pattern"," given to (str-replaced:) can't be a lambda."),"Only the replacement value (after the search pattern) can be a 'via' lambda.");if(n=k({name:"str-replaced",fullArgs:[n],canContainTypedGlobals:!1}),v.containsError(n))return n;if(!n.regExp)return a;for(var o,i=RegExp(n.regExp,"g"),s=y.isPrototypeOf(r)?n.typedVars():[],c=1,l=0,u="",p=i.lastIndex;a&&(o=i.exec(a))&&0<t&&p!==i.lastIndex;){for(var p=i.lastIndex,d=Object.create(e.stack.length?e.stackTop.tempVariables:w),f=0;f<s.length;f+=1){var h=s[f],m=h.varRef.create(d,h.varRef.propertyChain);if(v.containsError(m))return m;h=m.defineType(h.datatype);if(v.containsError(h))return h;m.set(o[f+1])}var g=y.isPrototypeOf(r)?r.apply(e,{loop:o[0],pos:c,tempVariables:d}):r;if(v.containsError(g))return g;if("string"!=typeof g)return v.create("datatype","(str-replaced:)'s lambda must produce a string, but it produced ".concat(O(g),' when given "').concat(o[0],'".'));u+=a.slice(l,o.index)+g,c+=1,--t,l=o.index+o[0].length}return u+=a.slice(l)},[r(t,String,b),r(b,String,y.TypeSignature("via")),r(String,y.TypeSignature("via")),a(String)])}),define("macrolib/stylechangers",["jquery","macros","utils","utils/renderutils","datatypes/colour","datatypes/hookset","datatypes/gradient","datatypes/changercommand","datatypes/lambda","internaltypes/changedescriptor","internaltypes/twineerror"],function(s,e,c,t,a,n,r,o,i,l,u){var p,d,f=t.geomParse,h=t.geomStringRegExp,m=Object.assign,t=e.TypeSignature,g=t.either,y=t.wrapped,b=t.optional,v=t.Any,w=t.Everything,k=t.zeroOrMore,S=t.rest,T=t.insensitiveSet,_=t.positiveNumber,x=t.positiveInteger,O=t.nonNegativeNumber,t=t.percent,y=[y(Boolean,'If you gave a number, you may instead want to check that the number is not 0. If you gave a string, you may instead want to check that the string is not "".')],A=(c.onStartup(function(){return c.storyElement.on("mouseenter.hover-macro","[hover=false]",function(){var e=s(this),t=e.data("hoverChanger");c.options.debug&&c.options.ignoreClickEvents&&!e.is("tw-backdrop.eval-replay *, tw-backdrop.harlowe-crash *")||(e.data({mouseoutStyle:e.attr("style")||""}),l.create({target:e},t).update(),e.attr("hover",!0))}).on("mouseleave.hover-macro","[hover=true]",function(){var e=s(this),t=e.data("mouseoutStyle");e.attr("style",t).removeData("mouseoutStyle").attr("hover",!1)})}),u.on(function(){s("tw-expression, tw-hook",c.storyElement).each(function(e,t){((t=s(t)).data("errorEvent")||Object)(t)})}),T("instant","dissolve","fade","rumble","shudder","pulse","zoom","flicker","slideleft","slideright","slideup","slidedown","fadeleft","faderight","fadeup","fadedown","blur")),C=T("dotted","dashed","solid","double","groove","ridge","inset","outset","none");e.addChanger("if",function(e,t){return o.create("if",[t])},function(e,t){return e.enabled=e.enabled&&t},y)("unless",function(e,t){return o.create("unless",[t])},function(e,t){return e.enabled=e.enabled&&!t},y)("elseif",function(e,t){return"lastHookShown"in e.stack[0]?o.create("elseif",[!1===e.stack[0].lastHookShown&&!!t]):u.create("macrocall","There's no (if:) or something else before this to do (else-if:) with.")},function(e,t){return e.enabled=e.enabled&&t},y)("else",function(e){return"lastHookShown"in e.stack[0]?o.create("else",[!1===e.stack[0].lastHookShown]):u.create("macrocall","There's nothing before this to do (else:) with.")},function(e,t){return e.enabled=e.enabled&&t},null)("hidden",function(){return o.create("hidden")},function(e){return e.enabled=!1},null)(["verbatim","v6m"],function(){return o.create("verbatim")},function(e){return e.verbatim=!0},null)("live",function(e,t){return o.create("live",t?[t]:[])},function(e,t){e.enabled=!1,e.transitionDeferred=!0,e.data.live={delay:t}},b(Number))("event",function(e,t){return o.create("event",[t])},function(e,t){e.enabled=!1,e.transitionDeferred=!0,e.data.live={event:t}},i.TypeSignature("when"))("more",function(){return o.create("more")},function(e){e.enabled=!1,e.transitionDeferred=!0,e.data.live={event:{when:!0,filter:function(e){return 0!==e.Identifiers.exits?[]:[!0]}}}},null)("after",function(e,t,n){return o.create("after",[t].concat(void 0!==n?[n]:[]))},function(e,t,n){e.enabled=!1,e.transitionDeferred=!0,e.data.live={event:{when:!0,filter:function(e){return c.anyInputDown()&&n&&(t-=n),e.Identifiers.time>t?[!0]:[]}}}},[_,b(O)])("after-error",function(){return o.create("after-error",[])},function(n){n.enabled=!1,n.transitionDeferred=!0;var r=n.section.stackTop.tempVariables;n.data.errorEvent=function(e){e.removeData("errorEvent");var t=_objectSpread(_objectSpread({},n),{},{enabled:!0,transitionDeferred:!1});t.data&&(t.data.errorEvent=void 0),n.section.whenUnblocked(function(){return n.section.renderInto("",null,t,r)})}},[])("hook",function(e,t){var n;return t?(n=c.insensitiveName(t))?o.create("hook",[n]):u.create("datatype",'The string given to (hook:), "'.concat(t,'", contained only dashes and underscores.')):u.create("datatype","The string given to (hook:) was empty.")},function(e,t){return e.attr.push({name:t})},[String])(["for","loop"],function(e,t){if(!t.loop)return u.create("datatype","The lambda provided to (for:) must refer to a temp variable, not just 'it'.");for(var n=arguments.length,r=new Array(2<n?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];return o.create("for",[t].concat(r))},function(e,t){for(var n=arguments.length,r=new Array(2<n?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];var o,i=t.filter(e.section,r);if(o=u.containsError(i))return o;e.loopVars[t.loop.getName()]=i||[]},[i.TypeSignature("where"),k(v)])(["transition","t8n"],function(e,t){return o.create("transition",[c.insensitiveName(t)])},function(e,t){return"zoom"===(e.transition=t)&&(e.transitionOrigin=function(){var e=s(this).offset(),t=e.left,e=e.top;return c.mouseCoords.x-t+"px "+(c.mouseCoords.y-e)+"px"}),e},[A])(["transition-time","t8n-time"],function(e,t){return o.create("transition-time",[t])},function(e,t){return e.transitionTime=t,e.data.passageT8n=m(e.data.passageT8n||{},{time:t}),e},[_])(["transition-delay","t8n-delay"],function(e,t){return o.create("transition-delay",[t])},function(e,t){return e.transitionDelay=t,e},[O])(["transition-skip","t8n-skip"],function(e,t){return o.create("transition-skip",[t])},function(e,t){return e.transitionSkip=t,e},[_])(["transition-depart","t8n-depart"],function(e,t){return o.create("transition-depart",[c.insensitiveName(t)])},function(e,t){return e.data.passageT8n=m(e.data.passageT8n||{},{depart:t}),"zoom"===t&&(e.data.passageT8n.departOrigin=function(){var e=s(this).offset(),t=e.left,e=e.top;return c.mouseCoords.x-t+"px "+(c.mouseCoords.y-e)+"px"}),e},[A])(["transition-arrive","t8n-arrive"],function(e,t){return o.create("transition-arrive",[c.insensitiveName(t)])},function(e,t){return e.data.passageT8n=m(e.data.passageT8n||{},{arrive:t}),"zoom"===t&&(e.data.passageT8n.arriveOrigin=function(){var e=s(this),t=e.offset(),n=t.left,t=t.top,r=e.height();return{"transform-origin":100*(c.mouseCoords.x-n)/e.width()+"% "+100*(c.mouseCoords.y-t)/r+"%",height:r+"px"}}),e},[A])("button",function(e,t){return void 0===t||f(t).size?o.create("button",t?[t]:[]):u.create("datatype",'The string given to (button:) should be a sizing line ("==X==", "==X", "=XXXX=" etc.), not '.concat(JSON.stringify(t),"."))},function(e,t){var t=f(t),n=t.marginLeft,t=t.size;return e.attr.push({class:function(){return this.className+(this.classList.contains("enchantment-button")?"":" ".repeat(0<this.className.length)+"enchantment-button")}}),e.styles.push({"margin-left":t?n+"%":void 0,width:t?t+"%":"100%"}),e},[b(String)]).apply(void 0,_toConsumableArray((d={click:{className:"enchantment-link",blockClassName:"enchantment-clickblock"},doubleclick:{className:"enchantment-dblclick",blockClassName:"enchantment-dblclickblock"},mouseover:{className:"enchantment-mouseover",blockClassName:"enchantment-mouseoverblock"},mouseout:{className:"enchantment-mouseout",blockClassName:"enchantment-mouseoutblock"}},["action",function(e,t){return o.create("action",[c.insensitiveName(t)])},function(e,t){return e.attr.push({class:function(){var e=function e(t){return(t=s(t)).is("tw-story, tw-sidebar, tw-passage")||["block","flex"].includes(t.css("display"))||t.children().get().some(e)}(this);return Array.from(this.classList).filter(function(t){return!Object.keys(d).some(function(e){return d[e].className===t||d[e].blockClassName===t})}).concat(d[t][e?"blockClassName":"className"]).join(" ")}}),e},[T.apply(void 0,_toConsumableArray(Object.keys(d)))]])))(["border","b4r"],function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return o.create("border",n.map(c.insensitiveName))},function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.styles.push({display:function(){var e=s(this).css("display");return n.every(function(e){return"none"===e})||!e.includes("inline")?e:"inline-block"},"border-style":n.join(" "),"border-width":function(){return this.style.borderWidth||"2px"}}),e},[C].concat(_toConsumableArray(Array(3).fill(b(C)))))(["border-size","b4r-size"],function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return o.create("border-size",n)},function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.styles.push({"border-width":n.map(function(e){return e+"px"}).join(" ")}),e},[O].concat(_toConsumableArray(Array(3).fill(b(O)))))("corner-radius",function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return o.create("corner-radius",n)},function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.styles.push({"border-radius":n.map(function(e){return e+"px"}).join(" "),padding:function(){return this.style.padding||n.map(function(e){return e+"px"}).join(" ")}}),e},[O].concat(_toConsumableArray(Array(3).fill(b(O)))))(["border-colour","b4r-colour","border-color","b4r-color"],function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return o.create("border-colour",n.map(function(e){return a.isPrototypeOf(e)?e.toRGBAString(e):e}))},function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.styles.push({"border-color":n.join(" ")}),e},[g(String,a)].concat(_toConsumableArray(Array(3).fill(b(g(String,a))))))("opacity",function(e,t){return o.create("opacity",[t])},function(e,t){return e.styles.push({opacity:t})},[t])("font",function(e,t){return o.create("font",[t])},function(e,t){return e.styles.push({"font-family":t}),e},[String])("align",function(e,t){var n=t.indexOf("><");return/^(==+>|<=+|=+><=+|<==+>)$/.test(t)?((n=~n?_objectSpread({"text-align":"center","max-width":"50%"},25===(n=Math.round(n/(t.length-2)*50))?{"margin-left":"auto","margin-right":"auto"}:{"margin-left":n+"%"}):"<"===t[0]&&">"===t.slice(-1)?{"text-align":"justify","max-width":"50%"}:t.includes(">")?{"text-align":"right"}:{"text-align":"left"}).display="block",o.create("align",[n])):u.create("datatype",'The (align:) macro requires an alignment arrow ("==>", "<==", "==><=" etc.) be provided, not "'+t+'"')},function(e,t){e.styles.push(t)},[String])(["text-colour","text-color","color","colour"],function(e,t){return o.create("text-colour",[t])},function(e,t){return a.isPrototypeOf(t)&&(t=t.toRGBAString(t)),e.styles.push({color:t}),e},[g(String,a)])(["text-size","size"],function(e,t){return o.create("text-size",[t])},function(e,t){return e.styles.push({"font-size":24*t+"px","line-height":36*t+"px"}),e},[O])("text-indent",function(e,t){return o.create("text-indent",[t])},function(e,t){return e.styles.push({"text-indent":t+"px",display:"inline-block"}),e},[O])(["text-rotate-z","text-rotate"],function(e,t){return o.create("text-rotate-z",[t])},function(e,t){return e.styles.push({display:"inline-block",transform:function(){var e=s(this).css("transform")||"";return(e="none"===e?"":e)+" rotate("+t+"deg)"}}),e},[Number])("text-rotate-y",function(e,t){return o.create("text-rotate-y",[t])},function(e,t){return e.styles.push({display:"inline-block",transform:function(){var e=s(this).css("transform")||"";return(e="none"===e?"":e)+" perspective(50vw) rotateY("+t+"deg)"}}),e},[Number])("text-rotate-x",function(e,t){return o.create("text-rotate-x",[t])},function(e,t){return e.styles.push({display:"inline-block",transform:function(){var e=s(this).css("transform")||"";return(e="none"===e?"":e)+" perspective(50vw) rotateX("+t+"deg)"}}),e},[Number])(["background","bg"],function(e,t){return o.create("background",[t])},function(e,t){return a.isPrototypeOf(t)?t=t.toRGBAString():r.isPrototypeOf(t)&&(t=t.toLinearGradientString()),t=a.isHexString(t)||a.isCSS3Function(t)?{"background-color":t}:t.startsWith("linear-gradient(")||t.startsWith("repeating-linear-gradient(")?{"background-image":t}:{"background-size":"cover","background-image":"url(".concat(t,")"),"background-attachment":"fixed"},e.styles.push(t,{display:function(){var e=s(this);return!e.children().length||c.childrenProbablyInline(e)?s(this).css("display"):"block"}}),e},[g(String,a,r)]).apply(void 0,_toConsumableArray((y={color:function(){return"transparent"}},p=m(Object.create(null),{none:{},bold:{"font-weight":"bold"},italic:{"font-style":"italic"},underline:{"text-decoration":"underline"},doubleunderline:{"text-decoration":"underline","text-decoration-style":"double"},wavyunderline:{"text-decoration":"underline","text-decoration-style":"wavy"},strike:{"text-decoration":"line-through"},doublestrike:{"text-decoration":"line-through","text-decoration-style":"double"},wavystrike:{"text-decoration":"line-through","text-decoration-style":"wavy"},superscript:{"vertical-align":"super","font-size":".83em"},subscript:{"vertical-align":"sub","font-size":".83em"},blink:{animation:"fade-in-out 1s steps(1,end) infinite alternate"},shudder:{animation:"shudder linear 0.1s 0s infinite"},mark:{"background-color":"hsla(60, 100%, 50%, 0.6)"},condense:{"letter-spacing":"-0.08em"},expand:{"letter-spacing":"0.1em"},outline:[{"text-shadow":function(){var e=s(this).css("color");return"-1px -1px 0 "+e+", 1px -1px 0 "+e+",-1px  1px 0 "+e+", 1px  1px 0 "+e}},{color:function(){return c.parentColours(s(this)).backgroundColour}}],shadow:{"text-shadow":function(){return"0.08em 0.08em 0.08em "+s(this).css("color")}},emboss:{"text-shadow":function(){return"0.04em 0.04em 0em "+s(this).css("color")}},smear:[{"text-shadow":function(){var e=s(this).css("color");return"0em   0em 0.02em "+e+",-0.2em 0em  0.5em "+e+", 0.2em 0em  0.5em "+e}},y],blur:[{"text-shadow":function(){return"0em 0em 0.08em "+s(this).css("color")}},y],blurrier:[{"text-shadow":function(){return"0em 0em 0.2em "+s(this).css("color")},"user-select":"none"},y],mirror:{display:"inline-block",transform:"scaleX(-1)"},upsidedown:{display:"inline-block",transform:"scaleY(-1)"},tall:{display:"inline-block",transform:"scaleY(1.5) translateY(-0.25ex)"},flat:{display:"inline-block",transform:"scaleY(0.5) translateY(0.25ex)"},fadeinout:{animation:"fade-in-out 2s ease-in-out infinite alternate"},rumble:{animation:"rumble linear 0.1s 0s infinite"},sway:{animation:"sway linear 2.5s 0s infinite"},buoy:{animation:"buoy linear 2.5s 0s infinite"},fidget:{animation:function(){return"fidget step-end 60s "+60*-Math.random()+"s infinite"+(Math.random()<.5?" reverse":"")}}}),["text-style",function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return o.create("text-style",n.map(c.insensitiveName))},function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var a=0;a<n.length;a+=1)"none"===n[a]?e.styles=[]:e.styles=e.styles.concat(p[n[a]]);return e},[S(T.apply(void 0,_toConsumableArray(Object.keys(p))))]])))("collapse",function(){return o.create("collapse")},function(e){return e.attr.push({collapsing:!0}),e},[])("hover-style",function(e,t){var n=l.create(),r=(t.run(n),n.summary());return r+""=="styles"||r.every(function(e){return"styles"===e||"attr"===e})&&n.attr.every(function(e){return Object.keys(e)+""=="style"})?o.create("hover-style",[t]):u.create("datatype","The changer given to (hover-style:) must only change the hook's style.")},function(e,t){return e.data.hoverChanger=t,e.attr.push({hover:function(e,t){return void 0!==t&&t}}),e},[o])("css",function(e,t){return t.trim().endsWith(";")||(t+=";"),o.create("css",[t])},function(e,t){return e.attr.push({style:function(){return(s(this).attr("style")||"")+t}}),e},[String])("test-true",function(){return o.create("test-true",[])},function(e){return e.enabled=!0},k(w))("test-false",function(){return o.create("test-false",[])},function(e){return e.enabled=!1},k(w)),e.addCommand("animate",s.noop,function(r,e,t,a,o){t.forEach(e,function(e){var t,n;"zoom"===name&&(n=(t=e.offset()).left,t=t.top,n=c.mouseCoords.x-n+"px "+(c.mouseCoords.y-t)+"px"),c.transitionIn(e,a,r.transitionTime||o,r.transitionDelay,r.transitionSkip,0,n)})},[S(n),T.apply(void 0,_toConsumableArray(A.innerType.filter(function(e){return"instant"!==e}))),b(_)]),["box","float-box"].forEach(function(i){return e.addChanger(i,function(e,t,n){var r=-1===t.search(h)||1<t.length&&!t.includes("="),a="float-box"===i&&(-1===n.search(h)||1<n.length&&!n.includes("="));return r||a?u.create("datatype","The ("+i+':) macro requires a sizing line("==X==", "==X", "=XXXX=" etc.) be provided, not "'+(r?t:n)+'".'):o.create(i,[t,n].filter(function(e){return void 0!==e}))},function(e,t,n){var r,t=f(t),a=t.marginLeft,t=t.size,o=("float-box"===i&&(r=(o=f(n)).marginLeft,n=o.size),"box"===i?"%":"vw"),t=_defineProperty(_defineProperty(_defineProperty({display:"block",width:t+o,"max-width":t+o},"box"===i?"margin-left":"left",a+o),"overflow-y","auto"),"padding",function(){var e=s(this).css("padding");return e&&"0px"!==e?e:"1em"});return void 0!==n&&(t.height="box"===i?1.5*n+2+"em":n+"vh"),"float-box"===i&&m(t,{position:"fixed",top:r+"vh","background-color":function(){return c.parentColours(s(this)).backgroundColour}}),e.styles.push(t),e},[String,"box"===i?b(x):String])})}),define("macrolib/values",["macros","state","utils","utils/operationutils","datatypes/colour","datatypes/gradient","datatypes/datatype","datatypes/hookset","datatypes/codehook","internaltypes/twineerror"],function(t,r,e,n,l,c,a,o,i,f){var s=e.realWhitespace,u=e.nth,p=e.anyRealLetter,d=e.plural,h=n.subset,m=n.objectName,g=n.clone,y=n.toSource,e=t.TypeSignature,n=e.rest,b=e.zeroOrMore,v=e.either,w=e.optional,k=e.insensitiveSet,S=e.numberRange,T=e.percent,_=e.nonNegativeInteger,x=e.positiveInteger,e=e.Any,O=Math.max,A=Math.min,C=Math.round,E=Math.floor,N=Math.ceil;function j(t){return function(){var e=t.apply(void 0,arguments);return"number"!=typeof e||isNaN(e)?f.create("macrocall","This mathematical expression doesn't compute!"):e}}t.add(["str","string","text"],"String",function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.map(function(e){return i.isPrototypeOf(e)?e.source:e}).join("")},[b(t.TypeSignature.either(String,Number,Boolean,Array,i))])("source","String",function(e,t){return"command"!==(null==t?void 0:t.TwineScript_TypeID)||t.TwineScript_ToSource?y(t):f.create("datatype","I can't construct the source code of a command created by a custom macro.")},[e])("substring","String",function(e,t,n,r){return h(t,n,r)},[String,parseInt,parseInt])("lowercase","String",function(e,t){return t.toLowerCase()},[String])("uppercase","String",function(e,t){return t.toUpperCase()},[String])("lowerfirst","String",function(e,t){return t.replace(RegExp(p+"+"),function(e){return(e=Array.from(e))[0].toLowerCase()+e.slice(1).join("").toLowerCase()})},[String])("upperfirst","String",function(e,t){return t.replace(RegExp(p+"+"),function(e){return(e=Array.from(e))[0].toUpperCase()+e.slice(1).join("").toLowerCase()})},[String])("words","Array",function(e,t){return t.split(RegExp(s+"+")).filter(Boolean)},[String])(["str-repeated","string-repeated"],"String",function(e,t,n){return 0===n.length?f.create("macrocall","I can't repeat an empty string."):n.repeat(t)},[_,String])(["str-reversed","string-reversed"],"String",function(e,t){return _toConsumableArray(t).reverse().join("")},[String])("joined","String",function(e,t){for(var n=arguments.length,r=new Array(2<n?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];return r.join(t)},[n(String)])("plural","String",function(e,t,n,r){return n&&""!==r?d(t,n,r):f.create("macrocall","The (plural:) macro can't be given empty strings.")},[parseInt,String,w(String)])(["str-nth","string-nth"],"String",function(e,t){return u(t)},[parseInt])("digit-format","String",function(e,t,n){if(1e21<=Math.abs(n))return f.create("macrocall","The number given to (digit-format:) is too big.");for(var r=/([^#0])(?=[#0]*$)/g,a=(r.exec(t)||[])[1],o=(/^[#0]*([^#0])/g.exec(t)||[])[1],i=(t=_toConsumableArray(t)).length,s=(a&&(","!==a||o&&","!==o)&&(i=r.lastIndex-1),Math.abs(n).toFixed(16).replace(/(\.\d*?)0+$/,function(e,t){return t}).replace(/^0+/,"")),c=s.includes(".")?s.indexOf("."):s.length,l=0,u="",p=t.length-1;0<=p;--p){var d=t[p];"0"===d||"#"===d?u=(s[c-i+p+l]||("0"===d?"0":""))+u:p<t.length-1&&0<p&&(u=d+u,l+=p===i?0:1)}return(n<0?"-":"")+u},[String,Number])(["num","number"],"Number",function(e,t){return Number.isNaN(+t)?f.create("macrocall","I couldn't convert "+m(t)+" to a number."):+t},[String])("datatype","Datatype",function(e,t){return a.from(t)},[e])("datapattern","Any",function(e,t){return function n(e){var r;return Array.isArray(e)?r=e.map(n):e instanceof Map?(r=new Map,_toConsumableArray(e).forEach(function(e){var e=_slicedToArray(e,2),t=e[0],e=e[1];return r.set(t,n(e))})):r=a.from(e),(e=f.containsError(r))||r}(t)},[e])(["rgb","rgba"],"Colour",function(e){return l.create({r:arguments.length<=1?void 0:arguments[1],g:arguments.length<=2?void 0:arguments[2],b:arguments.length<=3?void 0:arguments[3],a:arguments.length<=4?void 0:arguments[4]})},[S(0,255),S(0,255),S(0,255),w(T)])(["hsl","hsla"],"Colour",function(e,t,n,r,a){return(t=C(t)%360)<0&&(t+=360),l.create({h:t,s:n,l:r,a:a})},[Number,T,T,w(T)])(["lch","lcha"],"Colour",function(e,t,n,r,a){return(r=C(r)%360)<0&&(r+=360),l.create({l:t,c:n,h:r,a:a})},[T,S(0,132),Number,w(T)])("complement","Colour",function(e,t){return t.LCHRotate(180)},[l])("mix","Colour",function(e,t,n,r,a){n=n.toLCHA(),a=a.toLCHA();var o=1,i=(t+r!==1&&(t+r<1&&(o=t+r),t=(i=[t/(t+r),r/(t+r)])[0],r=i[1]),n.c<2||n.l<.01||.99<n.l?n.h=a.h:(a.c<2||a.l<.01||.99<a.l)&&(a.h=n.h),n.l*=n.a,n.c*=n.a,a.l*=a.a,a.c*=a.a,180<a.h-n.h?n.h+=360:a.h-n.h<-180&&(a.h+=360),n.a*t+a.a*r),s=(n.l*t+a.l*r)/i,c=(n.c*t+a.c*r)/i,n=(n.h*t+a.h*r)/i;return l.create({l:s,c:c,h:n,a:i*o})},[T,l,T,l])("palette","Array",function(e,t,n){var r,a=n.toLCHA(),o=a.l,a={l:o<=.75?.75+o/3:.75-3*(1-o),c:80,h:a.h,a:1},i=l.create(a);return a.l+=o<=.75?-.1:.1,a.l<.5&&(a.l*=.5/a.l),r=l.create(a),a.l+=o<=.85?.15:-.15,o=l.create(a),"adjacent"===t?(r=(i=i.LCHRotate(-30)).LCHRotate(30),o=i.LCHRotate(60)):"triad"===t&&(o=i.LCHRotate(180),r=i.LCHRotate(140),i=i.LCHRotate(-140)),[n,i,r,o]},[k("mono","adjacent","triad"),l])("gradient","Gradient",function(e,t){(t=C(t)%360)<0&&(t+=360);for(var n,r,a,o=arguments.length,i=new Array(2<o?o-2:0),s=2;s<o;s++)i[s-2]=arguments[s];return i.length<4?f.create("datatype","(gradient:) must be given at least 2 colour-stop pairs of numbers and colours."):(r=[],a=i.reduce(function(e,t){if(!f.containsError(e))if(void 0===n)n=t;else{if("number"!=typeof n||!l.isPrototypeOf(t))return f.create("datatype","(gradient:) colour-stops should be pairs of numbers and colours, not colours and numbers.");r.push({stop:n,colour:g(t)}),n=void 0}return e},!0),f.containsError(a)?a:void 0!==n?f.create("macrocall","This gradient has a colour-stop percent without a colour."):c.create(t,r))},[Number,n(v(T,l))])("stripes","Gradient",function(e,t,n){(t=C(t)%360)<0&&(t+=360);for(var r=0,a=[],o=arguments.length,i=new Array(3<o?o-3:0),s=3;s<o;s++)i[s-3]=arguments[s];return i.forEach(function(e){a.push({stop:r,colour:g(e)}),r+=n,a.push({stop:r,colour:g(e)})}),c.create(t,a,!0)},[Number,x,l,n(l)])("hooks-named","HookName",function(e,t){return t?o.create({type:"name",data:t}):f.create("datatype","(hooks-named:) can't be given an empty string.")},[String])("cond","Any",function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var a=0;a<n.length;a+=2){var o=n[a];if(a===n.length-1||f.containsError(o))return o;if("boolean"!=typeof o)return f.create("datatype","(cond:)'s "+u(a+1)+" value is "+m(o)+", but should be a boolean.");if(o)return n[a+1]}return f.create("macrocall","An odd number of values must be given to (cond:), not "+n.length,"(cond:) must be given one or more pairs of booleans and values, as well as one final value.")},[Boolean,e,n(e)]);({weekday:[function(){return["Sun","Mon","Tues","Wednes","Thurs","Fri","Satur"][(new Date).getDay()]+"day"},null],monthday:[function(){return(new Date).getDate()},null],currenttime:[function(){var e=new Date,t=e.getHours()<12;return(e.getHours()%12||12)+":"+((e.getMinutes()<10?"0":"")+e.getMinutes())+" "+(t?"A":"P")+"M"},null],currentdate:[function(){return(new Date).toDateString()},null],min:[A,n(Number)],max:[O,n(Number)],abs:[Math.abs,Number],sign:[Math.sign,Number],sin:[Math.sin,Number],cos:[Math.cos,Number],tan:[Math.tan,Number],floor:[E,Number],round:[C,Number],trunc:[function(e){return(0<e?E:N)(e)},Number],ceil:[N,Number],pow:[j(Math.pow),[Number,Number]],exp:[Math.exp,Number],sqrt:[j(Math.sqrt),Number],log:[j(Math.log),Number],log10:[j(Math.log10),Number],log2:[j(Math.log2),Number],random:[function(e,t){var n,t=t?(n=A(e,t),O(e,t)):(n=0,e);return t+=1,~~(r.random()*(t-n))+n},[parseInt,t.TypeSignature.optional(parseInt)]],"":function(){for(var e in this)e&&hasOwnProperty.call(this,e)&&t.add(e,"Number",function(a){return function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return a.apply(void 0,n)}}(this[e][0]),this[e][1])}})[""](),t.add("either","Any",function(e){var t=1+~~(r.random()*(arguments.length<=1?0:arguments.length-1));return t<1||arguments.length<=t?void 0:arguments[t]},n(e))("nth","Any",function(e,t){return t<=0?f.create("datatype","(nth:)'s first value should be a positive whole number, not "+t):(t=(t-1)%(arguments.length<=2?0:arguments.length-2)+2)<2||arguments.length<=t?void 0:arguments[t]},[parseInt,n(e)])}),!function(){var a,k={};function o(e){for(var t in e)this[t]=e[t]}function i(e,t){for(var n,r,a=e.innerText,o=null,i=0,s=i,c=a.length,l=null;i<c;){for(var u=a.slice(i),p=(o&&o.length?o[0]:e).innerMode,d=0,f=p.length;d<f;d+=1){var h=k[p[d]];if(!(h.constraint&&!h.constraint(l)||h.cannotFollowText&&("text"===(null==(w=l)?void 0:w.type)||s<i))&&(h.plainCompare?u.startsWith(h.pattern):h.pattern.test(u))){var m=h.fn(h.plainCompare?h.pattern:h.pattern.exec(u)),g=!1,y=0;if(m.matches){for(;o&&y<o.length;y+=1){var b=o[y],v=b.type,b=b.aka;if(v in m.matches){g=!0;break}b&&(v=b),-1<(null==(b=m.cannotCross)?void 0:b.indexOf(v))&&(y=o.length-1)}if((!o||y>=o.length)&&!m.isFront)continue}s<i&&e.addChild({type:"text",text:a.slice(s,i),innerMode:p});var s=i+=(l=e.addChild(m)).text.length,w=!1;g&&(t&&S(e,l,o[y]),o=o.slice(y+1),w=!0),!w&&l.isFront&&(o?o.unshift(l):o=[l]);break}}d===f&&(i+=1,null===l)&&(l={type:"text"})}for(s<i&&e.addChild({type:"text",text:a.slice(s,i),innerMode:(null!=(n=o)&&n.length?o[0]:e).innerMode});0<(null==(r=o)?void 0:r.length);)o.shift().demote();return e}function S(e,t,n){var r=e.children.indexOf(t),a=e.children.indexOf(n);t.children=e.children.splice(a+1,r-(a+1)),t.type=t.matches[n.type],t.innerText="";for(var o,i=0,s=t.children.length;i<s;i++)t.innerText+=t.children[i].text;for(o in t.start=n.start,t.text=n.text+t.innerText+t.text,n)hasOwnProperty.call(n,o)&&!hasOwnProperty.call(t,o)&&(t[o]=n[o]);t.isFront&&(t.isFront=!1),e.children.splice(a,1)}o.prototype={constructor:o,addChild:function(e){var t=this.lastChildEnd(),n=new o(e);return n.start=t,n.end=e.text&&t+e.text.length,n.place=this.place,n.children=[],n.innerText&&i(n),this.children.push(n),n},lastChildEnd:function(){var e=this.children&&this.children[this.children.length-1]||null;return e?e.end:this.start+Math.max(0,this.text.indexOf(this.innerText))},tokenAt:function(e){if(e<this.start||e>=this.end)return null;if(this.children.length)for(var t=0;t<this.children.length;t+=1)if(e>=this.children[t].start&&e<this.children[t].end){var n=this.children[t].tokenAt(e);if(n)return n}return this},pathAt:function(e){if(e<this.start||e>=this.end)return[];var t=[];if(this.children.length)for(var n=0;n<this.children.length;n+=1)if(e>=this.children[n].start&&e<this.children[n].end){var r=this.children[n].pathAt(e);if(r.length){t=t.concat(r);break}}return t.concat(this)},nearestTokenAt:function(n){return n<this.start||n>=this.end?null:this.children?this.children.reduce(function(e,t){return e||(n>=t.start&&n<t.end?t:null)},null):this},everyLeaf:function(n){return this.children&&0!==this.children.length?this.children.reduce(function(e,t){return e&&t.everyLeaf(n)},!0):!!n(this)},demote:function(){this.type="text"},error:function(e){this.type="error",this.message=e},toString:function(){var e=this.type+"("+this.start+"\u2192"+this.end+")";return this.children&&0<this.children.length&&(e+="["+this.children+"]"),e},copy:function(){var e=new o(this);return e.children=e.children.slice(),e},foldChildren:function(){for(var e=[],t=this.children.slice(),n=0;n<t.length;n+=1){var r=t[n],a=!1;if(r.matches)for(var o=0;o<e.length;o+=1)e[o].type in r.matches&&(S(this,r,e[o]),e=e.slice(o+1),a=!0);!a&&r.isFront&&e.unshift(r)}}},a={lex:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"start",r=3<arguments.length&&void 0!==arguments[3]&&arguments[3];return i(new o({type:"root",place:t,start:0,end:e.length,text:e,innerText:e,children:[],innerMode:a.modes[n]}),!r)},rules:k,modes:{}},"object"===("undefined"==typeof module?"undefined":_typeof(module))?module.exports=a:"function"==typeof define&&define.amd?define("lexer",[],function(){return a}):this&&null!=this&&this.loaded?(this.modules||(this.modules={}),this.modules.Lexer=a):this.Lexer=a}.call(eval("this")||("undefined"!=typeof global?global:window)),!function(){Object.assign=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};var m,g=Object.keys,y=Object.assign;function t(e){function t(n){return n=n||"innerText",function(e){var e=e.reduceRight(function(e,t,n){return e||(n?t:"")},""),t={};return t[n]=e,t}}function n(e,t){var n={};return n[e]=t,function(){return{isFront:!0,matches:n,cannotCross:["verbatimOpener"]}}}var r=Object.bind(0,null);function a(a,e){return Object.keys(e).forEach(function(n){var r=e[n].fn;e[n].fn=function(e){var t=r(e);return t.text||(t.text="string"==typeof e?e:e[0]),t.type||(t.type=n),t.innerMode||(t.innerMode=a),t}}),e}function o(e){switch(e&&e.type){case null:case"br":case"hr":case"bulleted":case"numbered":case"heading":case"align":case"column":case"escapedLine":return!0}return!1}var i=[],s=[],c=[],l=a(i,{hr:{fn:r},bulleted:{fn:function(e){return{depth:e[1].length}}},numbered:{fn:function(e){return{depth:e[1].length/2}}},heading:{fn:function(e){return{depth:e[1].length}}},align:{fn:function(e){var t,e=e[1],n=e.indexOf("><");return~n?25===(t=Math.round(n/(e.length-2)*50))&&(t="center"):"<"===e[0]&&">"===e.slice(-1)?t="justify":-1<e.indexOf(">")?t="right":-1<e.indexOf("<")&&(t="left"),{align:t}}},column:{fn:function(e){var t,e=e[1],n=e.indexOf("|");return n&&n<e.length-1?t="center":"|"===e[0]&&"|"===e.slice(-1)?t="none":n===e.length-1?t="right":n||(t="left"),{column:t,width:/\|+/.exec(e)[0].length,marginLeft:/^=*/.exec(e)[0].length,marginRight:/=*$/.exec(e)[0].length}}}}),u=(g(l).forEach(function(e){l[e].constraint=o,l[e].cannotFollowText=!0}),a(i,{twine1Macro:{fn:function(){return{type:"error",message:"Harlowe macros use a different syntax to Twine 1, SugarCube, and Yarn macros."}}},emBack:{fn:function(){return{matches:{emFront:"em"},cannotCross:["verbatimOpener"]}}},strongBack:{fn:function(){return{matches:{strongFront:"strong"},cannotCross:["verbatimOpener"]}}},strongFront:{fn:function(){return{isFront:!0}}},emFront:{fn:function(){return{isFront:!0}}},boldOpener:{fn:n("boldOpener","bold")},italicOpener:{fn:n("italicOpener","italic")},strikeOpener:{fn:n("strikeOpener","strike")},supOpener:{fn:n("supOpener","sup")},commentFront:{fn:function(){return{isFront:!0}}},commentBack:{fn:function(){return{matches:{commentFront:"comment"}}}},scriptStyleTag:{fn:r},tag:{fn:r},url:{fn:r},hookPrependedFront:{fn:function(e){return{name:e[1],hidden:")"===e[2],isFront:!0,tagPosition:"prepended"}}},hookFront:{fn:function(){return{isFront:!0}}},hookBack:{fn:function(){return{matches:{hookPrependedFront:"hook",hookFront:"hook"},cannotCross:["verbatimOpener"]}}},hookAppendedBack:{fn:function(e){return{name:e[2],hidden:"("===e[1],tagPosition:"appended",matches:{hookFront:"hook"},cannotCross:["verbatimOpener"]}}},unclosedHook:{fn:r},unclosedHookPrepended:{fn:function(e){return{type:"unclosedHook",name:e[1],hidden:")"===e[2]}}},verbatimOpener:{fn:function(e){var e=e[0].length,t={};return{type:(t["verbatim"+e]="verbatim")+e,isFront:!0,matches:t,aka:"verbatimOpener"}}},unclosedCollapsed:{fn:r},collapsedFront:{fn:function(){return{isFront:!0}}},collapsedBack:{fn:function(){return{matches:{collapsedFront:"collapsed"},cannotCross:["verbatimOpener"]}}},escapedLine:{fn:r},legacyLink:{fn:function(e){return{type:"twineLink",innerText:e[1],passage:e[2],innerMode:i}}},br:{fn:r}})),p=y(a(s,{macroFront:{fn:function(e){return{isFront:!0,name:e[1]}}},groupingBack:{fn:function(){return{matches:{groupingFront:"grouping",macroFront:"macro"},cannotCross:["singleStringOpener","doubleStringOpener","hookFront"]}}},passageLink:{fn:function(e){var t=e[1]||"",n=e[2]||"",e=e[3]||"";return{type:"twineLink",innerText:n?e:t,passage:t?e:n,innerMode:i}}},simpleLink:{fn:function(e){return{type:"twineLink",innerText:e[1]||"",passage:e[1]||"",innerMode:i}}},variable:{constraint:function(e){return!e||"macroFront"!==e.type},fn:t("name")},tempVariable:{constraint:function(e){return!e||"macroFront"!==e.type},fn:t("name")}}),{hookFront:u.hookFront,hookBack:u.hookBack}),d=a(s,_objectSpread(_objectSpread({commentBack:{fn:function(){return{matches:{commentFront:"comment"}}}},macroName:{constraint:function(e){return e&&"macroFront"===e.type},fn:t("name")},groupingFront:{fn:function(){return{isFront:!0}}},property:{fn:t("name"),constraint:function(e){if(e)switch(e.type){case"variable":case"hookName":case"property":case"tempVariable":case"colour":case"itsProperty":case"belongingItProperty":case"macro":case"grouping":case"string":case"datatype":case"hook":case"boolean":case"number":return!0}}},possessiveOperator:{fn:r},itsProperty:{cannotFollowText:!0,fn:t("name")},itsOperator:{cannotFollowText:!0,fn:r},belongingItProperty:{cannotFollowText:!0,fn:t("name")},belongingItOperator:{cannotFollowText:!0,fn:r},belongingProperty:{cannotFollowText:!0,fn:t("name")},belongingOperator:{cannotFollowText:!0,fn:r},escapedStringChar:{fn:function(){return{type:"text"}}},singleStringOpener:{fn:function(){return{isFront:!0,matches:{singleStringOpener:"string"},innerMode:c}}},doubleStringOpener:{fn:function(){return{isFront:!0,matches:{doubleStringOpener:"string"},innerMode:c}}},hookName:{fn:t("name")},cssTime:{fn:function(e){return{value:+e[1]*("s"===e[2].toLowerCase()?1e3:1)}}},datatype:{cannotFollowText:!0,fn:function(e){return{name:e[0].toLowerCase()}}},colour:{cannotFollowText:!0,fn:function(e){var e=e[0].toLowerCase(),t={red:"e61919",orange:"e68019",yellow:"e5e619",lime:"80e619",green:"19e619",cyan:"19e5e6",aqua:"19e5e6",blue:"197fe6",navy:"1919e6",purple:"7f19e6",fuchsia:"e619e5",magenta:"e619e5",white:"fff",black:"000",gray:"888",grey:"888"},t=hasOwnProperty.call(t,e)?"#"+t[e]:e;return{colour:t}}},number:{fn:function(e){return{value:parseFloat(e[0])}}},inequality:{fn:function(e){return{operator:e[2],negate:-1<e[1].indexOf("not")}}},augmentedAssign:{fn:function(e){return{operator:e[0][0]}}},identifier:{fn:t("name"),cannotFollowText:!0},whitespace:{fn:r,cannotFollowText:!0},incorrectOperator:{fn:function(e){var t={"=>":">=","=<":"<=",gte:">=",lte:"<=",gt:">",lt:"<",eq:"is",isnot:"is not",neq:"is not",isa:"is a",are:"is",x:"*","or a":"or"}[e[0].toLowerCase().replace(/\s+/g," ")];return{type:"error",message:"Please say "+(t?"'"+t+"'":"something else")+" instead of '"+e[0]+"'.",explanation:"In the interests of readability, I want certain operators to be in a specific form."}},cannotFollowText:!0}},["boolean","is","to","into","where","when","via","making","each","and","or","not","isNot","contains","doesNotContain","isIn","isA","isNotA","isNotIn","matches","doesNotMatch","bind"].reduce(function(e,t){return e[t]={fn:r,cannotFollowText:!0},e},{})),["comma","spread","typeSignature","addition","subtraction","multiplication","division"].reduce(function(e,t){return e[t]={fn:r},e},{}))),f=a(c,{singleStringCloser:d.singleStringOpener,doubleStringCloser:d.doubleStringOpener,escapedStringChar:d.escapedStringChar}),h=(i.push.apply(i,_toConsumableArray(g(l)).concat(_toConsumableArray(g(p)),_toConsumableArray(g(u)))),s.push.apply(s,_toConsumableArray(g(p)).concat(_toConsumableArray(g(d)))),c.push.apply(c,_toConsumableArray(g(f))),_objectSpread(_objectSpread(_objectSpread(_objectSpread(_objectSpread({},l),u),p),d),f)),u=(g(h).forEach(function(e){m.PlainCompare[e]?(h[e].pattern=m.PlainCompare[e],h[e].plainCompare=!0):h[e].pattern=RegExp("^(?:"+m[e]+")","i")}),y(e.rules,h),e.modes);return u.start=u.markup=i,u.macro=s,u.string=c,e}function n(e){return Object.freeze({lex:t(e).lex,Patterns:m})}"object"===("undefined"==typeof module?"undefined":_typeof(module))?(m=require("./patterns"),module.exports=n(require("./lexer"))):"function"==typeof define&&define.amd?define("markup",["lexer","patterns"],function(e,t){return m=t,n(e)}):this&&this.loaded&&this.modules?(m=this.modules.Patterns,this.modules.Markup=n(this.modules.Lexer)):(m=this.Patterns,this.Markup=n(this.Lexer))}.call(eval("this")||("undefined"!=typeof global?global:window)),!function(){var e;function n(t){return t&&"object"===_typeof(t)?(Object.keys(t).forEach(function(e){t[e]=n(t[e])}),t):(t+"").replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}function t(e){return function(){return"("+e+Array.apply(0,arguments).join("|")+")"}}var r=t("?:"),a=t("?!"),o=t("?="),i="[ \\f\\t\\v\\u00a0\\u2000-\\u200a\\u2028\\u2029\\u202f\\u205f\\u3000]*",s=i.replace("*","+"),c="\\b",l="[\\w\\-\\u00c0-\\u00de\\u00df-\\u00ff\\u0150\\u0170\\u0151\\u0171\\uD800-\\uDFFF]",u=l.replace("\\-",""),p=r("\\n","$"),d=i+"(\\*+)"+s,f=i+"((?:0\\.)+)"+s,h=i+"-{3,}"+i+p,m=i+"(==+>|<=+|=+><=+|<==+>)"+i+p,p=i+"(=+\\|+|\\|+=+|=+\\|+=+|\\|=+\\|)"+i+p,g={opener:"\\[\\[(?!\\[)",text:"("+function(){return"[^"+Array.apply(0,arguments).map(n).join("")+"]*"}("]")+")",rightSeparator:r("\\->","\\|"),leftSeparator:"<\\-",closer:"\\]\\]",legacySeparator:"\\|",legacyText:"("+r("[^\\|\\]]","\\]"+a("\\]"))+"+)"},y=u+"*"+u.replace("\\w","a-zA-Z")+u+"*",b="\\$("+y+")",v="_("+y+")",w="'s"+s+a("_")+"("+y+")",k="("+y+")"+s+"of"+c+a("it\\b"),S="'s"+s,T=r("it","time","turns?","visits?","exits?","pos")+c,_="its"+s+"("+y+")",x="("+y+")"+s+"of"+s+"it"+c,O="of"+s+"it"+c,A={opener:"\\(",name:"("+r("\\$","_")+"?"+l+"+):"+a("\\/"),closer:"\\)"},C=r("=<","=>","[gl]te?\\b","n?eq\\b","isnot\\b","are\\b","x\\b","isa\\b","or"+s+"a"+c),E="[a-zA-Z][\\w\\-]*",N="(?:\"[^\"]*\"|'[^']*'|[^'\">])*?",j="\\|("+l+"+)(>|\\))",P="(<|\\()("+l+"+)\\|",R="((?:\\b\\d+(?:\\.\\d+)?|\\.\\d+)(?:[eE][+\\-]?\\d+)?)"+a("m?s")+c;g.main=g.opener+r(g.text+g.rightSeparator,g.text.replace("*","*?")+g.leftSeparator)+g.text,e={upperLetter:"[A-Z\\u00c0-\\u00de\\u0150\\u0170]",lowerLetter:"[a-z0-9_\\-\\u00df-\\u00ff\\u0151\\u0171]",anyLetter:l,anyLetterStrict:u,whitespace:s.replace("[","[\\n\\r"),escapedLine:"\\\\\\n\\\\?|\\n\\\\",br:"\\n(?!\\\\)",tag:"<\\/?"+E+N+">",scriptStyleTag:"<("+r("script","style","textarea")+")"+N+">[^]*?<\\/\\1>",scriptStyleTagOpener:"<",url:"("+r("https?","mailto","javascript","ftp","data")+":\\/\\/[^\\s<]+[^<.,:;\"')\\]\\s])",bullet:"\\*",hr:h,heading:"[ \\f\\t\\v\\u00a0\\u2000-\\u200a\\u2028\\u2029\\u202f\\u205f\\u3000]*(#{1,6})[ \\f\\t\\v\\u00a0\\u2000-\\u200a\\u2028\\u2029\\u202f\\u205f\\u3000]*",align:m,column:p,bulleted:d,numbered:f,verbatimOpener:"`+",hookAppendedFront:"\\["+a("=+"),hookPrependedFront:j+"\\["+a("=+"),hookFront:"\\["+a("=+"),hookBack:"\\]"+a(P),hookAppendedBack:"\\]"+P,unclosedHook:"\\[=+",unclosedHookPrepended:j+"\\[=+",unclosedCollapsed:"\\{=+",passageLink:g.main+g.closer,legacyLink:g.opener+g.legacyText+g.legacySeparator+g.legacyText+g.closer,simpleLink:g.opener+g.legacyText+g.closer,macroFront:A.opener+o(A.name),macroName:A.name,groupingFront:"\\("+a(A.name),twine1Macro:"<<[^>\\s]+\\s*(?:\\\\.|'(?:[^'\\\\]*\\\\.)*[^'\\\\]*'|\"(?:[^\"\\\\]*\\\\.)*[^\"\\\\]*\"|[^'\"\\\\>]|>(?!>))*>>",validPropertyName:y,property:w,belongingProperty:k,possessiveOperator:S,belongingOperator:"of\\b",itsOperator:"its\\b",belongingItOperator:O,variable:b,tempVariable:v,hookName:"\\?("+l+"+)\\b",cssTime:"(\\d+\\.?\\d*|\\d*\\.?\\d+)(m?s)\\b",colour:r(r("Red","Orange","Yellow","Lime","Green","Cyan","Aqua","Blue","Navy","Purple","Fuchsia","Magenta","White","Gray","Grey","Black","Transparent"),"#[\\dA-Fa-f]{3}(?:[\\dA-Fa-f]{3})?"),datatype:r("alnum","alphanumeric","any(?:case)?","array","bool(?:ean)?","changer","codehook","colou?r","const","command","dm","data"+r("map","type","set"),"ds","digit","gradient","empty","even","int"+a("o")+"(?:eger)?","lambda","lowercase","macro","linebreak","newline","num(?:ber)?","odd","str(?:ing)?","uppercase","whitespace")+c,number:R,boolean:r("true","false")+c,identifier:T,itsProperty:_,belongingItProperty:x,escapedStringChar:"\\\\[^\\n]",singleStringOpener:"'",doubleStringOpener:'"',singleStringCloser:"'",doubleStringCloser:'"',is:"is"+a(s+"not"+c,s+"an?"+c,s+"in"+c,s+"<",s+">")+c,isNot:"is"+s+"not"+a(s+r("an?","in")+c)+c,isA:"is"+s+"an?"+c,isNotA:"is"+s+"not"+s+"an?"+c,matches:"matches\\b",doesNotMatch:"does"+s+"not"+s+"match"+c,and:"and\\b",or:"or\\b",not:"not\\b",inequality:"((?:is(?:"+s+"not)?"+i+")*)("+r("<(?!=)","<=",">(?!=)",">=")+")",isIn:"is"+s+"in"+c,contains:"contains\\b",doesNotContain:"does"+s+"not"+s+"contain"+c,isNotIn:"is"+s+"not"+s+"in"+c,addition:n("+")+a("="),subtraction:n("-")+a("=","type"),multiplication:n("*")+a("="),division:r("/","%")+a("="),spread:"\\.\\.\\."+a("\\."),to:r("to\\b","="),into:"into\\b",making:"making\\b",where:"where\\b",when:"when\\b",via:"via\\b",each:"each\\b",augmentedAssign:r("\\+","\\-","\\*","\\/","%")+"=",bind:"2?bind\\b",typeSignature:n("-type")+c,incorrectOperator:C,PlainCompare:{comma:",",commentFront:"\x3c!--",commentBack:"--\x3e",strikeOpener:"~~",italicOpener:"//",boldOpener:"''",supOpener:"^^",strongFront:"**",strongBack:"**",emFront:"*",emBack:"*",collapsedFront:"{",collapsedBack:"}",groupingBack:")"}},"object"===("undefined"==typeof module?"undefined":_typeof(module))?module.exports=e:"function"==typeof define&&define.amd?define("patterns",[],function(){return e}):this&&this.loaded?(this.modules||(this.modules={}),this.modules.Patterns=e):this.Patterns=e}.call(eval("this")||("undefined"!=typeof global?global:window)),define("twinescript/operations",["utils","utils/operationutils","datatypes/typedvar","datatypes/datatype","internaltypes/twineerror"],function(e,t,n,r,m){var a=e.plural,o=t.isObject,i=t.collectionType,s=t.is,c=t.isA,l=t.clone,u=t.unique,p=t.contains,e=t.matches,g=t.objectName,d=t.toSource;function f(r,a,o,i){return o=o||"do this to",function(e,t){var n;return 1===a.length&&(t=e),(n=m.containsError(e,t))||(_typeof(e)!==r||_typeof(t)!==r?m.create("operation","I can only ".concat(o," ").concat(r,"s, not ").concat(g(_typeof(e)!==r?e:t),"."),i):a(e,t))}}function h(a){return function(e,t){var n,r;return(n=m.containsError(e,t))||(_typeof(e)!==_typeof(t)||o(e)&&"TwineScript_TypeName"in e&&o(t)&&"TwineScript_TypeName"in t&&e.TwineScript_TypeName!==t.TwineScript_TypeName||i(e)!==i(t)?(n="".concat(g(e)," isn't the same type of data as ").concat(g(t)),_typeof(e)+_typeof(t)!=="stringnumber"&&_typeof(e)+_typeof(t)!=="numberstring"||(r="You might want to convert one side to a number using (num:), or to a string using (str:)."),m.create("operation",n[0].toUpperCase()+n.slice(1),r)):a(e,t))}}function y(d,f,e){var h=2<arguments.length&&void 0!==e&&e;return function r(a,o){var e;if(e=m.containsError(a,o))return e;var t=_slicedToArray(a.determiner?[a,o]:o.determiner?[o,a]:[],2),i=t[0],t=t[1];if(i){var n=i,s=n.determiner,n=n.determined;if("start"===s||"end"===s){if(f)return m.create("operation","I can't use '".concat(f,"' with the 'start' or 'end' of ").concat(g(n),"."));if(t.determiner){if("start"===t.determiner||"end"===t.determiner)return m.create("operation","I can't compare one value's 'start' or 'end' with another value's 'start' or 'end'.","Please change one of them to use an exact range, such as '1stto4th' or '2ndlasttolast'.");n=[t,i],i=n[0]}for(var c=i.string||i.array,l=0;l<c.length+1;l+=1){var u=l?"end"===s?c.slice(-l):c.slice(0,l):c.constructor(),u=i===a?r(u,o):r(a,u);if(e=m.containsError(u))return e;if(u!==h)return u}return h}var p="all"===s;return i.array.reduce(function(e,t){var n,t=i===a?r(t,o):r(a,t);return(n=m.containsError(e,t))||(p?e&&t:e||t)},p)}return d(a,o)}}function b(n,e){return y(function(e,t){e=n(e,t);return m.containsError(e)?e:!e},e,!0)}t="If one of these values is a number, you may want to write a check that it 'is not 0'. Also, if one is a string, you may want to write a check that it 'is not \"\" '.",t={and:f("boolean",h(function(e,t){return e&&t}),"use 'and' to join",t),or:f("boolean",h(function(e,t){return e||t}),"use 'or' to join",t),not:f("boolean",function(e){return!e},"use 'not' to invert",t),"+":h(function(e,t){var n;return Array.isArray(e)?[].concat(_toConsumableArray(e),_toConsumableArray(t)):e instanceof Map?(n=new Map(e),t.forEach(function(e,t){return n.set(t,e)}),n):e instanceof Set?new Set([].concat(_toConsumableArray(e),_toConsumableArray(t)).filter(u).map(l)):"function"==typeof e["TwineScript_+"]?e["TwineScript_+"](t):"string|number|boolean".includes(_typeof(e))?e+t:m.create("operation","I can't use + on ".concat(g(e),"."))}),"-":h(function(e,n){var r;return Array.isArray(e)?e.filter(function(t){return!n.some(function(e){return s(t,e)})}):e instanceof Set?(r=_toConsumableArray(n),new Set(_toConsumableArray(e).filter(function(t){return!r.some(function(e){return s(t,e)})}))):"string"==typeof e?e.split(n).join(""):"number"==typeof e?e-n:m.create("operation","I can't use - on ".concat(g(e),"."))}),"*":f("number",h(function(e,t){return e*t}),"multiply"),"/":f("number",h(function(e,t){return 0===t?m.create("operation","I can't divide ".concat(g(e)," by zero.")):e/t}),"divide"),"%":f("number",h(function(e,t){return 0===t?m.create("operation","I can't modulo ".concat(g(e)," by zero.")):e%t}),"modulus"),"<":y(f("number",h(function(e,t){return e<t}),"do < to"),"<"),">":y(f("number",h(function(e,t){return t<e}),"do > to"),">"),"<=":y(f("number",h(function(e,t){return e<=t}),"do <= to"),"<="),">=":y(f("number",h(function(e,t){return t<=e}),"do >= to"),">="),is:y(s),isNot:b(s),contains:y(p,"contains"),doesNotContain:b(p,"does not contain"),isIn:y(function(e,t){return p(t,e)},"is in"),isNotIn:b(function(e,t){return p(t,e)},"is not in"),isA:y(c,"is a"),isNotA:b(c,"is not a"),typifies:y(function(e,t){return c(t,e)}),untypifies:b(function(e,t){return c(t,e)}),matches:y(e),doesNotMatch:b(e),makeSpreader:function(e){var t;return m.containsError(e)?e:n.isPrototypeOf(e)||r.isPrototypeOf(e)?(t=l(e),(n.isPrototypeOf(e)?t.datatype:t).rest=!0,t):{value:e,spreader:!0,TwineScript_TypeName:"a spreaded '...' value",TwineScript_ObjectName:a("string"==typeof e||Array.isArray(e)?_toConsumableArray(e).length:1,"spreaded '...' value"),TwineScript_Unstorable:!0,TwineScript_ToSource:function(){return""+_toConsumableArray(e).map(d)}}}};return Object.freeze(t)}),define("twinescript/runner",["macros","state","utils","utils/operationutils","twinescript/operations","datatypes/colour","datatypes/hookset","datatypes/lambda","datatypes/datatype","datatypes/varbind","datatypes/codehook","datatypes/typedvar","datatypes/assignmentrequest","internaltypes/varref","internaltypes/twineerror"],function(Macros,State,Utils,_ref127,Operations,Colour,HookSet,Lambda,Datatype,VarBind,CodeHook,TypedVar,AssignmentRequest,VarRef,TwineError){var toSource=_ref127.toSource,typeName=_ref127.typeName,objectName=_ref127.objectName,insensitiveName=Utils.insensitiveName,impossible=Utils.impossible,hash=Utils.hash;function addFreeVariable(e,t){var n,r=e.freeVariables;"macro"===t.type?"current-time"===(n=insensitiveName(t.name))||"current-date"===n||"monthday"===n||"weekday"===n||"history"===n||"visited"===n||"passage"===n?e.freeVariables=!0:t.blockedValue&&!r.blockedValues?r.blockedValues=e.stackTop.blockedValues.concat():"random"!==n&&"either"!==n&&"shuffled"!==n||r.seed||(r.seed=State.seed,r.seedIter=State.seedIter):"identifier"===t.type?"time"!==(n=insensitiveName(t.text))&&"exits"!==n&&"it"!==n&&"visits"!==n&&"turns"!==n||(e.freeVariables=!0):"property"===t.type||"belongingProperty"===t.type?"random"!==insensitiveName(t.name)||r.seed||(r.seed=State.seed,r.seedIter=State.seedIter):"variable"!==t.type&&"tempVariable"!==t.type||(e.freeVariables=!0)}var precedenceTable=[["error","text"],["comma"],["to","into"],["where","when","via","making","each"],["typeSignature"],["augmentedAssign"],["and","or"],["is","isNot"],["contains","doesNotContain","isIn","isNotIn"],["isA","isNotA","matches","doesNotMatch"],["inequality"],["addition","subtraction"],["multiplication","division"],{rightAssociative:["spread","bind"]},{rightAssociative:["not","positive","negative"]},{rightAssociative:["belongingProperty","belongingItProperty","belongingOperator","belongingItOperator"]},["property","itsProperty","possessiveOperator","itsOperator"],["twineLink","macro","identifier","variable","tempVariable","hookName","number","cssTime","boolean","string","hook","colour","datatype","root"],["grouping"]];function precedentToken(e,t){var n,r,a,o=[];if(e.length)for("most"===t?(n=precedenceTable.length-1,r=a=-1):(n=0,r=precedenceTable.length,a=1);n!==r;n+=a){var i=precedenceTable[n],s=NaN;if(i.rightAssociative){for(var c=0;c<e.length;c+=1)if(i.rightAssociative.includes(e[c].type)){s=c;break}}else for(var l=e.length-1;0<=l;--l)if(i.includes(e[l].type)){s=l;break}if(!Number.isNaN(s)&&-1<s){o=[e[s],s];break}}return o}var comparisonOpTypes=["inequality","is","isNot","isIn","contains","doesNotContain","isNotIn","isA","typifies","isNotA","untypifies","matches","doesNotMatch"],inequalityNegator={">":"<=","<":">=",">=":"<","<=":">"};function compileComparisonOperator(e){return"inequality"===e.type?e.negate?inequalityNegator[e.operator]:e.operator:e.type}var comparisonReverser={">":"<","<":">",">=":"<=","<=":">=",contains:"isIn",doesNotContain:"isNotIn",isIn:"contains",isA:"typifies",typifies:"isA",isNotA:"untypifies",untypifies:"isNotA"};function reverseComparisonOperator(e){e=compileComparisonOperator(e);return comparisonReverser[e]||e}var tokenSides={error:"neither",identifier:"neither",variable:"neither",tempVariable:"neither",hookName:"neither",number:"neither",boolean:"neither",string:"neither",hook:"neither",colour:"neither",datatype:"neither",root:"neither",twineLink:"neither",macro:"neither",grouping:"neither",itsProperty:"neither",belongingItProperty:"neither",to:"both",into:"both",typeSignature:"both",augmentedAssign:"both",and:"both",or:"both",belongingOperator:"both",possessiveOperator:"both",multiplication:"both",division:"both",spread:"after",bind:"after",not:"after",belongingProperty:"after",each:"after",itsOperator:"after",positive:"after",negative:"after",belongingItOperator:"before",property:"before"};function missingSideError(e,t,n){return TwineError.create("syntax","I need usable code to be ".concat(e?"left ":"").concat(e&&t?"and ":"").concat(t?"right ":"","of ").concat(n.text,"."))}function wrongSideError(e,t,n){return TwineError.create("syntax","There can't be a ".concat(e&&t?e.map(function(e){return e.text}).join("")+" or "+t.map(function(e){return e.text}).join(""):(e||t).map(function(e){return e.text}).join("")," to the ").concat(e?"left ":"").concat(e&&t?"or ":"").concat(t?"right ":"","of ").concat(n.text,"."),"There could be a comma missing between them.")}function makeEvalReplayFrame(e,t){var n=t.val,r=t.fromCode,a=t.toCode,o=t.toDesc,i=t.reason,s=t.it,c=t.tokens,t=t.i;if(!(200<=e.length)){var l=c[t],u=c.slice(0,t),t=c.slice(t+1);if(1===c.length&&(u=t=!1,l=c[0]),!e[e.length-1].error){var p,d,c=TwineError.containsError(n),f=e[e.length-1].code,h=e[0].basis,m=(null!=(p=u)&&p.length&&null!=(p=t)&&p.length&&u[0].start>t[0].start&&(u=(p=[t,u])[0],t=p[1]),p=a||"".concat(null!=(p=u)&&p.length&&"whitespace"===u[u.length-1].type?" ":"").concat(c?" \ud83d\udc1e ":(n&&!n.TwineScript_ToSource&&n.TwineScript_Unstorable?objectName:toSource)(n)).concat(null==(p=t)||!p.length||"whitespace"!==t[0].type&&"addition"!==l.type&&"subtraction"!==l.type?"":" "),(u.length?u[0]:l).start-h),g=(t.length?t[t.length-1]:l).end-h,y=_createForOfIteratorHelper(e);try{for(y.s();!(d=y.n()).done;){var b=d.value;b.start<m?(m+=b.diff,g+=b.diff):b.start<g&&(g+=b.diff)}}catch(e){y.e(e)}finally{y.f()}!r&&(r=f.slice(m,g),a)&&a.trim()===r.trim()||(u=p.length-(g-m),e.push({code:f.slice(0,m)+p+f.slice(g),fromCode:r,toCode:!c&&a,toDesc:!c&&!a&&(o||objectName(n)),start:m,end:g,diff:u,reason:i,itIdentifier:void 0!==s&&objectName(s),error:c&&c.render(f.slice(m,g),!0)}))}}}function setIt(e,t){return(VarRef.isPrototypeOf(t)||TypedVar.isPrototypeOf(t))&&(e.Identifiers.it=t.get()),t}return function run(section,tokens){var isVarRef=2<arguments.length&&void 0!==arguments[2]&&arguments[2],isTypedVar=3<arguments.length&&void 0!==arguments[3]&&arguments[3],evalReplay=section.evalReplay,hasEvalReplay=null==evalReplay?void 0:evalReplay.length,evalReplayReason,evalReplaySkip=!1,evalReplayIt,ops=Operations,token,ret,i,before,after,_precedentToken,_precedentToken2,token,i,before,after;if(Array.isArray(tokens)||(tokens=[tokens]),!tokens.length||!tokens[0])return impossible("Runner.run","No tokens to run!"),0;1===tokens.length?token=tokens[0]:(_precedentToken=precedentToken(tokens,"least"),_precedentToken2=_slicedToArray(_precedentToken,2),token=_precedentToken2[0],i=_precedentToken2[1],before=tokens.slice(0,i),after=tokens.slice(i+1),before.length&&(1!==before.length||"whitespace"!==before[0].type)||(before=!1),after.length&&(1!==after.length||"whitespace"!==after[0].type)||(after=!1));var type=token.type;if(!type)return impossible("Runner.run","Token has no type!"),0;var sides=tokenSides[type]||"",VARREF=("both"!==sides||before&&after?"neither"===sides&&(before||after)?ret=wrongSideError(before,after,token):"before"===sides?before?after&&(ret=wrongSideError(null,after,token)):ret=missingSideError(!0,!1,token):"after"===sides&&(after?before&&(ret=wrongSideError(before,null,token)):ret=missingSideError(!1,!0,token)):ret=missingSideError(!before,!after,token),section.freeVariables&&"object"===_typeof(section.freeVariables)&&addFreeVariable(section,token),!0),TYPEDVAR=!0,_ret4,val,evalReplayReason,ret,source,_source4,_value4,msg;if(!ret){if("comma"===type)return impossible("Section.run","a comma token was run() somehow."),0;if("root"===type)ret=run(section,token.children);else if("identifier"===type)ret=isVarRef?VarRef.create(section.Identifiers,token.text.toLowerCase()):section.Identifiers[token.text.toLowerCase()];else if("variable"===type||"tempVariable"===type){ret=VarRef.create("tempVariable"===type?section.stackTop.tempVariables:State.variables,token.name),isTypedVar?(ret=TypedVar.create(Datatype.create("any"),ret),evalReplayReason=hasEvalReplay&&"Variables in 'to' or 'into' expressions with no -type to their left are considered to be 'any-type' variables that can store any storable value."):isVarRef||TwineError.containsError(ret)?evalReplaySkip=!0:(val=ret.get(),evalReplayReason=hasEvalReplay&&((null==(_ret4=ret)?void 0:_ret4.object)!==State.variables||hasOwnProperty.call(ret.object,ret.compiledPropertyChain[0])?"":"This variable didn't exist; for story-wide $ variables, a default value of 0 is used if they don't exist."),ret=val)}else if("hookName"===type)ret=HookSet.create({type:"name",data:token.name}),evalReplaySkip=!0;else if("number"===type||"cssTime"===type)ret=token.value,evalReplayReason=hasEvalReplay&&"cssTime"===type&&(token.text.endsWith("ms")?"The letters 'ms' at the end of numbers are ignored, so you can use them to indicate that a number represents milliseconds.":"The letter 's' at the end of numbers represents 'seconds'. Harlowe converts them to milliseconds (multiplies them by 1000)."),evalReplaySkip=!evalReplayReason;else if("boolean"===type)ret="true"===token.text.toLowerCase(),evalReplaySkip=!0;else if("string"===type){var t=token.text.replace(/(.?)\n/g,function(e,t){return("\\"===t?"\\\\":"\n"===t?"\\n":t)+"\\n"}).replace(/(\\*)\\0/g,function(e,t){return(t?"\\".repeat(2*t.length):"")+"0"});ret=eval(t),evalReplaySkip=!0}else if("hook"===type)ret=CodeHook.create(token.children,token.text),evalReplaySkip=!0;else if("colour"===type)ret=Colour.create(token.colour),evalReplaySkip=!0;else if("datatype"===type)ret=Datatype.create(token.name),evalReplaySkip=!0;else if("spread"===type)ret=ops.makeSpreader(run(section,after,!1,isTypedVar));else if("bind"===type)ret=VarBind.create(run(section,after,VARREF),token.text.startsWith("2")?"two way":""),evalReplaySkip=!0;else if("to"===type||"into"===type){var dest="to"===type?setIt(section,run(section,before,VARREF,TYPEDVAR)):run(section,after,VARREF,TYPEDVAR);if(TwineError.containsError(dest))ret=dest;else{(VarRef.isPrototypeOf(dest)&&dest.propertyChain.length<=1||TypedVar.isPrototypeOf(dest)&&dest.varRef.propertyChain.length<=1)&&(section.freeVariables=Object.create(null));var src="to"===type?run(section,after,VARREF):setIt(section,run(section,before,VARREF));if(TwineError.containsError(src))return src;var freeVariables=section.freeVariables,srcRef;section.freeVariables=null,token.place&&freeVariables&&"object"===_typeof(freeVariables)&&"boolean"!=typeof src&&"number"!=typeof src&&!Utils.options.uncompressedPureValues&&(srcRef=freeVariables,srcRef.at=token.place,srcRef.from=after[0].start,srcRef.to=after[after.length-1].end,srcRef.hash=hash(after.reduce(function(e,t){return e+t.text},"")).toString(16),JSON.stringify(srcRef).length>=toSource(src).length)&&(srcRef=void 0),ret=AssignmentRequest.create(dest,src,type,srcRef),evalReplaySkip=!0,evalReplayIt=section.Identifiers.it}}else if("typeSignature"===type){var datatype=run(section,before),free=section.freeVariables,variable=(section.freeVariables=null,run(section,after,VARREF));section.freeVariables=free,ret=TypedVar.create(datatype,variable),evalReplaySkip=!0}else if("where"===type||"when"===type||"via"===type){after?(source=tokens.map(function(e){return e.text}).join(""),ret=Lambda.create(before?run(section,before,VARREF):void 0,token.type,after,source),evalReplaySkip=!0):ret=missingSideError(!1,!0,token)}else if("making"===type||"each"===type){after?(_source4=[].concat(tokens).map(function(e){return e.text}).join(""),ret="each"===type?Lambda.create(run(section,after,VARREF),"each",null,_source4):Lambda.create(before?run(section,before,VARREF):void 0,token.type,run(section,after,VARREF),_source4),evalReplaySkip=!0):ret=missingSideError(!1,!0,token)}else if("augmentedAssign"===type)ret=ops.makeAssignmentRequest(run(section,before,VARREF),ops[token.operator](run(section,before),run(section,after)),token.operator),evalReplaySkip=!0;else if("and"===type||"or"===type){var isComparisonOp=function e(t){var n=_slicedToArray(precedentToken(t,"least"),2),r=n[0],n=n[1];if(r&&"whitespace"!==r.type)return comparisonOpTypes.includes(r.type)?r:r.type===type?e(t.slice(0,n))||e(t.slice(n+1)):void 0},leftIsComparison=isComparisonOp(before),rightIsComparison=isComparisonOp(after),ambiguityError=TwineError.create("operation",'This use of "is not" and "'.concat(type,'" is grammatically ambiguous.'),'Maybe try rewriting this as "__ is not __ '.concat(type,' __ is not __"')),operator,getElisionOperands=function e(t){var n,r=_slicedToArray(precedentToken(t,"least"),2),a=r[0],r=r[1];return a&&"whitespace"!==a.type?a.type===type?[].concat(_toConsumableArray(e(t.slice(0,r))),_toConsumableArray(e(t.slice(r+1)))):(a=run(section,t),hasEvalReplay&&"boolean"!=typeof a&&(n=operator.replace(/[A-Z]/g,function(e){return" "+e.toLowerCase()}),makeEvalReplayFrame(evalReplay,{toCode:" it ".concat(n," ").concat(toSource(a)," "),reason:"A missing 'it ".concat(n,"' was inferred to correct the '").concat(type,"' operation."),tokens:t,i:r}),makeEvalReplayFrame(evalReplay,{toCode:" ".concat(toSource(section.Identifiers.it)," ").concat(n," ").concat(toSource(a)," "),tokens:t,i:r})),[{val:a,tokens:t,i:r}]):[]},elidedComparisonOperator=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(function(e,t){var n=t.val,r=t.tokens,t=t.i;return"boolean"==typeof n?n:(e=Operations[token.type](e,Operations[operator](section.Identifiers.it,n)),hasEvalReplay&&makeEvalReplayFrame(evalReplay,{val:e,tokens:r,i:t}),e)},"and"===token.type)},leftSide,evalBefore,operator,rightSide,rightIndex,swappedSides,evalAfter;ret=leftIsComparison&&!rightIsComparison?(leftSide=leftIsComparison,operator=compileComparisonOperator(leftSide),"isNot"===leftSide.type||"isNotA"===leftSide.type||"untypifies"===leftSide.type?ambiguityError:(evalBefore=run(section,before),ops[type](evalBefore,elidedComparisonOperator.apply(void 0,_toConsumableArray(getElisionOperands(after)))))):!leftIsComparison&&rightIsComparison?(rightSide=rightIsComparison,rightIndex=tokens.indexOf(rightSide),operator=reverseComparisonOperator(rightSide),"isNot"===rightSide.type||"isNotA"===rightSide.type||"untypifies"===rightSide.type?ambiguityError:(swappedSides=[].concat(_toConsumableArray(tokens.slice(rightIndex+1)),[Object.assign(Object.create(rightSide),_defineProperty({},"inequality"===rightSide.type?"operator":"type",reverseComparisonOperator(rightSide)))],_toConsumableArray(tokens.slice(i+1,rightIndex))),evalAfter=run(section,swappedSides),ops[type](evalAfter,elidedComparisonOperator.apply(void 0,_toConsumableArray(getElisionOperands(before)))))):ops[type](run(section,before),run(section,after))}else if(comparisonOpTypes.includes(type)){after||missingSideError(!1,!0,token);var leftOp=before?run(section,before):section.Identifiers.it;ret=ops[compileComparisonOperator(token)](leftOp,run(section,after)),section.Identifiers.it=leftOp,evalReplayIt=leftOp,evalReplayReason=hasEvalReplay&&!before&&"A missing 'it' was inferred to complete the operation."}else if("addition"===type||"subtraction"===type){after||missingSideError(!1,!0,token);var convert=!before,_precedentToken7,_precedentToken8,previousPrecedentToken,_i10,_sides,pType,convert;before&&(_precedentToken7=precedentToken(before,"least"),_precedentToken8=_slicedToArray(_precedentToken7,2),previousPrecedentToken=_precedentToken8[0],_i10=_precedentToken8[1],_sides=tokenSides[previousPrecedentToken.type],pType=previousPrecedentToken.type,convert=("both"===_sides||"after"===_sides||"addition"===pType||"subtraction"===pType)&&(_i10===before.length-1||_i10===before.length-2&&"whitespace"===before[before.length-1].type)),convert?(token.type="addition"===type?"positive":"negative",ret=run(section,tokens),token.type=type,evalReplaySkip=!0):ret=ops[token.text](run(section,before),run(section,after))}else if("multiplication"===type||"division"===type)ret=ops[token.text](run(section,before),run(section,after));else if("positive"===type||"negative"===type)ret=ops["*"]("negative"===type?-1:1,run(section,after)),evalReplaySkip=!0;else if("not"===type)ret=ops.not(run(section,after));else if("belongingProperty"===type){var container=run(section,after,isVarRef),isRef=(ret=VarRef.create(container,token.name),isVarRef||TwineError.containsError(ret));ret=isRef?ret:ret.get(),isRef=isVarRef||TwineError.containsError(ret),hasEvalReplay&&!isRef?makeEvalReplayFrame(evalReplay,{toCode:" ".concat(token.name," of ").concat(toSource(VarRef.isPrototypeOf(container)?container.get():container)," "),tokens:tokens,i:i}):isRef||(evalReplayReason="The value to the right of 'of', ".concat(typeName(container),', had a "').concat(token.name,'" data name corresponding to that data value.'))}else if("belongingOperator"===type||"belongingItOperator"===type){var value=run(section,before);"random"===value&&section.freeVariables&&"object"===_typeof(section.freeVariables)&&!section.freeVariables.seed&&(section.freeVariables.seed=State.seed,section.freeVariables.seedIter=State.seedIter),ret=VarRef.create("belongingItOperator"===type?section.Identifiers.it:run(section,after,isVarRef),{computed:!0,value:value}),ret=isVarRef||TwineError.containsError(ret)?ret:ret.get(),"belongingItOperator"===type&&hasEvalReplay&&makeEvalReplayFrame(evalReplay,{toCode:" ".concat(toSource(value)," of ").concat(toSource(section.Identifiers.it)," "),tokens:tokens,i:i})}else if("property"===type){var _container=run(section,before,VARREF),_isRef=(ret=VarRef.create(_container,token.name),isVarRef||TwineError.containsError(ret));ret=_isRef?ret:ret.get(),_isRef=isVarRef||TwineError.containsError(ret),hasEvalReplay&&VarRef.isPrototypeOf(_container)&&!_isRef?makeEvalReplayFrame(evalReplay,{toCode:" ".concat(toSource(_container.get()),"'s ").concat(token.name," "),tokens:tokens,i:i}):_isRef||(evalReplayReason="The value to the left of 's, ".concat(typeName(_container),', had a "').concat(token.name,'" data name corresponding to that data value.'))}else if("itsProperty"===type||"belongingItProperty"===type)ret=VarRef.create(section.Identifiers.it,token.name),ret=isVarRef||TwineError.containsError(ret)?ret:ret.get(),hasEvalReplay&&makeEvalReplayFrame(evalReplay,{toCode:"itsProperty"===type?" ".concat(toSource(section.Identifiers.it),"'s ").concat(token.name," "):" ".concat(token.name," of ").concat(toSource(section.Identifiers.it)," "),tokens:tokens,i:i});else if("possessiveOperator"===type||"itsOperator"===type){!after||!before&&"itsOperator"!==token.type?ret=missingSideError(!before,!after,token):(_value4=run(section,after),"random"===_value4&&section.freeVariables&&"object"===_typeof(section.freeVariables)&&!section.freeVariables.seed&&(section.freeVariables.seed=State.seed,section.freeVariables.seedIter=State.seedIter),ret=VarRef.create("itsOperator"===token.type?section.Identifiers.it:run(section,before,isVarRef),{computed:!0,value:_value4}),ret=isVarRef||TwineError.containsError(ret)?ret:ret.get(),"itsOperator"===type&&hasEvalReplay&&makeEvalReplayFrame(evalReplay,{toCode:" ".concat(toSource(section.Identifiers.it),"'s ").concat(toSource(_value4)," "),tokens:tokens,i:i}))}else if("twineLink"===type)ret=Macros.run("link-goto",section,[token.innerText,token.passage]),evalReplayReason=hasEvalReplay&&"Passage links are the same as (link-goto:) macro calls.";else if("macro"===type)if(token.blockedValue&&!section.blocked){if(ret=section.blockedValue(),void 0===ret)return impossible("Runner.run","section.blockedValue() returned undefined"),0}else{var macroNameToken=token.children[0],variableCall="$"===macroNameToken.text[0]||"_"===macroNameToken.text[0],macroRef;if("macroName"!==macroNameToken.type&&!variableCall)return impossible("Runner.run","macro token had no macroName child token"),0;variableCall?(macroRef=VarRef.create("_"===macroNameToken.text[0]?section.stackTop.tempVariables:State.variables,macroNameToken.text.trim().slice(1,-1)),TwineError.containsError(macroRef)||(macroRef=macroRef.get())):macroRef=token.name,ret=Macros[variableCall?"runCustom":"run"](macroRef,section,token.children.slice(1).reduce(function(e,t){return"comma"===t.type?e.push([]):e[e.length-1].push(t),e},[[]]).filter(function(e){return e.length&&(1<e.length||"whitespace"!==e[0].type)}).map(function(e){return run(section,e,!1,isTypedVar)})),evalReplayReason=hasEvalReplay&&variableCall&&"I called ".concat(objectName(macroRef),".")}else if("grouping"===type)ret=run(section,token.children,isVarRef),evalReplaySkip=!0;else if("error"===type)ret=TwineError.create("syntax",token.message,token.explanation||"");else{if("text"!==type)return impossible("Section.run","unknown syntax token type: ".concat(type,"!!")),0;token.text.trim().match(/^\d+(?:th|nd|st|rd)(?:last)?(?:to\d+(?:nth|nd|st|rd)(?:last)?)?$/g)&&(msg='Position data names like "'.concat(token.text,'" need to be either left of "of" or right of "\'s".')),ret=TwineError.create("syntax",msg||'"'.concat(token.text,"\" isn't valid Harlowe syntax for the inside of a macro call."),"Maybe you misspelled something? Also, as of 3.3.0, Javascript syntax is not allowed inside macro calls.")}}return void 0===ret?(impossible("Section.run","token ".concat(type).concat(token.name?" (".concat(token.name,":)"):""," produced undefined")),0):ret===section?(impossible("Section.run","token ".concat(type).concat(token.name?" (".concat(token.name,":)"):""," produced the section")),0):(hasEvalReplay&&!evalReplaySkip&&makeEvalReplayFrame(evalReplay,{val:ret,reason:evalReplayReason,it:evalReplayIt,tokens:tokens,i:i}),ret)}}),define("utils/jqueryplugins",["jquery"],function(e){e.prototype.extend({popAttr:function(e){var t=this.attr(e);return this.removeAttr(e),t},popData:function(e){var t=this.data(e);return this.removeData(e),t},tag:function(){return this[0]&&this[0].tagName&&this[0].tagName.toLowerCase()},textNodes:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"*";return 1===this.length&&this[0]&&this[0].nodeType===Node.TEXT_NODE?[this[0]]:this.get().concat(this.contents().get(),this.find(e).contents().get()).filter(function(e,t,n){return(null==e?void 0:e.nodeType)===Node.TEXT_NODE&&n.indexOf(e)===t}).sort(function(e,t){return 2&e.compareDocumentPosition(t)?1:-1})},findAndFilter:function(e){var t=this.find(e),e=this.filter(e);return e.length?t.add(e):t}})}),define("utils/naturalsort",[],function(){return function(h){var m=1<arguments.length&&void 0!==arguments[1]?arguments[1]:String;return function(e,t){var n,r,a,o,i=/(^-?[0-9]+(\.?[0-9]*)[df]?e?[0-9]?$|^0x[0-9a-f]+$|[0-9]+)/gi,s=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[/-]\d{1,4}[/-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,c=/^0x[0-9a-f]+$/i,l=/^0/,e=m(e).trim(),t=m(t).trim(),u=e.replace(i,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),p=t.replace(i,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),i=parseInt(e.match(c))||1!==u.length&&e.match(s)&&Date.parse(e),e=parseInt(t.match(c))||i&&t.match(s)&&Date.parse(t)||null;if(h&&window.Intl&&window.Intl.Collator&&(a=window.Intl.Collator(h)),e){if(i<e)return-1;if(e<i)return 1}for(var d=0,f=Math.max(u.length,p.length);d<f;d++){if(n=!(u[d]||"").match(l)&&parseFloat(u[d])||u[d]||0,r=!(p[d]||"").match(l)&&parseFloat(p[d])||p[d]||0,isNaN(n)!==isNaN(r))return isNaN(n)?1:-1;if(_typeof(n)!==_typeof(r))n+="",r+="";else if("string"==typeof n&&a&&0!==(o=a.compare(n,r)))return o;if(n<r)return-1;if(r<n)return 1}return 0}}}),define("utils/operationutils",["utils/naturalsort","utils","internaltypes/twineerror","patterns"],function(f,e,h,t){var m=e.impossible,g=e.nth,u=e.permutations,s=e.plural,y=t.validPropertyName,r="object",n="boolean",b="string",v="number",w="function";function a(e){return!!e&&(_typeof(e)===r||_typeof(e)===w)}var k=Array.isArray;function S(e){return e&&Object.getPrototypeOf(e)===Object.prototype}function i(e){return k(e)?"array":e instanceof Map?"datamap":e instanceof Set?"dataset":_typeof(e)===b?b:e&&_typeof(e)===r?r:""}function c(e){if(a(e)){if(_typeof(e.TwineScript_Clone)===w)return e.TwineScript_Clone();if(k(e))return _toConsumableArray(e);if(e instanceof Map)return new Map(e);if(e instanceof Set)return new Set(e);if(_typeof(e)===w)return Object.assign(e.bind(),e);switch(Object.getPrototypeOf(e)){case Object.prototype:return _objectSpread({},e);case null:return Object.assign(Object.create(null),e)}m("OperationUtils.clone","The value "+e+" cannot be cloned!")}return e}function o(e,t,n,r){for(var a="",o=0;a.length<=t&&o<e.length;){var i=r(e[o]);if(!(i.length+a.length<=t)){a+=(0<o?" and ":"")+s(e.length-o,(0<o?"other ":"")+n);break}a+=(0<o&&o===e.length-1?" and ":"")+i+(o<e.length-1?", ":""),o+=1}return a}function l(e){var t;return a(e)&&"TwineScript_ObjectName"in e?e.TwineScript_ObjectName:k(e)?0===e.length?"an empty array":"an array (with "+o(e,48,"item",l)+")":e instanceof Map?0===e.size?"an empty datamap":"a datamap (with "+o(_toConsumableArray(e.keys()),48,"dataname",_)+")":e instanceof Set?0===e.size?"an empty dataset":"a dataset (with "+o(_toConsumableArray(e.values()),48,"item",l)+")":_typeof(e)===b?0===e.length?"an empty string":48<(t=_toConsumableArray(e)).length?"a ".concat(t.length,"-character string starting with ").concat(JSON.stringify(t.slice(0,48).join(""))):"the string ".concat(JSON.stringify(e)):_typeof(e)===n?"the boolean value '"+e+"'":_typeof(e)===v?"the number "+JSON.stringify(e):void 0===e?"an empty variable":"...whatever this is"}function T(e,t){return[e[0],t[0]].sort(f("en"))[0]===e[0]?-1:1}function _(e,t){var n=h.containsError(e);if(n&&m("toSource","received a TwineError: "+n.message),_typeof(e.TwineScript_ToSource)===w)return e.TwineScript_ToSource();if(S(e)&&"first"in e&&"last"in e)return(e.first<0?(-1!==e.first?g(-e.first):"")+"last":g(e.first+1))+"to"+(e.last<0?(-1!==e.last?g(-e.last):"")+"last":g(e.last+1));if(k(e)){var r,a="",o=_createForOfIteratorHelper(e);try{for(o.s();!(r=o.n()).done;)var i=r.value,a=(a+=a?",":"(a:")+("property"===t?i+(0<i):_(i))}catch(e){o.e(e)}finally{o.f()}return a+(a?")":"(a:)")}if(e instanceof Map){var s,c="",l=_createForOfIteratorHelper(Array.from(e.entries()).sort(T));try{for(l.s();!(s=l.n()).done;){var u=_slicedToArray(s.value,2),p=u[0],d=u[1];c+=(c?",":"(dm:")+_(p)+","+_(d)}}catch(e){l.e(e)}finally{l.f()}return c+(c?")":"(dm:)")}return e instanceof Set?"(ds:"+Array.from(e).sort(f("en")).map(_)+")":_typeof(e)===v&&"property"===t?e<0?-1===e?"last":g(-e)+"last":g(e+1):_typeof(e)===b&&"property"===t?RegExp(y).test(e)?e:"("+JSON.stringify(e)+")":JSON.stringify(e)}function p(t,n){return _typeof(t)!==r&&_typeof(n)!==r?t===n:k(t)&&k(n)?t.length===n.length&&t.every(function(e,t){return p(n[t],e)}):t instanceof Map&&n instanceof Map?p(Array.from(t.entries()).sort(),Array.from(n.entries()).sort()):t instanceof Set&&n instanceof Set?p(_toConsumableArray(t),_toConsumableArray(n)):t&&_typeof(t.TwineScript_is)===w?t.TwineScript_is(n):t&&_typeof(t)===r&&n&&_typeof(n)===r&&S(t)&&S(n)?p(Object.getOwnPropertyNames(t).map(function(e){return[e,t[e]]}),Object.getOwnPropertyNames(n).map(function(e){return[e,n[e]]})):Object.is(t,n)}return Object.freeze({isObject:a,isValidDatamapName:function(e,t){var n;return e instanceof Map||m("isValidDatamapName","called with non-Map"),h.containsError(t)?t:_typeof(t)!==b&&_typeof(t)!==v?h.create("property","Only strings and numbers can be used as data names for "+l(e)+", not "+l(t)+"."):(n=_typeof(t)===b?+t:""+t,!(!Number.isNaN(n)&&e.has(n))||h.create("property","You mustn't use both "+l(t)+" and "+l(n)+" as data names in the same datamap."))},collectionType:i,isSequential:function(e){return _typeof(e)===b||k(e)||_typeof(e.hooks)===w},unstorableValue:function e(t){return(null==t?void 0:t.TwineScript_Unstorable)&&t||k(t)&&t.find(e)||t instanceof Map&&_toConsumableArray(t.values()).find(e)||t instanceof Set&&_toConsumableArray(t).find(e)},isHarloweJSValue:function e(t){return _typeof(t)===b||_typeof(t)===n||_typeof(t)===v&&!Number.isNaN(t)&&Math.abs(t)!==1/0||Array.isArray(t)&&t.every(e)||t instanceof Set&&_toConsumableArray(t).every(e)||t instanceof Map&&_toConsumableArray(t.values()).every(e)&&_toConsumableArray(t.keys()).every(function(e){return _typeof(e)===b})},clone:c,objectName:l,typeName:function e(t){var n,r=S(t);return r&&t.innerType?t.typeName||("insensitive set"===t.pattern?"a case-insensitive string name":"either"===t.pattern?(k(t.innerType)||m("typeName",'"either" pattern had non-array inner type'),t.innerType.map(e).join(" or ")):"optional"===t.pattern?"(optional) "+e(t.innerType):e(t.innerType)):r&&"range"===t.pattern?t.name||(r=t.min,n=t.max,"a"+(0<r?" positive":"")+(t.integer?" whole":"")+" number"+(0===r?" between 0 and "+n:n<1/0?" up to "+n:"")):t===String||t===Number||t===Boolean?"a "+_typeof(t()):t===parseInt?"a whole number":t===Map?"a datamap":t===Set?"a dataset":t===Array?"an array":a(t)&&"TwineScript_TypeName"in t?t.TwineScript_TypeName:l(t)},typeID:function(e){var t=_typeof(e);return[n,b,v].includes(t)?t:k(e)?"array":e instanceof Map?"datamap":e instanceof Set?"dataset":e.TwineScript_TypeID||""},toSource:_,is:p,contains:function(e,t){if(e||""===e){if(_typeof(e)===b)return _typeof(t)!==b?h.create("operation",l(e)+" can only contain strings, not "+l(t)+"."):e.includes(t);if(k(e))return e.some(function(e){return p(e,t)});if(e instanceof Set||e instanceof Map)return Array.from(e.keys()).some(function(e){return p(e,t)})}return h.create("operation",l(e)+" cannot contain any values, let alone "+l(t))},isA:function(e,t){return _typeof(t.TwineScript_IsTypeOf)===w?t.TwineScript_IsTypeOf(e):h.create("operation",'"is a" should only be used to compare type names, not '+l(t)+".")},matches:function t(n,e){var r=!1;if(n&&_typeof(n.TwineScript_IsTypeOf)===w){var a=n.TwineScript_IsTypeOf(e);if(h.containsError(a))return a;r|=a}if(e&&_typeof(e.TwineScript_IsTypeOf)===w){if(a=e.TwineScript_IsTypeOf(n),h.containsError(a))return a;r|=a}if(r)return!0;if(k(n)&&k(e)){for(var o=0,i=0,s=!0;s&&o<n.length&&i<e.length;){var c=n[o],l=e[i];if(c.rest){for(;i<e.length&&t(c,l);)l=e[i+=1];o+=1}else if(l.rest){for(;o<n.length&&t(c,l);)c=n[o+=1];i+=1}else t(c,l)?(o+=1,i+=1):s=!1}return s&&o>=n.length&&i>=e.length}return n instanceof Map&&e instanceof Map?t(Array.from(n.entries()).sort(),Array.from(e.entries()).sort()):n instanceof Set&&e instanceof Set?(n=_toConsumableArray(n),u.apply(void 0,_toConsumableArray(e)).some(function(e){return t(n,e)})):p(n,e)},subset:function e(t,n,r){var a,o;return n&&r?((a=_typeof(t)===b)&&(t=Array.from(t)),n<0&&(n=Math.max(0,t.length+n+1)),(r=r<0?Math.max(0,t.length+r+1):r)<n?e(arguments[0],r,n):(o=t.slice(0<n?n-1:n,r).map(c),a?o.join(""):o)):h.create("macrocall","The sub"+i(t)+" index value must not be "+(n&&r)+".")},range:function e(t,n){if(n<t)return e(n,t);var r=[t];for(n-=t;0<n--;)r.push(++t);return r},printBuiltinValue:function r(e){return h.containsError(e)?e:e&&_typeof(e.TwineScript_Print)===w?e.TwineScript_Print():e instanceof Map?(e=Array.from(e.entries()),h.containsError(e)?e:e.reduce(function(e,t){var n=(t=_slicedToArray(t,2))[0],t=t[1];return e+"<tr><td>`"+r(n)+"`</td><td>`"+r(t)+"`</td></tr>"},"<table class=datamap>")+"</table>"):e instanceof Set?Array.from(e.values()).map(r)+"":k(e)?e.map(r)+"":e&&_typeof(e.jquery)===b?e:a(e)?h.create("unimplemented","I don't know how to print this value yet."):e+""},unique:function(t,e,n){return n.findIndex(function(e){return p(t,e)})===e}})}),define("utils/polyfills",[],function(){var o=Array.prototype;"function"!=typeof o.includes&&(o.includes=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;if(!Number.isNaN(e)&&Number.isFinite(t)&&void 0!==e)return-1<o.indexOf.call(this,e,t);var n=Object(this),r=parseInt(n.length);if(!(r<=0))for(var a=0<=t?t:Math.max(0,r+t);a<r;){if(Object.is(e,n[a]))return!0;a+=1}return!1}),window.Symbol||(window.Symbol={iterator:"_es6-shim iterator_"})}),define("utils/renderutils",["jquery","utils","renderer"],function(l,u,p){var n=RegExp(u.realWhitespace+"+"),s=RegExp(u.realWhitespace+"+","g");function d(e,t,n){var r,a=e.textContent.length;if(!(a<=t))return r=[e=0===t?e:e.splitText(t)],n&&(n=n<=0?a-n:n)<a&&r.push(e.splitText(n-t)),r}var t,c=function(){var e;return void 0!==t?t:(e=l("<p>"),t=!!e[0].normalize&&(e.append(document.createTextNode("0-"),document.createTextNode("2"),document.createTextNode(""))[0].normalize(),1===e.contents().length))};var f="tw-collapsed,[collapsing=true]";var o=/^(=*)([^=]+)=*$/;return Object.freeze({dialog:function(){var e,t=(c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).section,n=void 0===(n=c.parent)?u.storyElement:n,r=c.cd,a=void 0===(a=c.message)?"":a,o=c.defaultValue,i=void 0===(c=c.buttons)?[{name:"OK",confirm:!0,callback:Object}]:c,s=("a code hook"===a.TwineScript_TypeName&&(a=a.code),l("<tw-backdrop><tw-dialog>"+(o||""===o?"<input type=text style='display:block;margin:0 auto'></input>\n":"")+"<tw-dialog-links>"+(i.length?i.reduce(function(e,t,n){t=t.name;return e+"<tw-link style='margin:0 "+(n===i.length-1?"0 0 0.5em":0===n?"0.5em 0 0":"0.5em")+"' tabindex=0>"+t+"</tw-link>"},""):"<tw-link tabindex=0>"+i[0].name+"</tw-link>")+"</tw-dialog-links></tw-dialog></tw-backdrop>")),c=s.find("tw-dialog");return n.append(s),t?(t.renderInto(a,c,_objectSpread(_objectSpread({},r),{},{append:"prepend"})),null!=(n=(null==r?void 0:r.transition)&&s.find("tw-dialog > tw-transition-container"))&&n.length&&n.appendTo(s).append(c.prepend(n.contents().detach()))):c.prepend(p.exec(a)),o&&((e=s.find("input").last()).val(o).on("keypress",function(e){13===e.which&&(s.remove(),i.filter(function(e){return e.confirm}).forEach(function(e){return e.callback()}))}),setTimeout(function(){return e.focus()},100)),i.reverse().forEach(function(e,t){l(s.find("tw-link").get(-t-1)).on("click",function(){u.options.debug&&u.options.ignoreClickEvents&&!l(s).is(".eval-replay, .harlowe-crash")||(s.remove(),e.callback())})}),s},realWhitespace:n,textNodeToChars:function(r){var e=_toConsumableArray(r.textContent);return 1===e.length?[r]:e.reduce(function(e,t){return t.match(n)&&e.length&&e[e.length-1].match(n)?e[e.length-1]+=t:e.push(t),e},[]).reduce(function(e,t){var n=r;return t.length<r.textContent.length&&(r=r.splitText(t.length)),e.concat(n)},[])},findTextInNodes:function e(t,n){var r=[],a="",o=[];if(!t.length||!n)return o;for(;0<t.length;){r.push(t[0]),a+=t[0].textContent,t.shift();var i=a.indexOf(n);if(-1<i){for(var s=a.length-(i+n.length);i>=r[0].textContent.length;)i-=r[0].textContent.length,r.shift();if(1===r.length){var c=d(r[0],i,i+n.length);o.push(c[0]),c[1]&&t.unshift(c[1]);break}o.push(d(r[0],i,r[0].length)[0]),o.push.apply(o,_toConsumableArray(r.slice(1,-1))),c=d(r[r.length-1],0,r[r.length-1].textContent.length-s),o.push(c[0]),c[1]&&t.unshift(c[1]),o=o.filter(Boolean);break}}return[o].concat(_toConsumableArray(e(t,n)))},collapse:function(e){function n(e){return 0===l(this||e).parentsUntil(f).filter("tw-verbatim, tw-expression, [collapsing=false]").length}var t=function e(t){var n=t[0],r=t.parent();return!r.length||t.findAndFilter("tw-story").length?null:(t=(t=r.textNodes().filter(function(e){return 4&(e=e.compareDocumentPosition(n))&&!(8&e)}))[t.length-1])||e(r)}(e),r=(l(t).parents(f).length||(t=null),function e(t){var n=t[0],r=t.parent();return!r.length||t.findAndFilter("tw-story").length?null:r.textNodes().filter(function(e){return 2&(e=e.compareDocumentPosition(n))&&!(8&e)})[0]||e(r)}(e)),a=(l(r).parents(f).length||(r=null),"br:not([data-raw]),tw-consecutive-br:not([data-raw])"),o=(e.find(a).filter(n).replaceWith(document.createTextNode(" ")),(e=l(e.get().map(function(e){return l(e).filter(n).is(a)?l(document.createTextNode(" ")).replaceAll(e)[0]:e}))).textNodes()),i=0;o.reduce(function(e,t){return n(t)?(t.textContent=t.textContent.replace(s," ")," "!==t.textContent[0]||e&&e.textContent&&!(-1<e.textContent.search(/\s$/))||(t.textContent=t.textContent.slice(1)),t):document.createTextNode("A")},t),_toConsumableArray(o).reverse().every(function(e){return!(!n(e)||(e.textContent.match(/^\s*$/)?(i+=e.textContent.length,e.textContent=""):(e.textContent=e.textContent.replace(/\s+$/,function(e){return i+=e.length,""}),1)))}),0<i&&r&&(o[o.length-1].textContent+=" "),e[0]&&c()&&e[0].normalize()},geomStringRegExp:o,geomParse:function(e){var t,n,r,a;return!e||(t=e.length,n=(a=_slicedToArray(o.exec(e)||[],3))[0],r=a[1],a=a[2],!n)||a===e&&1<a.length?{marginLeft:0,size:0}:{marginLeft:r.length/t*100,size:a.length/t*100}}})}),define("utils/scripttag",["state","utils/operationutils","internaltypes/varref","internaltypes/twineerror"],function(a,o,i,s){return function(e,r){Function("script","scope","with(scope){var scope=void 0,arguments=void 0;eval([script,script=void 0][0]);}")(e,Object.create(null,Object.keys(a.variables).map(function(e){return!e.startsWith("TwineScript_")&&"$"+e}).concat(Object.keys(r).map(function(e){return!e.startsWith("TwineScript_")&&"_"+e})).reduce(function(e,n){return n&&(e[n]={get:function(){var e=("$"===n[0]?a.variables:r)[n.slice(1)];if(o.isHarloweJSValue(e))return o.clone(e);throw s.create("","The contents of the variable ".concat(n,", ").concat(o.objectName(e),", couldn't be converted to a Javascript value."),"Only booleans, strings, numbers, datamaps, datasets and arrays can be converted to Javascript values.")},set:function(e){var t="$"===n[0]?a.variables:r;if(!o.isHarloweJSValue(e))throw s.create("","The Javascript value, ".concat(e,", couldn't be converted to a Harlowe value and assigned to the variable ").concat(n,"."),"Only booleans, strings, numbers (except NaN and Infinity), Maps, Sets and Arrays can be converted to Harlowe values.");e=o.clone(e);t=i.create(t,n.slice(1)).set(e);if(s.containsError(t))throw t}}),e},{})))}}),!function(){function e(t,n,r){return function(e){return"background-color: hsla(".concat(t,",").concat(n,"%,").concat(r,"%,").concat(e,");")}}var t={boolean:"color:hsla(0,0%,30%,1.0)",array:"color:hsla(0,100%,30%,1.0)",dataset:"color:hsla(30,100%,40%,1.0)",number:"color:hsla(30,100%,30%,1.0)",datamap:"color:hsla(60,100%,30%,1.0)",changer:"color:hsla(90,100%,30%,1.0)",lambda:"color:hsla(120,100%,40%,1.0)",hookName:"color:hsla(160,100%,30%,1.0)",string:"color:hsla(180,100%,30%,1.0)",identifier:"color:hsla(200,80%,40%,1.0)",variable:"color:hsla(200,100%,30%,1.0)",tempVariable:"color:hsla(200,70%,20%,1.0)",datatype:"color:hsla(220,100%,30%,1.0)",colour:"color:hsla(280,100%,30%,1.0)",macro:"color:hsla(320,80%,30%,1.0)",twineLink:"color:hsla(240,100%,20%,1.0)"},o=(t.gradient=t.colour,t.command=t.twineLink,t.instant=t.metadata=t.any=t.customMacro=t.macro,Math.min),n=e(40,100,50),r=e(220,100,50),i=/hsla\((\d+),\s*(\d+)%,\s*(\d+)%,\s*(\d+\.\d+)\)/g,s="cm-harlowe-3-",a=(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(n={root:"box-sizing:border-box;",hook:n(.05),"hook-2":n(.1),"hook-3":n(.15),"hook-4":n(.2),"hook-5":n(.25),"hook-6":n(.3),"hook-7":n(.35),"hook-8":n(.4),"^=hook , ^=hook-":"font-weight:bold;",unclosedHook:n(.05)+"font-weight:bold;"},"error:not([class*='"+s+"string'])","background-color: hsla(17,100%,50%,0.5) !important;"),"^=macroName","font-style:italic;"),"macroName-boolean",t.boolean),"macroName-array",t.array),"macroName-dataset",t.dataset),"macroName-datatype",t.datatype),"macroName-number",t.number),"macroName-datamap",t.datamap),"macroName-changer",t.changer),"macroName-string",t.string),_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(n,"macroName-colour, macroName-gradient",t.colour),"macroName-command, macroName-instant, macroName-metadata",t.command),"macroName-custommacro, macroName-macro, macroName-any",t.macro),"^=macro ","font-weight:bold;"+t.macro),"comma, spread",t.macro),"addition",t.any),"subtraction, multiplication, division",t.number),"is, and, or, not, isNot, contains, doesNotContain, isIn, isA, isNotA, isNotIn, matches, doesNotMatch",t.boolean),"bold, strong","font-weight:bold;"),"italic, em","font-style:italic;"),_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(n,"sup","vertical-align: super;font-size:0.8em;"),"strike","text-decoration: line-through;"),"verbatim","background-color: hsla(0,0%,50%,0.1);font:var(--font-monospaced)"),"^=bold, ^=strong, ^=italic, ^=em, ^=sup, ^=verbatim, ^=strike","font-weight:100; color: hsla(0,0%,0%,0.5)"),"^=collapsed","font-weight:bold; color: hsla(201,100%,30%,1.0);"),"unclosedCollapsed",r(.025)+"font-weight:bold; color: hsla(201,100%,30%,1.0);"),"collapsed",r(.025)),"collapsed.hook",r(.05)),"collapsed.hook-2",r(.1)),"collapsed.hook-3",r(.15)),_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(n,"collapsed.hook-4",r(.2)),"collapsed.hook-5",r(.25)),"collapsed.hook-6",r(.3)),"collapsed.hook-7",r(.35)),"collapsed.hook-8",r(.4)),"twineLink:not(.text)",t.twineLink),"tag, scriptStyleTag, comment","color: hsla(240,34%,25%,1.0);"),"boolean",t.boolean),"string",t.string),"number",t.number),_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(n,"variable",t.variable),"tempVariable",t.tempVariable),"hookName",t.hookName),"datatype",t.datatype),"colour",t.colour),"cssTime",t.number),"passageString",t.variable+";text-decoration:underline 1px;"),"tagString",t.variable+";text-decoration:underline 1px dotted;"),"variableOccurrence, hookOccurrence","background: hsla(159,50%,75%,1.0) !important;"),"^=where, ^=via, ^=with, ^=making, ^=each, ^=when",t.lambda+"; font-style:italic;"),_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(n,"heading","font-weight:bold;"),"hr","background-image: linear-gradient(0deg, transparent, transparent 45%, hsla(0,0%,75%,1.0) 45%, transparent 55%, transparent);"),"align","color: hsla(14,99%,37%,1.0); background-color: hsla(14,99%,87%,0.1);"),"column","color: hsla(204,99%,37%,1.0); background-color: hsla(204,99%,87%,0.1);"),"escapedLine","font-weight:bold; color: hsla(51,100%,30%,1.0);"),"identifier, property, belongingProperty, itsProperty, belongingItProperty, belongingItOperator, possessiveOperator, belongingOperator",t.identifier),"toString",function(){var a=this;return Object.keys(this).reduce(function(e,n){var r;return"toString"!==n&&(r=n.split(", ").map(function e(t){return-1<t.indexOf(".")?t.split(/\./g).map(e).join(""):0===t.indexOf("^=")?"[class^='"+s+t.slice(2)+"']":"."+s+t}),e+=r.join(", ")+"{"+a[n]+"}",a[n].match(i))&&[".theme-dark","[data-app-theme=dark]"].forEach(function(t){e+=r.map(function(e){return t+" "+e}).join(", ")+"{"+a[n].replace(i,function(e,t,n,r,a){return"hsla("+t+","+o(100,1.5*+n)+"%,"+(100-r)+"%,"+a+")"})+"}"}),e},"")})+"");"object"===("undefined"==typeof module?"undefined":_typeof(module))?module.exports={Colours:t,CSS:a,versionClass:s}:"function"==typeof define&&define.amd&&define("utils/typecolours",[],function(){return{Colours:t,CSS:a,versionClass:s}})}.call(void 0);
;require("harlowe")}());
</script>

</body>
</html>
